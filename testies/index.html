<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><style> html { height: 100%; } body { font-size: 16px; font-family:san-serif; background:#000; height: 100%; overflow: hidden; margin: 0; }</style></head><body><div class="icat-embed-element" style="width:100%;height:100%;"><icat-app id="icat-1236204199999999953191396f27ba82c189"></icat-app></div><script type="text/javascript">!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e={exports:{}};e.exports=function(){const{entries:e,setPrototypeOf:t,isFrozen:i,getPrototypeOf:n,getOwnPropertyDescriptor:a}=Object;let{freeze:s,seal:o,create:r}=Object,{apply:l,construct:d}="undefined"!=typeof Reflect&&Reflect;s||(s=function(e){return e}),o||(o=function(e){return e}),l||(l=function(e,t,i){return e.apply(t,i)}),d||(d=function(e,t){return new e(...t)});const c=w(Array.prototype.forEach),h=w(Array.prototype.pop),u=w(Array.prototype.push),m=w(String.prototype.toLowerCase),p=w(String.prototype.toString),g=w(String.prototype.match),b=w(String.prototype.replace),v=w(String.prototype.indexOf),f=w(String.prototype.trim),y=w(RegExp.prototype.test),x=k(TypeError);function w(e){return function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return l(e,t,n)}}function k(e){return function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return d(e,i)}}function z(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;t&&t(e,null);let s=n.length;for(;s--;){let t=n[s];if("string"==typeof t){const e=a(t);e!==t&&(i(n)||(n[s]=e),t=e)}e[t]=!0}return e}function S(t){const i=r(null);for(const[n,s]of e(t))void 0!==a(t,n)&&(i[n]=s);return i}function M(e,t){for(;null!==e;){const i=a(e,t);if(i){if(i.get)return w(i.get);if("function"==typeof i.value)return w(i.value)}e=n(e)}function i(e){return console.warn("fallback value for",e),null}return i}const C=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),j=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),L=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),E=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),_=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),I=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),T=s(["#text"]),P=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),F=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),A=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),R=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),G=o(/\{\{[\w\W]*|[\w\W]*\}\}/gm),B=o(/<%[\w\W]*|[\w\W]*%>/gm),V=o(/\${[\w\W]*}/gm),N=o(/^data-[\-\w.\u00B7-\uFFFF]/),D=o(/^aria-[\-\w]+$/),O=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H=o(/^(?:\w+script|data):/i),$=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),U=o(/^html$/i);var W=Object.freeze({__proto__:null,MUSTACHE_EXPR:G,ERB_EXPR:B,TMPLIT_EXPR:V,DATA_ATTR:N,ARIA_ATTR:D,IS_ALLOWED_URI:O,IS_SCRIPT_OR_DATA:H,ATTR_WHITESPACE:$,DOCTYPE_NAME:U});const K=function(){return"undefined"==typeof window?null:window},q=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let i=null;const n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(i=t.getAttribute(n));const a="dompurify"+(i?"#"+i:"");try{return e.createPolicy(a,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+a+" could not be created."),null}};function Z(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();const i=e=>Z(e);if(i.version="3.0.6",i.removed=[],!t||!t.document||9!==t.document.nodeType)return i.isSupported=!1,i;let{document:n}=t;const a=n,o=a.currentScript,{DocumentFragment:l,HTMLTemplateElement:d,Node:w,Element:k,NodeFilter:G,NamedNodeMap:B=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:V,DOMParser:N,trustedTypes:D}=t,H=k.prototype,$=M(H,"cloneNode"),Y=M(H,"nextSibling"),X=M(H,"childNodes"),J=M(H,"parentNode");if("function"==typeof d){const e=n.createElement("template");e.content&&e.content.ownerDocument&&(n=e.content.ownerDocument)}let Q,ee="";const{implementation:te,createNodeIterator:ie,createDocumentFragment:ne,getElementsByTagName:ae}=n,{importNode:se}=a;let oe={};i.isSupported="function"==typeof e&&"function"==typeof J&&te&&void 0!==te.createHTMLDocument;const{MUSTACHE_EXPR:re,ERB_EXPR:le,TMPLIT_EXPR:de,DATA_ATTR:ce,ARIA_ATTR:he,IS_SCRIPT_OR_DATA:ue,ATTR_WHITESPACE:me}=W;let{IS_ALLOWED_URI:pe}=W,ge=null;const be=z({},[...C,...j,...L,..._,...T]);let ve=null;const fe=z({},[...P,...F,...A,...R]);let ye=Object.seal(r(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xe=null,we=null,ke=!0,ze=!0,Se=!1,Me=!0,Ce=!1,je=!1,Le=!1,Ee=!1,_e=!1,Ie=!1,Te=!1,Pe=!0,Fe=!1;const Ae="user-content-";let Re=!0,Ge=!1,Be={},Ve=null;const Ne=z({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let De=null;const Oe=z({},["audio","video","img","source","image","track"]);let He=null;const $e=z({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ue="http://www.w3.org/1998/Math/MathML",We="http://www.w3.org/2000/svg",Ke="http://www.w3.org/1999/xhtml";let qe=Ke,Ze=!1,Ye=null;const Xe=z({},[Ue,We,Ke],p);let Je=null;const Qe=["application/xhtml+xml","text/html"],et="text/html";let tt=null,it=null;const nt=n.createElement("form"),at=function(e){return e instanceof RegExp||e instanceof Function},st=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!it||it!==e){if(e&&"object"==typeof e||(e={}),e=S(e),Je=Je=-1===Qe.indexOf(e.PARSER_MEDIA_TYPE)?et:e.PARSER_MEDIA_TYPE,tt="application/xhtml+xml"===Je?p:m,ge="ALLOWED_TAGS"in e?z({},e.ALLOWED_TAGS,tt):be,ve="ALLOWED_ATTR"in e?z({},e.ALLOWED_ATTR,tt):fe,Ye="ALLOWED_NAMESPACES"in e?z({},e.ALLOWED_NAMESPACES,p):Xe,He="ADD_URI_SAFE_ATTR"in e?z(S($e),e.ADD_URI_SAFE_ATTR,tt):$e,De="ADD_DATA_URI_TAGS"in e?z(S(Oe),e.ADD_DATA_URI_TAGS,tt):Oe,Ve="FORBID_CONTENTS"in e?z({},e.FORBID_CONTENTS,tt):Ne,xe="FORBID_TAGS"in e?z({},e.FORBID_TAGS,tt):{},we="FORBID_ATTR"in e?z({},e.FORBID_ATTR,tt):{},Be="USE_PROFILES"in e&&e.USE_PROFILES,ke=!1!==e.ALLOW_ARIA_ATTR,ze=!1!==e.ALLOW_DATA_ATTR,Se=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Me=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Ce=e.SAFE_FOR_TEMPLATES||!1,je=e.WHOLE_DOCUMENT||!1,_e=e.RETURN_DOM||!1,Ie=e.RETURN_DOM_FRAGMENT||!1,Te=e.RETURN_TRUSTED_TYPE||!1,Ee=e.FORCE_BODY||!1,Pe=!1!==e.SANITIZE_DOM,Fe=e.SANITIZE_NAMED_PROPS||!1,Re=!1!==e.KEEP_CONTENT,Ge=e.IN_PLACE||!1,pe=e.ALLOWED_URI_REGEXP||O,qe=e.NAMESPACE||Ke,ye=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&at(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ye.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&at(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ye.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ye.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ce&&(ze=!1),Ie&&(_e=!0),Be&&(ge=z({},[...T]),ve=[],!0===Be.html&&(z(ge,C),z(ve,P)),!0===Be.svg&&(z(ge,j),z(ve,F),z(ve,R)),!0===Be.svgFilters&&(z(ge,L),z(ve,F),z(ve,R)),!0===Be.mathMl&&(z(ge,_),z(ve,A),z(ve,R))),e.ADD_TAGS&&(ge===be&&(ge=S(ge)),z(ge,e.ADD_TAGS,tt)),e.ADD_ATTR&&(ve===fe&&(ve=S(ve)),z(ve,e.ADD_ATTR,tt)),e.ADD_URI_SAFE_ATTR&&z(He,e.ADD_URI_SAFE_ATTR,tt),e.FORBID_CONTENTS&&(Ve===Ne&&(Ve=S(Ve)),z(Ve,e.FORBID_CONTENTS,tt)),Re&&(ge["#text"]=!0),je&&z(ge,["html","head","body"]),ge.table&&(z(ge,["tbody"]),delete xe.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw x('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw x('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Q=e.TRUSTED_TYPES_POLICY,ee=Q.createHTML("")}else void 0===Q&&(Q=q(D,o)),null!==Q&&"string"==typeof ee&&(ee=Q.createHTML(""));s&&s(e),it=e}},ot=z({},["mi","mo","mn","ms","mtext"]),rt=z({},["foreignobject","desc","title","annotation-xml"]),lt=z({},["title","style","font","a","script"]),dt=z({},j);z(dt,L),z(dt,E);const ct=z({},_);z(ct,I);const ht=function(e){let t=J(e);t&&t.tagName||(t={namespaceURI:qe,tagName:"template"});const i=m(e.tagName),n=m(t.tagName);return!!Ye[e.namespaceURI]&&(e.namespaceURI===We?t.namespaceURI===Ke?"svg"===i:t.namespaceURI===Ue?"svg"===i&&("annotation-xml"===n||ot[n]):Boolean(dt[i]):e.namespaceURI===Ue?t.namespaceURI===Ke?"math"===i:t.namespaceURI===We?"math"===i&&rt[n]:Boolean(ct[i]):e.namespaceURI===Ke?!(t.namespaceURI===We&&!rt[n])&&!(t.namespaceURI===Ue&&!ot[n])&&!ct[i]&&(lt[i]||!dt[i]):!("application/xhtml+xml"!==Je||!Ye[e.namespaceURI]))},ut=function(e){u(i.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},mt=function(e,t){try{u(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){u(i.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!ve[e])if(_e||Ie)try{ut(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},pt=function(e){let t=null,i=null;if(Ee)e="<remove></remove>"+e;else{const t=g(e,/^[\r\n\t ]+/);i=t&&t[0]}"application/xhtml+xml"===Je&&qe===Ke&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const a=Q?Q.createHTML(e):e;if(qe===Ke)try{t=(new N).parseFromString(a,Je)}catch(e){}if(!t||!t.documentElement){t=te.createDocument(qe,"template",null);try{t.documentElement.innerHTML=Ze?ee:a}catch(e){}}const s=t.body||t.documentElement;return e&&i&&s.insertBefore(n.createTextNode(i),s.childNodes[0]||null),qe===Ke?ae.call(t,je?"html":"body")[0]:je?t.documentElement:s},gt=function(e){return ie.call(e.ownerDocument||e,e,G.SHOW_ELEMENT|G.SHOW_COMMENT|G.SHOW_TEXT,null)},bt=function(e){return e instanceof V&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof B)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},vt=function(e){return"function"==typeof w&&e instanceof w},ft=function(e,t,n){oe[e]&&c(oe[e],(e=>{e.call(i,t,n,it)}))},yt=function(e){let t=null;if(ft("beforeSanitizeElements",e,null),bt(e))return ut(e),!0;const n=tt(e.nodeName);if(ft("uponSanitizeElement",e,{tagName:n,allowedTags:ge}),e.hasChildNodes()&&!vt(e.firstElementChild)&&y(/<[/\w]/g,e.innerHTML)&&y(/<[/\w]/g,e.textContent))return ut(e),!0;if(!ge[n]||xe[n]){if(!xe[n]&&wt(n)){if(ye.tagNameCheck instanceof RegExp&&y(ye.tagNameCheck,n))return!1;if(ye.tagNameCheck instanceof Function&&ye.tagNameCheck(n))return!1}if(Re&&!Ve[n]){const t=J(e)||e.parentNode,i=X(e)||e.childNodes;if(i&&t)for(let n=i.length-1;n>=0;--n)t.insertBefore($(i[n],!0),Y(e))}return ut(e),!0}return e instanceof k&&!ht(e)?(ut(e),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!y(/<\/no(script|embed|frames)/i,e.innerHTML)?(Ce&&3===e.nodeType&&(t=e.textContent,c([re,le,de],(e=>{t=b(t,e," ")})),e.textContent!==t&&(u(i.removed,{element:e.cloneNode()}),e.textContent=t)),ft("afterSanitizeElements",e,null),!1):(ut(e),!0)},xt=function(e,t,i){if(Pe&&("id"===t||"name"===t)&&(i in n||i in nt))return!1;if(ze&&!we[t]&&y(ce,t));else if(ke&&y(he,t));else if(!ve[t]||we[t]){if(!(wt(e)&&(ye.tagNameCheck instanceof RegExp&&y(ye.tagNameCheck,e)||ye.tagNameCheck instanceof Function&&ye.tagNameCheck(e))&&(ye.attributeNameCheck instanceof RegExp&&y(ye.attributeNameCheck,t)||ye.attributeNameCheck instanceof Function&&ye.attributeNameCheck(t))||"is"===t&&ye.allowCustomizedBuiltInElements&&(ye.tagNameCheck instanceof RegExp&&y(ye.tagNameCheck,i)||ye.tagNameCheck instanceof Function&&ye.tagNameCheck(i))))return!1}else if(He[t]);else if(y(pe,b(i,me,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==v(i,"data:")||!De[e])if(Se&&!y(ue,b(i,me,"")));else if(i)return!1;return!0},wt=function(e){return e.indexOf("-")>0},kt=function(e){ft("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ve};let a=t.length;for(;a--;){const s=t[a],{name:o,namespaceURI:r,value:l}=s,d=tt(o);let u="value"===o?l:f(l);if(n.attrName=d,n.attrValue=u,n.keepAttr=!0,n.forceKeepAttr=void 0,ft("uponSanitizeAttribute",e,n),u=n.attrValue,n.forceKeepAttr)continue;if(mt(o,e),!n.keepAttr)continue;if(!Me&&y(/\/>/i,u)){mt(o,e);continue}Ce&&c([re,le,de],(e=>{u=b(u,e," ")}));const m=tt(e.nodeName);if(xt(m,d,u)){if(!Fe||"id"!==d&&"name"!==d||(mt(o,e),u=Ae+u),Q&&"object"==typeof D&&"function"==typeof D.getAttributeType)if(r);else switch(D.getAttributeType(m,d)){case"TrustedHTML":u=Q.createHTML(u);break;case"TrustedScriptURL":u=Q.createScriptURL(u)}try{r?e.setAttributeNS(r,o,u):e.setAttribute(o,u),h(i.removed)}catch(e){}}}ft("afterSanitizeAttributes",e,null)},zt=function e(t){let i=null;const n=gt(t);for(ft("beforeSanitizeShadowDOM",t,null);i=n.nextNode();)ft("uponSanitizeShadowNode",i,null),yt(i)||(i.content instanceof l&&e(i.content),kt(i));ft("afterSanitizeShadowDOM",t,null)};return i.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,s=null,o=null,r=null;if(Ze=!e,Ze&&(e="\x3c!--\x3e"),"string"!=typeof e&&!vt(e)){if("function"!=typeof e.toString)throw x("toString is not a function");if("string"!=typeof(e=e.toString()))throw x("dirty is not a string, aborting")}if(!i.isSupported)return e;if(Le||st(t),i.removed=[],"string"==typeof e&&(Ge=!1),Ge){if(e.nodeName){const t=tt(e.nodeName);if(!ge[t]||xe[t])throw x("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof w)n=pt("\x3c!----\x3e"),s=n.ownerDocument.importNode(e,!0),1===s.nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?n=s:n.appendChild(s);else{if(!_e&&!Ce&&!je&&-1===e.indexOf("<"))return Q&&Te?Q.createHTML(e):e;if(n=pt(e),!n)return _e?null:Te?ee:""}n&&Ee&&ut(n.firstChild);const d=gt(Ge?e:n);for(;o=d.nextNode();)yt(o)||(o.content instanceof l&&zt(o.content),kt(o));if(Ge)return e;if(_e){if(Ie)for(r=ne.call(n.ownerDocument);n.firstChild;)r.appendChild(n.firstChild);else r=n;return(ve.shadowroot||ve.shadowrootmode)&&(r=se.call(a,r,!0)),r}let h=je?n.outerHTML:n.innerHTML;return je&&ge["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&y(U,n.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+h),Ce&&c([re,le,de],(e=>{h=b(h,e," ")})),Q&&Te?Q.createHTML(h):h},i.setConfig=function(){st(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Le=!0},i.clearConfig=function(){it=null,Le=!1},i.isValidAttribute=function(e,t,i){it||st({});const n=tt(e),a=tt(t);return xt(n,a,i)},i.addHook=function(e,t){"function"==typeof t&&(oe[e]=oe[e]||[],u(oe[e],t))},i.removeHook=function(e){if(oe[e])return h(oe[e])},i.removeHooks=function(e){oe[e]&&(oe[e]=[])},i.removeAllHooks=function(){oe={}},i}var Y=Z();return Y}();var t=e.exports;function i(e,t){e&&(e.shadowRoot?(e.shadowRoot.innerHTML="",e.shadowRoot.appendChild(document.importNode(t.content,!0))):e.attachShadow({mode:"open"}).appendChild(document.importNode(t.content,!0)))}function n({tag:e="",properties:t={},attributes:i={},children:n=[],events:a={}}){if(!e)return;const s=document.createElement(e);return Object.keys(t).forEach((e=>{s[`${e}`]=t[`${e}`]})),Object.keys(i).forEach((e=>s.setAttribute(e,i[`${e}`]))),Object.keys(a).forEach((e=>s.addEventListener(e,a[`${e}`]))),n.forEach((e=>s.appendChild(e))),s}function a(e="<div></div>",t=""){const i=document.createElement("template");return i.innerHTML=e,t&&i.content.appendChild(n({tag:"style",properties:{innerHTML:t}})),i}function s(e,t){customElements.get(e)||customElements.define(e,t)}const o="undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0,r=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,l={isElectron:o,iOS:r,electronUrlPrefix:"icat://localhost/?src=",pathFromElectronUrl:(e="")=>e?decodeURIComponent(e.replace(l.electronUrlPrefix,"").replace("icat://localhost?src=","")):"",pathToElectronUrl:e=>`${l.electronUrlPrefix}${encodeURIComponent(e)}`,clearCache:()=>{window.NvCompareApi&&window.NvCompareApi.clearCache()},clearUrl:e=>{if(!o)try{URL.revokeObjectURL(e)}catch(e){}l.clearCache()},clearedUrl:e=>l.isObjectUrl(e)?(l.clearUrl(e),""):e,isObjectUrl:e=>!!e&&"blob:"===e.slice(0,5),isElectronUrl:e=>!!e&&"icat://localhost"===e.slice(0,16),getUrl:(e,t)=>{if(o&&t&&"string"==typeof t){const e=t.slice(0,5);return"data:"===e||"http:"===e||"blob:"===e||"https:"===t.slice(0,6)||l.isElectronUrl(t)?t:l.pathToElectronUrl(t)}return o&&e&&e.path?l.pathToElectronUrl(e.path):e&&e instanceof File?URL.createObjectURL(e):t},saveProject:async e=>o?window.NvCompareApi.saveProject(e):Promise.reject(),openProject:()=>o?window.NvCompareApi.openProject():Promise.reject(),logError:e=>{if(console.warn("logError",e),o)try{window.NvCompareApi.logError(JSON.stringify([e]))}catch(e){}},openLink:(e,t)=>{if(o)return t&&t.preventDefault(),window.NvCompareApi.openLink(e)}};let d=0;function c(e){return`${performance.now()}xxxxxxxxxxxxxxxx`.replace(/[x]|\./g,(()=>(16*Math.random()|0).toString(16)))+e}function h(){return d+=1,c(d)}const u=["auto","webgpu","webgl","2d"],m=["mp4","mkv","webm","ogg"],p=["jpeg","jpg","png","webp","bmp"],g=["pfm","exr"],b=m.concat(p,g).map((e=>`.${e}`)),v=b.map((e=>e.slice(1))),f=p.map((e=>`.${e}`)),y=["tile","split"],x=(e,t,i)=>new Promise(((n,a)=>{const s=new Image;s.onerror=()=>{s.onerror=null,s.onload=null,a(`Error loading ${t||e}`)},s.onload=()=>{s.onerror=null,s.onload=null,n({metadata:{fps:0,codec:i.toUpperCase(),bitrate:0,duration:0,hasAudio:!1,height:s.naturalHeight,width:s.naturalWidth,timestamps:[]},element:s})},s.src=e}));class w{buffer;bitSize=0;bitPointer=0;bytePointer=0;offset=0;view;littleEndian=!1;constructor(e,t={offset:0,littleEndian:!0}){this.buffer=e,this.bitSize=8*e.byteLength,this.offset=void 0===t.offset?0:t.offset,this.littleEndian=void 0===t||void 0===t.littleEndian||t.littleEndian,this.view=new DataView(this.buffer,t.offset)}shrinkWrap(){let e=this.bytePointer+(this.bitPointer>0?1:0),t=new Uint8Array(new ArrayBuffer(e));for(let i=0;i<e;i++)t[i]=this.view.getUint8(i);this.bitSize=8*e,this.buffer=t.buffer}consume(e,t){for(let i=0;i<t;i++)this.writeUint8(e.readUint8())}copyArray(e,t=0,i=e.length){for(let n=0;n<i;n++)this.writeUint8(e[t+n])}copy(e,t=0,i=e.buffer.byteLength){for(let n=0;n<i;n++)this.setUint8(t+n,e.getUint8(n))}byteAlign(){this.bitPointer>0&&(this.bitPointer=0,this.bytePointer++)}remainingBits(){return this.bitSize-(8*this.bytePointer+this.bitPointer)}readBits(e,t=!1){let i=0,n=e,a=this.bytePointer,s=this.bitPointer,o=this.remainingBits();n>o&&(n=o);let r=s+n,l=Math.min(r-1,7);for(i=w.bits(this.view.getUint8(a,this.littleEndian),l,s),n-=l-s+1,s=r,r>7&&(s=0,a++);n>8;)i|=this.view.getUint8(a,this.littleEndian)<<e-n,a++,n-=8;return n>0&&(i|=(this.view.getUint8(a,this.littleEndian)&(1<<n)-1)<<e-n,s+=n),t||(this.bytePointer=a,this.bitPointer=s),i}seek(e,t=0){this.bytePointer=e,this.bitPointer=t}skip(e=1,t=0){this.bitPointer+=8*e+t,this.bytePointer+=Math.floor(this.bitPointer/8),this.bitPointer%=8}static bits(e,t,i){return(e&(1<<t+1)-1)>>i}static halfBytes2Float32(e){var t=32768&e?-1:1,i=(e>>10&31)-15,n=1023&e;if(16==i)return t*(n?Number.NaN:Number.POSITIVE_INFINITY);if(-16==i){if(0==n)return 0*t;i=-16,n/=1<<22}else n=(1024|n)/1024;return t*n*Math.pow(2,i)}static floatBytes2Float32(e){var t=2147483648&e?-1:1,i=(e>>23&255)-127,n=8388607&e;if(128==i)return t*(n?Number.NaN:Number.POSITIVE_INFINITY);if(-127==i){if(0==n)return 0*t;i=-126,n/=1<<22}else n=(n|1<<23)/(1<<23);return t*n*Math.pow(2,i)}peekUint8(e=this.bytePointer){return this.view.getUint8(e)}readUint8(){return this.view.getUint8(this.bytePointer++)}writeUint8(e){this.view.setUint8(this.bytePointer++,e)}getUint8(e){return this.view.getUint8(e)}setUint8(e,t){this.view.setUint8(e,t)}getInt8(e){return this.view.getInt8(e)}peekUint16(e=this.bytePointer){return this.view.getUint16(e,this.littleEndian)}readUint16(){let e=this.view.getUint16(this.bytePointer,this.littleEndian);return this.bytePointer+=2,e}writeUint16(e){this.view.setUint16(this.bytePointer,e,this.littleEndian),this.bytePointer+=2}getUint16(e){return this.view.getUint16(e,this.littleEndian)}setUint16(e,t){this.view.setUint16(e,t,this.littleEndian)}readUint32(){let e=this.view.getUint32(this.bytePointer,this.littleEndian);return this.bytePointer+=4,e}writeUint32(e){this.view.setUint32(this.bytePointer,e,this.littleEndian),this.bytePointer+=4}writeInt32(e){this.view.setInt32(this.bytePointer,e,this.littleEndian),this.bytePointer+=4}readInt32(){let e=this.view.getInt32(this.bytePointer,this.littleEndian);return this.bytePointer+=4,e}getUint32(e){return this.view.getUint32(e,this.littleEndian)}setUint32(e,t){this.view.setUint32(e,t,this.littleEndian)}readUint64(){let e=this.view.getBigUint64(this.bytePointer,this.littleEndian);return this.bytePointer+=8,e}readFloat32(){let e=this.view.getFloat32(this.bytePointer,this.littleEndian);return this.bytePointer+=4,e}writeFloat32(e){this.view.setFloat32(this.bytePointer,e,this.littleEndian),this.bytePointer+=4}getFloat32(e){return this.view.getFloat32(e,this.littleEndian)}setFloat32(e,t){this.view.setFloat32(e,t,this.littleEndian)}readFloat16(e=this.bytePointer){let t=w.halfBytes2Float32(this.view.getUint16(e,this.littleEndian));return this.bytePointer+=2,t}getFloat16(e){let t=this.view.getUint16(e,this.littleEndian);return w.halfBytes2Float32(t)}readString(){let e=this.readUint8(),t="";for(;0!=e;)t+=String.fromCharCode(e),e=this.readUint8();return t}writeString(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t))}readLine(){let e=String.fromCharCode(this.readUint8()),t="";for(;"\n"!=e&&"\r"!=e;)t+=e,e=String.fromCharCode(this.readUint8());return t}}const k=10,z=1024,S=[257,1,4],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];class _{bSuccess=!0;buffer;outputBuffer;attributes={};offsetTable=[];scanLinesPerChunk=1;pixelSize=0;channelOffsets=[];dimensions={w:0,h:0};huffman={tableSizes:new Array(3).fill(0),lengthCodes:new Array(457).fill(0),tables:[]};constructor(e){this.buffer=new w(e);let t=this.buffer;for(t.readInt32(),t.readInt32();0!=t.peekUint8();){let e=this.readAttribute();this.attributes[e.name]=e}t.skip();let i=this.attributes.dataWindow.values,n=i.yMax-i.yMin+1,a=this.attributes.compression.value;if(0!==a&&3!==a)return console.warn("EXR compression method not implemented!"),void(this.bSuccess=!1);3===a&&(this.scanLinesPerChunk=16),0!==a&&(n=Math.floor(n/this.scanLinesPerChunk)+(n%this.scanLinesPerChunk>0?1:0));for(let e=0;e<n;e++){let i=t.readUint64();this.offsetTable.push({offset:i}),e>0&&(this.offsetTable[e-1].size=i-this.offsetTable[e-1].offset)}n>1&&(this.offsetTable[n-1].size=(t.bitSize>>3)-Number(this.offsetTable[n-1].offset));for(let e=0;e<this.attributes.channels.values.length;e++){let t=this.attributes.channels.values[e];switch(this.channelOffsets.push(this.pixelSize),t.pixelType){case 0:case 2:default:this.pixelSize+=4;break;case 1:this.pixelSize+=2}}let s=this.attributes.dataWindow.values;this.dimensions.w=s.xMax-s.xMin+1,this.dimensions.h=s.yMax-s.yMin+1;let o=this.dimensions.w*this.dimensions.h*this.pixelSize;this.outputBuffer=new w(new ArrayBuffer(o));let r=this.attributes.channels.values;if(0!=a)if(3!==a);else{for(let e=0;e<3;e++)this.huffman.tables.push({codeSize:new Array(288).fill(0),lookUp:new Array(z).fill(0),tree:new Array(576).fill(0)});for(let e=0;e<n;e++){t.seek(Number(this.offsetTable[e].offset)),t.readUint32(),t.readUint32();const i={};let n=t.readUint8(),a=t.readUint8();i.cmf={},i.cmf.cm=w.bits(n,3,0),i.cmf.info=w.bits(n,7,4),i.flg={},i.flg.fcheck=w.bits(a,4,0),i.flg.fdict=w.bits(a,5,5),i.flg.flevel=w.bits(a,7,6),i.dictId=1==i.flg.fdict?t.readUint32():void 0;let s=!1;do{s=1==t.readBits(1);let e=t.readBits(2);if(0==e){t.byteAlign();let e=t.readBits(8)|t.readBits(8)<<8;e!=(65535^(t.readBits(8)|t.readBits(8)<<8))&&console.warn("ERROR: Raw block header LEN/NLEN mismatch!"),this.outputBuffer.consume(t,e);continue}3==e&&console.warn("ERROR: Reserved block type (3)");let i=0;if(1==e||2==e){for(let e=0;e<3;e++)this.huffman.tables[e].codeSize.fill(0),this.huffman.tables[e].lookUp.fill(0),this.huffman.tables[e].tree.fill(0);if(1==e)console.warn("TODO: handle blocks compressed with fixed Huffman codes");else{this.huffman.tableSizes=[t.readBits(5)+S[0],t.readBits(5)+S[1],t.readBits(4)+S[2]];for(let e=0;e<this.huffman.tableSizes[2];e++)this.huffman.tables[2].codeSize[M[e]]=t.readBits(3);this.huffman.tableSizes[2]=19}let n=new Array(17),a=new Array(16);for(let s=e;s>=0;s--){let e=this.huffman.tables[s];a.fill(0);for(let t=0;t<this.huffman.tableSizes[s];t++)a[e.codeSize[t]]++;let o=0,r=0;n[0]=0,n[1]=0;for(let e=1;e<=15;e++)r+=a[e],o=o+a[e]<<1,n[e+1]=o;65536!=o&&r>1&&console.warn("ERROR: Huffman table generation (1)");let l=-1;for(let t=0;t<this.huffman.tableSizes[s];t++){let i=e.codeSize[t];if(0==i)continue;let a=n[i]++,s=0;for(let e=i;e>0;e--)s=s<<1|1&a,a>>=1;if(i<=k){let n=i<<9|t;for(;s<z;)e.lookUp[s]=n,s+=1<<i;continue}let o=e.lookUp[1023&s];0==o&&(e.lookUp[1023&s]=l,o=l,l-=2),s>>=9;for(let t=i;t>11;t--)o-=1&(s>>=1),e.tree[-o-1]?o=e.tree[-o-1]:(e.tree[-o-1]=l,o=l,l-=2);o-=1&(s>>=1),e.tree[-o-1]=t}if(2==s){let e=0;for(i=0;i<this.huffman.tableSizes[0]+this.huffman.tableSizes[1];){if(e=this.huffmanDecode(t,2),e<16){this.huffman.lengthCodes[i++]=e;continue}16!=e||i||console.warn("ERROR: Huffman table generation (2)");let n=[2,3,7][e-16],a=t.readBits(n);a+=[3,3,11][e-16];for(let t=0;t<a;t++)this.huffman.lengthCodes[i+t]=16==e?this.huffman.lengthCodes[i-1]:0;i+=a}this.huffman.tableSizes[0]+this.huffman.tableSizes[1]!=i&&console.warn("ERROR: Huffman table generation (3)"),this.huffman.tables[0].codeSize=this.huffman.lengthCodes.slice(0,this.huffman.tableSizes[0]),this.huffman.tables[1].codeSize=this.huffman.lengthCodes.slice(this.huffman.tableSizes[0],this.huffman.tableSizes[0]+this.huffman.tableSizes[1])}}}for(;;){for(;;)if(t.remainingBits()<32||this.outputBuffer.remainingBits()<16){if(i=this.huffmanDecode(t,0),i>=256)break;this.outputBuffer.bytePointer>=this.outputBuffer.buffer.byteLength&&console.warn("Attempting to write outside output buffer!"),this.outputBuffer.writeUint8(i)}else{let e=this.huffmanDecode(t,0,!0);if(i=e,256&i)break;if(e=this.huffmanDecode(t,0,!0),this.outputBuffer.writeUint8(255&i),256&e){i=e;break}this.outputBuffer.writeUint8(255&e)}if(256==(i&=511))break;let e=j[i-257];if(i=C[i-257],e){i+=t.readBits(e)}let n=this.huffmanDecode(t,1);if(e=E[n],n=L[n],e>0){n+=t.readBits(e)}let a=this.outputBuffer.bytePointer,s=a-n;if(Math.max(this.outputBuffer.bytePointer,s)>this.outputBuffer.buffer.byteLength-1)for(;i--;)this.outputBuffer.writeUint8(this.outputBuffer.peekUint8(a-n)),a++;else{t.remainingBits();do{this.outputBuffer.writeUint8(this.outputBuffer.peekUint8(s+0)),this.outputBuffer.writeUint8(this.outputBuffer.peekUint8(s+1)),this.outputBuffer.writeUint8(this.outputBuffer.peekUint8(s+2)),s+=3}while((i-=3)>2);i>0&&(this.outputBuffer.writeUint8(this.outputBuffer.peekUint8(s)),i>1&&this.outputBuffer.writeUint8(this.outputBuffer.peekUint8(s+1)))}}}while(!s)}let e=Math.round(this.dimensions.h/this.scanLinesPerChunk),i=this.dimensions.h%this.scanLinesPerChunk*this.dimensions.w*this.pixelSize,a=this.scanLinesPerChunk*this.dimensions.w*this.pixelSize,s=new w(new ArrayBuffer(a));for(let t=0;t<e;t++){let n=t*a,o=t==e-1&&i>0?i:a,r=Math.floor((o+1)/2);for(let e=n+1;e<n+o;e++){let t=this.outputBuffer.getUint8(e-1)+this.outputBuffer.getUint8(e)-128;this.outputBuffer.setUint8(e,t)}let l=n;for(let e=0;e<o;e+=2){let t=this.outputBuffer.getUint8(l),i=this.outputBuffer.getUint8(l+r);s.setUint8(e,t),s.setUint8(e+1,i),l++}this.outputBuffer.copy(s,n,o)}}else for(let e=0;e<n;e++){t.seek(Number(this.offsetTable[e].offset)),t.readUint32(),t.readUint32();for(let e=0;e<r.length;e++){let i=r[e];for(let e=0;e<this.dimensions.w;e++)(0==i.pixelType||2==i.pixelType||1==i.pixelType)&&this.outputBuffer.writeUint16(t.readUint16())}}}huffmanDecode(e,t,i=!1){let n=this.huffman.tables[t],a=0;e.remainingBits();let s=e.readBits(k,!0),o=n.lookUp[s];if(o>=0)a=o>>9,i||(o&=511);else{a=k,s=e.readBits(15,!0);do{o=n.tree[~o+(s>>a++&1)]}while(o<0)}let r=o;return e.skip(0,a),r}readAttribute(){let e=this.buffer;const t={name:e.readString(),type:e.readString(),size:e.readInt32()};if("box2i"==t.type&&(t.values={xMin:e.readInt32(),yMin:e.readInt32(),xMax:e.readInt32(),yMax:e.readInt32()}),"box2f"==t.type&&(t.values={xMin:e.readFloat32(),yMin:e.readFloat32(),xMax:e.readFloat32(),yMax:e.readFloat32()}),"chlist"==t.type){for(t.values=[];0!=e.peekUint8();){let i=e.readString(),n=e.readInt32(),a=e.readUint8();e.skip(3);let s={name:i,pixelType:n,pLinear:a,xSampling:e.readInt32(),ySampling:e.readInt32()};t.values.push(s)}e.skip()}if("chromaticities"==t.type&&(t.values={redX:e.readFloat32(),redY:e.readFloat32(),greenX:e.readFloat32(),greenY:e.readFloat32(),blueX:e.readFloat32(),blueY:e.readFloat32(),whiteX:e.readFloat32(),whiteY:e.readFloat32()}),"compression"==t.type&&(t.value=e.readUint8()),t.type,t.type,"float"==t.type&&(t.value=e.readFloat32()),"int"==t.type&&(t.value=e.readUint32()),t.type,"lineOrder"==t.type&&(t.value=e.readUint8()),t.type,"m44f"==t.type){t.values=[];for(let i=0;i<4;i++)for(let i=0;i<4;i++)t.values.push(e.readFloat32())}return t.type,t.type,t.type,t.type,t.type,t.type,"v2i"==t.type&&(t.values={x:e.readInt32(),y:e.readInt32()}),"v2f"==t.type&&(t.values={x:e.readFloat32(),y:e.readFloat32()}),t.type,t.type,t}toFloatArray(){let e=new Float32Array(new ArrayBuffer(this.dimensions.w*this.dimensions.h*4*4));const t={R:0,G:1,B:2,A:3};let i=this.attributes.channels.values;for(let n=0;n<this.dimensions.h;n++)for(let a=0;a<this.dimensions.w;a++){let s=4*(n*this.dimensions.w+a);for(let o=0;o<i.length;o++){let r=i[o];const l=r.name;let d=this.channelOffsets[o],c=1==r.pixelType?2:4,h=(n*this.pixelSize+d)*this.dimensions.w+a*c,u=0;u=0==r.pixelType?this.outputBuffer.getUint32():1==r.pixelType?this.outputBuffer.getFloat16(h):this.outputBuffer.getFloat32(h),e[s+t[`${l}`]]=u}e[s+t.A]=1}return e}}class I{buffer;data;type;dimensions={w:0,h:0};scaleEndianess;littleEndian;constructor(e){this.buffer=new w(e),this.type=this.buffer.readLine();const t=this.buffer.readLine().split(" ");this.dimensions={w:parseInt(t[0],10),h:parseInt(t[1],10)},this.scaleEndianess=parseFloat(this.buffer.readLine()),this.littleEndian=this.scaleEndianess<0,this.buffer.littleEndian=this.littleEndian;if(this.data=new Float32Array(new ArrayBuffer(this.dimensions.w*this.dimensions.h*4*4)),"PF"===this.type)for(let e=0;e<this.dimensions.h;e++)for(let t=0;t<this.dimensions.w;t++){const i=4*((this.dimensions.h-e-1)*this.dimensions.w+t);this.data[i+0]=this.buffer.readFloat32(),this.data[i+1]=this.buffer.readFloat32(),this.data[i+2]=this.buffer.readFloat32(),this.data[i+3]=1}else if("PF4"===this.type)for(let e=0;e<this.dimensions.h;e++)for(let t=0;t<this.dimensions.w;t++){const i=4*((this.dimensions.h-e-1)*this.dimensions.w+t);this.data[i+0]=this.buffer.readFloat32(),this.data[i+1]=this.buffer.readFloat32(),this.data[i+2]=this.buffer.readFloat32(),this.data[i+3]=this.buffer.readFloat32()}else for(let e=0;e<this.dimensions.h;e++)for(let t=0;t<this.dimensions.w;t++){const i=4*((this.dimensions.h-e-1)*this.dimensions.w+t),n=this.buffer.readFloat32();this.data[i+0]=n,this.data[i+1]=n,this.data[i+2]=n,this.data[i+3]=1}}toFloatArray(){return this.data}}const T=(e,t)=>{let i=e.byteLength>>2;for(var n=0;n<i;n+=1)t[n]=255*e[n];return t};function P(e,t){if(!e||!t)return t;t.width=e.dimensions.w,t.height=e.dimensions.h;const i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height);return T(e.toFloatArray(),n.data),i.putImageData(n,0,0),t}const F=(e="",t="")=>new Promise(((i,n)=>{(e=>fetch(e).then((e=>e.blob())))(e).then((e=>{const a=new FileReader;a.onload=()=>i("pfm"===t?new I(a.result):new _(a.result)),a.onerror=()=>n("Could not read media"),a.readAsArrayBuffer(e)})).catch((()=>n("Could not read media")))}));const A=(e,t,i)=>"data:"===e.slice(0,5)?x(e,t,i):new Promise(((t,n)=>{(function(e,t,i){return new Promise(((n,a)=>{F(t,i).then((a=>(e.fileData=a,e.ext=i,e.src=t,P(a,e),n(e)))).catch(a)}))})(document.createElement("canvas"),e,i).then((e=>{t({metadata:{fps:0,duration:0,hasAudio:!1,timestamps:[],width:e.width,height:e.height,codec:i,bitrate:0},element:e})})).catch((e=>n(e)))})),R=(e,t)=>fetch(t).then((e=>e.blob())).then((t=>new File([t],e)));function G(e=0){if(0===e)return 0;const t=+(1/Math.round(e)).toFixed(6);return Number.isFinite(t)?t:0}const B=e=>Math.trunc(1e3*e)/1e3,V=(e,t)=>{const i=G(t);return Math.round(e/i)*i},N=(e,t,i)=>{const n=.1/i,a=t<0,s=Math.abs(B(t));if(!e||!e.length)return s;let o=0;for(;o<e.length;){const t=e[Number(o)];if(t+n>=s)return a?-t:t;o+=1}return a?-s:s};const D=(e,t)=>`Error loading ${e}${t&&t.indexOf("NOT_SUPPORTED")>-1?", unsupported codec":""}`;function O(e,t,i){return new Promise(((n,a)=>{const s=window.IcatMediaInfo,o=document.createElement("video"),r={fps:0,duration:0,hasAudio:!1,width:0,height:0,timestamps:[],codec:"",bitrate:0};let d=!1;const c=e=>{r.duration=e.duration,r.fps=Math.ceil(e.fps),r.hasAudio=e.hasAudio,r.width=e.width,r.height=e.height,r.timestamps=e.frameTimes.slice(),r.codec=e.codec,r.bitrate=e.bitrate,0===r.timestamps.length&&(r.timestamps=function(e,t){const i=[];if(!e)return i;const n=1/(t||30);if(!Number.isNaN(n)&&Number.isFinite(n)){const t=Math.ceil(e/n);let a=0;i.push(a);let s=1;for(;s<=t;)a+=n,i.push(a),s+=1}return i.map((e=>B(e)))}(r.duration,r.fps)),e=null,n({element:o,metadata:r})},h=()=>{d=!0;const i=D(t.path||e,o.error?o.error.message:void 0);o.oncanplaythrough=null,o.onerror=null,o.src="",a(i)},u=async()=>{if(d)return;if(d=!0,o.oncanplaythrough=null,o.onerror=null,t.duration&&t.fps)return r.duration=t.duration,r.fps=Math.ceil(t.fps),r.hasAudio=t.hasAudio,r.width=t.width,r.height=t.height,r.timestamps=t.timestamps,r.codec=t.codec,r.bitrate=t.bitrate,void n({element:o,metadata:r});let a=i||t.file;if(!a&&e&&"string"==typeof e)try{a=await R(t.name,e)}catch(e){return h()}try{s(a).then(c)}catch(e){h()}},m=()=>{if(d)return;const{width:e,height:t}={width:o.videoWidth||o.width,height:o.videoHeight||o.height};if(4===o.readyState&&e&&t)return u();requestAnimationFrame(m)};o.oncanplaythrough=u,o.onerror=h,o.muted=!0,o.currentTime=0,o.playsInline=!0,o.preload="auto",o.src=l.getUrl(i,e);try{o.load()}catch(e){console.warn(e)}m()}))}function H(e,t,i){let n=e.src;return new Promise(((a,s)=>{i(n).then((e=>{n=e})).then((()=>{const i=t=>(e.codec=t.metadata.codec,e.bitrate=t.metadata.bitrate,e.duration=t.metadata.duration,e.fps=t.metadata.fps,e.hasAudio=t.metadata.hasAudio,e.height=t.metadata.height,e.timestamps=t.metadata.timestamps,e.width=t.metadata.width,{media:e,element:t.element});"video"===e.type?O(n,e,t).then((e=>a(i(e)))).catch((e=>{console.warn(e),s(e)})):"image"===e.type?x(n,e.path,e.extension).then((e=>a(i(e)))).catch((e=>{console.warn(e),s(e)})):"hdrimage"===e.type?A(n,e.path,e.extension).then((e=>a(i(e)))).catch((e=>{console.warn(e),s(e)})):s("Invalid media")})).catch(s)}))}function $(e){return!(!0!==e&&"true"!==e)}const U=(e,t,i=void 0)=>{const n=e=>null==e;if(0===t.length||n(e))return i;let a,s=e,o=0;for(;o<t.length;){const e=t[Number(o)];if(a=s["number"==typeof e?Number(e):`${e}`],n(a))return i;s=a,o+=1}return n(a)?i:a};function W(e){return Object.prototype.toString.call(e).slice(8,-1)}const K=["Boolean","Number","String","Error","Date"];function q(e){const t=e.constructor,i=W(e);return K.indexOf(i)>-1?new t(e):"RegExp"===i?function(e){const t=/\w*$/,i=new e.constructor(e.source,t.exec(e));return i.lastIndex=e.lastIndex,i}(e):"Symbol"===i?function(e){return Object(Symbol.prototype.valueOf.call(e))}(e):"Function"===i?e:null}function Z(e,t){if(!e)return;let i=0;const n=U(e,["length"],0);for(;i<n;)t(e[Number(i)],i),i+=1;return e}function Y(e){if("object"!=typeof e||null===e)return e;const t=W(e);let i=null;return"Set"!==t&&"Map"!==t&&"Array"!==t&&"Object"!==t?q(e):"Set"===t?(i=new Set,e.forEach((e=>{i.add(Y(e))})),i):"Map"===t?(i=new Map,e.forEach(((e,t)=>{i.set(t,Y(e))})),i):("Array"===t&&(i=[],Z(e,((e,t)=>{i[Number(t)]=Y(e)}))),"Object"===t&&(i={},Z(Object.keys(e),(t=>{i[`${t}`]=Y(e[`${t}`])}))),i)}function X(e){return`00${e}`.slice(-2)}function J(e,t){if(0===t||0===e)return"00:00";const i=Math.ceil(t),n=Math.max(0,Math.round(e*t)),a=n%i,s=(n-a)/i%60,o=Math.floor(e/60),r=Math.floor(e/3600);return`${r>0?`${X(r)}:`:""}${o>0?`${X(o)}:`:""}${X(s)}.${X(Number.isNaN(a)?0:a)}`}function Q(e,t,i,n,a,s){const o=U(t,["fileData"]);o&&e.getExtension("OES_texture_float_linear");const r=o?o.toFloatArray():t;let l,d=e.createTexture();e.bindTexture(e.TEXTURE_2D,d),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),o?e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,a,s,0,e.RGBA,e.FLOAT,null):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a,s,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindTexture(e.TEXTURE_2D,d);const c=()=>{(e=>{if(!e)return!1;if("IMG"===e.tagName){const t=e;return t.complete&&0!==t.naturalHeight}if("VIDEO"===e.tagName){const t=e;return 4===t.readyState&&0!==t.videoHeight}if("CANVAS"===e.tagName)return 0!==e.height;return!1})(t)&&(o?e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,a,s,0,e.RGBA,e.FLOAT,r):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r))};c();const h={width:a,height:s,element:t,use(){e.useProgram(n),e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,d),c();const t=e.getUniformLocation(n,`uTexture${i}`);return t&&e.uniform1i(t,i),h.draw(),h},draw(){const t=e.createFramebuffer();return t?(l=t,e.bindFramebuffer(e.FRAMEBUFFER,l),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,d,0),e.viewport(0,0,h.width,h.height),e.bindFramebuffer(e.FRAMEBUFFER,null),h):h},dispose(){e.deleteTexture(d),l&&e.deleteFramebuffer(l),d=null}};return h}function ee(e,t,i=0,n=0){const a=(t,i)=>{const n=e.createShader(t);if(n){if(e.shaderSource(n,i),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error(`Shader compile: ${e.getShaderInfoLog(n)}`);return n}};let s=()=>{},o=0,r=0,l=0;const d=Date.now();let c=null,h=null,u=null,m=null,p=e.createProgram();if(!p)return null;const g=a(e.VERTEX_SHADER,"#version 300 es\nprecision highp float;\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\nout vec2 vTextureCoord;\nvoid main()\n{\n    gl_Position = vec4(aVertexPosition, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}");g&&e.attachShader(p,g);const b=a(e.FRAGMENT_SHADER,t);if(b&&e.attachShader(p,b),e.linkProgram(p),!e.getProgramParameter(p,e.LINK_STATUS))throw new Error(`Shader program: ${e.getProgramInfoLog(p)}`);const v=e.getUniformLocation(p,"uDimensions"),f=e.getUniformLocation(p,"uTime"),y=e.getUniformLocation(p,"uMouse"),x=()=>{l=1},w=()=>{l=0},k=t=>{const i=e.canvas.getBoundingClientRect();o=t.clientX-i.left,r=t.clientY-i.top};y&&(s=()=>{e.canvas.removeEventListener("mousedown",x),e.canvas.removeEventListener("mouseup",w),e.canvas.removeEventListener("mouseleave",w),e.canvas.removeEventListener("mousemove",k)},e.canvas.addEventListener("mousedown",x),e.canvas.addEventListener("mouseup",w),e.canvas.addEventListener("mouseleave",w),e.canvas.addEventListener("mousemove",k));const z={width:i,height:n,constantRender:!!y||!!f,program:p,draw(){p&&(null==c&&(c=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),e.STATIC_DRAW),null==h&&(h=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,h),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),e.STATIC_DRAW)),null==u&&(u=e.getAttribLocation(p,"aVertexPosition"),e.enableVertexAttribArray(u)),null==m&&(m=e.getAttribLocation(p,"aTextureCoord"),e.enableVertexAttribArray(m)),e.useProgram(p),e.bindBuffer(e.ARRAY_BUFFER,c),e.vertexAttribPointer(u,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,h),e.vertexAttribPointer(m,2,e.FLOAT,!1,0,0),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.drawArrays(e.TRIANGLE_STRIP,0,4))},setUniforms(t={}){if(!p)return;e.useProgram(p);const i=U(t,["gamma","value"],1),n=U(t,["exposure","value"],1),a=e.getUniformLocation(p,"uTonemapper");return 1!==i||1!==n?(e.uniform1i(a,0),e.uniform1f(e.getUniformLocation(p,"uGamma"),i),e.uniform1f(e.getUniformLocation(p,"uExposure"),n)):e.uniform1i(a,-1),v&&e.uniform2f(v,z.width,z.height),y&&e.uniform4f(y,o,r,l,0),f&&e.uniform1f(f,(Date.now()-d)/1e3),Object.keys(t).forEach((i=>{if("exposure"===i||"game"===i)return;const n=t[`${i}`],a=n.type,s=n.value,o=e.getUniformLocation(p,i);"bool"===a&&e.uniform1i(o,s?1:0),"int"===a&&e.uniform1i(o,s),"float"===a&&e.uniform1f(o,s),"dropdown"===a&&e.uniform1i(o,s)})),z},dispose(){e.deleteProgram(p),p=null,s()}};return z}function te(e,t){if(!Number.isNaN(e)&&Number.isFinite(e)&&"string"!=typeof e)return e;const i=parseFloat(e);return Number.isNaN(i)||!Number.isFinite(i)||"string"==typeof i?t:i}const ie=e=>({width:e.videoWidth||e.naturalWidth||e.width,height:e.videoHeight||e.naturalHeight||e.height});class ne{canvas;container;contentContainer;ctx;t=!1;get displayRenderMode(){return this.t}set displayRenderMode(e){this.t=$(e),this.t?this.renderModeText.style.removeProperty("display"):this.renderModeText.style.display="none"}i=!1;get displayInfoText(){return this.i}set displayInfoText(e){this.i=$(e),this.i?this.textContainer.style.removeProperty("display"):this.textContainer.style.display="none"}disposed=!1;eventListeners={};id="";index=0;overlayElement;renderMode="auto";shader;shaderSettings={};shaderSource="";sourceElement;textures=[];type;x=0;y=0;z=100;width=0;height=0;globalPosition={x:0,y:0,z:1};renderModeText;infoTextContainer;textContainer;visible=!0;hasFrameImages=!1;frameElement;o=!1;get showFrameImage(){return this.o}set showFrameImage(e){const t=this.o!==e;this.o=e,t&&"webgl"===this.renderMode&&this.createWebGlTextures()}drawingFrameImage;showFilter=!0;l="";u=0;m;p;v;k;static webGPUVertexShaderSource="\n    struct VertexOutput {\n      @builtin(position) Position: vec4<f32>,\n      @location(0) uv: vec2<f32>,\n    }\n\n    @vertex\n    fn vert_main(@builtin(vertex_index) VertexIndex: u32) -> VertexOutput {\n      var pos = array<vec2<f32>, 6>(\n        vec2<f32>( 1.0,  1.0),\n        vec2<f32>( 1.0, -1.0),\n        vec2<f32>(-1.0, -1.0),\n        vec2<f32>( 1.0,  1.0),\n        vec2<f32>(-1.0, -1.0),\n        vec2<f32>(-1.0,  1.0)\n      );\n\n      var uv = array<vec2<f32>, 6>(\n        vec2<f32>(1.0, 0.0),\n        vec2<f32>(1.0, 1.0),\n        vec2<f32>(0.0, 1.0),\n        vec2<f32>(1.0, 0.0),\n        vec2<f32>(0.0, 1.0),\n        vec2<f32>(0.0, 0.0)\n      );\n\n      var output : VertexOutput;\n      output.Position = vec4<f32>(pos[VertexIndex], 0.0, 1.0);\n      output.uv = uv[VertexIndex];\n      return output;\n    }\n";static webGPUfragmentShaderSource="\n        @group(0) @binding(1) var mySampler: sampler;\n        @group(0) @binding(2) var myTexture: texture_external;\n\n        @fragment\n        fn frag_main(@location(0) uv : vec2<f32>) -> @location(0) vec4<f32> {\n            return textureSampleBaseClampToEdge(myTexture, mySampler, uv);\n        }\n    ";static webGLFragmentShader="#version 300 es\nprecision highp float;\nin vec2 vTextureCoord;\nuniform sampler2D uTexture0;\nuniform int uTonemapper;\nuniform float uGamma;\nuniform float uExposure;\nout vec4 color;\n\nvoid main()\n{\n    color = texture(uTexture0, vTextureCoord);\n\n    if (uTonemapper == 0) {\n        float invGamma = 1.0 / uGamma;\n        float exposure = uExposure;\n        color.r = exposure * pow(color.r, invGamma);\n        color.g = exposure * pow(color.g, invGamma);\n        color.b = exposure * pow(color.b, invGamma);\n    }\n}\n";constructor(e,t,i,n,a,s){this.l=h(),this.renderMode=n,this.container=t,this.id=e.id,this.sourceElement=e.sourceElement,this.overlayElement=e.overlayElement,this.type=e.type,this.x=e.x,this.y=e.y,this.z=e.z,this.index=e.index,this.globalPosition={...this.globalPosition,...i},this.shaderSource=e.shaderSource,this.hasFrameImages=e.frameImages.length>0,this.width=e.width,this.height=e.height;const o=Y(e.shaderSettings||{});o.exposure&&1===o.exposure.value&&delete o.exposure,o.gamma&&1===o.gamma.value&&delete o.gamma,this.shaderSettings=o,this.contentContainer=document.createElement("div"),this.contentContainer.className="media-renderer-content",this.container.appendChild(this.contentContainer),this.frameElement=new Image,this.frameElement.width=e.width,this.frameElement.height=e.height,this.renderModeText=document.createElement("div"),this.renderModeText.className="render-mode-text",this.contentContainer.appendChild(this.renderModeText),this.textContainer=document.createElement("div"),this.textContainer.className="render-text-container",this.contentContainer.appendChild(this.textContainer),this.infoTextContainer=document.createElement("div"),this.infoTextContainer.className="render-info-text-container",this.textContainer.appendChild(this.infoTextContainer),this.displayRenderMode=a,this.displayInfoText=s,this.createContextSource(),this.setIndex(this.index)}setIndex=e=>{this.index=te(e,0),this.contentContainer.style.order=this.index.toString()};setRenderMode=async e=>{e&&e!==this.renderMode&&-1!==u.indexOf(e)&&(this.renderMode=e,await this.createContextSource())};createCanvasSource=()=>{const e=document.createElement("canvas");e.className="media-source-canvas",this.canvas?this.contentContainer.replaceChild(e,this.canvas):this.contentContainer.insertBefore(e,this.renderModeText),this.canvas=e,this.setDimensions()};createContextSource=async()=>{const e=this.shaderSettingKeys(),t=this.renderMode,i="auto"===t||"webgpu"===t,n=i&&this.canDoWebGPU(e),a=e.length>0;n?await this.createWebGPUSource().then(this.draw):"webgl"===t||!n&&i||a?this.createWebGlSource():this.create2DSource()};canDoWebGPU=e=>!!navigator.gpu&&this.sourceElement&&"VIDEO"===this.sourceElement.tagName&&0===e.length&&!this.hasFrameImages;shaderSettingKeys=()=>Object.keys(this.shaderSettings||{});setShaderSettings=e=>{const t=Y(e);if(t.exposure&&1===t.exposure.value&&delete t.exposure,t.gamma&&1===t.gamma.value&&delete t.gamma,this.shaderSettings=t,("auto"===this.renderMode||"webgpu"===this.renderMode)&&!this.canDoWebGPU(this.shaderSettingKeys()))return this.createWebGlSource();this.draw()};setShaderSource=e=>{this.shaderSource=e,"webgl"===this.renderMode&&(this.shader&&this.shader.dispose(),this.showFilter?this.shader=ee(this.ctx,this.shaderSource||ne.webGLFragmentShader):this.shader=ee(this.ctx,ne.webGLFragmentShader),this.createWebGlTextures(),this.draw())};clearShader=async()=>{this.shaderSettings={},this.shaderSource=ne.webGLFragmentShader,this.overlayElement=null,this.showFilter=!0,await this.createContextSource()};handleWebGpuError=e=>{if(console.error("handleWebGpuError",e),!this.disposed){try{l.logError(`webgpuerror -> ${e}`)}catch(e){}requestAnimationFrame((()=>this.createWebGlSource()))}};handleWebGlContextLost=e=>{if(this.disposed)return;const t=e instanceof Error?e.message:e.toString();try{l.logError({error:e,message:t})}catch(e){}t&&-1===t.indexOf("cross-origin")&&this.u<1?(this.u=this.u+1,requestAnimationFrame((()=>this.createWebGlSource()))):(""!==this.shaderSource&&this.container.dispatchEvent(new CustomEvent("can-not-display-filter",{detail:this.id,composed:!0,bubbles:!0})),requestAnimationFrame((()=>this.create2DSource())))};handleContextLost=()=>{console.error("handleContextLost");try{l.logError("contextlost")}catch(e){}};clearContext=()=>{"function"==typeof this.eventListeners.webglcontextlost&&this.eventListeners.webglcontextlost(),"function"==typeof this.eventListeners.contextlost&&this.eventListeners.contextlost(),"function"==typeof this.eventListeners.webgpuerror&&this.eventListeners.webgpuerror(),this.disposeWebGPUSource(),this.disposeGLSource(),this.ctx=null,this.renderModeText.textContent="Mode: None"};createWebGPUSource=async()=>{if(this.clearContext(),this.createCanvasSource(),this.renderMode="webgpu",this.renderModeText.textContent="Mode: WebGPU",!this.canDoWebGPU(this.shaderSettingKeys()))return this.renderMode="webgl",this.createWebGlSource();let e;try{e=await navigator.gpu.requestAdapter()}catch(e){return this.handleWebGpuError(e)}if("webgpu"===this.renderMode){try{this.m=await e.requestDevice()}catch(e){return this.handleWebGpuError(e)}if("webgpu"===this.renderMode){try{this.m.addEventListener("uncapturederror",this.handleWebGpuError),this.eventListeners.webgpuerror=()=>{this.m&&this.m.removeEventListener("uncapturederror",this.handleWebGpuError),delete this.eventListeners.webgpuerror},this.p=navigator.gpu.getPreferredCanvasFormat(),this.ctx=this.canvas.getContext("webgpu"),this.ctx.configure({device:this.m,format:this.p,alphaMode:"opaque"}),this.v=this.m.createRenderPipeline({layout:"auto",vertex:{module:this.m.createShaderModule({code:ne.webGPUVertexShaderSource}),entryPoint:"vert_main"},fragment:{module:this.m.createShaderModule({code:ne.webGPUfragmentShaderSource}),entryPoint:"frag_main",targets:[{format:this.p}]},primitive:{topology:"triangle-list"}}),this.k=this.m.createSampler({magFilter:"linear",minFilter:"linear"})}catch(e){this.handleWebGpuError(e)}this.updateTransform()}}};createWebGlSource=()=>{if(this.clearContext(),this.createCanvasSource(),this.renderMode="webgl",this.renderModeText.textContent="Mode: WebGL",this.ctx=this.canvas.getContext("webgl2",{alpha:!1,antialias:!1}),this.ctx){try{this.ctx.getExtension("EXT_color_buffer_float"),this.ctx.getExtension("EXT_float_blend"),this.ctx.pixelStorei(this.ctx.UNPACK_FLIP_Y_WEBGL,!0),this.canvas.addEventListener("webglcontextlost",this.handleWebGlContextLost),this.eventListeners.webglcontextlost=()=>{this.canvas.removeEventListener("webglcontextlost",this.handleWebGlContextLost),delete this.eventListeners.webglcontextlost},this.shader=ee(this.ctx,this.shaderSource||ne.webGLFragmentShader)}catch(e){this.handleWebGlContextLost(e)}try{this.createWebGlTextures(),this.setDimensions(),this.draw()}catch(e){this.create2DSource()}this.updateTransform()}else this.create2DSource()};create2DSource=()=>{this.clearContext(),this.createCanvasSource(),this.renderMode="2d",this.renderModeText.textContent="Mode: 2D",this.canvas.addEventListener("contextlost",this.handleContextLost),this.eventListeners.contextlost=()=>{this.canvas.removeEventListener("contextlost",this.handleContextLost),delete this.eventListeners.contextlost},this.ctx=this.canvas.getContext("2d",{alpha:!1,preserveDrawingBuffer:!0,antialias:!1,imageSmoothingEnabled:!1}),this.ctx.imageSmoothingEnabled=!1,this.updateTransform(),this.draw()};setDimensions(){this.shader&&(this.shader.width=this.width,this.shader.height=this.height);const e=this.canvas;if(e.width=this.width,e.height=this.height,e.style.width=`${this.width}px`,e.style.height=`${this.height}px`,"webgl"===this.renderMode&&this.ctx){this.ctx.viewport(0,0,this.width,this.height)}}createWebGlTextures=()=>{if(this.textures.forEach((e=>e.dispose())),this.textures=[],"webgl"===this.renderMode)try{const e=[];this.showFrameImage?e.push(this.frameElement):e.push(this.sourceElement),this.showFilter&&this.overlayElement&&e.push(this.overlayElement);for(let t=0;t<e.length;t+=1){const i=e[Number(t)];try{const e=Q(this.ctx,i,t,this.shader.program,this.width,this.height);this.textures.push(e)}catch(e){return this.handleWebGlContextLost(e)}}}catch(e){this.handleWebGlContextLost(e)}};loadInputs=(e,t)=>{if(this.sourceElement=e,this.overlayElement=t,e){const t=ie(e);this.width=t.width,this.height=t.height}else if(t){const e=ie(t);this.width=e.width,this.height=e.height}this.createWebGlTextures(),this.setDimensions(),this.draw()};draw=async()=>{if("webgpu"===this.renderMode)try{if(!this.k||!this.m||!this.v)return;const e=this.m.createBindGroup({layout:this.v.getBindGroupLayout(0),entries:[{binding:1,resource:this.k},{binding:2,resource:this.m.importExternalTexture({source:this.sourceElement})}]}),t=this.ctx,i=this.m.createCommandEncoder(),n={colorAttachments:[{view:t.getCurrentTexture().createView(),clearValue:[1,0,0,1],loadOp:"clear",storeOp:"store"}]},a=i.beginRenderPass(n);a.setPipeline(this.v),a.setBindGroup(0,e),a.draw(6,1,0,0),a.end(),this.m.queue.submit([i.finish()])}catch(e){this.handleWebGpuError(e)}else if("webgl"===this.renderMode){if(!this.shader||!this.textures.length)return;if(this.showFilter)for(let e=0;e<this.textures.length;e+=1)try{this.textures[Number(e)].use(),this.shader.setUniforms(this.shaderSettings).draw(),this.u=0}catch(e){return this.handleWebGlContextLost(e)}else try{this.textures[0].use(),this.shader.setUniforms(this.shaderSettings).draw(),this.u=0}catch(e){this.handleWebGlContextLost(e)}}else if("2d"===this.renderMode){const e=this.ctx;if(e.drawImage(this.showFrameImage?this.frameElement:this.sourceElement,0,0),this.shaderSettings.gamma||this.shaderSettings.exposure){const t=U(this.shaderSettings,["gamma","value"],1),i=U(this.shaderSettings,["exposure","value"],1);if(1!==t||1!==i){const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),a=n.data,s=1/(t||1),o=e=>{a[Number(e)]=i*(255*(a[Number(e)]/255)**s)},r=e=>{for(let t=0;t<3;t+=1)o(e+t)};for(let e=0;e<a.length;e+=4)r(e);e.putImageData(n,0,0)}}}};drawFrameImage=async e=>{if(!e)return;if(this.drawingFrameImage===e)return this.createWebGlTextures(),void this.draw();this.drawingFrameImage=e;const t=this.frameElement.src;t&&(this.frameElement.src="",l.clearUrl(t)),this.frameElement.onload=()=>{e===this.drawingFrameImage&&(this.frameElement.onload=null,this.createWebGlTextures(),this.draw())};let i=e;("string"!=typeof e||l.isElectronUrl(e)||(i=await R("frame",e),e===this.drawingFrameImage))&&(this.frameElement.src=l.getUrl(i,i))};render=()=>this.showFrameImage||this.sourceElement&&"VIDEO"===this.sourceElement.tagName||this.overlayElement&&"VIDEO"===this.overlayElement.tagName||"filter"===this.type?this.draw():void 0;disposeWebGPUSource=()=>{try{this.m.destroy()}catch(e){}try{this.ctx.unconfigure()}catch(e){}this.m=null,this.p=null,this.v=null,this.k=null};disposeGLSource(){const e=this.ctx;try{e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)}catch(e){}this.textures.forEach((e=>{e.dispose()})),this.textures=[],this.shader&&(this.shader.dispose(),this.shader=null)}getScreenshot=()=>{let e=document.createElement("canvas"),t=e.getContext("2d");if(!t)return"";e.width=this.width,e.height=this.height,"webgpu"===this.renderMode?t.drawImage(this.sourceElement,0,0):t.drawImage(this.canvas,0,0);const i=e.toDataURL("image/png");return t=null,e=null,i};updatePosition=(e,t,i)=>{this.globalPosition={x:e,y:t,z:i},this.updateTransform()};updateTransform=()=>{const e=this.globalPosition.z/100,t=e*(this.z/100),i=`translateX(${(this.globalPosition.x+this.x)*e}px) translateY(${(this.globalPosition.y+this.y)*e}px) scale(${t})`;this.canvas.style.transform=i};setFrameImages=async e=>{this.hasFrameImages=(e||[]).length>0,"webgpu"===this.renderMode&&this.hasFrameImages&&await this.createContextSource()};removeFrameImages=async()=>{this.hasFrameImages=!1,this.showFrameImage=!1,this.drawingFrameImage=null,await this.createContextSource()};setFilterVisibility=e=>{this.showFilter=e,this.setShaderSource(this.shaderSource)};setInfoTexts=e=>{this.infoTextContainer.innerHTML="",e.forEach((e=>""===e.label||void 0===e.label?void 0:this.infoTextContainer.appendChild(n({tag:"div",attributes:{class:"info-text-item"},properties:{textContent:e.label}}))))};dispose=()=>{this.disposed=!0,Object.keys(this.eventListeners).forEach((e=>"function"==typeof this.eventListeners[`${e}`]?this.eventListeners[`${e}`]():void 0)),this.clearContext(),this.contentContainer.remove();const e=this.frameElement.src;e&&(this.frameElement.src="",l.clearUrl(e))}}function ae(e){return!(!1===e||"false"===e)}const se=e=>{const t=e.currentPositions,i=e.zoomFraction,n=e.fitToContent?e.contentPositionData.fitScale:1,a=e.fitToContent?(e.contentPositionData.height-e.contentPositionData.fitHeight*n)/2:0,s=e.fitToContent?(e.contentPositionData.width-e.contentPositionData.fitWidth*n)/2:0,o=t.x,r=t.y,l=e.newZoomFraction;let d=e.pageY-e.box.top,c=e.pageX-e.box.left,h=0;const{contentWidth:u,contentHeight:m}=e.contentPositionData,p=e.fitToContent?e.contentPositionData.fitPaneWidth:e.contentPositionData.paneWidth,g=e.fitToContent?e.contentPositionData.fitPaneHeight:e.contentPositionData.paneHeight,b=u*i,v=m*i,f=u*l,y=m*l,x=o*i,w=r*i;if("split"!==e.layout){const t=e.box.width/e.mediaLength;for(;h<e.mediaLength&&!(t*(h+1)>c);)h+=1;c=e.pageX-t*h-e.box.left}c=(c-s)/n,d=(d-a)/n;const k=(c-x)/b,z=(d-w)/v;return oe((x-(f*k-b*k))/l,(w-(y*z-v*z))/l,l,u,m,p,g)},oe=(e,t,i,n,a,s,o)=>{const r=n*i,l=(s-r)/i,d=r<s?l/2:0,c=r<s?d:l;let h=Math.max(c,Math.min(d,e));const u=a*i,m=(o-u)/i,p=u<o?m/2:0,g=u<o?p:m;let b=Math.max(g,Math.min(p,t));return Number.isNaN(h)&&(h=0),Number.isNaN(b)&&(b=0),{x:h,y:b}};function re(e,t){return new Promise((i=>{if(!e||"VIDEO"!==e.tagName)return void i(0);let n=!1;const a=()=>{e.removeEventListener("seeked",a),n||(n=!0,i(e.currentTime))};e.addEventListener("seeked",a),e.currentTime=t+.001,e.seeking||a()}))}function le(e,t,i){return t.indexOf(e)>-1?e:void 0!==i?i:t[0]}const de=e=>({width:e.videoWidth||e.naturalWidth||e.width,height:e.videoHeight||e.naturalHeight||e.height});class ce{antialias=!1;containerElement;containerHeight=0;containerWidth=0;canvasContainer;controllerID="";t=!1;get displayRenderMode(){return this.t}set displayRenderMode(e){this.t=$(e),this.renderers&&this.renderers.forEach((e=>{e.displayRenderMode=this.t}))}drawTimer;duration=0;elementForTime;S;get endTime(){return void 0===this.S||0===this.S||Number.isNaN(this.S)||!Number.isFinite(this.S)?this.duration:this.S}eventListeners={};exposure=1;fps=0;frameRate=30;gamma=1;grid=0;gridElement;imageElements;integerScaling=!1;isPinchZooming=!1;lastX=0;lastY=0;layout="";looping=!0;maxContentDuration=0;media;mediaOrder=[];minStartTime=0;playing=!1;position={x:0,y:0,z:100};preserveDimensions=!1;M="auto";get renderMode(){let e=this.M;return this.C&&"2d"!==e&&(e="webgl"),e}set renderMode(e){const t=le(e,u.slice(),this.M);if(t===this.M)return;this.M=t;const i=this.renderMode;this.renderers&&this.renderers.forEach((e=>e.setRenderMode(i)))}renderers;resizeObserver;seeking=!1;singleCanvas;singleCanvasContext;singleCanvasTimer;speed=1;splitPosition=.5;splitHandleContainer;splitHandleContainerWrapper;splitHandleContainerWrapperInner;startTime=0;time=0;get totalFrames(){const e=this.startTime,t=this.endTime,i=this.fps;return Math.round((t-e)*i)}C=!1;get useSingleCanvas(){return this.C}set useSingleCanvas(e){cancelAnimationFrame(this.singleCanvasTimer),this.C=$(e),this.containerElement.setAttribute("data-use-single-canvas",this.C.toString());const t=this.renderMode;this.renderers&&this.renderers.forEach((e=>e.setRenderMode(t))),this.C?this.singleCanvasTimer=requestAnimationFrame(this.drawSingleCanvas):cancelAnimationFrame(this.singleCanvasTimer)}videoContainer;videoElements;viewportDimensions={paneWidth:0,paneHeight:0,height:0,width:0,minZoom:0,fitScale:1,fitWidth:0,fitHeight:0,fitPaneWidth:0,fitPaneHeight:0,contentWidth:0,contentHeight:0};windowScrolling=!1;positionUpdateCallback=e=>{console.warn("mediaController.positionUpdateCallback not set",e)};playStateUpdateCallback=e=>{console.warn("mediaController.playStateUpdateCallback not set",e)};seekStateUpdateCallback=e=>{console.warn("mediaController.seekStateUpdateCallback not set",e)};timeUpdateCallback=e=>{console.warn("mediaController.timeUpdateCallback not set",e)};timeDataCallback=e=>{console.warn("mediaController.timeDataCallback not set",e)};setTimeUpdateCallback=e=>{console.warn("mediaController.timeUpdateCallback not set",e)};constructor(e){if(this.controllerID=h(),!e||!e.container)throw new Error("Invalid parameters for media renderer, you must supply a container element");const t={container:null,antialias:this.antialias,endTime:this.endTime,grid:this.grid,layout:this.layout||y[0],looping:this.looping,preserveDimensions:this.preserveDimensions,speed:this.speed,startTime:this.startTime,time:this.time,renderMode:this.M,displayRenderMode:this.displayRenderMode,exposure:this.exposure,gamma:this.gamma,integerScaling:this.integerScaling,useSingleCanvas:this.useSingleCanvas,positionCallback:this.positionUpdateCallback,playStateUpdate:this.playStateUpdateCallback,timeUpdateCallback:this.timeUpdateCallback,setTimeUpdateCallback:this.setTimeUpdateCallback,timeDataCallback:this.timeDataCallback,seekingStateUpdate:this.seekStateUpdateCallback,...e};this.renderMode=t.renderMode,this.videoElements=new Map,this.imageElements=new Map,this.renderers=new Map,this.media=new Map,this.containerElement=t.container,this.containerElement.classList.add("media-controller-container"),this.antialias=t.antialias,this.S=t.endTime,this.grid=t.grid,this.layout=t.layout,this.looping=t.looping,this.preserveDimensions=t.preserveDimensions,this.speed=t.speed,this.startTime=t.startTime,this.time=t.time,this.displayRenderMode=t.displayRenderMode,this.exposure=t.exposure,this.gamma=t.gamma,this.integerScaling=t.integerScaling,this.useSingleCanvas=t.useSingleCanvas,this.positionUpdateCallback=t.positionCallback,this.playStateUpdateCallback=t.playStateUpdate,this.seekStateUpdateCallback=t.seekingStateUpdate,this.timeUpdateCallback=t.timeUpdateCallback,this.timeDataCallback=t.timeDataCallback,this.setTimeUpdateCallback=t.setTimeUpdateCallback;const i=document.createElement("div");i.id=this.controllerID,i.className="canvas-container",this.containerElement.appendChild(i),this.canvasContainer=i,this.singleCanvas=document.createElement("canvas"),this.singleCanvas.className="media-controller-single-canvas",this.containerElement.appendChild(this.singleCanvas),this.singleCanvasContext=this.singleCanvas.getContext("2d");const n=document.createElement("div");n.className="video-container",this.containerElement.appendChild(n),this.videoContainer=n,this.splitHandleContainerWrapper=document.createElement("div"),this.splitHandleContainerWrapper.className="split-handle-container-wrapper",this.splitHandleContainerWrapperInner=document.createElement("div"),this.splitHandleContainerWrapperInner.className="split-handle-container-wrapper-inner",this.splitHandleContainerWrapper.appendChild(this.splitHandleContainerWrapperInner),this.splitHandleContainer=document.createElement("div"),this.splitHandleContainer.className="split-handle-container",this.splitHandleContainerWrapperInner.appendChild(this.splitHandleContainer);const a=document.createElement("div");a.className="split-handle-inner",this.splitHandleContainer.appendChild(a);const s=document.createElement("div");s.className="split-handle-line",a.appendChild(s);const o=document.createElement("div");o.className="split-handle-box",a.appendChild(o),this.containerElement.appendChild(this.splitHandleContainerWrapper),this.gridElement=document.createElement("div"),this.gridElement.className="media-controller-grid",this.containerElement.appendChild(this.gridElement),this.canvasContainer.addEventListener("pointerdown",this.handleMove),this.eventListeners.canvasMove=()=>{this.canvasContainer.removeEventListener("pointerdown",this.handleMove),delete this.eventListeners.canvasMove},window.addEventListener("scroll",this.handleWindowScroll),this.eventListeners.windowScroll=()=>{window.removeEventListener("scroll",this.handleWindowScroll),delete this.eventListeners.windowScroll},this.containerElement.addEventListener("wheel",this.handleWheelEvent,{passive:!1}),this.eventListeners.wheel=()=>{this.containerElement.removeEventListener("wheel",this.handleWheelEvent),delete this.eventListeners.wheel};const r=function(e,t=33,i=!1){let n=0;const a=this;return function(){const s=a,o=arguments,r=i&&!n;clearTimeout(n),cancelAnimationFrame(n),n=setTimeout((function(){n=requestAnimationFrame((function(){n=0,i||e.apply(s,o)}))}),t),r&&e.apply(s,o)}}(this.updateCanvasDimensions);this.resizeObserver=new ResizeObserver((()=>r())),this.resizeObserver.observe(this.containerElement),this.splitHandleContainer.addEventListener("pointerdown",this.handleSplitMove),this.eventListeners.splitMove=()=>{this.splitHandleContainer.removeEventListener("pointerdown",this.handleSplitMove),delete this.eventListeners.splitMove},this.setGrid(this.grid),this.setAntialias(this.antialias),this.setSpeed(this.speed)}dispose=()=>{this.positionUpdateCallback=()=>{},this.playStateUpdateCallback=()=>{},this.seekStateUpdateCallback=()=>{},this.timeUpdateCallback=()=>{},this.timeDataCallback=()=>{},this.setTimeUpdateCallback=()=>{},this.playing=!1,cancelAnimationFrame(this.drawTimer),cancelAnimationFrame(this.singleCanvasTimer),Object.keys(this.eventListeners).forEach((e=>"function"==typeof this.eventListeners[`${e}`]?this.eventListeners[`${e}`]():void 0)),this.resizeObserver.disconnect(),this.renderers.forEach((e=>this.deleteMedia(e.id))),this.videoContainer.remove(),this.canvasContainer.remove(),this.splitHandleContainer.remove(),this.splitHandleContainer=null,this.splitHandleContainerWrapperInner.remove(),this.splitHandleContainerWrapperInner=null,this.splitHandleContainerWrapper.remove(),this.splitHandleContainerWrapper=null,this.gridElement.remove(),this.gridElement=null,this.renderers.clear(),this.media.clear(),this.videoElements.clear(),this.imageElements.clear()};addFrameImages=async(e,t)=>{await this.pause();const i=this.media.get(e);if(!i)return;this.media.set(e,{...i,frameImages:t,showFrameImages:!0});const n=this.renderers.get(e);n&&(await n.setFrameImages(t),this.drawFrameImage(n,this.media.get(e)))};removeFrameImages=async e=>{await this.pause();const t=this.media.get(e);if(!t)return;this.media.set(e,{...t,frameImages:[],showFrameImages:!0});const i=this.renderers.get(e);i&&(await i.removeFrameImages(),i.draw())};setFrameImagesVisibility=async(e,t)=>{await this.pause();const i=this.media.get(e);i&&(this.media.set(e,{...i,showFrameImages:t}),this.drawFrameImage(this.renderers.get(e),this.media.get(e)))};addMediaOverlay=async(e,t,i)=>{await this.pause();const n=N(t.timestamps,t.startTime,t.fps);if(i&&"video"===t.type){const e=i;e.dataset.mediaId=t.id,e.muted=t.muted,e.playbackRate=this.speed,this.videoElements.set(t.id,e),this.videoContainer.appendChild(e),await re(i,N(t.timestamps,this.time-n,t.fps))}else this.imageElements.set(t.id,i);this.media.set(t.id,{id:t.id,index:-1,width:t.width,height:t.height,fps:t.fps,timestamps:t.timestamps,type:t.type,startTime:n,shaderInputs:t.shaderInputs,shaderSettings:t.shaderSettings,shaderSource:t.shaderSource,duration:t.duration,x:t.x,y:t.y,z:t.z,visible:t.visible,overlayElement:null,sourceElement:i,muted:t.muted,frameImages:t.frameImages||[],showFrameImages:t.showFrameImages,showShader:t.showShader,infoTexts:t.infoTexts.slice(),showInfoText:t.showInfoText}),this.setMediaOverlay(e,t.id)};removeMediaOverlay=async e=>{await this.pause();const t=this.media.get(e);if(!t)return;const i=t.shaderInputs[Number(0)];this.media.set(t.id,{...t,shaderInputs:[],shaderSettings:{},shaderSource:"",overlayElement:null});const n=this.renderers.get(t.id);n&&(n.renderMode=this.M,await n.clearShader());if(!this.media.get(i))return;Array.from(this.media.values()).reduce(((e,n)=>e||n.id===i||n.id===t.id?e:n.shaderInputs.indexOf(i)>-1),!1)||this.deleteMedia(i)};addMedia=async(e,t)=>{await this.pause();const i=N(e.timestamps,e.startTime,e.fps);if(t&&"video"===e.type){const i=t;i.dataset.mediaId=e.id,i.muted=e.muted,i.playbackRate=this.speed,this.videoElements.set(e.id,i),this.videoContainer.appendChild(i)}else this.imageElements.set(e.id,t);const n=e.id;let a=this.mediaOrder.indexOf(n);-1===a&&(a=this.mediaOrder.length,this.mediaOrder.push(n));const s={id:n,index:a,width:e.width,height:e.height,fps:e.fps,timestamps:e.timestamps,type:e.type,startTime:i,shaderInputs:e.shaderInputs,shaderSettings:e.shaderSettings,shaderSource:e.shaderSource,duration:e.duration,x:e.x,y:e.y,z:e.z,visible:e.visible,overlayElement:null,sourceElement:t,frameImages:e.frameImages,showFrameImages:e.showFrameImages,muted:e.muted,showShader:e.showShader,infoTexts:e.infoTexts.slice(),showInfoText:e.showInfoText};this.media.set(e.id,s);const o=new ne({id:n,index:a,width:e.width,height:e.height,type:e.type,shaderSettings:e.shaderSettings,shaderSource:e.shaderSource,x:e.x||0,y:e.y||0,z:e.z?e.z:100,frameImages:e.frameImages,sourceElement:t},this.canvasContainer,{...this.position},this.renderMode,this.displayRenderMode,e.showInfoText);this.renderers.set(n,o),o.contentContainer.setAttribute("data-hide",e.visible?"false":"true");const r=this.media.get(e.mediaOverlay);(r&&!r.visible||!s.showShader)&&o.setFilterVisibility(!1),await re(t,N(e.timestamps,this.time-i,e.fps)),await this.drawFrameImage(o,s),this.setMediaOrder(this.mediaOrder),this.updateMediaTimeData(),await this.updateShaderInputs(n),this.renderInfoTexts(o,this.media.get(s.id))};setMediaOverlay=async(e,t)=>{await this.pause();const i=this.media.get(e),n=this.media.get(t),a=this.renderers.get(e);if(!i||!a)return;const s=i.shaderInputs[Number(0)];if(s&&s!==t){Array.from(this.media.values()).reduce(((e,t)=>e||t.id===s||t.id===i.id?e:t.shaderInputs.indexOf(s)>-1),!1)||this.deleteMedia(s)}const o=i.sourceElement,r=n?n.sourceElement:void 0;this.media.set(e,{...i,overlayElement:r,shaderInputs:[t]}),a.loadInputs(o,r),n.visible&&i.showShader||a.setFilterVisibility(!1),this.updateMediaTimeData(),this.renderInfoTexts(this.renderers.get(a.id),this.media.get(i.id))};deleteMedia=async e=>{await this.pause();const t=this.renderers.get(e);this.renderers.delete(e),t&&t.dispose();const i=this.videoElements.get(e);this.videoElements.delete(e),i&&(i.pause(),i.src="",i.remove());const n=this.imageElements.get(e);this.imageElements.delete(e),n&&(n.src="",n.remove()),this.setMediaOrder(this.mediaOrder.filter((t=>t!==e))),this.media.delete(e),this.updateMediaTimeData(),await this.updateShaderInputs(e)};addShaderMedia=(e,t)=>{const i={error:"",inputIds:[],settings:{}};if(!t)return i.error="Invalid shader data",i;if(i.settings=Y(t.UI),t.inputs)for(0===t.inputIds.length&&(t.inputIds=Array.from(this.media.values()).reduce(((e,i)=>"filter"===i.type||e.length===t.inputs?e:e.concat([i.id])),[]));t.inputIds.length<t.inputs;)t.inputIds.push("");i.inputIds=t.inputIds;let n,a,s=this.mediaOrder.indexOf(e);-1===s&&(s=this.mediaOrder.length,this.mediaOrder.push(e));let o=0,r=0;if(t.inputIds[0]){const e=this.media.get(t.inputIds[0]);if(e&&e.sourceElement){n=e.sourceElement;const t=de(n);o=t.width,r=t.height}}if(t.inputIds[1]){const e=this.media.get(t.inputIds[1]);if(e&&e.sourceElement){a=e.sourceElement;const t=de(a);n?(o=Math.min(o,t.width),r=Math.min(r,t.height)):(o=t.width,r=t.height)}}const l={id:e,index:s,width:o,height:r,fps:0,timestamps:[],type:"filter",startTime:0,shaderInputs:i.inputIds,shaderSettings:i.settings,shaderSource:t.source,duration:0,x:0,y:0,z:100,visible:!0,overlayElement:a,sourceElement:n,muted:!0,frameImages:[],showFrameImages:!0,showShader:!0,infoTexts:[],showInfoText:!1};this.media.set(e,l);const d=new ne({id:e,index:s,width:l.width,height:l.height,type:l.type,shaderSettings:l.shaderSettings,shaderSource:t.source,x:l.x||0,y:l.y||0,z:l.z?l.z:100,frameImages:l.frameImages,sourceElement:n,overlayElement:a},this.canvasContainer,{...this.position},this.renderMode,this.displayRenderMode,!1);return this.renderers.set(e,d),d.contentContainer.setAttribute("data-hide",l.visible?"false":"true"),this.drawFrameImage(d,l),this.setMediaOrder(this.mediaOrder),this.updateMediaTimeData(),i};updateShaderSource=async(e,t)=>{await this.pause();const i=this.media.get(e);if(!i)return;this.media.set(e,{...i,shaderSource:t});const n=this.renderers.get(e);n&&n.setShaderSource(t)};updateShaderInputs=async e=>{await this.pause();const t=this.media.has(e),i=[];this.media.forEach((t=>{t.id!==e&&"filter"===t.type&&t.shaderInputs.indexOf(e)>-1&&i.push(t)})),i.forEach((i=>{const n=this.renderers.get(i.id),a=i.shaderInputs.slice();if(t){if(n){const e=this.media.get(a[0])||{},t=this.media.get(a[1])||{};n.loadInputs(e.sourceElement,t.sourceElement)}}else{const t=a.map((t=>t!==e?t:"")),s=this.media.get(t[0])||{},o=this.media.get(t[1])||{};this.media.set(i.id,{...i,shaderInputs:t}),n.loadInputs(s.sourceElement,o.sourceElement)}}))};updateShaderInput=(e,t,i)=>{const n=this.media.get(e);if(!n)return[];const a=n.shaderInputs.slice();if(a.indexOf(i)===t)return a;a[Number(t)]=i,this.media.set(e,{...n,shaderInputs:a});const s=this.renderers.get(e);if(s){let e,t;a.forEach(((i,n)=>{const a=this.media.get(i);a&&(0===n&&(e=a.sourceElement),1===n&&(t=a.sourceElement))})),s.loadInputs(e,t)}return a};updateShaderSetting=async(e,t,i)=>{const n=this.media.get(e);if(!n)return{};const a=Y(n.shaderSettings);return a[`${t}`]={...a[`${t}`]||{},value:i},await this.updateShaderSettings(e,a),a};updateShaderSettings=async(e,t)=>{await this.pause();const i=this.media.get(e);if(!i)return;this.media.set(i.id,{...i,shaderSettings:t});const n=this.renderers.get(i.id);n&&n.setShaderSettings({...t,exposure:{name:"exposure",value:this.exposure,type:"float"},gamma:{name:"gamma",value:this.gamma,type:"float"}})};getMediaElement=e=>{let t=this.videoElements.get(e);return t||(t=this.imageElements.get(e),t)};getScreenshot=e=>{const t=this.renderers.get(e);if(t)return t.getScreenshot()};getNewMediaStartTimeFromFrame=(e,t)=>{const i=this.media.get(e);if(!i)return;let n=i.startTime;return t?n+=G(i.fps):n-=G(i.fps),{id:e,duration:i.duration,time:n,fps:i.fps}};setAntialias=e=>{this.antialias=e,this.containerElement.setAttribute("data-antialias",this.antialias.toString()),this.drawFrameImages()};setExposure=e=>{this.exposure=te(e,1),this.media.forEach((e=>this.updateShaderSettings(e.id,e.shaderSettings)))};setGamma=e=>{this.gamma=te(e,1),this.media.forEach((e=>this.updateShaderSettings(e.id,e.shaderSettings)))};setStartTime=async e=>{await this.pause();const t=Math.min(Math.max(this.minStartTime,e),this.endTime-G(this.fps));return this.startTime=B(V(t,this.fps)),this.triggerTimeDataUpdate(),this.startTime>this.time&&await this.seek(this.startTime),this.startTime};setEndTime=async e=>{await this.pause();const t=this.minStartTime,i=Array.from(this.media.values()).reduce(((e,t)=>"video"!==t.type?e:Math.min(e,t.duration+t.startTime)),this.duration),n=Math.max(this.startTime+G(this.fps),Math.min(i,Math.max(t+G(this.fps),e)));return this.S=B(V(n,this.fps)),this.triggerTimeDataUpdate(),this.endTime<this.time&&await this.seek(this.endTime),this.endTime};setMediaStartTime=async(e,t)=>{await this.pause();const i=this.media.get(e);if(!i||"video"!==i.type)return;const n=G(i.fps);let a=Math.min(t,this.endTime-2*G(this.fps)),s=a+i.duration;this.media.forEach(((t,o)=>{o!==e&&"video"===t.type&&s<t.startTime&&(a=t.startTime+n-i.duration,s=a+i.duration)})),a=Math.max(a,this.startTime+n-i.duration),this.media.set(e,{...i,startTime:N(i.timestamps,a,i.fps)}),this.updateMediaTimeData();const o=this.minStartTime;let r=!1;return o>this.startTime&&(this.startTime=o,r=!0),this.endTime>a+i.duration&&(this.S=B(V(a+i.duration,this.fps)),r=!0),r&&this.triggerTimeDataUpdate(),this.time<=this.startTime?this.seek(this.startTime):this.time>=this.endTime?this.seek(this.endTime):this.seek(this.time),a};setGrid=e=>{const t=Math.max(0,Math.min(3,e));return this.grid=t,this.containerElement.setAttribute("data-grid",t.toString()),this.grid};setLooping=e=>{this.looping=ae(e)};setMediaOrder=e=>{this.mediaOrder=e.slice(),e.forEach(((e,t)=>{const i=this.renderers.get(e);i&&i.setIndex(t)})),this.setLayoutVisibility(),this.updateContentDimensions(),this.setPosition({})};setMediaPosition=(e,t)=>{const i=this.media.get(e);if(!i)return;this.media.set(e,{...i,...t});const n=this.renderers.get(e);n&&(n.z=void 0===t.z?n.z:t.z,n.x=void 0===t.x?n.x:t.x,n.y=void 0===t.y?n.y:t.y,n.updateTransform())};setSpeed=async e=>(await this.pause(),this.speed=e,this.videoElements.forEach((e=>{e.playbackRate=this.speed})),this.speed);setPreserveDimensions=e=>{this.preserveDimensions=$(e),this.preserveDimensions&&!this.C&&this.setUseSingleCanvas(!0),this.updateCanvasDimensions()};setLayout=e=>{if(-1===y.indexOf(e))return this.layout;this.layout!==e&&(this.layout=e,this.setLayoutVisibility(),this.updateContentDimensions(),this.setPosition({}))};setLayoutVisibility=()=>{let e=0;const t=()=>{this.containerElement.setAttribute("data-layout-split",("split"===this.layout&&e>1).toString())},i=()=>{t(),this.setSplitPosition(this.splitPosition)};if("split"===this.layout){let t=0;for(;t<this.mediaOrder.length&&e<2;){const i=this.media.get(this.mediaOrder[Number(t)]);i&&i.visible&&(e+=1),t+=1}if(e>=2)return i()}(()=>{t(),this.renderers.forEach((e=>{e.contentContainer.setAttribute("data-layout-split-hide-item","false"),e.contentContainer.style.removeProperty("clip-path")}))})()};setPosition=e=>{const t=(e,t,i)=>this.renderers.forEach((n=>n.updatePosition(e,t,i))),i=(e,t)=>void 0===e||Number.isNaN(e)?t:e,n=(e,t,i)=>e!==this.position.x||t!==this.position.y||i!==this.position.z,a=void 0!==e.z&&void 0===e.x&&void 0===e.y,{contentWidth:s,contentHeight:o,minZoom:r}=this.viewportDimensions;let l=this.viewportDimensions.paneWidth,d=this.viewportDimensions.paneHeight;this.C&&(l=this.preserveDimensions&&"split"!==this.layout?this.viewportDimensions.fitPaneWidth/this.mediaToRender().length:this.viewportDimensions.fitPaneWidth,d=this.viewportDimensions.fitPaneHeight);let c=Math.max(r,i(e.z,this.position.z));if(this.integerScaling){c=this.position.z>c?100*Math.max(1,Math.floor(c/100)):100*Math.max(1,Math.ceil(c/100))}c=te(c,100);const h=c/100;if(a){const e=this.layout,i=this.mediaToRender().length,a=this.canvasContainer.getBoundingClientRect(),s=a.height/2+a.top;let o=a.width/2+a.left;"split"!==e&&(o/=i);const{x:r,y:l}=se({currentPositions:this.position,newZoomFraction:c/100,zoomFraction:this.position.z/100,fitToContent:this.C,pageX:o,pageY:s,mediaLength:i,box:a,contentPositionData:this.viewportDimensions,layout:e}),d=n(r,l,c);return this.position={x:r,y:l,z:c},d&&(this.triggerPositionUpdate({x:r,y:l,z:c}),t(r,l,c)),{x:r,y:l,z:c}}const{x:u,y:m}=oe(i(e.x,this.position.x),i(e.y,this.position.y),h,s,o,l,d),p=n(u,m,c);return this.position={x:u,y:m,z:c},p&&this.triggerPositionUpdate({x:u,y:m,z:c}),t(u,m,c),{x:u,y:m,z:c}};setSplitPosition=e=>{this.splitPosition=e,this.splitHandleContainer.style.left=100*e+"%";const t="data-layout-split-hide-item";let i=0;const n=e=>{e.setAttribute(t,"true"),e.style.removeProperty("clip-path")};this.mediaOrder.forEach((a=>{const s=this.media.get(a),o=this.renderers.get(a);if(!s||!o)return;const r=o.contentContainer;s.visible?(i+=1,i>2?n(r):2===i?(r.setAttribute(t,"false"),r.style.clipPath=`inset(0% 0% 0% ${100*e}%)`):(r.setAttribute(t,"false"),r.style.clipPath=`inset(0% ${100*(1-e)}% 0% 0%)`)):n(r)}))};setUseSingleCanvas=e=>{this.useSingleCanvas=e};updateMediaTimeData=()=>{0===this.videoElements.size&&(this.fps=0,this.maxContentDuration=0,this.duration=0,this.minStartTime=0,this.time=0,this.startTime=0,this.S=void 0,this.triggerTimeDataUpdate());let e=0,t=0,i=0,n=1e29;this.media.forEach((a=>{"video"===a.type&&(a.fps&&(t=Math.max(a.fps,t)),a.duration&&(n=Math.min(a.duration,n),i=Math.max(a.duration,i)),e=Math.max(a.startTime,e))})),this.fps=t,this.maxContentDuration=i,this.duration=n,this.minStartTime=e,this.triggerTimeDataUpdate()};updateCanvasDimensions=()=>{const e=this.containerElement.getBoundingClientRect();this.containerHeight=e.height,this.containerWidth=e.width;const t=this.canvasContainer;t&&(t.style.width=`${e.width}px`,t.style.height=`${e.height}px`),this.updateContentDimensions(),this.setPosition({})};updateContentDimensions=()=>{const e=this.mediaToRender(),t=e.reduce(((e,t)=>({width:Math.max(e.width,t.width),height:Math.max(e.height,t.height)})),{width:0,height:0}),i="split"===this.layout&&e.length>1,n=i||this.preserveDimensions,a=this.containerWidth/(n?1:e.length||1),s=this.containerHeight,o=t.width||a,r=t.height||s;let l=Math.min(100,100*Math.min(a/o,s/r));const d=n?o:o*e.length,c=r,h=Math.floor(d/(n?1:e.length||1)),u=c;let m=Math.min(this.containerWidth/d,this.containerHeight/c);!Number.isNaN(m)&&Number.isFinite(m)&&m||(m=1),this.C&&(l=100);const p={width:this.containerWidth,height:this.containerHeight,contentWidth:o,contentHeight:r,paneHeight:s,paneWidth:a,minZoom:Number.isNaN(l)?100:l,fitScale:m,fitWidth:n?o:o*e.length,fitHeight:c,fitPaneWidth:h,fitPaneHeight:u},g=Object.keys(p).filter((e=>p[`${e}`]!==this.viewportDimensions[`${e}`])).length>0;this.viewportDimensions=p;const b=this.splitHandleContainerWrapperInner;if(b)if(i&&this.C){const e=this.viewportDimensions.height/this.viewportDimensions.fitHeight*this.viewportDimensions.fitWidth;e<this.viewportDimensions.width?b.style.width=e/this.viewportDimensions.width*100+"%":b.style.removeProperty("width")}else b.style.removeProperty("width");const v=this.canvasContainer;g&&v&&v.dispatchEvent(new CustomEvent("canvas-resized",{composed:!0,bubbles:!0,detail:{...this.viewportDimensions,controllerID:v.id}}))};draw=()=>{cancelAnimationFrame(this.drawTimer),this.renderers.forEach((e=>{e.showFrameImage=!1,e.render()})),this.playing&&(this.drawTimer=requestAnimationFrame(this.draw))};mediaFrameIndex=e=>((e,t,i)=>{const n=.1/i,a=Math.abs(B(t));if(!e||!e.length)return a;let s=0;for(;s<e.length;){if(e[Number(s)]+n>=a)return s;s+=1}return s})(e.timestamps,this.time-e.startTime,e.fps);mediaFrameImage=e=>e.frameImages[Number(this.mediaFrameIndex(e))];drawFrameImages=()=>this.media.forEach((e=>this.drawFrameImage(this.renderers.get(e.id),e)));drawFrameImage=async(e,t)=>{if(!e||!t)return;if(!t.showFrameImages||!t.frameImages||!t.frameImages.length)return e.showFrameImage=!1,void e.draw();const i=this.mediaFrameImage(t);i?(e.showFrameImage=!1,await e.draw(),e.showFrameImage=!0,e.drawFrameImage(i)):(e.showFrameImage=!1,e.draw())};drawSingleCanvas=()=>{cancelAnimationFrame(this.singleCanvasTimer);const e=this.singleCanvasContext,t=this.mediaToRender(),i=this.viewportDimensions.fitPaneWidth,n=this.viewportDimensions.fitPaneHeight,a=this.viewportDimensions.fitWidth,s=this.viewportDimensions.fitHeight,o=this.viewportDimensions.fitWidth,r=this.viewportDimensions.fitHeight,{x:l,y:d}=this.position,c=this.preserveDimensions,h="split"===this.layout&&t.length>1,u=c&&!h?1/t.length:this.splitPosition,m=l,p=d,g=this.position.z/100;e.canvas.width=o,e.canvas.height=r,t.forEach(((t,l)=>{const d=this.renderers.get(t.id);if(!d)return;const b={x:d.x,y:d.y,z:d.z},v=d.canvas?d.canvas.width:0,f=d.canvas?d.canvas.height:0,y={common:{width:a,height:s,x:m,y:p,zoomFraction:g},pane:{width:i,height:n,x:h||c?l*(i*u):l*i,split:u},media:{width:v,height:f,x:b.x,y:b.y,z:b.z},splitScreen:h,preserveDimensions:c,index:l,canvas:{width:o,height:r}},{srcX:x,srcY:w,srcWidth:k,srcHeight:z,dstX:S,dstY:M,dstWidth:C,dstHeight:j}=function(e){let t=0,i=0,n=0,a=0,s=0,o=0,r=0,l=0;const d=e.index,c=e.pane.split,h=e.common.zoomFraction,u=e.common.x,m=e.common.y,p=e.canvas.width,g=e.canvas.height,b=e.media.x,v=e.media.y,f=e.media.z/100,y=e.media.width*f*h,x=e.media.height*f*h;let w=e.pane.width;e.preserveDimensions&&!e.splitScreen?w=p*c:e.splitScreen&&(w=p*(0===d?c:1-c));const k=e.splitScreen?g:e.pane.height;let z=d*e.pane.width,S=-(b+u),M=S*h;(e.splitScreen||e.preserveDimensions)&&d>0&&(z=p*c,M+=z,e.preserveDimensions&&!e.splitScreen?S-=z/h:S+=z/h);let C=M>0?Math.min(y-M,w):Math.min(y,w+M);e.preserveDimensions&&!e.splitScreen&&d>0?(C=Math.max(y-M,w),t=S/f+z/h):t=S<0?0:S/f,n=C/h/f,s=(e.preserveDimensions||e.splitScreen)&&d>0?(M<0?-M:0)+z*d:(M<0?-M:0)+z,r=C;const j=-(v+m),L=j*h,E=L>0?Math.min(x-L,k):Math.min(x,k+L);return i=j<0?0:j/f,a=E/h/f,o=L<0?-L:0,l=E,{srcX:t,srcY:i,srcWidth:n,srcHeight:a,dstX:s,dstY:o,dstWidth:r,dstHeight:l}}(y);j<=0||C<=0||(e.imageSmoothingEnabled=this.antialias,e.drawImage(d.canvas,x,w,k,z,S,M,C,j))})),this.C&&(this.singleCanvasTimer=requestAnimationFrame(this.drawSingleCanvas))};clearVideoEvents=()=>{this.videoElements.forEach((e=>{e.onplaying=null,e.onpause=null,e.onwaiting=null,e.onstalled=null,e.onsuspend=null}))};setVideoEvents=()=>{const e={},t=async e=>{const t=this.playing;t&&this.containerElement.dispatchEvent(new CustomEvent("video-stall",{composed:!0,bubbles:!0,detail:{id:e}})),await this.pause(),t&&await this.play()},i=i=>{const n=e[`${i}`];n?n.stalled||(n.stalled=!0,n.time=(new Date).getTime(),n.timer=setTimeout((()=>t(i)),1e3)):e[`${i}`]={id:i,stalled:!0,time:(new Date).getTime(),timer:setTimeout((()=>t(i)),1e3)}};this.videoElements.forEach((t=>{const n=t.dataset.mediaId;t.onwaiting=()=>i(n),t.onstalled=()=>i(n),t.onplaying=()=>(t=>{e[`${t}`]&&(clearTimeout(e[`${t}`].timer),e[`${t}`].stalled=!1,e[`${t}`].time=(new Date).getTime())})(n)}))};play=async(e=!0)=>{if(this.renderers.forEach((e=>{e.showFrameImage=!e.sourceElement})),this.playing||this.seeking||0===this.videoElements.size)return;const t=()=>{this.elementForTime&&(this.elementForTime.ontimeupdate=null),this.elementForTime=null};t(),this.clearVideoEvents();const i=this.time;await this.seek(i,e),this.playing=!0;let n=!1;const a=()=>{n||(n=!0,t(),this.handleEnded())};if(await Promise.all(Array.from(this.videoElements.values()).map((e=>(e.muted&&this.elementForTime||(this.elementForTime=e),e.onended=()=>a(),e.play())))),!this.elementForTime)return this.pause();this.setVideoEvents(),this.elementForTime.ontimeupdate=()=>{if(this.time=this.getCurrentTime(),this.triggerTimeUpdate(),this.endTime&&this.time>=this.endTime)return this.handleEnded()},this.drawTimer=requestAnimationFrame(this.draw),this.triggerPlayStateUpdate(),this.triggerSetTimeUpdate()};pause=async(e=!0)=>(cancelAnimationFrame(this.drawTimer),this.playing?(this.playing=!1,this.clearVideoEvents(),this.elementForTime&&(this.elementForTime.ontimeupdate=null,this.elementForTime.pause()),this.elementForTime=null,this.videoElements.forEach((e=>{e.onended=null,e.ontimeupdate=null,e.pause()})),this.time=this.getCurrentTime(),await this.seek(this.time),e&&this.drawFrameImages(),this.triggerPlayStateUpdate(),this.triggerSetTimeUpdate(),Promise.resolve()):Promise.resolve());seek=async(e,t=!0)=>{if(Number.isNaN(e)||0===this.fps||Number.isNaN(this.fps))return Promise.resolve(this.getCurrentTime());this.seeking=!0,this.triggerSeekingUpdate(),await this.pause();const i=Math.max(this.startTime,Math.min(this.endTime,B(e)));return await Promise.all(Array.from(this.videoElements.values()).map((e=>{const t=e.dataset.mediaId,n=this.media.get(t);return n&&"video"===n.type?re(e,N(n.timestamps,i-n.startTime,n.fps)):Promise.resolve(void 0)}))),this.seeking=!1,this.time=this.getCurrentTime(),t&&this.drawFrameImages(),this.triggerTimeUpdate(),this.triggerSetTimeUpdate(),this.triggerSeekingUpdate(),this.triggerPlayStateUpdate(),this.time};nextFrame=async()=>{const e=this.time+G(this.fps);await this.seek(e)};previousFrame=async()=>{const e=this.time-G(this.fps);await this.seek(e)};getCurrentTime=()=>{let e=0;return this.videoElements.forEach((t=>{const i=t.dataset.mediaId,n=this.media.get(i);if(!n||"video"!==n.type)return;const a=N(n.timestamps,Math.max(0,t.currentTime-.001),n.fps)+(n.startTime||0);e=Math.max(e,Number.isNaN(a)?e:a)})),e};mediaToRender=()=>this.mediaOrder.reduce(((e,t)=>{const i=this.media.get(t);return i&&i.visible?e.concat([i]):e}),[]).slice(0,"tile"===this.layout?void 0:2);setMediaMuted=async(e,t)=>{const i=this.playing;await this.pause(),this.videoElements.forEach((i=>{i.dataset.mediaId===e?i.muted=t:i.muted=!0;const n=this.media.get(e);n&&this.media.set(n.id,{...n,muted:n.id!==e||t})})),i&&await this.play()};setMediaVisibility=(e,t)=>{const i=this.media.get(e);if(!i)return;this.media.set(e,{...i,visible:t});const n=this.renderers.get(e);n&&n.contentContainer.setAttribute("data-hide",t?"false":"true"),this.setLayoutVisibility(),this.updateContentDimensions(),this.setPosition({})};setFilterVisibility=(e,t,i)=>{const n=this.media.get(i);n&&this.media.set(n.id,{...n,visible:t});const a=this.media.get(e);a&&this.media.set(a.id,{...a,showShader:t});const s=this.renderers.get(e);s&&s.setFilterVisibility(t)};toDataURL=()=>this.useSingleCanvas?this.singleCanvas.toDataURL():(console.warn("toDataURL is only available when useSingleCanvas is true"),"");toggleInfoText=(e,t)=>{const i=this.media.get(e);if(!i)return;this.media.set(e,{...i,showInfoText:t});const n=this.renderers.get(e);n&&(n.displayInfoText=t,this.renderInfoTexts(this.renderers.get(e),this.media.get(e)))};setMediaInfoTexts=(e,t)=>{const i=this.media.get(e);i&&(this.media.set(e,{...i,infoTexts:t}),this.renderers.forEach((e=>this.renderInfoTexts(e,this.media.get(e.id)))))};renderInfoTexts=(e,t)=>{if(!e||!t)return;const i=e=>t=>void 0===t.start||t.start<=e&&(void 0===t.end||t.end===t.start||t.end>e);let n=t.infoTexts.filter(i(this.time-t.startTime));t.shaderInputs.forEach((e=>{const t=this.media.get(e);t&&(n=n.concat(t.infoTexts.filter(i(this.time-t.startTime))))})),e.setInfoTexts(n)};handleWindowScroll=()=>{this.windowScrolling=!0,requestAnimationFrame((()=>{this.windowScrolling=!1}))};handleMove=e=>{if(this.isPinchZooming)return;e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),document.body.style.userSelect="none";const t=this.C?this.viewportDimensions.fitScale:1,i=this.C?(this.viewportDimensions.height-this.viewportDimensions.fitHeight*t)/2:0,n=this.C?(this.viewportDimensions.width-this.viewportDimensions.fitWidth*t)/2:0,a=this.canvasContainer.getBoundingClientRect();this.lastX=(e.clientX-a.left-n)/t,this.lastY=(e.clientY-a.top-i)/t;const s=e=>{const t=this.C?this.viewportDimensions.fitScale:1,i=this.C?(this.viewportDimensions.height-this.viewportDimensions.fitHeight*t)/2:0,n=this.C?(this.viewportDimensions.width-this.viewportDimensions.fitWidth*t)/2:0,a=this.canvasContainer.getBoundingClientRect(),s=(e.clientX-a.left-n)/t,o=(e.clientY-a.top-i)/t,r=this.position.z/100,l=this.position.x+(s-this.lastX)/r,d=this.position.y+(o-this.lastY)/r;this.setPosition({x:l,y:d}),this.lastX=s,this.lastY=o},o=e=>{e.preventDefault(),document.body.style.removeProperty("user-select"),this.lastX=0,this.lastY=0,window.removeEventListener("pointermove",s),window.removeEventListener("pointerup",o),window.removeEventListener("pointerleave",o)};window.addEventListener("pointermove",s),window.addEventListener("pointerup",o),window.addEventListener("pointerleave",o),this.containerElement.dispatchEvent(new Event("icat-focus",{composed:!0,bubbles:!0}))};handleWheelEvent=(e,t=!1)=>{if(this.windowScrolling||this.isPinchZooming)return;e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();const i=e.deltaY<0?1:-1,n=Math.exp(.062*i);let a=Math.ceil(Math.min(1e8,this.position.z*n))/100;if(t){a=this.position.z/100>a?Math.max(1,Math.floor(a)):Math.max(1,Math.ceil(a))}const{x:s,y:o}=se({pageX:e.pageX,pageY:e.pageY,currentPositions:this.position,newZoomFraction:a,zoomFraction:this.position.z/100,fitToContent:this.C,mediaLength:this.mediaToRender().length,box:this.canvasContainer.getBoundingClientRect(),contentPositionData:this.viewportDimensions,layout:this.layout}),r=100*a;this.setPosition({x:s,y:o,z:r})};handleEnded=async()=>{const e=this.playing;await this.pause(!this.looping),e&&(await this.seek(this.startTime,!this.looping),this.looping&&await this.play(!this.looping))};handleSplitMove=e=>{const t=this.splitHandleContainer.getBoundingClientRect(),i=e.clientX-(t.left+t.width/2),n=e=>{e.preventDefault();const t=this.canvasContainer.getBoundingClientRect(),n=Math.min(1,Math.max(0,Math.round((e.clientX-t.left-i)/t.width*1e3)/1e3));this.setSplitPosition(n)},a=e=>{e.preventDefault(),document.body.style.removeProperty("user-select"),window.removeEventListener("pointermove",n),document.removeEventListener("pointerup",a),document.removeEventListener("pointerleave",a)};e.preventDefault(),document.body.style.userSelect="none",window.addEventListener("pointermove",n),document.addEventListener("pointerup",a),document.addEventListener("pointerleave",a)};triggerTimeDataUpdate=()=>{const e=this.endTime,t=this.startTime,i=this.fps,n=this.maxContentDuration,a=e-t,s=this.time,o=s-t,r=B(o),l=J(Math.max(0,o),i),d=Math.min(1,Math.max(0,o/(e-t))),c={time:s,effectiveTime:r,duration:a,durationText:J(a,i),maxContentDuration:n,fps:this.fps,startTime:t,endTime:e,timeString:l,progress:d};"function"==typeof this.timeDataCallback&&this.timeDataCallback(c),this.triggerTimeUpdate()};triggerTimeUpdate=()=>{this.renderers.forEach((e=>this.renderInfoTexts(e,this.media.get(e.id))));const e=this.endTime,t=this.startTime,i=this.fps,n=this.time-t,a=B(n),s=J(n,i),o=Math.min(1,Math.max(0,n/(e-t))),r={number:a,frame:Math.round(a/G(i)),string:s,progress:o};"function"==typeof this.timeUpdateCallback&&this.timeUpdateCallback(r)};triggerSetTimeUpdate=()=>{"function"==typeof this.setTimeUpdateCallback&&this.setTimeUpdateCallback(this.time)};triggerPlayStateUpdate=()=>{"function"==typeof this.playStateUpdateCallback&&this.playStateUpdateCallback(this.playing)};triggerSeekingUpdate=()=>{"function"==typeof this.seekStateUpdateCallback&&this.seekStateUpdateCallback(this.seeking)};triggerPositionUpdate=e=>{"function"==typeof this.positionUpdateCallback&&this.positionUpdateCallback(e)}}const he={showThumbs:0,integerScaling:!1,setOrder:"alphabetic",mediaOrder:"alphabetic"},ue=JSON.stringify(he),me={get:()=>({...he,...JSON.parse(localStorage.getItem("icat_settings")||ue)}),set:e=>localStorage.setItem("icat_settings",JSON.stringify({...he,...me.get(),...e}))},pe=15,ge=100;function be(e,t,i,n,a){let s,o,r=document.createElement("canvas").getContext("2d"),d=!1,c=()=>{};const h=()=>{o&&(o.onerror=null,o.src="",o=null),r=null,s=null};if("video"!==i)(async function(e,t,i){return e&&t?i?(P(i,t.canvas),Promise.resolve(t.canvas.toDataURL("image/png"))):new Promise((i=>{let n=new Image;n.onload=()=>{if(!n)return i("");const e=n.height*(ge/n.width);t.canvas.width=ge,t.canvas.height=e,t.drawImage(n,0,0,ge,e),requestAnimationFrame((()=>{i(t.canvas.toDataURL("image/png")),n&&(n.src=""),n=null}))},n.src=e})):Promise.reject()})(t,r,s).then((e=>{d||(n(new Array(pe).fill(e)),a())}));else{o=document.createElement("video"),o.muted=!0,o.onerror=h;try{c=function(e,t,i,n,a,s){let o=!1;const r=[];let d=0;return(()=>{let c=!1;const h=async()=>{if(o)return;c=!0;const i=(t.videoHeight||t.height)*(ge/(t.videoWidth||t.width)),u=t.duration/pe;n.canvas.width=ge,n.canvas.height=i,n.drawImage(t,0,0,ge,i);let m=n.canvas.toDataURL("image/png");if(l.isElectron&&(m=l.pathToElectronUrl(await window.NvCompareApi.createFile(`${e}_thumb_${d}.png`,m))),r.push(m),a(r.slice()),d+=1,t.onseeked=h,d<pe&&""!==t.src)return requestAnimationFrame((()=>{""!==t.src&&(t.currentTime=u*d)}));t.onseeked=null,s()},u=()=>{if(!c&&!o)return 4===t.readyState&&t.videoHeight&&t.videoWidth?h():requestAnimationFrame(u)};t.playsInline=!0,t.preload="auto",t.src=i,t.currentTime=1e-4,u()})(),()=>{o=!0}}(e,o,t,r,(e=>{if(d)return c(),void h();n(e)}),(()=>{if(d)return c(),void h();a(),h()}))}catch(e){if(console.warn(e),d)return;a()}}return()=>{d=!0,c()}}const ve={"en-us":["(i.e. https://domain.com/path)","Absolute","Add filter","Add media","Add overlay","Add Overlay to annotate your comparison.","Adjust the clip offset to align the videos.","Angle","Automatically create sets","Average colors (slower)","Bilinear","Binary","Bitrate","Black-blue-violet-yellow-white","Bottom Left","Bottom Right","Can not display filter:","Cancel","Change playback speed","CIE-LAB difference","Click Add Media or drag and drop video/image files into this window to compare them.","Codec","Color mode","Comparison sets","Contrast error only","Control bar","Copy embed code","CTRL +","CTRL + 1-9","CTRL + f","Customization","Delete","Difference","Dimensions","Disable","Don't save","Download","Download FFmpeg source.","Duration","Embed code copied","Embed code copied to clipboard","Embed images in code","Embedded in webpage code","Enable","Error loading media","Error loading media, unsupported file type","Error logs path","Export","Export still images","Export video segments","Exporting video","Exposure","Files without matching names are marked in red and will be omitted.","Filtering mode","Format","FPS","Frame advance","Frames per second","Gamma","Gaussian blur","General","Generating image","Global layout","GPU","Grayscale","Grid overlay","Half radius sigma","Heatmap","Height","Help button","Hide all","Hide layout","Hosting media","If you choose to host media in a different location from the root, specify the URL below.","Image","Images can be embedded directly in webpage embed code without uploading them separately if the total file size is less than 10MB.","Import","Initial","Input","Integer scaling","Invalid file. Only files with the following extensions are accepted:","Invalid files. Only files with the following extensions are accepted:","Invert output","Jet","Jump to start","Label","Laplacian (five point)","Laplacian (nine point)","Laplacian variance","Large","Layout tabs","Left/Right PX","Let's Get Started","Local shaders","Luminance difference","Luminance error only","Mark Inf/NaN","Media","Media domain/path","Media selectors","Medium","Mode","Mouse drag","Mouse scroll wheel","Multiplier","Nearest Neighbor","New Project","No folders selected","None","None (SSIM default)","Off","On","Open","Overlay","Package webpage embed","Pan view","Per-channel differences","Pixelization","Play/Pause","Position keyframes","Preserve dimensions","Preview","Previous/Next set","Radius","Reload","Remove","Remove comparison set?","Remove media?","Reset","Reset playback speed","RGB difference","Same width and height","Save","Save project","Scale %","Scale to fit","Select folder","Select folders with matching file names and comparison sets will automatically be created.","Set","Sets select","Settings","Sharpness","Shortcuts","Show angle","Show Color Map Legend","Show layout","Show thumbnails","Side-by-side","Side-by-side mode","Sigma","Sign flip","Size","Slider keyframes","Small","Sobel","Solo media","Sort alphabetically","Sort by created","Space","Split screen","Split screen mode","Squared","SSIM","SSIM full","SSIM Mode","SSIM simplified","Start time","Structural error only","Symmetric","There was an error exporting your video","There was an error generating your webpage embed package, please try again.","This software uses code of FFmpeg licensed under the LGPLv2.1","This will remove the media from all comparison sets in this project. Do you want to remove this media?","Tiling","Title size","Toggle fullscreen","Tolerance","Top Left","Top Right","Type","Up/Down PX","Version","Video","View release notes","Web","Webpage embed package successfully saved","Weight Contrast","Weight Luminance","Weight Structure","Width","Would you like to save your current project before continuing?","X Radius","X Sigma","Y Radius","Y Sigma","Your GPU is having trouble decoding your media. For better performance, try closing all applications utilizing GPU resources and/or restarting your device.","Your media clips will remain in the Media panel, but anything you have done in this comparison set will be lost. Do you want to remove this set?","Your project has been saved","Zoom view"],"ar-sa":["(: https://.com/)",""," "," "," ","     .","    .","","  ","  ( )","",""," ","----"," "," ","   :","","  ","   CIE-LAB",'  " "     /     .',""," "," ","    "," ","  ","CTRL +","CTRL + 1-9","CTRL + f","","","","",""," ","","  FFmpeg.","","   ","    ","   ","     ","","     ","           ","  ","","  ","  "," ","","             ."," ","","  ","  ","  ",""," ",""," "," ","  ","  "," ","  "," ",""," "," "," "," ","           URL .","","                     10 .","","","","  ","  .     :","  .     :"," ",""," ","","  ( )","  ( )"," ","","  "," (/ )","","  "," ","     "," Inf/NaN","","/  "," ","","","  ","  ","","  "," ","    "," ","  (SSIM )","","","","","  "," (Pan)","    ","","/  ","  ","   ",""," / "," "," ","","    ","   "," ","   ","    ","  ",""," "," ","  "," ","         .","","  ","","",""," ","    "," ","  ","  ","   ",""," ","","  ","",""," "," ","  ",""," ","  ",""," ","  ","  ","   "," ","   ","","        ","             .","    (FFmpeg)   LGPLv2.1","              .     ",""," ","   "," "," "," ",""," (/ )",""," ","  ","","     "," "," "," ","","       ","  X"," X"," Y"," Y","           .              /   .","                .     ","  ","  "],"bg-bg":["(.. https://.com/)","","  ","  ","  ","       .","        .","","   ","  (-)","","","","----"," "," ","     :","","    ","CIE-LAB ","           /   ,    .",""," ","  ","   "," ","   ","CTRL +","CTRL + 1-9","CTRL + f","","","","",""," ","","  FFmpeg .","","  ","     ","    ","     ","","    ","    ,   ","    ","","  ","   ","  ","","           ."," ","","FPS","  ","  ",""," ","","  "," ","GPU"," ","  ","  "," ",""," ","  ","  ","  ","       ,   ,  URL -.","","                    ,       -  10 MB.","","","","   ","        :"," .       :","  ","","  ",""," ( )"," ( )"," ","","  ","/ PX"," "," ","  ","   ","  Inf/NaN","","/  ","  ","","","  ","   ","","-  "," ","  ",""," (SSIM  )","","","","","    "," ","   ","","/","   ","  "," ","/ ","","","","    ?","  ?","","    ","RGB ","   ","","  "," %","  ","  ","              .","","  ","",""," ","  ","     ","  ","  ","  ","   ","","  ","","   ","",""," ","   ","  ","","  ","    ","","SSIM"," SSIM","SSIM "," SSIM"," ","  ","","      ","          . ,  .","     FFmpeg,   LGPLv2.1","           .      ?","  ","  ","   ",""," "," ","","PX /","","","   ","","       ","  ","  ","  ","","      ,   ","X "," ","Y ","Y ","        .  -      ,     , /    .","       ,  ,           .      ?","   "," "],"cs-cz":["(tzn. https://domna.com/cesta)","Absolutn","Pidat filtr","Pidat mdia","Pidat pekryt","Pidejte pekryt pro okomentovn vaeho porovnn.","Upravte zatek/konec klipu pro zarovnn vide.","hel","Automaticky vytvoit soubory","Prmrn barvy (pomalej)","Bilinern","Binrn","Penosov rychlost","ern-modr-fialov-lut-bl","Vlevo dole","Vpravo dole","Nelze zobrazit filtr:","Zruit","Zmnit rychlost pehrvn","Rozdl mezi CIE a LAB","Kliknte na Pidat mdia nebo pethnte video/obrzkov soubory do tohoto okna pro jejich porovnn.","Kodek","Barevn reim","Soubory porovnn","Pouze chyba kontrastu","Ovldac lita","Zkoprovat kd pro vloen","CTRL +","CTRL + 1-9","CTRL + f","Pizpsoben","Odstranit","Rozdl","Rozmry","Zakzat","Neukldat","Sthnout","Sthnte si zdroj FFmpeg.","Doba trvn","Kd pro vloen zkoprovn","Kd pro vloen byl zkoprovn do schrnky","Vloen obrzky v kdu","Vloeno v kdu webov strnky","Povolit","Chyba pi natn mdia","Chyba pi natn mdia, nepodporovan typ souboru","Cesta k chybovm protokolm","Exportovat","Exportovat statick obrzky","Exportovat video segmenty","Exportovn videa","Expozice","Soubory bez odpovdajcch nzv jsou oznaeny erven a budou vynechny.","Reim filtrovn","Formtovat","FPS","Posun po snmcch","Snmk za sekundu","Gama","Gaussovo rozosten","Obecn","Generovn obrzku","Globln rozvren","GPU","Stupnice ed","Mkov pekryt","Polomr sigma","Tepeln mapa","Vka","Tlatko npovdy","Skrt ve","Skrt rozvren","Hostovn mdi","Pokud se rozhodnete hostovat mdia v jinm umstn ne v koenovm adresi, zadejte ne pslunou adresu URL.","Snmek","Obrzky lze vloit pmo do kdu pro vloen do webov strnky, ani byste je museli nahrvat zvl, pokud je celkov velikost souboru men ne 10 MB.","Importovat","Poten","Vstup","Celoseln klovn","Neplatn soubor. Akceptovny jsou pouze soubory s nsledujcmi pponami:","Neplatn soubory. Akceptovny jsou pouze soubory s nsledujcmi pponami:","Invertovat vstup","Tryska","Peskoit na zatek","Oznaen","Laplacev opertor (ptibodov)","Laplacev opertor (devtibodov)","Odchylka Laplaceova opertoru","Velk","Rozvren karet","Lev/prav poloha","Pojme na to","Mstn shadery","Rozdl zivosti","Pouze chyba zivosti","Oznait jako nekoneno / nen slo","Mdia","Domna/cesta mdi","Volie mdi","Mdium","Reim","Petaen my","Rolovac koleko myi","Nsobitel","Nejbli sousedn","Nov projekt","Nevybrali jste dn sloky","dn","dn (vchoz nastaven SSIM)","Vypnuto","Zapnuto","Otevt","Pekryt","Balek vloench soubor pro webovou strnku","Panoramatick zobrazen","Rozdly mezi kanly","Pixelizace","Pehrt/Pozastavit","Klov snmky polohy","Zachovat rozmry","Nhled","Pedchoz/dal soubor","Polomr","Znovu nast","Odebrat","Odebrat soubor porovnn?","Odebrat mdia?","Resetovat","Resetovat rychlost pehrvn","Rozdl RGB","Stejn ka a vka","Uloit","Uloit projekt","Mtko %","Pizpsobit oknu","Vybrat sloku","Vyberte sloky s odpovdajcmi nzvy soubor a automaticky se vytvo soubory porovnn.","Soubor","Vbr soubor","Nastaven","Ostrost","Zstupce","Zobrazit hel","Zobrazit popis barevn mapy","Zobrazit rozvren","Zobrazit miniatury","Vedle sebe","Reim zobrazen vedle sebe","Sigma","Otoen znamnka","Velikost","Klov snmky posuvnku","Mal","Sobelv filtr","Jeden soubor mdia","adit abecedn","Seadit podle vytvoen","Mezernk","Rozdlit obrazovku","Reim rozdlen obrazovky","Na druhou","SSIM","SSIM pln","Reim SSIM","SSIM zjednoduen","as sputn","Pouze chyba struktury","Symetrick","Dolo k chyb pi exportovn videa","Pi generovn balku vloench soubor pro webovou strnku dolo k chyb, zkuste to znovu.","Tento software pouv kd FFmpeg licencovan v rmci LGPLv2.1.","Tm se odstran mdium ze vech soubor porovnn v tomto projektu. Chcete toto mdium odstranit?","Dladice","Velikost dladice","Pepnout zobrazen na celou obrazovku","Tolerance","Lev horn","Prav horn","Typ","Horn/doln poloha","Verze","Video","Zobrazit poznmky k verzi","Web","Balek vloench soubor pro webovou strnku byl spn uloen","Vha kontrastu","Vha zivosti","Vha struktury","ka","Chcete ped pokraovnm uloit aktuln projekt?","Polomr X","Sigma X","Polomr Y","Sigma Y","Vae jednotka GPU m pote s dekdovnm vaeho mdia. Pro zlepen vkonu zkuste zavt vechny aplikace, kter vyuvaj zdroje jednotky GPU, anebo restartovat zazen.","Vae mediln klipy zstanou v panelu mdi, ale ve, co jste provedli v tomto souboru porovnn, bude ztraceno. Chcete tento soubor odstranit?","V projekt byl uloen","Piblit zobrazen"],"da-dk":["(dvs. https://domne.com/sti)","Absolut","Tilfj filter","Tilfj medier","Tilfj overlay","Tilfj overlay for at anmrke din sammenligning.","Juster forskydningen af klippet for at rette videoerne ind efter hinanden.","Vinkel","Opretter automatisk st","Gennemsnitsfarver (langsommere)","Toliner","Binr","Bithastighed","Sort-bl-violet-gul-hvid","Nederst til venstre","Nederst til hjre","Kan ikke vise filteret:","Annuller","Skift afspilningshastighed","CIE-LAB forskel","Klik p Tilfj medier eller trk og slip video-/billedfiler ind i dette vindue for at sammenligne dem.","Codec","Farvetilstand","Sammenligningsst","Kun kontrastfejl","Kontrolpanel","Kopir indlejringskode","CTRL +","CTRL + 1-9","CTRL + f","Brugerdefinering","Slet","Forskel","Dimensioner","Deaktivr","Gem ikke","Download","Download FFmpeg-kilde.","Varighed","Indlejringskode kopieret","Indlejringskode er kopieret til udklipsholderen","Indlejringsbilleder i kode","Indlejret i websidekode","Aktivr","Fejl under indlsning af medier","Fejl under indlsning af medier, filtype understttes ikke","Sti til fejllogge","Eksportr","Eksportr stillbilleder","Eksportr videosegmenter","Eksporterer video","Eksponering","Filer uden matchende navne markeres med rdt og vil blive udeladt.","Filtreringstilstand","Format","FPS","Billedspring","Billeder pr. sekund","Gamma","Gaussian slring","Generelt","Genererer billede","Globalt layout","GPU","Grtone","Gitteroverlay","Halv radius sigma","Termisk kort","Hjde","Hjlp-knap","Skjul alt","Skjul layout","Hosting af medier","Hvis du vlger at hoste medier et andet sted end roden, skal du angive URL-adressen nedenfor.","Billede","Billeder kan indlejres direkte i websidens indlejringskode uden at uploade dem separat, hvis den totale filstrrelse er mindre end 10 MB.","Importr","Indledende","Input","Heltal skalering","Ugyldig fil. Det er kun disse filtyper som accepteres:","Ugyldige filer. Det er kun disse filtyper som accepteres:","Inverter output","Jet","Spring til start","Etiket","Laplacian (fem punkt)","Laplacian (ni punkt)","Laplacian varians","Stor","Layout faner","Venstre/hjre position","Lad os komme i gang","Lokale shadere","Luminans forskel","Kun kontrastfejl","Markr uendelig/ikke et nummer","Medier","Mediedomne/sti","Medievlgere","Mellem","Tilstand","Musetrk","Muserullehjul","Multiplikator","Nrmeste nabo","Nyt projekt","Der er ikke valgt nogen mapper","Ingen","Ingen (SSIM standard)","Fra","Til","bn","Overlay","Pakke til websideindlejring","Panoreringsvisning","Forskelle pr. kanal","Pixelisering","Afspil/pause","Nglebilleder til position","Bevar dimensioner","Vis udkast","Forrige/nste st","Radius","Genindls","Fjern","Fjern sammenligningsst?","Fjern medier?","Nulstil","Nulstil afspilningshastighed","RGB forskel","Samme bredde og hjde","Gem","Gem projekt","Skalering %","Skalr s det passer","Vlg mappe","Vlg mapper med matchende filnavne, og der vil automatisk blive oprettet sammenligningsst.","St","Vlg st","Indstillinger","Skarphed","Genveje","Vis vinkel","Vis beskrivelse af farvekort","Vis layout","Vis miniaturer","Side om side","Side om side-tilstand","Sigma","Vend tegn","Strrelse","Glidende nglebilleder","Lille","Sobel","Enkelt medie","Sortr alfabetisk","Sortr efter oprettelse","Mellemrum","Delt skrm","Delt skrm-tilstand","Firkantet","SSIM","SSIM fuld","SSIM tilstand","SSIM simplificeret","Starttidspunkt","Kun strukturfejl","Symmetrisk","Der opstod en fejl under eksportering af din video","Der opstod en fejl under generering af din websides indlejringspakke. Prv igen.","Denne software benytter kode af FFmpeg licenseret under LGPLv2.1","Dette vil fjerne medierne fra alle sammenligningsst i dette projekt. Vil du fjerne dette medie?","Side om side","Titelstrrelse","Skift fuld skrm","Tolerance","verst til venstre","verst til hjre","Type","Op/ned position","Version","Video","Vis produktbemrkninger","Web","Websidens indlejringspakke er blevet gemt","Vgtkontrast","Vgtluminans","Vgtstruktur","Bredde","Vil du gemme dit aktuelle projekt, fr du fortstter?","X radius","X sigma","Y radius","Y sigma","Din GPU har problemer med at afkode dine medier. Prv at lukke alle applikationer, som bruger GPU-ressourcer, og/eller genstarte din enhed for at f en bedre ydeevne.","Dine medieklip vil forblive i mediepanelet, men alt hvad du har udfrt i dette sammenligningsst vil g tabt. Vil du fjerne dette st?","Dit projekt er blevet gemt","Zoomvisning"],"de-de":["(z. B. https://domaene.com/pfad)","Absolut","Filter hinzufgen","Medien hinzufgen","Overlay hinzufgen","Overlay hinzufgen, um Ihrem Vergleich eine Anmerkung hinzuzufgen.","Anpassen des Clip-Offsets zum Ausrichten der Videos.","Winkel","Automatisches Erstellen von Stzen","Farben mitteln (langsamer)","Bilinear","Binr","Bitrate","Schwarz-blau-violett-gelb-wei","Links unten","Rechts unten","Folgender Filter kann nicht angezeigt werden:","Abbrechen","Wiedergabegeschwindigkeit ndern","CIE-LAB-Unterschied","Klicken Sie auf Medien hinzufgen oder ziehen Sie Video-/Bilddateien per Drag & Drop in dieses Fenster, um sie zu vergleichen.","Codec","Farbmodus","Vergleichsstze","Nur Kontrastfehler","Kontrollleiste","Einbettungscode kopieren","STRG +","STRG + 1-9","STRG + f","Personalisierung","Lschen","Differenz","Abmessungen","Deaktivieren","Nicht speichern","Herunterladen","Ffmpeg-Quelle herunterladen","Dauer","Einbettungscode kopiert","Einbettungscode in die Zwischenablage kopiert","Bilder in Code einbetten","Eingebettet in Webseiten-Code","Aktivieren","Fehler beim Laden von Medien","Fehler beim Laden von Medien, nicht untersttzter Dateityp","Pfad der Fehlerprotokolle","Exportieren","Standbilder exportieren","Videosegmente exportieren","Video exportieren","Exposition","Dateien ohne passende Namen sind rot markiert und werden ausgelassen.","Filtermodus","Format","FPS","Bildvorlauf","Bilder pro Sekunde","Gamma","Gauscher Weichzeichner","Allgemein","Bild wird erstellt...","Allgemeines Layout","GPU","Graustufen","Rasterberlagerung","Halber Radius Sigma","Heatmap","Hhe","Hilfe-Taste","Alle ausblenden","Layout ausblenden","Medien hosten","Wenn Sie die Medien an einem anderen Ort als dem Stammverzeichnis hosten mchten, geben Sie die URL unten an.","Bild","Bilder knnen direkt in den Einbettungscode der Webseite eingebettet werden, ohne dass sie separat hochgeladen werden mssen, wenn die Gesamtgre der Bilddateien weniger als 10 MB betrgt.","Importieren","Anfangswert","Eingabe","Ganzzahlige Skalierung","Ungltige Datei. Es werden nur Dateien mit den folgenden Erweiterungen akzeptiert:","Ungltige Dateien. Es werden nur Dateien mit den folgenden Erweiterungen akzeptiert:","Ausgabe umkehren","Jet","Zum Anfang springen","Bezeichnung","Laplace (fnf Punkte)","Laplace (neun Punkte)","Laplace-Abweichung","Gro","Layout-Registerkarten","Position Links/Rechts","Fangen wir an","Lokale Shader","Leuchtdichte-Unterschied","Nur Leuchtdichtefehler","Unendlich/Keine Zahl markieren","Medien","Medien Domne/Pfad","Medien-Auswhler","Mittelgro","Modus","Ziehen mit der Maus","Mausrad","Multiplikator","Nchster Nachbar","Neues Projekt","Keine Ordner ausgewhlt","N. a.","N. a. (SSIM Standard)","Aus","Ein","ffnen","Overlay","Paket zur Webseiteneinbettung","Ansicht verschieben","Unterschiede pro Kanal","Verpixelung","Play/Pause","Positions-Keyframes","Abmessungen beibehalten","Vorschau","Vorheriger/Nchster Satz","Radius","Neu laden","Entfernen","Vergleichsstze entfernen?","Medien entfernen?","Zurcksetzen","Wiedergabegeschwindigkeit zurcksetzen","RGB-Unterschied","Gleiche Breite und Hhe","Speichern","Projekt speichern","Skalierung %","Passend skalieren","Ordner auswhlen","Whlen Sie Ordner mit bereinstimmenden Dateinamen aus und es werden automatisch Vergleichsstze erstellt.","Einstellen","Stze auswhlen","Einstellungen","Schrfe","Verknpfungen","Winkel anzeigen","Legende der Farbkarte anzeigen","Layout anzeigen","Miniaturansichten anzeigen","Nebeneinander","Nebeneinander-Modus","Sigma","Vorzeichen umkehren","Gre","Regler Keyframes","Klein","Sobel","Einzelne Mediendatei","Alphabetisch sortieren","Sortieren nach Erstellung","Leertaste","Geteilter Bildschirm","Geteilter-Bildschirm-Modus","Zum Quadrat","SSIM","SSIM voll","SSIM-Modus","SSIM vereinfacht","Startzeit","Nur struktureller Fehler","Symmetrisch","Beim Exportieren Ihres Videos ist ein Fehler aufgetreten.","Bei der Erstellung des Einbettungspakets fr Ihre Webseite ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.","Diese Software verwendet einen Code von FFmpeg, der unter der LGPLv2.1 lizenziert ist.","Dadurch werden die Medien aus allen Vergleichsstzen in diesem Projekt entfernt. Mchten Sie das Medium entfernen?","Kacheln","Titel-Gre","Vollbild ein- und ausschalten","Toleranz","Oben links","Oben rechts","Typ","Position Auf/Ab","Version","Video","Versionshinweise anzeigen","Web","Webseiten-Einbettungspaket erfolgreich gespeichert","Kontrast gewichten","Leuchtdichte gewichten","Struktur gewichten","Breite","Mchten Sie Ihr aktuelles Projekt speichern, bevor Sie fortfahren?","X Radius","X Sigma","Y Radius","Y Sigma","Ihre GPU hat Probleme beim Decodieren Ihrer Medien. Versuchen Sie fr eine bessere Leistung, alle Anwendungen zu schlieen, die GPU-Ressourcen nutzen, und/oder Ihr Gert neu zu starten.","Ihre Medienclips bleiben im Medienbedienfeld erhalten, aber alles, was Sie in diesem Vergleichssatz gemacht haben, geht verloren. Wollen Sie diesen Satz entfernen?","Ihr Projekt wurde gespeichert","Ansicht zoomen"],"el-gr":["(. https://tomeas.com/diadromi)",""," "," "," ","      .","        .","","  ","  ( )","",""," bit","----"," "," ","     :","","  "," CIE-LAB","          /        .","Codec","  "," ","  "," ","  ","CTRL +","CTRL + 1-9","CTRL + f","","","","","","   ","","  FFmpeg.","","  ","    ","   ","   ","","    ","    ,    ","   ","","  ","  ","  ","","         ."," ","","FPS"," ","  ",""," ","","  "," ","GPU","  "," ","  "," ",""," "," "," "," ","          ,     URL.","","                      10MB.","","",""," ","  .        :","  .        :"," ","","  ",""," ( )"," ( )"," ",""," "," /"," "," "," ","  "," Inf/NaN","","/ "," ","",""," ","  ",""," "," ","   ",""," ( SSIM)","","","","","  "," ","    ","","/","  "," ","","/ ","","","","    ;","   ;","","  "," RGB","  and ",""," "," %","  "," ","           .",""," ","","",""," ","   "," "," ",""," ",""," ","","  ","","Sobel"," "," ","  ",""," ","  ","  ","SSIM","SSIM "," SSIM","SSIM "," ","  ","","       ","        ,  .","     FFmpeg     LGPLv2.1","             .      ;",""," ","  ",""," "," ",""," /","","","  ","Web","      "," "," "," ","","        ;"," X"," X"," Y"," Y"," GPU         .   ,          GPU /     .","        ,           .      ;","    "," "],"en-gb":["(i.e. https://domain.com/path)","Absolute","Add filter","Add media","Add overlay","Add Overlay to annotate your comparison.","Adjust the clip offset to align the videos.","Angle","Automatically create sets","Average colours (slower)","Bilinear","Binary","Bitrate","Black-blue-violet-yellow-white","Bottom Left","Bottom Right","Cannot display filter:","Cancel","Change playback speed","CIE-LAB difference","Click Add Media or drag and drop video/image files into this window to compare them.","Codec","Colour mode","Comparison sets","Contrast error only","Control bar","Copy embed code","CTRL +","CTRL + 1-9","CTRL + f","Customisation","Delete","Difference","Dimensions","Disable","Don't save","Download","Download FFmpeg source.","Duration","Embed code copied","Embed code copied to clipboard","Embed images in code","Embedded in webpage code","Enable","Error loading media","Error loading media, unsupported file type","Error logs path","Export","Export still images","Export video segments","Exporting video","Exposure","Files without matching names are marked in red and will be omitted.","Filtering mode","Format","FPS","Frame advance","Frames per second","Gamma","Gaussian blur","General","Generating image","Global layout","GPU","Greyscale","Grid overlay","Half radius sigma","Heatmap","Height","Help button","Hide all","Hide layout","Hosting media","If you choose to host media in a different location from the root, specify the URL below.","Image","Images can be embedded directly in webpage embed code without uploading them separately if the total file size is less than 10MB.","Import","Initial","Input","Integer scaling","Invalid file. Only files with the following extensions are accepted:","Invalid files. Only files with the following extensions are accepted:","Invert output","Jet","Jump to start","Label","Laplacian (five point)","Laplacian (nine point)","Laplacian variance","Large","Layout tabs","Left/Right PX","Let's Get Started","Local shaders","Luminance difference","Luminance error only","Mark Inf/NaN","Media","Media domain/path","Media selectors","Medium","Mode","Mouse drag","Mouse scroll wheel","Multiplier","Nearest Neighbour","New Project","No folders selected","None","None (SSIM default)","Off","On","Open","Overlay","Package webpage embed","Pan view","Per-channel differences","Pixelisation","Play/Pause","Position keyframes","Preserve dimensions","Preview","Previous/Next set","Radius","Reload","Remove","Remove comparison set?","Remove media?","Reset","Reset playback speed","RGB difference","Same width and height","Save","Save project","Scale %","Scale to fit","Select folder","Select folders with matching file names and comparison sets will automatically be created.","Set","Sets select","Settings","Sharpness","Shortcuts","Show angle","Show Colour Map Legend","Show layout","Show thumbnails","Side-by-side","Side-by-side mode","Sigma","Sign flip","Size","Slider keyframes","Small","Sobel","Solo media","Sort alphabetically","Sort by created","Space","Split screen","Split screen mode","Squared","SSIM","SSIM full","SSIM Mode","SSIM simplified","Start time","Structural error only","Symmetric","There was an error exporting your video","There was an error generating your webpage embed package, please try again.","This software uses code of FFmpeg licensed under the LGPLv2.1","This will remove the media from all comparison sets in this project. Do you want to remove this media?","Tiling","Title size","Toggle fullscreen","Tolerance","Top Left","Top Right","Type","Up/Down PX","Version","Video","View release notes","Web","Webpage embed package successfully saved","Weight Contrast","Weight Luminance","Weight Structure","Width","Would you like to save your current project before continuing?","X Radius","X Sigma","Y Radius","Y Sigma","Your GPU is having trouble decoding your media. For better performance, try closing all applications utilising GPU resources and/or restarting your device.","Your media clips will remain in the Media panel, but anything you have done in this comparison set will be lost. Do you want to remove this set?","Your project has been saved","Zoom view"],"es-es":["(p. ej., https://dominio.com/ruta)","Absoluta","Aadir filtro","Aadir medios","Aadir superposicin","Aadir superposicin para anotar su comparacin.","Ajustar el desplazamiento del clip para alinear los vdeos.","ngulo","Crear conjuntos automticamente","Media de colores (ms lento)","Bilineal","Binario","Velocidad de bits","Negro-azul-morado-amarillo-blanco","Parte inferior izquierda","Parte inferior derecha","No se puede mostrar el filtro:","Cancelar","Cambiar velocidad de reproduccin","Diferencia CIE-LAB","Haga clic en Aadir medios o arrastre y suelte en esta ventana los archivos de vdeo/imagen para compararlos.","Cdec","Modo de color","Conjuntos de comparacin","Solo error de contraste","Barra de control","Copiar cdigo de insercin","CTRL +","CTRL + 1-9","CTRL + f","Personalizacin","Eliminar","Diferencia","Dimensiones","Deshabilitar","No guardar","Descargar","Descargar fuente FFmpeg.","Duracin","Cdigo de insercin copiado","Cdigo de insercin copiado en el portapapeles","Insertar imgenes en el cdigo","Insertado en el cdigo de la pgina web","Habilitar","Error al cargar medios","Error al cargar medios, tipo de archivo no compatible","Ruta de registros de errores","Exportar","Exportar imgenes fijas","Exportar segmentos de vdeo","Exportando vdeo","Exposicin","Los archivos sin nombres coincidentes se marcan en rojo y se omitirn.","Modo de filtrado","Formato","FPS","Avance por fotograma","Fotogramas por segundo","Gamma","Desenfoque gaussiano","General","Generando imagen","Disposicin global","GPU","Escala de grises","Superposicin de rejilla","Sigma medio radio","Mapa trmico","Altura","Botn de ayuda","Ocultar todo","Ocultar disposicin","Alojando medios","Si decide alojar los medios en una ubicacin diferente de la raz, especifique la URL a continuacin.","Imagen","Las imgenes pueden insertarse directamente en el cdigo de insercin de la pgina web sin cargarlas por separado si el tamao total de los archivos es inferior a 10 MB.","Importar","Inicial","Entrada","Escalado de nmero entero","Archivo no vlido. Solo se aceptan los archivos con las siguientes extensiones:","Archivos no vlidos. Solo se aceptan los archivos con las siguientes extensiones:","Invertir salida","Chorro","Saltar para iniciar","Etiqueta","Laplaciano (cinco puntos)","Laplaciano (nueve puntos)","Variacin laplaciana","Grande","Pestaas de disposicin","Posicin izquierda/derecha","Comencemos","Sombreadores locales","Diferencia de luminancia","Solo error de luminancia","Marcar Inf/NuN","Medios","Dominio/ruta de medios","Selectores de medios","Medio","Modo","Arrastre de ratn","Rueda de desplazamiento del ratn","Multiplicador","Pxel ms cercano","Nuevo proyecto","No se ha seleccionado ninguna carpeta","Ninguno","Ninguno (SSIM predeterminado)","Desactivado","Activado","Abrir","Superposicin","Paquete de insercin en pgina web","Vista panormica","Diferencias por canal","Pixelizacin","Reproducir/pausar","Fotogramas clave para la posicin","Preservar dimensiones","Vista previa","Conjunto anterior/siguiente","Radio","Recargar","Eliminar","Eliminar conjunto de comparacin?","Eliminar medios?","Restablecer","Reestablecer velocidad de reproduccin","Diferencia de RGB","Misma anchura y altura","Guardar","Guardar proyecto","% de escala","Ajustar al tamao","Seleccionar carpeta","Seleccione carpetas con nombres de archivo coincidentes y se crearn automticamente conjuntos de comparacin.","Conjunto","Seleccionar conjuntos","Ajustes","Nitidez","Accesos directos","Mostrar ngulo","Mostrar leyenda de mapa de color","Mostrar disposicin","Mostrar miniaturas","Uno al lado del otro","Modo uno al lado del otro","Sigma","Cambio de signo","Tamao","Fotogramas clave del control deslizante","Pequeo","Sobel","Un medio","Ordenar alfabticamente","Ordenar por creado","Espacio","Pantalla dividida","Modo de pantalla dividida","Cuadrado","SSIM","SSIM lleno","Modo de SSIM","SSIM simplificado","Hora de inicio","Solo error estructural","Simtrico","Se ha producido un error al exportar su vdeo","Se ha producido un error al generar el paquete de insercin de su pgina web, intntelo de nuevo.","Este software utiliza cdigo de FFmpeg licenciado bajo la LGPLv2.1","Esto eliminar los medios de todos los conjuntos de comparacin de este proyecto. Desea eliminar estos medios?","Mosaico","Tamao del ttulo","Alternar pantalla completa","Tolerancia","Parte superior izquierda","Parte superior derecha","Tipo","Posicin arriba/abajo","Versin","Vdeo","Ver notas de versin","Web","Paquete de insercin de pgina web guardado correctamente","Ponderar contraste","Ponderar luminancia","Ponderar estructura","Anchura","Desea guardar el proyecto actual antes de continuar?","Radio X","Sigma X","Radio Y","Sigma Y","Su GPU tiene problemas para decodificar sus archivos multimedia. Para obtener un mejor rendimiento, intente cerrar todas las aplicaciones que utilizan recursos de GPU y/o reiniciar su dispositivo.","Sus clips de medios permanecern en el panel de Medios, pero todo lo que haya hecho en este conjunto de comparacin se perder. Desea eliminar este conjunto?","Su proyecto se ha guardado","Vista de zoom"],"es-mx":["(es decir, https://dominio.com/ruta)","Absoluto","Agregar filtro","Agregar medios","Agregar superposicin","Agregar superposicin para realizar anotaciones de su comparacin.","Ajustar la compensacin de los videoclips para alinearlos.","ngulo","Crear conjuntos automticamente","Colores promedio (ms lentos)","Bilineal","Binario","Velocidad de transmisin","Negro-azul-violeta-amarillo-blanco","Parte inferior izquierda","Parte inferior derecha","No se puede mostrar el filtro:","Cancelar","Cambiar velocidad de reproduccin","Diferencia CIE-LAB","Haga clic en Agregar medios o arrastre y suelte archivos de video/imagen en esta ventana para compararlos.","Codec","Modo de color","Conjuntos de comparacin","Solo error de contraste","Barra de control","Copiar cdigo de insercin","CTRL +","CTRL + 1-9","CTRL + f","Personalizacin","Eliminar","Diferencia","Dimensiones","Desactivar","No guardar","Descargar","Descargar la fuente de FFmpeg.","Duracin","Cdigo de insercin copiado","Cdigo de insercin copiado al portapapeles","Insertar imgenes en el cdigo","Insertado en el cdigo de la pgina web","Activar","Error al cargar medios","Error al cargar medios, tipo de archivo no compatible","Ruta de registros de errores","Exportar","Exportar imgenes fijas","Exportar segmentos de video","Exportando video","Exposicin","Los archivos sin nombres coincidentes se marcan en rojo y se omitirn.","Modo de filtrado","Formato","FPS","Avance de fotogramas","Fotogramas por segundo","Gamma","Desenfoque gaussiano","General","Generando imagen","Disposicin global","GPU","Escala de grises","Superposicin de cuadrcula","Sigma de medio radio","Mapa de calor","Altura","Botn Ayuda","Ocultar todo","Ocultar disposicin","Alojamiento de medios","Si elige alojar medios en una ubicacin diferente a la raz, especifique la URL a continuacin.","Imagen","Las imgenes se pueden insertar directamente en el cdigo de insercin de la pgina web sin cargarlas por separado si el tamao total del archivo es inferior a 10 MB.","Importar","Inicial","Entrada","Escalado de enteros","Archivo no vlido. Solo se aceptan archivos con las siguientes extensiones:","Archivos no vlidos. Solo se aceptan archivos con las siguientes extensiones:","Invertir salida","Jet","Saltar al inicio","Etiqueta","Laplaciano (cinco puntos)","Laplaciano (nueve puntos)","Variacin laplaciana","Grande","Fichas de disposicin","Posicin izquierda/derecha","Comencemos","Sombreadores locales","Diferencia de luminancia","Solo error de luminancia","Marcar Inf/NaN","Medios","Dominio/ruta de medios","Selectores de medios","Medio","Modo","Arrastre del ratn","Rueda de desplazamiento del ratn","Multiplicador","Vecino ms cercano","Proyecto nuevo","No hay carpetas seleccionadas","Ninguno/a","Ninguno (SSIM predeterminado)","Apagado","Encendido","Abrir","Superposicin","Insertar pgina web del paquete","Vista panormica","Diferencias por canal","Pixelizacin","Reproduccin/Pausa","Fotogramas clave de posicin","Preservar dimensiones","Vista previa","Conjunto Anterior/Siguiente","Radio","Recargar","Quitar","Eliminar conjunto de comparacin?","Eliminar medios?","Restablecer","Restablecer velocidad de reproduccin","Diferencia de RGB","Mismo ancho y altura","Guardar","Guardar proyecto","Escala %","Escalar para ajustar","Seleccionar carpeta","Se crearn automticamente carpetas seleccionadas con nombres de archivos coincidentes y conjuntos de comparacin.","Conjunto","Seleccin de conjuntos","Configuracin","Nitidez","Accesos directos","Mostrar ngulo","Mostrar leyenda del mapa de colores","Mostrar disposicin","Mostrar miniaturas","Lado a lado","Modo de lado a lado","Sigma","Cambio de signo","Tamao","Fotogramas clave de control deslizante","Pequeo","Sobel","Modo de medios","Ordenar alfabticamente","Ordenar por fecha de creacin","Espacio","Pantalla dividida","Modo de pantalla dividida","Al cuadrado","SSIM","SSIM completo","Modo SSIM","SSIM simplificado","Hora de inicio","Solo error estructural","Simtrico","Se produjo un error al exportar su video","Se produjo un error al generar el paquete de insercin de su pgina web. Intntelo de nuevo.","Este software utiliza cdigo de FFmpeg con licencia LGPLv2.1","Esto eliminar los medios de todos los conjuntos de comparacin en este proyecto. Desea eliminar estos medios?","Mosaico","Tamao del ttulo","Alternar pantalla completa","Tolerancia","Parte superior izquierda","Parte superior derecha","Tipo","Posicin Arriba/Abajo","Versin","Video","Ver notas de la versin","Web","El paquete de insercin de pgina web se guard satisfactoriamente","Ponderar contraste","Ponderar luminancia","Ponderar estructura","Ancho","Desea guardar su proyecto actual antes de continuar?","Radio X","Sigma X","Radio Y","Sigma Y","Su GPU est teniendo problemas para decodificar sus medios. Para obtener un mejor rendimiento, pruebe cerrar todas las aplicaciones utilizando los recursos de la GPU o reiniciando su dispositivo.","Sus secciones de medios permanecern en el panel de Medios, pero todo lo que haya hecho en este conjunto de comparacin se perder. Desea eliminar este conjunto?","Se ha guardado su proyecto","Vista ampliada"],"fi-fi":["(eli https://verkkotunnus.com/polku)","Absoluuttinen","Lis suodatin","Lis media","Lis pllekkistaso","Lis pllekkistaso listksesi selitys vertailullesi.","Tasaa videot stmll leikkeen siirtym.","Kuvakulma","Luo setit automaattisesti","Keskitasoiset vrit (hitaampi)","Bilineaarinen","Binrinen","Bittitaajuus","Musta-sininen-violetti-keltainen-valkoinen","Vasen alakulma","Oikea alakulma","Suodatinta ei voi nytt:","Peruuta","Muuta toiston nopeutta","CIE-LAB-eroavaisuus","Napsauta kohtaa Lis media tai ved ja pudota video/kuvatiedosto thn ikkunaan vertailleksasi niit.","Koodekki","Vritila","Vertailusetit","Vain kontrastivirhe","Sdinpalkki","Kopioi upotettu koodi","CTRL +","CTRL + 1-9","CTRL + f","Mukautus","Poista","Eroavaisuus","Mitat","Poista kytst","l tallenna","Lataa","Lataa Fmpeg-lhde","Kesto","Upotettu koodi on kopioitu","Upotettu koodi on kopioitu leikepydlle","Ulota kuvat koodiin","Upotettu verkkosivun koodiin","Ota kyttn","Median latausvirhe","Median latausvirhe, tuntematon tiedostotyyppi","Virhelokin polku","Vie","Vie pysytyskuva","Vie videosegmentti","Vie video","Valotus","Tiedostot, joilla ei ole yhtenevi nimi merekitn punaisella ja ohitetaan.","Suodatustila","Tiedostomuoto","FPS (kuvaa sekunnissa)","Kehystaajuus","Ruutuja sekunnissa","Gamma","Steittinen Gauss-sumennus","Yleist","Luodaan kuvaa","Yleinen asettelu","Grafiikkasuoritin","Mustavalkoinen","Grid-pllekkistaso","Puolittainen sigma","Lmpkartta","Korkeus","Ohjepainike","Piilota kaikki","Piilota asettelu","Isnni mediaa","Jos valitset mediasi isnnitvksi muualla kuin juuressa, mrit URL tss alla.","Kuva","Kuvat voidaan upottaa suoraan verkkosivun upotuskoodiin ilman erillist latausta, jos tiedostojen yhteenlaskettu koko on alle 10 Mt.","Tuo","Aloitusnkym","Syte","Integer skaalaus","Tiedosto ei kelpaa Vain seuraavat tiedstoptteet hyvksytn:","Tiedostot eivt kelpaa Vain seuraavat tiedstoptteet hyvksytn:","Knnn lht","Jet","Hypp alkuun","Nimike","Laplacen (5-pisteinen)","Laplacen (9-pisteinen)","Laplacen varianssi","Suuri","Asettelu-vlilehdet","Vasen/Oikea PX","Aloitetaan","Paikalliset varjostimet","Luminanssi-eroavaisuus","Vain luminanssivirhe","Merkki Inf/NaN","Media","Media/verkkotunnus/polku","Median valitsimet","Keskitaso","Tila","Hiirell veto","Hiiren rulla","Kerroin","Lhin naapuri","Uusi projekti","Ei valittuja kansioita","Ei mitn","Ei mitn (SSIM-oletusarvo)","Pois plt","Pll","Avaa","Pllekkistaso","Verkkosivulle upotettu paketti","Panorointinkym","Kanavakohtainen eroavaisuus","Pikselinti","Toista/tauko","Avainruutujen sijainti","Silyt mitat","Esikatselu","Edellinen/seuraava setti","Sde","Lataa uudelleen","Poista","Poistetaanko vertailusetti?","Poistetaanko media?","Palauta","Palauta toiston nopeus","RGB-eroavaisuus","Sama leveys ja korkeus","Tallenna","Tallenna projekti","Skaalaus %","Skaalaa sopivaksi","Valitse kansio","Vertailusetit luodaan automaattisesti, kun valitset kansiot, joissa on saman nimisi tiedostoja.","Setti","Valitut setit","Asetukset","Tervyys","Pikanppimet","Nyt kuvakulma","Nyt vritetyn kartan selitteet","Nyt asettelu","Pienoiskuvat","Nyt pienoiskuvat","Rinnakkain-tila","Sigma","Allekirjoita knt","Koko","Liukustimen avainruudut","Pieni","Sobel","Solo-media","Lajittelu aakkosjrjestyksess","Lajittele luomisajankohdan mukaan","Nytttila","Jaettu nytt","Jettu nytt -tila","Neliity","SSIM","SSIM tynn","SSIM-tila","Yksinkertaistettu SSIM","Alkamisaika","Vain rakennevirhe","Symmetrinen","Virhe videosi viemisess","Virhe verkkosivusi upotuspaketin luomisessa, yrit uudelleen.","Tm ohjelmisto kytt LGPLv2.1-lisensioitua FFmpegin koodia.","Tm poistaa media kaikista tmn projektin vertailuseteist. Haluatko poistaa tmn median?","Laatoitus","Otsikon koko","Vaihtele koko nyttn ja pois","Sietokyky","Vasen ylkulma","Oikea ylkulma","Tyyppi","Yls/Alas PX","Versio","Video","Katso versiotiedot","Verkko","Verkkosivustoon upotetun paketin tallentaminen onnistui","Painotuskontrasti","Painotusluminanssi","Painotusrakenne","Leveys","Haluatko tallentaa nykyisen projektisi ennen kuin jatkat?","X-sde","X-Sigma","Y-sde","Y-Sigma","Grafiikkasuorittimellasi on ongelmia mediasi dekoodauksessa. Parempaa suorituskyky varten kokeile sulkea kaikki grafiikkasuorittimen resursseja kyttvt sovellukset ja/tai kynnist laitteesi uudelleen.","Medialeikkeesi pysyy Mediapaneelissa, mutta kaikki tss vertailusetiss tekemsi asiat menetetn. Haluatko poistaa tmn setin?","Projektisi on tallennettu","Zoomausnkym"],"fr-fr":["(p. ex. https://domaine.com/chemin)","Absolue","Ajouter un filtre","Ajouter un mdia","Ajouter une interface superpose","Ajoutez une interface superpose pour annoter votre comparaison.","Rglez le dcalage du clip pour aligner les vidos.","Angle","Crer automatiquement des ensembles","Moyenne des couleurs (plus lent)","Bilinaire","Binaire","Dbit","Noir-bleu-violet-jaune-blanc","En bas  gauche","En bas  droite","Impossible d'afficher le filtre:","Annuler","Changer la vitesse de lecture","cart CIE-LAB","Cliquez sur Ajouter un mdia ou glissez-dposez des fichiers vido/image dans cette fentre pour les comparer.","Codec","Mode Couleur","Ensembles de comparaison","Erreur de contraste uniquement","Barre de contrle","Copier le code dintgration","CTRL +","CTRL + 1-9","CTRL + f","Personnalisation","Supprimer","cart","Dimensions","Dsactiver","Ne pas enregistrer","Tlcharger","Tlchargez la source FFmpeg.","Dure","Code dintgration copi","Code dintgration copi dans le presse-papiers","Images intgres dans le code","Intgr dans le code de la page Web","Activer","Erreur de chargement du mdia","Erreur de chargement du mdia, type de fichier non pris en charge","Chemin des journaux derreur","Exporter","Exporter des images fixes","Exporter des segments vido","Exportation de la vido en cours","Exposition","Les fichiers dont les noms ne correspondent pas sont marqus en rouge et seront ignors.","Mode de filtrage","Format","Images/s","Avance image par image","Images par seconde","Gamma","Flou gaussien","Gnral","Gnration de limage en cours","Disposition globale","Processeur graphique","Niveaux de gris","Superposition de grille","Sigma demi-rayon","Carte thermique","Hauteur","Bouton Aide","Masquer tout","Masquer la disposition","Hbergement du mdia","Si vous choisissez dhberger le mdia dans un emplacement autre que l'emplacement racine, indiquez lURL ci-dessous.","Image","Les images peuvent tre intgres directement dans le code dintgration de la page Web sans tre tlcharges sparment si la taille totale des fichiers est infrieure  10 Mo.","Importer","Initiale","Entre","Mise  lchelle par nombres entiers","Fichier non valide. Seuls les fichiers avec les extensions suivantes sont accepts :","Fichiers non valides. Seuls les fichiers avec les extensions suivantes sont accepts :","Inverser la sortie","Jet","Aller au dbut","tiquette","Laplacien (cinq points)","Laplacien (neuf points)","cart laplacien","Grand","Onglets de disposition","Position gauche/droite","Lancez-vous","Moteurs dombrage locaux","cart de luminance","Erreur de luminance uniquement","Marquer Inf/NaN","Mdia","Domaine/chemin du mdia","Slecteurs de mdia","Moyen","Mode","Glissement de la souris","Molette de la souris","Multiplicateur","Plus proche voisin","Nouveau projet","Aucun dossier slectionn","Aucun","Aucun (SSIM par dfaut)","Dsactiv","Activ","Ouvrir","Interface superpose","Intgration dun package dans une page Web","Vue panoramique","carts par canal","Pixellisation","Lire/mettre en pause","Images cls de position","Conserver les dimensions","Aperu","Ensemble prcdent/suivant","Rayon","Recharger","Supprimer","Supprimer lensemble de comparaison ?","Supprimer le mdia ?","Rinitialiser","Rinitialiser la vitesse de lecture","cart RGB","Mme largeur et hauteur","Enregistrer","Enregistrer le projet","chelle (%)","Ajuster","Slectionner un dossier","Slectionnez des dossiers dont les noms correspondent pour crer automatiquement des ensembles de comparaison.","Ensemble","Slection densembles","Paramtres","Lissage","Raccourcis","Afficher langle","Afficher la lgende de la table des couleurs","Afficher la disposition","Afficher les miniatures","Cte  cte","Mode Cte  cte","Sigma","Inverser le signe","Taille","Images cls de curseur","Petit","Sobel","Un seul mdia","Trier par ordre alphabtique","Trier par date de cration","Barre despace","cran divis","Mode cran divis","Carr","SSIM","SSIM complte","Mode SSIM","SSM simplifie","Heure de dbut","Erreur structurelle uniquement","Symtrique","Une erreur sest produite pendant lexportation de votre vido","Une erreur sest produite pendant la gnration de votre package intgr dans la page Web. Veuillez ressayer.","Ce logiciel utilise le code de FFmpeg sous licence de LGPLv2.1","Le mdia sera supprim de tous les ensembles de comparaison dans ce projet. Voulez-vous supprimer ce mdia ?","Pavage","Taille du titre","Basculer en mode Plein cran","Tolrance","En haut  gauche","En haut  droite","Type","Position haut/bas","Version","Vido","Afficher les notes de version","Web","Package intgr dans la page Web enregistr","Contraste pondr","Luminance pondre","Structure pondre","Largeur","Voulez-vous enregistrer le projet en cours avant de continuer ?","Rayon X","Sigma X","Rayon Y","Sigma Y","Votre processeur graphique a du mal  dcoder votre mdia. Pour de meilleures performances, essayez de fermer toutes les applications utilisant les ressources du processeur graphique et/ou redmarrez votre appareil.","Vos clips multimdia resteront dans le panneau Mdia, mais tout ce que vous avez effectu dans cet ensemble de comparaison sera perdu. Voulez-vous supprimer cet ensemble ?","Votre projet a t enregistr","Vue zoome"],"hr-hr":["(tj. https://domena.com/put)","Apsolut","Dodaj filtar","Dodaj medij","Dodaj prekrivanje","Dodaj prekrivanje za anotiranje usporedbe.","Podesi pomak isjeka za usklaivanje videozapisa.","Kut","Automatski kreiraj setove","Prosjene boje (sporije)","Bilinearno","Binarno","Brzina prijenosa","Crno-plavo-ljubiasto-uto-bijelo","Dolje lijevo","Dolje desno","Nije mogue prikazati filtar:","Odustani","Promijeni brzinu reprodukcije","CIE-LAB razlika","Kliknite Dodaj medij ili povucite i ispustite video/slikovne datoteke u ovaj prozor i usporedite ih.","Kodek","Nain boje","Setovi usporedbe","Samo pogreka kontrasta","Kontrolna traka","Kopiraj kod za ugradnju","CTRL +","CTRL + 1  9","CTRL + f","Prilagodba","Izbrii","Razlika","Dimenzije","Onemogui","Nemoj spremiti","Preuzmi","Preuzi FFmpeg izvor.","Trajanje","Kod za ugradnju kopiran","Kod za ugradnju kopiran u meuspremnik","Ugradi slike u kod","Ugraeno u kod web-stranice","Omogui","Pogreka pri uitavanju medija","Pogreka pri uitavanju medija, vrsta datoteke nije podrana","Put zapisnika pogreke","Izvoz","Izvoz fotografija","Izvoz segmenata videozapisa","Izvoz videozapisa","Izlaganje","Datoteke bez odgovarajuih naziva oznaene su crveno i izostavit e se.","Nain filtriranja","Format","FPS","Ubrzanje kadra","Broj slika u sekundi","Gamma","Gaussovo zamuenje","Openito","Generiranje slike","Globalni raspored","GPU","Sivi tonovi","Mreno prekrivanje","Sigma polumjera","Toplinska karta","Visina","Gumb za pomo","Sakrij sve","Sakrij raspored","Hostiranje medija","Ako odluite hostirati medij na lokaciji koja nije korijen, navedite URL u nastavku.","Slika","Slike se mogu ugraditi izravno u kod za ugradnju web-stranice bez zasebnog uitavanja ako je ukupna veliina datoteke manja od 10 MB.","Uvezi","Poetno","Unos","Skaliranje cijelog broja","Neispravna datoteka. Prihvaene su samo datoteke sa sljedeim ekstenzijama:","Neispravne datoteke. Prihvaene su samo datoteke sa sljedeim ekstenzijama:","Obrni izlaz","Jet","Skok na poetak","Oznaka","Laplacijan (pet toaka)","Laplacijan (devet toaka)","Odstupanje Laplacijana","Veliko","Kartice rasporeda","Lijevi/desni PX","Zaponimo","Lokalno sjenanje","Razlika u osvjetljenju","Samo pogreka osvjetljenja","Oznaka Inf/NaN","Mediji","Domena/put medija","Birai medija","Srednje","Nain","Povlaenje mia","Kotai za pomicanje mia","Mnoitelj","Najblii piksel","Novi projekt","Nema odabranih mapa","Nita","Nita (SSIM zadano)","Iskljueno","Ukljueno","Otvori","Prekrivanje","Paket za ugradnju u web-stranicu","Pomicanje prikaza","Razlike prema kanalu","Pikselizacija","Reproduciraj/pauziraj","Postavi kljune okvire","Ouvaj dimenzije","Pregled","Prethodni/sljedei set","Polumjer","Ponovno uitaj","Ukloni","Ukloniti set za usporedbu?","Ukloniti medij?","Ponovno postavi","Ponovno postavi brzinu reprodukcije","RGB razlika","Ista irina i visina","Spremi","Spremi projekt","Skala %","Skaliraj da pristaje","Odaberi mapu","Odaberite mape s odgovarajuim nazivima i setovi za usporedbu automatski e se izraditi.","Postavi","Postavlja odabrano","Postavke","Otrina","Preaci","Prikai kut","Prikai legendu boje karte","Prikai raspored","Prikai minijature","Usporedni prikaz","Nain usporednog prikaza","Sigma","Okretanje znaka","Veliina","Kljuni okviri klizaa","Malo","Sobel","Solo mediji","Razvrstaj po abecedi","Razvrstaj prema izraenom","Razmak","Podijeljeni zaslon","Nain podijeljenog zaslona","Kvadratno","SSIM","SSIM pun","SSIM nain","SSIM pojednostavljen","Vrijeme poetka","Samo strukturna pogreka","Simetrino","Dolo je do pogreke pri izvozu videozapisa","Dolo je do pogreke u generiranju paketa za ugradnju u web-stranicu, pokuajte ponovno.","Ovaj softver upotrebljava kod FFmpeg licenciran prema LGPLv2.1","Ovo e ukloniti medije iz svih setova usporedbe u ovom projektu. elite li ukloniti ove medije?","Poploavanje","Veliina naslova","Prebacivanje na puni zaslon","Tolerancija","Gore lijevo","Gore desno","Vrsta","Gornji/donji PX","Verzija","Videozapis","Prikai napomene o izdanju","Web","Paket za ugradnju u web-stranicu uspjeno spremljen","Kontrast teine","Osvjetljenje teine","Struktura teine","irina","elite li spremiti trenutani projekt prije nastavka?","X polumjer","X sigma","Y polumjer","Y sigma","Va GPU ima potekoa s dekodiranjem medija. Za bolje performanse pokuajte zatvoriti sve aplikacije koje koriste GPU resurse i/ili ponovno pokrenuti ureaj.","Vai medijski isjeci ostat e na ploi Mediji, ali sve to ste napravili u ovom setu za usporedbu izgubit e se. elite li ukloniti ovaj set?","Va je projekt spremljen","Uveaj prikaz"],"hu-hu":["(pl. https://tartomny.com/tvonal)","Abszolt","Szr hozzadsa","Mdia hozzadsa","Rteg hozzadsa","Az sszehasonlts magyarzathoz adjon hozz rteget.","A videk igaztshoz lltsa be a klip eltolst.","Szg","Sorozatok automatikus ltrehozsa","tlagos sznek (lassabb)","Bilineris","Binris","Bitsebessg","Fekete-kk-ibolya-srga-fehr","Balra lent","Jobbra lent","A szr nem jelenthet meg:","Mgse","Lejtszsi sebessg mdostsa","CIE-LAB klnbsg","Az sszehasonltshoz kattintson a Mdia hozzadsa gombra, vagy hzzon vide-/kpfjlokat ebbe az ablakba.","Kodek","Szn md","sszehasonltsi sorozatok","Csak kontraszthiba","Vezrlsv","Begyazsi kd msolsa","CTRL +","CTRL + 1-9","CTRL + f","Testreszabs","Trls","Klnbsg","Mretek","Letilts","Ne mentse","Letlts","FFmpeg forrs letltse.","Idtartam","Begyazsi kd kimsolva","A begyazsi kd ki van msolva a vglapra","Kpek begyazsa a kdba","Begyazva a weboldal kdjba","Engedlyezs","Hiba a mdia betltsekor","Hiba a mdia betltsekor, nem tmogatott fjltpus","Hibanaplk elrsi tja","Exportls","llkpek exportlsa","Videszegmensek exportlsa","Vide exportlsa","Megvilgts","Az egyez nevekkel nem rendelkez fjlok pirossal lesznek megjellve s ki lesznek hagyva.","Szrsi md","Formtum","FPS","Kpkockalptets","Kpkockaszm msodpercenknt","Gamma","Gauss-homlyosts","ltalnos","Kp generlsa","Globlis elrendezs","GPU","Szrkeskla","Rcsrteg","Fl sugr szigma","Htrkp","Magassg","Sg gomb","Az sszes elrejtse","Rteg elrejtse","Mdiatrols","Ha a mdiafjlokat a gykrknyvtrtl eltr helyen trolja, adja meg albb az URL-t.","Kp","Ha a teljes fjlmret kisebb, mint 10 MB, a kpek kzvetlenl begyazhatk a weboldal begyazsi kdjba, anlkl, hogy kln fel kellene tlteni ket.","Importls","Kezdeti","Bemenet","Egsz arny mretezs","rvnytelen fjl. Csak a kvetkez kiterjeszts fjlok fogadhatk el:","rvnytelen fjlok. Csak a kvetkez kiterjeszts fjlok fogadhatk el:","Kimenet invertlsa","Sugrhajts","Ugrs az elejre","Cmke","Laplace (t pont)","Laplace (kilenc pont)","Laplace-opertor","Nagy","Lapok elrendezse","Bal/jobb pozci","Kezdjk!","Helyi rnykolk","Fnyerklnbsg","Csak fnyerhiba","rvnytelen mveletek jellse","Mdia","Mdiatartomny/elrsi t","Mdiavlasztk","Kzepes","Md","Egrhzs","Egr grgetgombja","Szorz","Legkzelebbi szomszd","j projekt","Nincs kivlasztva mappa","Nincs","Nincs (SSIM alaprtelmezs)","Ki","Be","Megnyits","Rteg","Weboldalba gyazhat csomag","Psztz nzet","Csatornnknti klnbsgek","Pixelizls","Lejtszs/Sznet","Pozci-kulcskpkockk","Mretek megrzse","Elnzet","Elz/kvetkez sorozat","Sugr","jratlts","Eltvolts","Eltvoltja az sszehasonltsi sorozatot?","Eltvoltja a mdit?","Alaphelyzetbe llts","Lejtszsi sebessg alaphelyzetbe lltsa","RGB-klnbsg","Azonos szlessg s magassg","Ments","Projekt mentse","Lptk %","Igazts ablakmrethez","Mappavlaszts","Vlasszon mappkat egyez fjlnevekkel, s az sszehasonltsi sorozatok automatikusan ltrejnnek.","Sorozat","Sorozatok kivlasztsa","Belltsok","lessg","Parancsikonok","Szg megjelentse","Szntrkpfeliratok megjelentse","Elrendezs megjelentse","Blyegkpek megjelentse","Egyms mellett","Egyms mellett md","Szigma","Eljelvlts","Mret","Csszkakpkockk","Kicsi","Sobel","Egy mdiafjl","Rendezs betrendbe","Rendezs ltrehozs ideje szerint","Szkz","Kpernyfeloszts","Kpernyfelosztsi md","Ngyzeten","SSIM","SSIM megtelt","SSIM md","Egyszerstett SSIM","Kezdsi id","Csak szerkezeti hiba","Szimmetrikus","Hiba trtnt a vide exportlsakor","Hiba trtnt a weboldalba gyazhat csomag ltrehozsakor. Prblja meg jra.","Ez a szoftver az LGPLv2.1 alatt licencelt FFmpeg kdjt hasznlja","Ez eltvoltja a mdit minden sszehasonltsi sorozatbl ebben a projektben. El szeretnd tvoltani ezt a mdit?","Csempzs","Cm mrete","Vlts teljes kpernyre","Trs","Balra fent","Jobbra fent","Tpus","Fent/lent pozci","Verzi","Vide","Kibocstsi megjegyzsek megtekintse","Web","A weboldalba gyazhat csomag sikeresen mentve","Kontraszt slyozsa","Fnyessg slyozsa","Szerkezet slyozsa","Szlessg","Szeretn menteni a jelenlegi projektet a folytats eltt?","X sugr","X szigma","Y sugr","Y szigma","A GPU nem tudja dekdolni a mdit. A jobb teljestmny rdekben zrjon be minden olyan alkalmazst, amely a GPU erforrsait hasznlja, s/vagy indtsa jra az eszkzt.","A mdiaklipek megmaradnak a Mdia panelen, de az ebben az sszehasonltsi sorozatban vgzett sszes mvelete elvsz. El szeretnd tvoltani ezt a sorozatot?","A projekt mentve","Nagytott nzet"],"it-it":["(ad es. https://dominio.com/percorso)","Assoluto","Aggiungi filtro","Aggiungi contenuti multimediali","Aggiungi sovrapposizione","Aggiungi una sovrapposizione per annotare il confronto.","Regola lo scarto tra le clip per allineare i video.","Angolo","Crea gruppo automaticamente","Media colori (pi lento)","Bilineare","Binario","Velocit in bit","Nero-blu-viola-giallo-bianco","In basso a sinistra","In basso a destra","Impossibile visualizzare il filtro:","Annulla","Modifica velocit di riproduzione","Differenza CIE-LAB","Fare clic su Aggiungi contenuti multimediali oppure trascinare immagini/video allinterno di questa finestra per confrontarli.","Codec","Modalit Colore","Gruppo di confronto","Solo errore di contrasto","Barra di controllo","Copia codice di incorporamento","CTRL +","CTRL + 1-9","CTRL + f","Personalizzazione","Elimina","Differenza","Dimensioni","Disattiva","Non salvare","Scarica","Scarica sorgente FFmpeg.","Durata","Codice di incorporamento copiato","Codice di incorporamento copiato negli appunti","Incorpora immagini nel codice","Incorporato nel codice della pagina web","Attiva","Errore caricamento contenuti multimediali","Errore caricamento contenuti multimediali, tipo file non supportato","Percorso registro errori","Esporta","Esporta immagini fisse","Esporta segmenti video","Esportazione video in corso","Esposizione","I file i cui nomi non corrispondono sono evidenziati in rosso e non saranno inclusi.","Modalit filtro","Formato","FPS","Avanza per fotogrammi","Fotogrammi al secondo","Gamma","Sfocatura gaussiana","Generale","Generazione immagine in corso","Layout globale","GPU","Scala di grigi","Sovrapposizione griglia","Sigma mezzo raggio","Mappa di calore","Altezza","Pulsante Guida","Nascondi tutto","Nascondi layout","Hosting dei contenuti multimediali","Se si desidera impostare lhost per i contenuti multimediali in una posizione diversa da quella principale, specificare lURL di seguito.","Immagine","Se le dimensioni complessive delle immagini sono inferiori a 10 MB,  possibile incorporarle direttamente nel codice di incorporamento di una pagina web, senza caricarle separatamente.","Importa","Iniziale","Input","Ridimensionamento per numeri interi","File non valido. Sono ammessi solo file con le seguenti estensioni:","File non validi. Sono ammessi solo file con le seguenti estensioni:","Inverti output","Jet","Vai all'inizio","Etichetta","Laplaciano (cinque punti)","Laplaciano (nove punti)","Varianza laplaciana","Grande","Schede layout","Posizione sinistra/destra","Per iniziare","Shader locali","Differenza luminanza","Solo errore di luminanza","Evidenzia Inf/NaN","Contenuti multimediali","Dominio/percorso contenuti multimediali","Selettori contenuti multimediali","Medio","Modalit","Trascina con il mouse","Scorri con la rotella del mouse","Moltiplicatore","Prossimit","Nuovo progetto","Nessuna cartella selezionata","Nessun elemento","Nessun elemento (valore predefinito SSIM)","Off","On","Apri","Sovrapposizione","Incorporamento del pacchetto in una pagina web","Vista Panoramica","Differenze per canale","Pixelizzazione","Riprodurre/Mettere in pausa","Keyframe di posizione","Mantieni dimensioni","Anteprima","Gruppo precedente/successivo","Raggio","Ricarica","Rimuovi","Rimuovere gruppo di confronto?","Rimuovere contenuti multimediali?","Reimposta","Reimposta velocit di riproduzione","Differenza RGB","Stessa larghezza e altezza","Salva","Salva progetto","% ridimensionamento","Adatta","Seleziona cartella","Seleziona cartelle con nomi file corrispondenti e crea automaticamente gruppi di confronto.","Gruppo","Selezione gruppo","Impostazioni","Nitidezza","Scorciatoie","Mostra angolo","Mostra legenda mappa di colore","Mostra layout","Mostra miniature","Affiancati","Modalit affiancata","Sigma","Cambiamento di segno","Dimensioni","Keyframe slider","Piccolo","Sobel","Contenuto multimediale singolo","Ordine alfabetico","Ordina per creazione","Spazio","Dividi schermo","Modalit schermo diviso","Quadrato","SSIM","SSIM completo","Modalit SSIM","SSIM semplificato","Ora di inizio","Solo errore strutturale","Simmetrico","Si  verificato un errore durante lesportazione del video","Si  verificato un errore durante la creazione del pacchetto di incorporamento della pagina web. Riprova pi tardi.","Questo software utilizza codici FFmpeg ai sensi della licenza LGPLv2.1","Il contenuto multimediale sar rimosso da tutti i gruppi di confronto presenti nel progetto. Rimuovere il contenuto multimediale?","Affiancamento","Dimensioni titolo","Schermo intero","Tolleranza","In alto a sinistra","In alto a destra","Tipo","Posizione su/gi","Versione","Video","Visualizza le note sulla versione","Web","Pacchetto di incorporamento della pagina web salvato con successo","Peso contrasto","Peso luminanza","Peso struttura","Larghezza","Salvare il progetto corrente prima di continuare?","Raggio X","Sigma X","Raggio Y","Sigma Y","La GPU sta facendo registrare problemi nella decodifica del supporto. Per prestazioni migliori, tentare di chiudere tutte le applicazioni utilizzando le risorse GPU e/o riavviando il dispositivo.","Le clip multimediali resteranno nel pannello dei contenuti multimediali, mentre tutte le operazioni eseguite in questo gruppo di confronto andranno perse. Rimuovere il gruppo?","Il progetto  stato salvato","Vista Zoom"],"ja-jp":["https://.com/","","","","","","","",""," ()","","2","","----","","","","","","CIE-LAB","[]/","Codec"," ",""," "," ","","CTRL+","CTRL + 1-9","CTRL + f","","","","","","","","FFmpeg","","","","","","","","","","","","","","",""," ","","FPS","","/",""," ","","","","GPU",""," ","","","","","","","","URL","","10MB","","","","","","","","","","","Laplacian5","Laplacian9","Laplacian",""," ","/PX",""," ","","","Inf/NaN","","/"," ","",""," ","  ","","","","","","SSIM ","","","","","","Pan","","","/","","","","/","","","","","","","","RGB","","",""," (%)","","","","","","","","","","  ","","","  ","   ",""," ",""," ","","Sobel"," ","","","",""," ","","SSIM","SSIM","SSIM","SSIM","","","","","","LGPLv2.1FFmpeg","",""," ","","","","","","/PX","",""," ","","","","","","","","X","X","Y","Y","GPUGPU","",""," "],"ko-kr":["(: https://.com/)",""," "," "," ","    .","    .","","  "," ()","","2"," ","----"," "," ","   :","","  ","CIE-LAB ","    /    .",""," "," ","  "," ","  ","CTRL +","CTRL + 1-9","CTRL + f"," ","","","","","  ","","FFmpeg  "," ","  ","   ","   ","   ","","   ","   ,    ","  ","","  ","  "," ","","       ."," ","","FPS"," "," ",""," ",""," "," ","GPU",""," ","  ","",""," "," "," "," ","      ,  URL .","","   10MB  ,           .","","",""," "," .     :"," .     :"," ",""," ","","(5)","(9)"," ",""," ","/ PX",""," "," ","  ","Inf/NaN ",""," /"," ","",""," ","  ","","NN(Nearest Neighbor)"," ","  ","","(SSIM )","","","","","  "," "," ","","/ "," "," ","","/ ","","","","  ?"," ?","","  ","RGB ","   ",""," ","% ","  "," ","        .",""," ","",""," "," ","   "," "," ",""," ",""," ",""," ","",""," "," "," ",""," ","  ","","SSIM","SSIM ","SSIM ","SSIM "," ","  ","","    .","      .  .","  LGPLv2.1  FFmpeg  .","        .   ?",""," ","  ",""," "," ","","/ PX","","","  ","","    ."," "," "," ","","   ?","X ","X ","Y ","Y ","   GPU  .    GPU     /   .","     ,       .   ?"," .","/ "],"nb-no":["(dvs. https://domene.com/bane)","Absolutt","Legg til filter","Legg til media","Legg til overlegg","Legg til overlegg for  kommentere p sammenligningen din.","Juster klippets forskyvning for  innrette videoene.","Vinkel","Opprett sett automatisk","Gjennomsnittlige farger (saktere)","Tolinjet","Binr","Bithastighet","Svart-bl-fiolett-hvit","Nedre venstre","Nedre hyre","Kan ikke vise filter:","Avbryt","Endre avspillingshastighet","CIE-LAB-forskjell","Klikk Legg til media eller dra og slipp video-/bildefiler i dette vinduet for  sammenligne dem.","Kodek","Fargemodus","Sammenligningssett","Kun kontrastfeil","Kontrollinje","Kopier innebyggingskode","CTRL +","CTRL + 1-9","CTRL + f","Tilpassing","Slett","Forskjell","Dimensjoner","Deaktiver","Ikke lagre","Last ned","Last ned FFmpeg-kilde.","Varighet","Innebyggingskode kopiert","Innebyggingskode kopiert til utklippstavle","Bygg bilder inn i kode","Innebygd i nettsidens kode","Aktiver","Feil under lasting av media","Feil under lasting av media, filtypen stttes ikke","Feilkodebane","Eksporter","Eksporter stillbilder","Eksporter videosegmenter","Eksporterer video","Eksponering","Filer uten matchende navn merkes med rdt og vil bli utelatt.","Filtreringsmodus","Format","BPS","Bildefremmating","Bilder per sekund","Gamma","Gaussisk uskarphet","Generelt","Genererer bilde","Global layout","GPU","Grtone","Ruteoverlegg","Sigma med halv radius","Varmekart","Hyde","Hjelp-knapp","Skjul alle","Skjul layout","Hosting av media","Hvis du velger  hoste media p et annet sted enn roten, m du spesifisere URL-en under.","Bilde","Bilder kan bygges direkte inn i en nettside med innebyggingskode uten  laste dem opp separat, hvis den totale filstrrelsen er under 10 MB.","Importer","Forbokstav","Inndata","Heltallskalering","Ugyldig fil. Kun filer med flgende filnavn aksepteres:","Ugyldige filer. Kun filer med flgende filnavn aksepteres:","Inverter utdata","Jet","G til start","Etikett","Laplace-operator (fem-punkts)","Laplace-operator (ni-punkts)","Laplace-variant","Stor","Layout-faner","Venstre/hyre PX","La oss komme i gang","Lokale skyggeleggere","Lystetthetsforskjell","Kun lystetthetsfeil","Merk Inf/NaN","Medier","Mediedomene/-bane","Medievelgere","Middel","Modus","Dra mus","Musehjul","Multiplikator","Nrmeste nabo","Nytt prosjekt","Ingen mapper valgt","Ingen","Ingen (SSIM-standard)","Av","P","pne","Overlegg","Bygg pakke inn i nettside","Panorer visning","Forskjeller per kanal","Pikselisering","Spill av / pause","Posisjonsnkkelbilder","Bevar dimensjoner","Forhndsvisning","Forrige/neste sett","Radius","Last inn p nytt","Fjern","Fjene sammenligningssett?","Fjerne medier?","Tilbakestill","Tilbakestill avspillingshastighet","RGB-forskjell","Samme bredde og hyde","Lagre","Lagre prosjekt","Skala %","Skaler til riktig strrelse","Velg mappe","Velg mapper med matchende filnavn, og sammenligningssett vil opprettes automatisk.","Sett","Valg av sett","Innstillinger","Skarphet","Snarveier","Vis vinkel","Vis tegnforklaring for fargekart","Vis layout","Vis miniatyrbilder","Side-ved-side","Side-ved-side-modus","Sigma","Vend skilt","Strrelse","Glidebryter for nkkelbilder","Liten","Sobel","Solo media","Sorter alfabetisk","Sorter etter opprettet","Mellomrom","Delt skjerm","Delt skjerm-modus","Multiplisert","SSIM","SSIM full","SSIM-modus","SSIM forenklet","Starttidspunkt","Kun strukturfeil","Symmetrisk","Det oppsto en feil under eksportering av videoen din","Det oppsto en feil ved oppretting av din innebygde nettsidepakke, prv igjen.","Denne programvaren bruker kode for FFmpeg lisensiert under LGPLv2.1","Dette vil fjerne mediene fra alle sammenligningssett i dette prosjektet. Vil du fjerne disse mediene?","Tiling","Tittelstrrelse","Sl av og p fullskjerm","Toleranse","vre venstre","vre hyre","Type","Opp/ned PX","Versjon","Video","Vis versjonsmerknader","Internett","Innebyggingspakke for nettside ble lagret","Vekt kontrast","Vekt lystetthet","Vekt struktur","Bredde","Vil du lagre ditt nvrende prosjekt fr du fortsetter?","X-radius","X-sigma","Y-radius","Y-sigma","Din GPU har problemer med  dekode mediene dine. For bedre ytelse kan du prve  lukke alle applikasjoner som bruker GPU-ressurser, og/eller starte enheten din p nytt.","Medieklippene dine vil vre p Media-panelet, men alt du har gjort i dette sammenligningssettet vil g tapt. Vil du fjerne dette settet?","Prosjektet ditt er lagret","Zoom visning"],"nl-nl":["(bijvoorbeeld https://domein.com/pad)","Absoluut","Filter toevoegen","Media toevoegen","Overlay toevoegen","Voeg een overlay toe om je vergelijking te annoteren.","Pas de offset van clips aan om de video's uit te lijnen.","Hoek","Automatisch sets maken","Gemiddelde kleuren (trager)","Bilineair","Binair","Bitsnelheid","Zwart-blauw-violet-geel-wit","Linksonder","Rechtsonder","Filter kan niet worden weergegeven:","Annuleren","Afspeelsnelheid wijzigen","CIE-LAB-verschil","Klik op Media toevoegen of sleep video-/afbeeldingsbestanden naar dit venster om ze te vergelijken.","Codec","Kleurmodus","Vergelijkingssets","Alleen contrastfout","Controlebalk","Insluitingscode kopiren","CTRL +","CTRL + 1-9","CTRL + f","Aanpassing","Verwijderen","Verschil","Dimensies","Uitschakelen","Niet opslaan","Downloaden","Download de FFmpeg-bron.","Duur","Insluitingscode gekopieerd","Insluitingscode gekopieerd naar klembord","Afbeeldingen insluiten in code","Ingesloten in webpaginacode","Inschakelen","Fout bij het laden van media","Fout bij het laden van media, niet-ondersteund bestandstype","Pad naar foutlogs","Exporteren","Stilstaande beelden exporteren","Videosegmenten exporteren","Video exporteren","Belichting","Bestanden zonder bijpassende namen worden rood gemarkeerd en buiten beschouwing gelaten.","Filtermodus","Indeling","FPS","Framesnelheid","Frames per seconde","Gamma","Normale vervaging","Algemeen","Afbeelding genereren","Algemene lay-out","GPU","Grijswaarden","Raster-overlay","Half-radius sigma","Heatmap","Hoogte","Hulpknop","Alles verbergen","Lay-out verbergen","Media hosten","Als je ervoor kiest om media op een andere locatie vanaf de root te hosten, moet je hieronder de URL specificeren.","Afbeelding","Als de totale bestandsgrootte kleiner is dan 10 MB, kun je afbeeldingen rechtstreeks insluiten in code op de webpagina zonder dat je ze afzonderlijk hoeft te uploaden.","Importeren","Begin","Invoer","Getalschaling","Ongeldig bestand. Alleen bestanden met de volgende extensies worden geaccepteerd:","Ongeldige bestanden. Alleen bestanden met de volgende extensies worden geaccepteerd:","Uitvoer inverteren","Fel","Naar begin springen","Label","Laplaciaan (vijfpunts)","Laplaciaan (negenpunts)","Laplaciaanse variatie","Groot","Lay-outtabbladen","Pos links/rechts","Aan de slag","Lokale shaders","Luminantieverschil","Alleen luminantiefout","Inf/NaN-markering","Media","Mediadomein/-pad","Mediaselectors","Gemiddeld","Modus","Slepen met muis","Muiswieltje","Vermenigvuldiger","Dichtstbijzijnde buur","Nieuw project","Geen mappen geselecteerd","Geen","Geen (SSIM-standaard)","Uit","Aan","Openen","Overlay","Pakket insluiten in webpagina","Beeld pannen","Verschillen per kanaal","Pixelisatie","Afspelen/pauze","Sleutelframes positie","Dimensies behouden","Voorbeeld","Vorige/volgende set","Radius","Herladen","Verwijderen","Vergelijkingsset verwijderen?","Media verwijderen?","Resetten","Afspeelsnelheid resetten","RGB-verschil","Zelfde breedte en hoogte","Opslaan","Project opslaan","Schaal-%","Passende schaal","Map selecteren","Selecteer mappen met bijpassende bestandsnamen om automatisch vergelijkingssets te maken.","Instellen","Sets selecteren","Instellingen","Scherpte","Sneltoetsen","Hoek weergeven","Kleurenlegenda weergeven","Lay-out weergeven","Thumbnails weergeven","Naast elkaar","Naast elkaar weergeven","Sigma","Teken wijzigen","Grootte","Sleutelframes schuif","Klein","Sobel","Solomedia","Alfabetisch sorteren","Sorteren op aanmaakdatum","Spatie","Gesplitst scherm","Gesplitst scherm-modus","Gekwadrateerd","SSIM","SSIM volledig","SSIM-modus","SSIM vereenvoudigd","Begintijd","Alleen structurele fout","Symmetrisch","Er ging iets mis bij het exporteren van je video","Er ging iets mis bij het genereren van je in de webpagina ingesloten pakket. Probeer het nog eens.","Deze software maakt gebruik van FFmpeg-code onder licentie van de LGPLv2.1","Hiermee verwijder je de media uit alle vergelijkingssets in dit project. Wil je deze media verwijderen?","Tegels","Titelgrootte","Volledig scherm aan/uit","Tolerantie","Linksboven","Rechtsboven","Type","Pos omhoog/omlaag","Versie","Video","Release-opmerkingen bekijken","Web","In webpagina ingesloten pakket opgeslagen","Gewogen contrast","Gewogen luminantie","Gewogen structuur","Breedte","Wil je je huidige project opslaan voordat je doorgaat?","X-radius","X-sigma","Y-radius","Y-sigma","Je GPU heeft moeite met het decoderen van je media. Sluit voor betere prestaties alle apps die gebruikmaken van GPU-bronnen en/of start je apparaat opnieuw op.","Je mediaclips blijven in het mediapaneel, maar alles wat je hebt gedaan in deze vergelijkingsset gaat verloren. Wil je deze set verwijderen?","Je project is opgeslagen","Beeld zoomen"],"pl-pl":["(tzn. https://domena.com/cieka)","Bezwzgldne","Dodaj filtr","Dodaj multimedia","Dodaj nakadk","Dodaj nakadk, aby opisa swoje porwnanie.","Dostosuj odstp midzy klipami, aby dopasowa filmy.","Kt","Twrz zestawy automatycznie","Urednij kolory (wolniejsze)","Dwuliniowe","Binarne","Szybko transmisji","Czarny-niebieski-fioletowy-ty-biay","Na dole po lewej","Na dole po prawej","Nie mona wywietli filtra:","Anuluj","Zmie prdko odtwarzania","Rnica CIE-LAB","Kliknij Dodaj multimedia lub przecignij i upu pliki wideo / obrazy do tego okna, aby je porwna.","Kodek","Tryb koloru","Zestawy porwnawcze","Tylko bd kontrastu","Pasek sterowania","Kopiuj kod osadzenia","CTRL +","CTRL + 19","CTRL + f","Dostosowywanie","Usu","Rnica","Wymiary","Wycz","Nie zapisuj","Pobierz","Pobierz rdo FFmpeg.","Czas trwania","Kod osadzania skopiowany","Kod osadzania zosta skopiowany do schowka","Osad obrazy w kodzie","Osadzono w kodzie strony WWW","Wcz","Bd podczas adowania multimediw","Bd podczas adowania multimediw, nieobsugiwany typ pliku","cieka dziennikw bdw","Eksportuj","Eksportuj obrazy","Eksportuj segmenty filmu","Eksportowanie filmu","Ekspozycja","Pliki bez pasujcych nazw s zaznaczone na czerwono i zostan pominite.","Tryb filtrowania","Format","KL./S","Odtwarzanie po klatce","Liczba klatek na sekund","Gamma","Rozmycie gaussowskie","Oglne","Generowanie obrazu","Oglny ukad","Procesor graficzny","Skala szaroci","Nakadka siatki","Sigma ppromienia","Mapa cieplna","Wysoko","Przycisk Pomoc","Ukryj wszystko","Ukryj ukad","Hostowanie multimediw","Jeli zdecydujesz si hostowa multimedia w innej lokalizacji ni gwna, okrel adres URL poniej.","Obraz","Obrazy mona osadza bezporednio w kodzie osadzania strony internetowej bez koniecznoci przesyania ich osobno, jeli cakowity rozmiar pliku jest mniejszy ni 10 MB.","Importuj","Pocztkowe","Wejcie","Skalowanie cakowite","Nieprawidowy plik. Akceptowane s tylko pliki z nastpujcymi rozszerzeniami:","Nieprawidowe pliki. Akceptowane s tylko pliki z nastpujcymi rozszerzeniami:","Odwr wyjcie","Strumie","Przejd do pocztku","Etykieta","Laplasjan (piciopunktowy)","Laplasjan (dziewiciopunktowy)","Wariancja laplasjana","Duy","Karty ukadu","Poo. lewo/prawo","Rozpocznijmy","Lokalne jednostki cieniowania","Rnica luminancji","Tylko bd luminancji","Oznacz Nieskoczono / Nie liczba","Multimedia","Domena/cieka multimediw","Selektory multimediw","redni","Tryb","Przecignicie mysz","Kko przewijania myszy","Mnonik","Najbliszy ssiad","Nowy projekt","Nie wybrano folderw","Brak","Brak (domylne SSIM)","Wy.","W.","Otwrz","Nakadka","Zapakuj osadzenie w stronie WWW","Widok panoramiczny","Rnice wg kanaw","Pikselizacja","Odtwrz/Wstrzymaj","Pozycja klatek kluczowych","Zachowaj wymiary","Podgld","Poprzedni/Nastpny zestaw","Promie","Zaaduj ponownie","Usu","Usun zestaw porwnawczy?","Usun multimedia?","Resetuj","Resetuj prdko odtwarzania","Rnica RGB","Ta sama szeroko i wysoko","Zapisz","Zapisz projekt","Warto procentowa skalowania","Skaluj, aby dopasowa","Wybierz folder","Wybierz foldery z pasujcymi nazwami plikw, a zestawy porwnawcze zostan utworzone automatycznie.","Ustaw","Wybr zestaww","Ustawienia","Ostro","Skrty","Poka kt","Poka legend mapy kolorw","Poka ukad","Poka miniatury","Obok siebie","Tryb obok siebie","Sigma","Zmiana znaku na przeciwny","Rozmiar","Suwak klatek kluczowych","May","Sobel","Pojedynczy element multimedialny","Sortuj alfabetycznie","Sortuj wg czasu utworzenia","Przestrze","Podzielony ekran","Tryb Podzielony ekran","Kwadratowy","SSIM","SSIM, peny","Tryb SSIM","SIMM, uproszczony","Czas rozpoczcia","Tylko bd strukturalny","Symetryczny","Podczas eksportowania filmu wideo wystpi bd","Wystpi bd podczas generowania pakietu osadzania strony. Sprbuj ponownie.","To oprogramowanie wykorzystuje kod FFmpeg na licencji LGPLv2.1","Spowoduje to usunicie tego elementu multimedialnego ze wszystkich zestaww porwnawczych w tym projekcie. Czy chcesz usun ten element multimedialny?","Kafelki","Rozmiar tytuu","Przecz peny ekran","Tolerancja","U gry po lewej","U gry po prawej","Typ","Poo. gra/d","Wersja","Wideo","Wywietl informacje o wersji","WWW","Pakiet osadzania strony internetowej zosta pomylnie zapisany","Waga kontrastu","Waga luminancji","Waga struktury","Szeroko","Czy chcesz zapisa biecy projekt przed kontynuowaniem?","Promie X","Sigma X","Promie Y","Sigma Y","Procesor graficzny ma problemy z dekodowaniem multimediw. Aby uzyska lepsz wydajno, sprbuj zamkn wszystkie aplikacje wykorzystujce zasoby procesora graficznego i (lub) uruchom ponownie urzdzenie.","Klipy multimedialne pozostan w panelu multimediw, ale wszystko, co zostao zrobione w tym zestawie porwnawczym, zostanie utracone. Czy chcesz usun ten zestaw?","Projekt zosta zapisany","Powiksz widok"],"pt-br":["(por exemplo, https://domnio.com/caminho)","Absoluta","Adicionar filtro","Adicionar mdia","Adicionar sobreposio","Adicione Sobreposio para fazer anotaes em sua comparao.","Ajuste o deslocamento do clipe para alinhar os vdeos.","ngulo","Criar conjuntos automaticamente","Mdia de cores (mais lento)","Bilinear","Binria","Taxa de bits","Preto-azul-violeta-amarelo-branco","Inferior  esquerda","Inferior  direita","No foi possvel exibir o filtro:","Cancelar","Alterar a velocidade de reproduo","Diferena entre CIE e LAB","Clique em Adicionar mdia ou arraste e solte arquivos de vdeo/imagem nessa janela para compar-los.","Codec","Modo de cor","Conjuntos de comparao","Somente erro de contraste","Barra de controle","Copiar cdigo de insero","CTRL +","CTRL + 1-9","CTRL + f","Personalizao","Excluir","Diferena","Dimenses","Desabilitar","No salvar","Baixar","Baixe a fonte FFmpeg.","Durao","Cdigo de insero copiado","Cdigo de insero copiado para a rea de transferncia","Imagens de insero no cdigo","Incorporado no cdigo da pgina da web","Habilitar","Erro ao carregar mdia","Erro ao carregar mdia. Tipo de arquivo no aceito","Caminho dos logs de erros","Exportar","Exportar imagens estticas","Exportar segmentos de vdeo","Exportando o vdeo","Exposio","Arquivos sem nomes correspondentes so marcados em vermelho e sero omitidos.","Modo de filtragem","Formato","FPS","Avano de quadro","Quadros por segundo","Gama","Desfoque gaussiano","Geral","Gerando imagem","Layout global","GPU","Escala de cinza","Sobreposio da grade","Sigma de meio raio","Mapa de calor","Altura","Boto Ajuda","Ocultar tudo","Ocultar layout","Hospedando mdia","Se voc optar por hospedar a mdia em um local diferente da raiz, especifique o URL abaixo.","Imagem","As imagens podem ser incorporadas diretamente no cdigo de insero da pgina da web sem carreg-las separadamente se o tamanho total do arquivo for inferior a 10 MB.","Importar","Inicial","Entrada","Dimensionamento inteiro","Arquivo invlido. Somente arquivos com as seguintes extenses so aceitos:","Arquivos invlidos. Somente arquivos com as seguintes extenses so aceitos:","Inverter sada","Jato","Ir para o incio","Etiqueta","Laplaciano (cinco pontos)","Laplaciano (nove pontos)","Varincia laplaciana","Grande","Guias de layout","Posio para a esquerda/direita","Vamos comear","Sombreadores locais","Diferena de luminncia","Somente erro de luminncia","Marcar Inf/NaN","Mdia","Domnio/caminho da mdia","Seletores de mdia","Mdio","Modo","Arrasto do mouse","Roda de rolagem do mouse","Multiplicador","Vizinho mais prximo","Novo projeto","Nenhuma pasta selecionada","Nenhum(a)","Nenhum (padro SSIM)","Desligado","Ligado","Abrir","Sobreposio","Pacote de insero de pgina da web","Vista panormica","Diferenas por canal","Pixelizao","Reproduzir/Pausar","Quadros-chave de posio","Preservar dimenses","Visualizar","Conjunto anterior/prximo conjunto","Raio","Recarregar","Remover","Remover conjunto de comparao?","Remover mdia?","Redefinir","Redefinir a velocidade de reproduo","Diferena de RGB","Mesma largura e altura","Salvar","Salvar projeto","Dimensionamento em %","Dimensionar para caber","Selecionar pasta","Selecione as pastas com nomes de arquivo correspondentes e os conjuntos de comparao sero criados automaticamente.","Conjunto","Selecionar conjuntos","Configuraes","Nitidez","Atalhos","Mostrar ngulo","Mostrar legenda do mapa de cores","Mostrar layout","Mostrar miniaturas","Lado a lado","Modo lado a lado","Sigma","Inverso de sinal","Tamanho","Quadros-chave deslizantes","Pequeno","Sobel","Mdia individual","Classificar em ordem alfabtica","Classificar por data de criao","Barra de espao","Tela dividida","Modo de tela dividida","Quadrado","SSIM","SSIM completo","Modo de SSIM","SSIM simplificado","Hora de incio","Somente erro estrutural","Simtrico","Ocorreu um erro ao exportar o vdeo","Ocorreu um erro ao gerar o pacote de insero de pgina da web. Tente novamente.","Esse software usa cdigo FFmpeg licenciado de acordo com a LGPLv2.1","Isso remover a mdia de todos os conjuntos de comparao nesse projeto. Deseja remover essa mdia?","Lado a lado","Tamanho do ttulo","Ativar/desativar tela cheia","Tolerncia","Superior  esquerda","Superior  direita","Tipo","Posio para cima/baixo","Verso","Vdeo","Exibir notas da verso","Web","Pacote de insero de pgina da web salvo com sucesso","Contraste de peso","Luminncia de peso","Estrutura de peso","Largura","Gostaria de salvar o projeto atual antes de continuar?","Raio de X","Sigma de X","Raio de Y","Sigma de Y","Sua GPU est com dificuldade de decodificar sua mdia. Para um melhor desempenho, tente fechar todos os aplicativos que usam recursos da GPU e/ou reiniciar seu dispositivo.","Os clipes de mdia permanecero no painel Mdia, mas tudo o que voc fez nesse conjunto de comparao ser perdido. Deseja remover esse conjunto?","O projeto foi salvo","Aplicar zoom na vista"],"pt-pt":["(p.ex., https://domnio.com/caminho)","Absoluta","Adicionar filtro","Adicionar multimdia","Adicionar sobreposio","Adicione uma sobreposio para anotar a comparao.","Ajuste o desvio do clipe para alinhar os vdeos.","ngulo","Criar conjuntos automaticamente","Nvel mdio de cores (mais lento)","Bilinear","Binrio","Velocidade de transmisso","Preto-azul-violeta-amarelo-branco","Inferior esquerdo","Inferior direito","No  possvel apresentar o filtro:","Cancelar","Alterar velocidade de reproduo","Diferena CIE-LAB","Clique em Adicionar multimdia ou arraste e largue os ficheiros de vdeo/imagem para esta janela para compar-los.","Codec","Modo de cor","Conjuntos de comparao","Apenas erros de contraste","Barra de controlo","Copiar cdigo integrado","CTRL +","CTRL + 1-9","CTRL + F","Personalizao","Eliminar","Diferena","Dimenses","Desativar","No guardar","Transferir","Transfira a origem FFmpeg.","Durao","Cdigo integrado copiado","Cdigo integrado copiado para a rea de transferncia","Imagens integradas no cdigo","Integrado no cdigo da pgina web","Ativar","Erro ao carregar multimdia","Erro ao carregar multimdia, tipo de ficheiro no suportado","Caminho dos registos de erros","Exportar","Exportar imagens estticas","Exportar segmentos de vdeo","A exportar vdeo","Exposio","Os ficheiros sem nomes correspondentes esto assinalados a vermelho e sero omitidos.","Modo de filtrao","Formato","FPS","Avanar videogramas","Videogramas por segundo","Gama","Desfocagem gaussiana","Geral","A gerar imagem","Disposio global","GPU","Escala de cinza","Sobreposio da grelha","Meio-raio sigma","Mapa trmico","Altura","Boto de ajuda","Ocultar tudo","Ocultar disposio","Alojamento de multimdia","Se optar por alojar multimdia numa localizao diferente da raiz, indique o URL abaixo.","Imagem","As imagens podem ser incorporadas diretamente no cdigo integrado da pgina web sem efetuar o carregamento das mesmas em separado, se o tamanho total do ficheiro for inferior a 10 MB.","Importar","Inicial","Entrada","Dimensionamento Integer","O ficheiro no  vlido. Apenas so aceites os ficheiros com as seguintes extenses:","Os ficheiros no so vlidos. Apenas so aceites os ficheiros com as seguintes extenses:","Inverter sada","Chama azul","Avanar para o incio","Etiqueta","Laplaciano (cinco pontos)","Laplaciano (nove pontos)","Varincia laplaciana","Grande","Separadores da disposio","PX esquerdo/direito","Vamos comear","Sombreadores locais","Diferena de lumincia","Apenas erros de luminncia","Marcar Inf/NaN","Multimdia","Domnio/Caminho da multimdia","Seletores de multimdia","Nvel mdio","Modo","Arrastar do rato","Roda do rato","Multiplicador","Vizinho mais prximo","Novo projeto","Nenhuma pasta selecionada","Nenhum/a","Nenhum (predefinio SSIM)","Desativar","Ativar","Abrir","Sobreposio","Integrao do pacote da pgina web","Vista panormica","Diferena por canal","Pixelizao","Reproduzir/Pausa","Fotogramas chave da posio","Preservar dimenses","Pr-visualizao","Conjunto anterior/seguinte","Raio","Recarregar","Remover","Remover conjunto de comparao?","Remover multimdia?","Repor","Repor velocidade de reproduo","Diferena RGB","Largura e altura iguais","Guardar","Guardar projeto","Escala %","Ajustar tamanho","Selecionar pasta","Selecione as pastas com os nomes de ficheiro correspondentes e os conjuntos de comparao sero criados automaticamente.","Definir","Conjuntos selecionados","Definies","Acentuao","Atalhos","Mostrar ngulo","Mostrar legenda do mapa de cores","Mostrar disposio","Mostrar miniaturas","Lado a lado","Modo lado a lado","Sigma","Inverter sinal","Tamanho","Fotogramas chave do cursor","Pequeno","Sobel","Multimdia individual","Ordenar alfabeticamente","Ordenar por data de criao","Espao","Ecr dividido","Modo de ecr dividido","Quadrado","SSIM","SSIM integral","Modo SSIM","SSIM simplificado","Hora de incio","Apenas erros de estrutura","Simtrico","Ocorreu um erro ao exportar o vdeo","Ocorreu um erro ao gerar o pacote integrado da pgina web, tente novamente.","Este software utiliza cdigo FFmpeg licenciado ao abrigo de LGPLv2.1","Esta ao ir remover a multimdia de todos os conjuntos de comparao deste projeto. Pretende remover esta multimdia?","Repetir em azulejo","Tamanho do ttulo","Alternar ecr inteiro","Tolerncia","Superior esquerdo","Superior direito","Tipo","PX superior/inferior","Verso","Vdeo","Ver notas de lanamento","Web","Pacote integrado da pgina web guardado com xito","Contraste do peso","Luminncia do peso","Estrutura do peso","Largura","Pretende guardar o projeto atual antes de continuar?","Raio X","Sigma X","Raio Y","Sigma Y","A GPU est a apresentar dificuldades na descodificao do seu contedo multimdia. Para conseguir um melhor desempenho, experimente fechar todas as aplicaes que utilizam recursos da GPU e/ou reinicie o seu dispositivo.","Os clipes de multimdia permanecero no painel Multimdia, contudo, todas as aes efetuadas neste conjunto de comparao sero perdidas. Pretende remover este conjunto?","O projeto foi guardado","Vista de zoom"],"ro-ro":["(de ex. https://domeniu.com/cale)","Absolut","Adugare filtru","Adugare media","Adugare suprapunere","Adugare suprapunere pentru a adnota comparaia.","Reglai decalajul decupajului pentru a alinia videoclipurile.","Unghi","Creare seturi automat","Culori nivel mediu (mai ncet)","Biliniar","Binar","Rat bii","Negru-albastru-violet-galben-alb","Stnga jos","Dreapta jos","Filtrul nu poate fi afiat:","Anulare","Modificare vitez de redare","Diferen CIE-LAB","Facei clic pe Adugare media sau tragei i fixai fiiere video/imagine n aceast fereastr pentru a le compara.","Codec","Mod culoare","Seturi de comparare","Numai eroare de contrast","Bara de control","Copiere cod de integrare","CTRL +","CTRL + 1-9","CTRL + f","Personalizare","tergei","Diferen","Dimensiuni","Dezactivai","Nu salvai","Descrcare","Descrcare surs FFmpeg","Durata","Integrare cod copiat","Cod de integrare copiat n clipboard","Integrare imagini n cod","Integrare pagin web n cod","Activai","Eroare la ncrcarea media","Eroare la ncrcarea media, tip de fiier neacceptat","Cale jurnale de eroare","Export","Exportare imagini fixe","Exportare segmente videoclip","Se export videoclip","Expunere","Fiierele care nu au nume corespunztoare sunt marcate cu rou i vor fi omise.","Mod de filtrare","Format","FPS","Cadru avansat","Cadre pe secund","Gamma","Gaussian blur","General","Se genereaz imaginea","Format global","GPU","Scal","Suprapunere gril","Jumtate de raz sigma","Hart termic","nlime","Buton ajutor","Ascundere toate","Ascundere format","Gzduire media","Dac alegei s gzduii mediile ntr-o locaie diferit de cea a rdcinii, specificai URL-ul de mai jos.","Imagine","Imaginile pot fi ncorporate direct n codul de ncorporare al paginii web fr a le ncrca separat, dac dimensiunea total a fiierului este mai mic de 10 MB.","Importare","Iniial","Intrare","Scalare numr ntreg","Fiier nevalid. Sunt acceptate numai fiierele cu urmtoarele extensii:","Fiiere nevalide. Sunt acceptate numai fiierele cu urmtoarele extensii:","Inversare ieire","Jet","Mergei la nceput","Etichet","Laplacian (cinci puncte)","Laplacian (nou puncte)","Variaie laplacian","Mare","Format file","Poz. stnga/dreapta","S ncepem","Shaders local","Diferena de luminan","Numai eroare de luminan","Marcaj Inf/NaN","Media","Domeniu/cale media","Selectori media","Medie","Mod","Tragere cu mouse-ul","Roti de derulare a mouse-ului","Multiplicator","Cel mai apropiat","Proiect nou","Niciun folder selectat","Niciunul","Niciunul (SSIM implicit)","Dezactivat","Pornit","Deschidere","Suprapunere","Pachet ncorporabil n pagina web","Vizualizare panoramic","Diferene per canal","Pixelizare","Redare/Pauz","Poziie cadre cheie","Pstrare dimensiuni","Previzualizare","Set anteriorul/urmtorul","Radius","Rencrcare","Eliminare","Eliminai setul de comparaie?","Eliminai media?","Resetai","Resetare vitez de redare","Diferen RGB","Aceeai lime i nlime","Salvare","Salvare proiect","Scal %","Scalare pentru potrivire","Selectare folder","Selectai folderele cu nume de fiiere corespunztoare i se vor crea automat seturi de comparaie.","Set","Selectare seturi","Setri","Acuitate","Comenzi rapide","Afiare unghi","Afiare legend culori hart","Afiare format","Afiare miniaturi","Side-by-side","Mod Side-by-side","Sigma","Schimbare semn","Dimensiune","Cadre cheie ale cursorului","Mic","Sobel","Media unic","Sortai n ordine alfabetic","Sortare dup creare","Spaiu","Divizare ecran","Mod divizare ecran","La ptrat","SSIM","SSIM plin","Mod SSIM","SSIM simplificat","Ora de pornire","Numai eroare structural","Simetric","Exist o eroare la exportul videoclipului","A aprut o eroare la generarea pachetului paginii ncorporabil n pagina web, ncercai din nou.","Acest software folosete codul lui FFmpeg liceniat sub LGPLv2.1","Acest lucru va elimina mediile din toate seturile de comparaie din acest proiect. Eliminai acest media?","Multiplicare","Dimensiune titlu","Comutare ecran complet","Toleran","Stnga sus","Dreapta sus","Tip","Poz. sus/jos","Versiune","Videoclip","Vizualizare note de versiune","Web","Pachet ncorporabil n pagina web salvat cu succes","Pondere contrast","Pondere luminan","Pondere structur","Lime","Salvai proiectul actual nainte de a continua?","X Radius","X Sigma","Y Radius","Y Sigma","GPU ntmpin dificulti n decodarea suportului media. Pentru performan mbuntit, nchidei toate aplicaiile care utilizeaz resursele GPU i/sau repornii dispozitivul.","Decupajele media vor rmne n panoul Media, dar tot ceea ce ai fcut n acest set de comparaie se va pierde. Eliminai acest set?","Proiectul a fost salvat","Vizualizare zoom"],"ru-ru":["(, https://.com/)",""," "," "," ","    .","     .","","  ","  ()","","-"," ","----"," "," ","   :","","  ","  CIE  LAB","           .",""," "," ","  "," ","  ","CTRL +","CTRL + 1-9","CTRL + f","","","","",""," ","","  FFmpeg.","","  ","     ","   ","   -","","  ","  ,   ","   ","","  "," "," ","","         ."," ","","/"," ","  ",""," ",""," "," ",""," "," ","  "," ",""," "," "," "," ","        ,  URL- .","","       -,    ,       10 .","","",""," "," .      :"," .      :"," ","","  ","","  ( )","  ( )"," ",""," "," /"," "," "," ","  "," Inf/NaN","","/ "," ","",""," ","  ",""," "," ","  ",""," (SSIM  )",".",".","","","  - "," ","  ","","./","  "," "," ","/ ","","","","  ?"," ?","","  "," RGB","   ",""," ","% ","  "," ","     ,      .",""," ","","",""," ","   "," "," ",""," ",""," ","","  ",""," "," ","  ","   ",""," ","  "," ","SSIM","SSIM ()"," SSIM","SSIM ()"," ","  ","","  ","      -,  .","     FFmpeg,    LGPLv2.1","           .   ?"," "," ","./.  ",""," "," ",""," /","","","   ","","    - "," "," "," ","","  ,   ?"," X"," X"," Y"," Y","      .       ,   , /  .","     ,         .   ?"," ",""],"sk-sk":["(napr. https://domena.sk/cesta)","Absoltna","Prida filter","Prida mdi","Prida prekrytie","Pridajte prekrytie a okomentujte svoje porovnanie.","Upravte posun klipu a zarovnajte vide.","Uhol","Automaticky vytvra skupiny","Spriemerova farby (pomalie)","Bilinerne","Binrne","Bitov rchlos","ierna, modr, fialov, lt, biela","Vavo dole","Vpravo dole","Filter sa ned zobrazi:","Zrui","Zmeni rchlos prehrvania","Rozdiel medzi CIE a LAB","Kliknite na poloku Prida mdi alebo presute myou videosbory alebo obrzkov sbory do tohto okna, aby ste ich mohli porovna.","Kodek","Farebn reim","Skupiny porovnan","Iba chyby kontrastu","Ovldac panel","Koprova vkladac kd","CTRL +","CTRL + 1  9","CTRL + f","Prispsobenie","Odstrni","Rozdiel","Rozmery","Vypn","Neuloi","Prevzia","Prevezme sa zdroj FFmpeg.","Trvanie","Vkladac kd sa skoproval","Vkladac kd sa skoproval do schrnky","Vloi obrzky do kdu","Vloen do kdu webovej strnky","Zapn","Chyba pri natavan mdi","Chyba pri natavan mdi, nepodporovan typ sboru","Cesta k dennkom chb","Exportova","Exportova statick obrzky","Exportova videosegmenty","Exportuje sa video","Expozcia","Sbory bez zhodnch nzvov s oznaen ervenou farbou a vynechaj sa.","Reim filtrovania","Formt","Sn./s","Posun po snmkach","Snmky za sekundu","Gama","Gaussovsk rozostrenie","Veobecn","Generuje sa obrzok","Globlne rozloenie","GPU","Odtiene sivej","Prekrytie mriekou","Polovin rdius sigma","Tepeln mapa","Vka","Tlaidlo pomocnka","Skry vetko","Skry rozloenie","Hosovanie mdi","Ak sa rozhodnete hosova mdi mimo koreovho umiestnenia, niie uvete URL adresu.","Obrzok","Obrzky sa daj vklada priamo do vkladacieho kdu webovej strnky bez toho, aby ste ich museli nahrva samostatne, ak je celkov vekos vetkch sborov menia ako 10 MB.","Importova","Poiaton","Vstup","Zmena mierky v nsobkoch celch sel","Neplatn sbor. Akceptovan s len sbory s nasledujcimi prponami:","Neplatn sbory. Akceptovan s len sbory s nasledujcimi prponami:","Invertova vstup","Plame","Prejs na zaiatok","Oznaenie","Laplaceov opertor (pbodov)","Laplaceov opertor (devbodov)","Laplaceova odchlka","Vek","Karty rozloenia","Pozcia vpravo/vavo","Zaname","Loklne tieovae","Rozdiel vo svietivosti","Iba chyby svietivosti","Oznai Inf/NaN","Mdi","Domna/cesta mdi","Nstroje na vber mdi","Stredn","Reim","Potiahnutie myou","Koliesko myi","Nsobite","Najbliia hodnota","Nov projekt","Nie s vybrat iadne prieinky","iadne","iadne (predvolene SSIM)","Vypnut","Zapnut","Otvoren","Prekrytie","Balk na vloenie do webovej strnky","Posun zobrazenia","Rozdiely v kanloch","Pixelizcia","Prehra/pozastavi","Kov snmky pozcie","Zachova rozmery","Zobrazi ukku","Predchdzajca/nasledujca skupina","Rdius","Znova nata","Odstrni","Chcete odstrni skupinu porovnania?","Chcete odstrni mdi?","Resetova","Resetova rchlos prehrvania","Rozdiel v RGB","Rovnak rka a vka","Uloi","Uloi projekt","Mierka v %","Prispsobi poda vekosti","Vber prieinka","Vyberte prieinky so zhodnmi nzvami sborov a skupiny porovnan sa vytvoria automaticky.","Skupina","Vber skupn","Nastavenia","Ostros","Skratky","Zobrazi uhol","Zobrazi legendu farebnej mapy","Zobrazi rozloenie","Zobrazi miniatry","Veda seba","Reim Veda seba","Sigma","Zmena znamienka","Vekos","Kov snmky jazdca","Mal","Sobelov filter","Jeden medilny sbor","Zoradi poda abecedy","Zoradi poda asu vytvorenia","Medzernk","Rozdelen obrazovka","Reim rozdelenej obrazovky","Na druh","SSIM","SSIM (pln)","Reim SSIM","SSIM (zjednoduen)","as zaatia","Iba trukturlne chyby","Symetrick","Pri exportovan videa sa vyskytla chyba","Pri generovan balka na vloenie do webovej strnky sa vyskytla chyba. Skste to znova.","Tento softvr pouva kd FFmpeg licencovan v rmci LGPLv2.1","Tmto sa odstrnia mdi zo vetkch skupn porovnania v tomto projekte. Chcete odstrni tento medilny sbor?","Dladice","Vekos nadpisu","Zapn zobrazenie na cel obrazovku","Tolerancia","Vavo hore","Vpravo hore","Typ","Pozcia Hore/dole","Verzia","Video","Zobrazi poznmky k vydaniu","Web","Balk na vloenie do webovej strnky sa spene uloil","Priradenie vhy kontrastu","Priradenie vhy svietivosti","Priradenie vhy truktre","rka","Chcete pred pokraovanm uloi svoj aktulny projekt?","Rdius X","Sigma X","Rdius Y","Sigma Y","Grafick procesor m problm sdekdovanm mdia. Ak chcete zlepi vkon, skste zavrie vetky aplikcie vyuvajce zdroje grafickho procesora alebo retartova zariadenie.","Vae medilne klipy zostan na paneli s mdiami, no zmeny vykonan v tejto skupine porovnania sa stratia. Chcete odstrni tto skupinu?","V projekt sa uloil","Pribli/oddiali zobrazenie"],"sl-si":["(t.p. https://domena.com/pot)","Absoluten","Dodajte filter","Dodajte medije","Dodajte prekrivanje","Dodajte prekrivanje, da zabeleite primerjavo.","Prilagodite zamik posnetka, da poravnate videe.","Kot","Samodejno ustvarite komplete","Povprene barve (poasneje)","Bilinearno","Binarno","Bitna hitrost","rna-modra-vijoilina-rumena-bela","Spodnja leva","Spodnja desna","Ni mogoe prikazati filtra:","Preklii","Spremeni hitrost predvajanja","CIE-LAB razlika","Kliknite Dodaj medije ali povlecite in spustite video/slikovne datoteke v okno, da jih primerjate.","Kodek","Barvni nain","Kompleti primerjav","Samo napaka v kontrastu","Nadzorna vrstica","Kopiraj vgrajeno kodo","CTRL +","CTRL + 1-9","CTRL + f","Prilagajanje uporabnikom","Izbrii","Razlika","Dimenzije","Onemogoi","Ne shrani","Prenesi","Prenesite vir FFmpeg.","Trajanje","Vgrajena koda kopirana","Vgrajena koda kopirana v odloie","Vgradite slike v kodo","Vgrajeno v kodo spletne strani","Omogoi","Napaka pri nalaganju medijev","Napaka pri nalaganju medijev, nepodprta vrsta datoteke","Pot do dnevnika napak","Izvoz","Izvozi mirujoe slike","Izvozi video segmente","Izvoz videa","as osvetlitve","Datoteke brez imen, ki bi se ujemala, so oznaene z rdeo in bodo izpuene.","Nain filtriranja","Format","SLIK/SEK.","Napredovanje okvira","Okvirov na sekundo","Gama","Gausijanska zameglitev","Splono","Generiranje slike","Globalna razporeditev","GRAFINI PROCESOR","Sivina","Prekrivanje mree","Polovien radij sigma","Toplotna mapa","Viina","Gumb za pomo","Skrij vse","Skrij razpored","Gostitev medijev","e izberete, da boste gostili medije na drugi lokaciji, ne na korenu, spodaj navedite URL.","Slika","Slike lahko neposredno vgradite v kodo na spletni strani, ne da bi jih morali loeno naloiti, e je skupna velikost datoteke manj kot 10 MB.","Uvozi","Zaeten","Vnos","Prilagoditev velikosti celega tevila","Neveljavna datoteka. Samo datoteke z naslednjimi priponami so sprejemljive:","Neveljavne datoteke. Samo datoteke z naslednjimi priponami so sprejemljive:","Negativen izpis","Jet","Hiter zagon","Nalepka","Laplacian (pet tok)","Laplacian (devet tok)","Laplacian odstopanje","Veliko","Zavihki za razpored","Poloaj levo/desno","Zanimo","Lokalni senniki","Razlika v svetilnosti","Samo napaka v svetilnosti","Oznai Inf (neskonno)/NaN (ni tevilka)","Mediji","Medijska domena/pot","Medijski selektorji","Srednja","Nain","Poteg z miko","Kolesce na miki","Ve","Najblija pika","Nov projekt","Izbrana ni nobena mapa","Noben/a","Noben/a (Privzeta strukturna podobnost, SSIM)","Izklopljeno","Vklopljeno","Odprite","Prekrivanje","Paket, vgrajen v spletno stran","Panoramski pogled","Razlika po kanalih","Mozaina obdelava","Predvajanje/Premor","Kljuni okviri za poloaj","Ohrani dimenzije","Predogled","Prejnji/Naslednji komplet","Radij","Ponovno naloi","Odstrani","Odstranim primerjalni komplet?","Odstranim medije?","Ponastavi","Ponastavi hitrost predvajanja","Razlika barvnega sistema RGB","Ista irina in viina","Shrani","Shrani projekt","Prilagoditev za %","Prilagodi, da se bo prilegalo","Izberi mapo","Izberite mape z ujemajoimi imeni datotek in primerjalnimi kompleti bodo ustvarjeni samodejno.","Nastavi","Izberi komplet","Nastavitve","Ostrina","Blinjica","Pokai kot","Pokai legendo za barvno karto","Pokai razpored","Pokai sliice","Drug ob drugem","Nain Drug ob drugem","Sigma","Preklop znaka","Velikost","Kljuni okviri za drsnik","Majhni","Sobel","Posamezni medij","Sortiraj po abecedi","Sortiraj po datumu ustvaritve","Preslednica","Razdeljen zaslon","Nain Razdeljen zaslon","Na kvadrat","Strukturna podobnost (SSIM)","Popoln SSIM","Nain SSIM","Poenostavljen SSIM","as zaetka","Samo strukturna napaka","Simetrien","Pri izvozu videa je prilo do napake","Pri generiranju vaega paketa, vgrajenega v spletno stran, je prilo do napake. Poizkusite znova.","Ta programska oprema uporablja kodo FFmpeg z licenco v okviru LGPLv2.1","To bo odstranilo medije z vseh primerjalnih kompletov v tem projektu. Ali elite odstraniti te medije?","Namestitev v obliki ploic","Velikost ploic","Preklopi celotni zaslon","Toleranca","Zgoraj levo","Zgoraj desno","Vrsta","Poloaj gor/dol","Razliica","Video","Ogled opomb ob izdaji","Splet","Paket, vgrajen v spletno stran, je bil uspeno shranjen","Kontrast v tei","Kontrast v svetilnosti","Kontrast v strukturi","irina","Ali elite shraniti svoj trenutni projekt pred nadaljevanjem?","Radij X","Sigma X","Radij Y","Sigma Y","Vaa GPE ima teave z deifriranjem medija. Za boljo zmogljivost poizkusite zapreti vse aplikacije, ki uporabljajo vire PGE in/ali ponovno zaenite napravo.","Vai medijski posnetek bo ostal v Nadzorni ploi medijev, vendar pa bo vse, kar ste naredili v tem primerjalnem kompletu, izgubljeno. Ali elite odstraniti ta komplet?","Va projekt je bil shranjen","Pogled poveave"],"sv-se":["(dvs. https://domn.com/skvg)","Absolut","Lgg till filter","Lgg till media","Lgg till overlay","Lgg till overlay fr att kommentera din jmfrelse.","Justera redigeraren (clip offset) fr att anpassa videorna.","Vinkel","Skapar automatiskt uppsttningar","Genomsnittliga frger (lngsammare)","Bilinjr","Binr","Bithastighet","Svart-bl-violett-gul-vit","Nedan till vnster","Nedan till hger","Kan inte visa filter:","Avbryt","ndra uppspelningshastighet","CIE-LAB-skillnad","Klicka p Lgg till media eller dra och slpp video-/bildfiler till det hr fnstret fr att jmfra dem.","Codec","Frglge","Jmfrelseuppsttningar","Endast kontrastfel","Kontrollflt","Kopiera inbddningskoden","CTRL +","CTRL + 1-9","CTRL + f","Anpassning","Radera","Skillnad","Mtt","Inaktivera","Spara inte","Ladda ner","Ladda ner FFmpeg-klla.","Varaktighet","Inbddningskod kopierad","Inbddningskod kopierad till urklipp","Bdda in bilder i kod","Bdda in p webbsidekod","Aktivera","Fel vid laddning av media","Fel vid laddning av media, filtyp som inte stds","Skvg fr felloggar","Exportera","Exportera bilder","Exportera video segment","Exportera video","Exponering","Filer utan matchande namn r markerade med rtt och kommer att utelmnas.","Filtreringslge","Format","FPS","Bildfrekvens","Bilder per sekund","Gamma","Gaussisk oskrpa","Allmnt","Genererar bild","Global layout","GPU","Grskala","Rutntsoverlay","Halvradie sigma","Frgdiagram","Hjd","Knappen Hjlp","Dlj alla","Dlj layout","Mediahosting","Om du vljer mediahosting p en annan plats n roten, ange URL-adressen nedan.","Bild","Om den totala filstorleken r mindre n 10 MB kan bilder bddas in direkt i webbsidans inbddningskod utan att ladda upp dem separat.","Importera","Ursprunglig","Indata","Heltalsskalning","Ogiltig fil. Endast filer med fljande filndelse accepteras:","Ogiltiga filer. Endast filer med fljande filndelse accepteras:","Invertera utdata","Jet","G till Start","Etikett","Laplaceoperator (fempunkts)","Laplaceoperator (niopunkts)","Laplaceoperator avvikelse","Stor","Layout-flikar","Vnster/Hger PX"," Lt oss komma igng.","Lokala shaders","Skillnad i ljusstyrka","Endast ljusstyrkefel","Markera Inf/NaN","Media","Mediadomn/skvg","Mediavljare","Medel","Lge","Musdrag","Mushjul","Multiplikator","Nrmaste granne","Nytt projekt","Ingen mapp vald","Ingen","Ingen (SSIM-standard)","Av","P","ppna","Overlay","Inbddning av webbsida fr paket","Panoreringsvy","Skillnader per kanal","Pixelisering","Spela upp/Pausa","Positionera nyckelbildrutor","Bevara mtt","Frhandsgranska","Fregende/Nsta uppsttning","Radie","Ls in p nytt","Ta bort","Ta bort jmfrelseuppsttningar?","Ta bort media?","terstll","terstll uppspelningshastighet","RGB-skillnad","Samma bredd och hjd","Spara","Spara projekt","Skalering i %","Skalera till att passa","Vlj mapp","Vlj mappar med matchande filnamn s kommer jmfrelseuppsttningar att skapas automatiskt.","Uppsttning","Uppsttningar valda","Instllningar","Skrpa","Genvgar","Visa vinkel","Visa frklaring fr frgkarta","Visa layout","Visa miniatyrbilder","Sida vid sida","Sida vid sida-lge","Sigma","Teckenskifte","Storlek","Reglage nyckelbildrutor","Liten","Sobel","Solo-media","Sortera i bokstavsordning","Sortera efter skapandedatum","Utrymme","Delad skrm","Delat skrmlge","Kvadrerad","SSIM","SSIM full","SSIM-lge","SSIM frenklad","Starttid","Endast struktur-fel","Symmetrisk","Det uppstod ett fel vid export av din video","Det uppstod ett fel vid genereringen av webbsidans inbddningspaket. Frsk igen.","Denna programvara anvnder en kod frn FFmpeg licensierad under LGPLv2.1","Detta kommer att ta bort media frn alla jmfrelseuppsttningar i det hr projektet. Vill du ta bort det hr mediet?","Sida-vid-sida","Titelstorlek","Vxla till helskrm","Tolerans","verst till vnster","verst till hger","Typ","Upp/Ned PX","Version","Video","Se versionsinformation","Webb","Inbddningspaketet fr webbsidan har sparats","Viktkontrast","Vikt av ljusstyrka","Viktstruktur","Bredd","Vill du spara ditt nuvarande projekt innan du fortstter?","X-radie","X-sigma","Y-radie","Y-sigma","Din GPU-enhet har problem med att avkoda din media. Fr bttre prestanda, frsk att stnga alla applikationer som anvnder GPU-resurser och/eller starta om din enhet.","Dina medieklipp kommer att finnas kvar i Media-panelen, men allt du har gjort i den hr jmfrelseuppsttningen kommer att g frlorat. Vill du ta bort den hr uppsttningen?","Ditt projekt har sparats","Zoomvy"],"th-th":["( https://.com/)","","","","","","","",""," ()","","","Bitrate","----","","",":","",""," CIE-LAB",' "" /',"Codec","","","","","","CTRL +","CTRL + 1-9","CTRL + f","","","","","","",""," FFmpeg","","","","","","",""," ","","","","","","","","","","FPS","","",""," Gaussian","","","","GPU","","","","","","","","","","  URL ","","   10MB","","","",""," :"," :","","","",""," ()"," ()","","","","PX /","","","",""," Inf/NaN","","/","","","","","","","","","",""," ( SSIM )","","","","","","","","","/","","","","/","","","","","","",""," RGB","","","","% ","",""," ","","","","","","","","","","","","","","","","","","","","","","","","","SSIM","SSIM "," SSIM","SSIM ","","","",""," "," FFmpeg  LGPLv2.1"," ","","","","","","","","PX /","","","","","","","","","",""," X"," X"," Y"," Y"," (GPU)    GPU /","  ","",""],"tr-tr":["(rnein: https://alan-ad.com/yol)","Mutlak","Filtre ekle","Medya ekle","Yer paylam ekle","Karlatrmanza ek aklama yapmak iin Yer Paylam ekleyin.","Videolar hizalandrmak iin klip kayma ayarn yapn.","A","Setleri otomatik olutur","Ortalama renkler (daha yava)","kili Dorusal","kili","Bit hz","Siyah mavi mor sar beyaz","Sol alt","Sa alt","Filtre grntlenemiyor:","ptal","Geri oynatma hzn deitir","CIE-LAB fark","Medya Ekle'ye tklayn veya video/grnt dosyalarn karlatrmak iin bu pencereye srkleyip brakn.","Kodek","Renk modu","Karlatrma setleri","Yalnzca kontrast hatas","Kontrol ubuu","Gmme kodunu kopyala","CTRL +","CTRL + 1-9","CTRL + f","zelletirme","Sil","Fark","Boyutlar","Devre D Brak","Kaydetme","ndir","FFmpeg kaynan indirin.","Sre","Gmme kodu kopyaland","Gmme kodu panoya kopyaland","Kod iindeki grselleri gm","Web sayfas koduna gml","Etkinletir","Medya yklenirken hata olutu","Medya yklenirken hata olutu, desteklenmeyen dosya tr","Hata gnlkleri yolu","Da Aktar","Hareketsiz grntleri da aktar","Video segmentlerini da aktar","Video da aktarlyor","Pozlama","Eleen isimleri olmayan dosyalar krmzyla iaretlenip dikkate alnmaz.","Filtreleme Modu","Biim","FPS","Kare ilerlemesi","Saniyedeki kare says","Gama","Gauss bulanklatrma","Genel","Grnt oluturuluyor","Genel dzen","GPU","Gri lekli","Izgara yer paylam","Yarm sigma yarap","Is haritas","Ykseklik","Yardm dmesi","Tmn Gizle","Dzeni gizle","Medya barndrlyor","Medyay kkten farkl bir konumda barndrmay seerseniz, URL'yi aada belirtin.","Resim","Toplam dosya boyutu 10 MB'tan kkse, resimler ayrca yklenmeden dorudan web sayfas gmme koduna yerletirilebilir.","e Aktar","lk","Giri","Tamsay leklendirme","Geersiz dosya Yalnzca aadaki uzantlara sahip dosyalar kabul edilir:","Geersiz dosyalar Yalnzca aadaki uzantlara sahip dosyalar kabul edilir:","k tersine evir","Jet","Balat seeneine ge","Etiket","Laplas ileci (be nokta)","Laplas ileci (dokuz nokta)","Laplas ileci deiiklii","Byk","Dzen sekmeleri","Sol/Sa Konum","Balarken","Yerel glgelendiriciler","Parlaklk fark","Yalnzca parlaklk hatas","Inf/NaN olarak iaretle","Medya","Medya alan ad/yolu","Medya seme aralar","Orta","Mod","Fareyi srkle","Fare kaydrma tekerlei","arpan","En yakn renk","Yeni proje","Hibir dizin seilmedi","Yok","Yok (SSIM varsaylan)","Kapal","Ak","A","Yer paylam","Web sayfas gmme paketi","Yatay kaydrma grnm","Kanal bana fark","Pikselleme","Oynat/Durdur","Anahtar kareleri konumlandr","Boyutlar koru","nizleme","nceki/Sonraki set","Yarap","Yeniden ykle","Kaldr","Karlatrma seti kaldrlsn m?","Medya kaldrlsn m?","Sfrla","Geri oynatma hzn sfrla","RGB fark","Ayn genilik ve ykseklik","Kaydet","Projeyi kaydet","lek %","lekleyerek sdr","Dizini se","Eleen dosya adlarna sahip klasrleri setiinizde karlatrma setleri otomatik olarak oluturulur.","Ayarla","Ayarlar se","Ayarlar","Keskinlik","Ksayollar","Ay gster","Renk Haritas Gstergesini Gster","Dzeni gster","Kk resimleri gster","Yan yana","Yan yana modu","Sigma","aret ters evirme","Boyut","Kaydrc anahtar kareler","Kk","Sobel","Tekli medya","Alfabetik sralama","Oluturma tarihine gre sralama","Boluk","Blnm ekran","Blnm ekran modu","Karesi alnm","SSIM","SSIM tam","SSIM Modu","Basitletirilmi SSIM","Sreyi balat","Yalnzca yapsal hata","Simetrik","Video da aktarlrken hata olutu","Web sayfas gmme paketiniz oluturulurken bir hata olutu, ltfen tekrar deneyin.","Bu yazlm LGPLv2.1 srm altnda lisansl FFmpeg kodu kullanmaktadr.","Bu, medyay bu projedeki tm karlatrma setlerinden kaldracaktr. Bu medyay kaldrmak istiyor musunuz?","Deme","Balk boyutu","Kenarlksz Tam EkranTam ekran a/kapat","Dayankllk","st sol","st sa","Tr","Yukar/Aa Konum","Srm","Video","Srm notlarn grntle","Web","Web sayfas gmme paketi baaryla kaydedildi","Kontrast arl","Parlaklk arl","Ya arl","Genilik","Devam etmeden nce mevcut projenizi kaydetmek ister misiniz?","X Yarap","X Sigma","Y Yarap","Y Sigma","GPUnuz medyanzn ifresini zmekte sknt yayor. Daha iyi performans almak iin, GPU kaynaklarn kullanan tm uygulamalar kapatmay ve/veya aygtnz yeniden balatmay deneyin.","Medya klipleriniz Medya panelinde kalacaktr ancak bu karlatrma setinde yaptnz her ey kaybolacaktr. Bu seti kaldrmak istiyor musunuz?","Projeniz kaydedildi","Yaknlatrma grnm"],"uk-ua":["( https://.com/)",""," ","  "," "," ,    .","     .","","  ","  ()",""," ","  ","----"," "," ","   :","","  "," CIE-LAB","       /    ,   .",""," ","  ","  "," ","   ","CTRL +","CTRL + 1-9","CTRL + f","","","","",""," ","","    FFmpeg.","","  ","     ","   ","   -","","   ","   ,    ","   ","","  "," ","  "," ","         ."," ","","/"," ","   ",""," ","","  "," "," "," "," ","    "," ",""," "," "," ","   ","          ,   URL-.","","        -    ,       10 .",""," "," "," "," .      :"," .      :"," ","   '","  ","","  (' )","  (' )"," "," "," ","  /"," "," "," ","  ","Inf/NaN "," ","/   ","  "," ","","   ","   ","","  "," ","   ",""," (SSIM  )",".",".","",""," ,      "," "," ","","/","  "," "," ","/ ","","","","  ?","  ?"," ","   ?","   RGB","    ",""," "," %"," ,  "," ","           .",""," ","","",""," ","   "," ","  "," ","  ","  "," ","","   "," "," Sobel","  ","  ","  ",""," ","  ","  ","SSIM","SSIM  "," SSIM","SSIM -  "," ","  ","","     .","       .  ,  .","      FFmpeg,   LGPLv2.1","          .      ?"," "," ","  ",""," "," ","","  /","","","     ","-",",   ,  ","   ","   ","   ","","      ?"," X","  X"," Y","  Y","    (GPU)     .    ,    ,      (GPU), /   .","       ,       ,       .     ?","   "," "],"zh-cn":["( https://.com/)","","","","","","","","","","","","Bitrate","----","","","","","","CIE-LAB ","/","","","","","","","CTRL +","CTRL + 1-9","CTRL + f","","","","","","",""," FFmpeg ","","","","","","","","","","","","","","","","","","FPS","","","","","","","","GPU","","","1/2  sigma","","","","","",""," URL",""," 10MB","","","","","","","","","","","","","","","","/","","","","","/","","/","","","","","","","","","","","SSIM ","","","","","","","","","/","","","","/","","","","","","","","RGB ","","",""," %","","","","","","","","","","","","","","","Sigma","","","","","Sobel","","","","","","","","SSIM","SSIM ","SSIM ","SSIM ","","","","",""," LGPLv2.1  FFmpeg ","","","","","","","","","/","","","","","","","","","","","X ","X Sigma","Y ","Y Sigma"," GPU  GPU /","","",""],"zh-tw":[" https://.com/","","","","","","","","","","","","","----","","","","","","CIE-LAB ","/","Codec","","","","","","CTRL +","CTRL + 1-9","CTRL + f","","","","","","",""," FFmpeg ","","","","","","","","","","","","","","","","","","FPS","",""," (Gamma)","Gaussian ","","","","GPU","",""," sigma","","","","","",""," URL",""," 10MB","","","","","","","","","","","","","","","","/","","","",""," Inf/NaN","","/","","","","","","","","","","","SSIM ","","","","","","","","","/","","","","/","","","","","","","","RGB ","","",""," %","","","","","","","","","","","","","","","Sigma","","","","","Sobel","","","","","","","","SSIM","SSIM ","SSIM ","SSIM ","","","","",""," LGPLv2.1  FFmpeg ","","","","","","","","","/","","","","Web","","","","","","","X ","X Sigma","Y ","Y Sigma"," GPU  GPU /","","",""]},fe=ve["en-us"].slice(),ye=Object.keys(ve).reduce(((e,t)=>{const i=t.split("-").map((e=>e.toLowerCase()));return e[`${i[0]}`]?e[`${i[0]}`].push(i[1]):e[`${i[0]}`]=[i[1]],e}),{});function xe(e){if(!e)return"";const t=fe.indexOf(e);if(-1===t)return e;const i=navigator.language.toLowerCase(),n=ve[`${i}`];if(n)return n[Number(t)]||e;const a=i.split("-").map((e=>e.toLowerCase())),s=a[0];return ye[`${s}`]?(1===a.length?a.push(ye[`${s}`][0]):-1===ye[`${s}`].indexOf(a[1])&&(a[1]=ye[`${s}`][0]),U(ve,[a.join("-"),t],e)):e}function we(e=""){return`.${e.split(".").pop()||""}`}function ke(e=""){const t=e.indexOf("\\")>-1?"\\":"/",i=e.split(/\\|\//).filter((e=>!!e)),n=i.slice(),a=i.pop()||"",s=`.${a}`.split(".").filter((e=>!!e)).pop()||"";return{path:e,ext:s,base:a.split(`.${s}`)[0]||"",name:a,dir:i.join(t),dirArray:i,pathArray:n,delimiter:t}}const ze={codec:!1,bitrate:!1,format:!1,dimensions:!1,fps:!1,duration:!1,startTime:!1},Se=(e,t,i,n,a)=>`${U(e,["name"],t)||t}-${U(e,["path"],i)||i}-${U(e,["size"],n)||0}-${U(e,["lastModified"],a)||0}`,Me=e=>e?Se(e.file,e.name,e.path,e.size,e.modified):void 0,Ce=e=>{if(!e)return;const t=ke(e.path),i=ke(e.src),n=U(e,["file"]),a=U(t,["name"],U(i,["name"],U(e,["name"],""))),s=U(e,["path"],""),o=U(e,["size"],0),r=U(e,["modified"],(new Date).getTime());return Se(n,a,s,o,r)},je=(e,t)=>{if(!t)return;const i=U(t,["name"],U(t,["mediaName","name"],"")),n=U(t,["path"],U(t,["mediaName","path"],"")),a=U(t,["size"],U(t,["metadata","size"],0)),s=U(t,["modified"],U(t,["metadata","modified"],0));return{id:Se(e,i,n,a,s),file:e,name:i,size:a,path:n,modified:s,created:U(t,["created"],(new Date).getTime()),base:U(t,["originalBase"],U(t,["mediaName","originalBase"],"")),originalBase:U(t,["originalBase"],U(t,["mediaName","originalBase"],"")),codec:U(t,["codec"],U(t,["metadata","codec"],"")),format:U(t,["format"],U(t,["metadata","format"],"")),width:U(t,["width"],U(t,["metadata","width"],0)),height:U(t,["height"],U(t,["metadata","height"],0)),fps:U(t,["fps"],U(t,["metadata","fps"],0)),duration:U(t,["duration"],U(t,["metadata","duration"],0)),hasAudio:U(t,["hasAudio"],!1),bitrate:U(t,["bitrate"],U(t,["metadata","bitrate"],0)),timestamps:U(t,["timestamps"],[]),type:U(t,["type"],U(t,["metadata","type"],"")),extension:U(t,["extension"],U(t,["mediaName","extension"],we(t.src)))}},Le=(e,t)=>{if(!t)return;const i=ke(t.path),n=ke(t.src),a=U(i,["name"],U(n,["name"],U(t,["name"],""))),s=U(t,["path"],""),o=U(t,["size"],0),r=U(t,["modified"],(new Date).getTime());return{id:Se(e,a,s,o,r),file:e,path:s,name:a,size:o,modified:r,created:U(t,["created"],(new Date).getTime()),base:U(t,["base"],U(i,["base"],U(n,["base"],""))),extension:U(t,["extension"],U(i,["extension"],U(n,["extension"],""))),originalBase:U(t,["originalBase"],U(i,["base"],U(n,["base"],""))),width:t.width,height:t.height,type:"image",codec:"",bitrate:0,format:"",fps:0,duration:0,hasAudio:!1,timestamps:[]}},Ee=e=>({id:e.id,base:e.base,startTime:e.startTime,muted:e.muted,visible:e.visible,type:e.type,fps:e.fps,duration:e.duration,hasAudio:e.hasAudio,thumbnails:e.thumbnails.slice(),mediaOverlay:e.mediaOverlay,shaderId:e.shaderId,showShader:e.showShader,hasFrameImages:e.frameImages.length>0,showFrameImages:e.showFrameImages,timestamps:e.timestamps.slice(),infoTexts:Y(e.infoTexts)}),_e=(e,t)=>({id:e.id,name:e.name,base:e.base,originalBase:e.originalBase,x:e.x,y:e.y,z:e.z,startTime:e.startTime,labelVisibility:{...e.labelVisibility},muted:e.muted,visible:e.visible,shaderId:e.shaderId,shaderSettings:Y(e.shaderSettings),shaderInputs:e.shaderInputs.slice(),codec:e.codec,format:e.format,bitrate:e.bitrate,width:e.width,height:e.height,type:e.type,fps:e.fps,duration:e.duration,hasAudio:e.hasAudio,hasFrameImages:e.frameImages.length>0,hasInfoTexts:e.infoTexts.length>0||!!t&&t.infoTexts.length>0,showInfoText:e.showInfoText,showFrameImages:e.showFrameImages,showShader:e.showShader}),Ie=(e,t,i,n,a,s)=>{const o=a/n*i;let r=e;if(r>s)o-r/n*i<=20&&(r=(o-20)/i*n);else if(r+t<a){(r+t)/n*i-s/n*i<=20&&(r=a-t)}return r},Te=e=>e.name?e.name:e.base,Pe=e=>{const t=e.map((e=>Te(e))),i=[];return t.forEach((e=>{i.indexOf(e)>-1||t.filter((t=>t===e)).length>1&&i.push(e)})),t=>{const n=Te(t);if(-1===i.indexOf(n))return n;const a=ke(t.path),s=e.filter((e=>Te(e)===n&&e.id!==t.id)).map((e=>ke(e.path).dirArray));let o=n,r=a.dirArray.length-1;for(;r>-1;){const e=r,t=a.dirArray[Number(e)];if(!t)break;const i=s.filter((i=>i[Number(e)]===t));if(o=`${t}/${o}`,!i.length)break;r-=1}return o}},Fe=(e,t,i)=>{if(e)return Ae(e);let n,a=0;for(;!n&&a<i.length;){t===Me(i[Number(a)])&&(n=Y(i[Number(a)]),n.id=h(),n.mediaOverlay="",n.muted=!0,n.shaderId="",n.shaderInputs=[],n.shaderSettings={},n.shaderSource="",n.src=l.clearedUrl(n.src),n.visible=!0,n.startTime=0,n.x=0,n.y=0,n.z=100),a+=1}return n||Ae({})},Ae=(e,t=!1)=>{const i=h(),n=ke(e.path||e.webkitRelativePath||e.name);let a;m.indexOf(n.ext.toLowerCase())>-1?a="video":g.indexOf(n.ext.toLowerCase())>-1?a="hdrimage":p.indexOf(n.ext.toLowerCase())>-1&&(a="image");return{id:i,created:(new Date).getTime(),codec:"",bitrate:0,width:0,height:0,type:a,fps:0,duration:0,size:e.size,modified:new Date(e.lastModified).getTime(),hasAudio:!1,timestamps:[],path:n.path,name:n.name,base:t?n.path:n.base,originalBase:t?n.path:n.base,extension:n.ext,format:n.ext.toUpperCase(),x:0,y:0,z:100,startTime:0,thumbnails:[],labelVisibility:{codec:!1,bitrate:!1,dimensions:!1,format:!1,fps:!1,duration:!1,startTime:!1},muted:!0,visible:!0,shaderId:"",shaderInputs:[],shaderSettings:{},shaderSource:"",showShader:!0,src:a?l.getUrl(e):void 0,mediaOverlay:"",frameImages:[],showFrameImages:!0,infoTexts:[],showInfoText:!1}},Re=e=>{const t={id:h(),created:(new Date).getTime(),codec:"",bitrate:0,width:0,height:0,type:void 0,fps:0,duration:0,size:0,modified:(new Date).getTime(),hasAudio:!1,timestamps:[],path:"",name:"",base:"",originalBase:"",extension:"",format:"",x:0,y:0,z:100,startTime:0,thumbnails:[],labelVisibility:{codec:!1,bitrate:!1,dimensions:!1,format:!1,fps:!1,duration:!1,startTime:!1},muted:!0,visible:!0,shaderId:"",shaderInputs:[],shaderSettings:{},shaderSource:"",showShader:!0,src:"",mediaOverlay:"",frameImages:[],showFrameImages:!0,infoTexts:[],showInfoText:!1},i={...t,...e,labelVisibility:{...t.labelVisibility,...e.labelVisibility},thumbnails:[]};return e.src||(i.src=e.path),i},Ge=(e,t)=>{let i=e.size+1,n=`${xe("Set")} ${i.toLocaleString(navigator.language)}`;const a=Array.from(e.values()).map((e=>e.label));for(;a.indexOf(n)>-1;)i+=1,n=`${xe("Set")} ${i.toLocaleString(navigator.language)}`;return((e,t)=>({id:h(),created:(new Date).getTime(),label:e,antiAlias:!1,endTime:0,grid:0,layout:y[0],overlayOrder:[],looping:!0,boomerang:!1,mediaOrder:[],x:0,y:0,z:100,speed:1,splitposition:.5,startTime:0,time:0,viewport:t,gamma:1,exposure:1}))(n,t)};function Be(e){const t={};if(!e)return;if(e.logos||e.shaderUiSettings||e.shaderInputs){const i=e;return{set:{id:i.id,created:(new Date).getTime(),label:i.label,antiAlias:i.antiAlias,endTime:i.endTime,grid:i.grid,layout:i.layout,looping:i.looping,boomerang:i.boomerang,x:i.position.x,y:i.position.y,z:i.position.z,speed:i.speed,splitposition:i.splitposition,startTime:i.startTime,time:i.time,viewport:{paneWidth:0,paneHeight:0,height:i.viewport.height,width:i.viewport.width,minZoom:100,fitScale:1,fitWidth:0,fitHeight:0,fitPaneWidth:0,fitPaneHeight:0,contentWidth:0,contentHeight:0},gamma:1,exposure:1,overlays:i.logos.map((e=>{const i=Le(e.file,e);t[`${i.id}`]||(t[`${i.id}`]=i);return{id:e.id,src:l.getUrl(e.file,e.src),base:e.name,path:e.path,extension:we(e.src),width:e.width,height:e.height,size:e.size,modified:e.modified,created:U(e,["created"],(new Date).getTime()),displayWidth:e.displayWidth,x:e.x,y:e.y,visible:e.visible,type:"overlay"}})),overlayOrder:i.logos.map((e=>e.id)),media:i.media.map((e=>((e,t={},i={},n={},a={})=>{const s=i[`${e.id}`],o=t[`${e.id}`],r=n[`${e.id}`],d=e.mediaName.extension;let c="filter";p.indexOf(d)>-1?c="image":m.indexOf(d)>-1?c="video":g.indexOf(d)>-1&&(c="hdrimage");const h=e.metadata?e.metadata.file:e.file,u=je(h,e);return u&&!a[`${u.id}`]&&(a[`${u.id}`]=u),{id:e.id,created:U(e,["created"],(new Date).getTime()),codec:"",bitrate:0,format:"",width:0,height:0,type:c,fps:0,duration:0,size:0,modified:0,hasAudio:!1,timestamps:[],path:e.mediaName.path,name:e.mediaName.name,base:e.mediaName.base,extension:e.mediaName.extension,originalBase:e.mediaName.originalBase,x:e.mediaPosition.x,y:e.mediaPosition.y,z:e.mediaPosition.z,startTime:e.mediaStartTime,thumbnails:[],labelVisibility:{codec:e.mediaLabels.codec,bitrate:e.mediaLabels.bitrate,format:e.mediaLabels.format,dimensions:e.mediaLabels.dimensions,duration:e.mediaLabels.duration,fps:e.mediaLabels.fps,startTime:e.mediaLabels.startTime},muted:e.muted,visible:e.visible,shaderId:"",shaderSettings:r||{},shaderInputs:o?o.map((e=>e.id)):[],shaderSource:s?s.source:"",showShader:!0,src:l.getUrl(h,e.src),mediaOverlay:"",frameImages:[],showFrameImages:!0,infoTexts:[],showInfoText:!1}})(e,i.shaderInputs,i.shaderSources,i.shaderUiSettings,t))),mediaOrder:i.media.map((e=>e.id))},files:t}}const i=e;return i.media=i.media.map((e=>{const i=Re(e),n=je(i.file,i);return n&&!t[`${n.id}`]&&(t[`${n.id}`]=n),i})),i.mediaOrder&&0!==i.mediaOrder.length||(i.mediaOrder=i.media.map((e=>e.id))),i.overlays&&(i.overlays=i.overlays.map((e=>{const i=Le(e.file,e);return i&&!t[`${i.id}`]&&(t[`${i.id}`]=i),{...e,src:l.getUrl(U(i,["file"]),e.src)}}))),i.overlayOrder||(i.overlayOrder=i.overlays.map((e=>e.id))),{set:i,files:t}}function Ve(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const i=e.length;let n=i;if(i!==t.length)return!1;for(;n;)if(n-=1,!Ve(e[Number(n)],t[Number(n)]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;let i=!0;return e.forEach(((e,n)=>{i&&(Ve(e,t.get(n))||(i=!1))})),i}if(e instanceof Set&&t instanceof Set)return Ve(Array.from(e),Array.from(t));if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const i=Object.keys(e),n=i.length;if(n!==Object.keys(t).length)return!1;let a=n;for(;a;){a-=1;const n=i[Number(a)];if(!Ve(e[`${n}`],t[`${n}`]))return!1}return!0}return!(!Number.isNaN(e)||!Number.isNaN(t))}const Ne=e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()};function De({container:e,array:t,getElementsFn:i,createFn:n,updateFn:a,preDeleteFn:s,valueKeyFn:o,elementValueKeyFn:r}){if(!e)return;let l=i();const d=l.slice(),c=(e,t)=>e.findIndex(((e,i)=>r(e,i)===t));t&&0!==t.length?(t.forEach(((t,s)=>{const r=o(t,s),h=c(l,r);if(-1===h){const a=n(t,s);if(!a)return;e.insertBefore(a,l[Number(s)]),l=i()}else{const n=l[Number(h)];h!==s&&(e.insertBefore(n,l[Number(s)]),l=i()),function(e){const t=c(d,e);t>-1&&d.splice(t,1)}(r),"function"==typeof a&&a(n,t,s)}})),d.forEach((e=>{s&&"function"==typeof s&&s(e),e.remove()}))):l.forEach((e=>e.remove()))}const Oe=e=>localStorage.setItem("customShaders",JSON.stringify(e)),He={get:()=>JSON.parse(localStorage.getItem("customShaders")||"[]").map((e=>{if(!(e&&e.data&&e.created&&e.data))return;const i={id:t.sanitize(U(e,["id"],h())),path:t.sanitize(U(e,["path"],"")),filename:t.sanitize(U(e,["filename"],"")),created:te(t.sanitize(U(e,["created"],0)),0),data:{id:t.sanitize(U(e,["data","id"],h())),name:t.sanitize(U(e,["data","name"],"")),source:U(e,["data","source"],""),inputs:te(U(e,["data","inputs"],0),0),inputIds:U(e,["data","inputIds"],[]),UI:Y(U(e,["data","UI"],{}))}};return He.remove(e.path),He.set(i),i})).filter((e=>!!e)),set:e=>{const t=He.get(),i=t.findIndex((t=>t.path===e.path));i>-1?t[Number(i)]=e:t.push(e),Oe(t)},remove:e=>{const t=Y(He.get()),i=t.findIndex((t=>U(t,["path"],"")===e));-1!==i&&(t.splice(i,1),Oe(t))},reload:e=>{const t=window.NvCompareApi;if(!t||!e)return;if("json"!==e.split(".").pop())return;const i=Y(He.get()),n=i.findIndex((t=>U(t,["path"],"")===e));if(-1===n)return;const a=i[Number(n)];return t.readShaderFile(a.path).then((e=>{const t={id:e.id||h(),name:e.name,source:e.source,UI:e.UI||{},inputs:e.inputs,inputIds:[]};t.name&&t.source&&t.inputs&&He.set({filename:a.filename,path:a.path,created:(new Date).getTime(),data:t})}))}};const $e={id:"difference",inputIds:[],name:"Difference",source:"#version 300 es\nprecision highp float;\n#define DIFF_MODE_RGB 0\n#define DIFF_MODE_LAB_LENGTH 1\n#define DIFF_MODE_LUMINANCE 2\nuniform bool uAbsolute,uSignFlip,uSquared,uMarkInfNaN;uniform float uTolerance,uMultiplier;uniform int uMode,uColorMode,uShowColorMap,uTonemapper;uniform float uGamma,uExposure;uniform sampler2D uTexture0,uTexture1;in vec2 vTextureCoord;out vec4 outColor;float RGBtoLuma(vec3 color){const float RED_COEFFICIENT=.212655,GREEN_COEFFICIENT=.715158,BLUE_COEFFICIENT=.072187;return color.x*RED_COEFFICIENT+color.y*GREEN_COEFFICIENT+color.z*BLUE_COEFFICIENT;}vec3 XYZtoLAB(vec3 c){vec3 n=abs(c)/vec3(95.047,100,108.883),v;v.x=n.x>.008856?pow(n.x,1./3.):7.787*n.x+16./116.;v.y=n.y>.008856?pow(n.y,1./3.):7.787*n.y+16./116.;v.z=n.z>.008856?pow(n.z,1./3.):7.787*n.z+16./116.;return vec3(116.*v.y-16.,5e2*(v.x-v.y),2e2*(v.y-v.z));}vec3 RGBtoXYZ(vec3 c){vec3 tmp;c=abs(c);tmp.x=c.x>.04045?pow((c.x+.055)/1.055,2.4):c.x/12.92;tmp.y=c.y>.04045?pow((c.y+.055)/1.055,2.4):c.y/12.92,tmp.z=c.z>.04045?pow((c.z+.055)/1.055,2.4):c.z/12.92;const mat3 mat=mat3(.4124,.3576,.1805,.2126,.7152,.0722,.0193,.1192,.9505);return tmp*transpose(mat)*1e2;}vec3 RGBtoLAB(vec3 c){vec3 lab=XYZtoLAB(RGBtoXYZ(c));return vec3(lab.x/1e2,.5+.5*(lab.y/127.),.5+.5*(lab.z/127.));}vec3 HSVtoRGB(vec3 hsv){float h=hsv.x,s=hsv.y,v=hsv.z;const float PI=acos(-1.);vec3 rgb=vec3(v);if(s>0.){h=mod(h+2.*PI,2.*PI);h/=PI/3.;int i=int(floor(h));float f=h-float(i),p=v*(1.-s),q=v*(1.-s*f),t=v*(1.-s*(1.-f));rgb=i==0?vec3(v,t,p):i==1?vec3(q,v,p):i==2?vec3(p,v,t):i==3?vec3(p,q,v):i==4?vec3(t,p,v):vec3(v,p,q);}return rgb;}vec3 heatMap(float value,float lb,float ub){float p=clamp((value-lb)/(ub-lb),0.,1.),r,g,b,h=3.7*(1.-p),s=sqrt(p),v=sqrt(p);return HSVtoRGB(vec3(h,s,v));}vec3 colorRamp(float value){vec3 color;if(value<.25)color.x=0.;else if(value>=.57)color.x=1.;else color.x=value*3.215-.78125;if(value<.42)color.y=0.;else if(value>=.92)color.y=1.;else color.y=2.*value-.84;if(value<0.)color.z=0.;else if(value>1.)color.z=1.;else if(value<.25)color.z=4.*value;else if(value<.42)color.z=1.;else if(value<.92)color.z=-2.*value+1.84;else color.z=value*12.5-11.5;return color;}vec3 colorMap(float value,int mode){vec3 color;if(mode==0);else color=mode==1?clamp(1.5-abs(4.*clamp(value,0.,1.)-vec3(3,2,1)),0.,1.):mode==2?heatMap(value,0.,1.):mode==3?vec3(value):mode==4?colorRamp(value):value>0.?vec3(1):vec3(0);return color;}bool isNaN(float val){return!(val<0.||0.<val||val==0.);}bool isInf(float val){return val!=0.&&val*2.==val;}float lerp(float a,float b,float v){v=clamp(v,0.,1.);return a*(1.-v)+b*v;}vec3 lerp(vec3 a,vec3 b,float v){v=clamp(v,0.,1.);return a*(1.-v)+b*v;}void main(){vec3 value;ivec2 dimensions=textureSize(uTexture0,0);vec2 loc2d=vTextureCoord*vec2(dimensions);vec3 colorA=texture(uTexture0,vTextureCoord).xyz,colorB=texture(uTexture1,vTextureCoord).xyz;if(uTonemapper==0){float invGamma=1./uGamma,exposure=uExposure;colorA.x=exposure*pow(colorA.x,invGamma);colorB.x=exposure*pow(colorB.x,invGamma);colorA.y=exposure*pow(colorA.y,invGamma);colorB.y=exposure*pow(colorB.y,invGamma);colorA.z=exposure*pow(colorA.z,invGamma);colorB.z=exposure*pow(colorB.z,invGamma);}if(uMode==DIFF_MODE_RGB)value=uSignFlip?colorB-colorA:colorA-colorB;else if(uMode==DIFF_MODE_LAB_LENGTH){float l=length(RGBtoLAB(colorA)-RGBtoLAB(colorB));value=vec3(l);}else if(uMode==DIFF_MODE_LUMINANCE){float l=abs(RGBtoLuma(colorA)-RGBtoLuma(colorB));value=vec3(l);}value=uSquared?value*value:value;value=uAbsolute?abs(value):value;value.x*=value.x>=uTolerance?1.:0.;value.y*=value.y>=uTolerance?1.:0.;value.z*=value.z>=uTolerance?1.:0.;value*=uMultiplier;float error=RGBtoLuma(value),fade=0.;if(uShowColorMap!=0){vec2 paletteCorner=vec2(uShowColorMap==1||uShowColorMap==3?0.:1.,uShowColorMap==1||uShowColorMap==2?0.:1.);float kPaletteEdgeWidth=2.,kPaletteLength=float(min(dimensions.x,dimensions.y))*.1,kPaletteWidth=kPaletteLength/5.;vec2 kPaletteCenter=abs(vec2(float(dimensions.x),float(dimensions.y))*paletteCorner-vec2(kPaletteWidth*5.,kPaletteLength*2.)),paletteVec=vec2(loc2d)-vec2(float(kPaletteCenter.x),float(kPaletteCenter.y)),paletteDim=vec2(kPaletteWidth,kPaletteLength);bool bInside=abs(paletteVec.x)<kPaletteWidth&&abs(paletteVec.y)<kPaletteLength;if(bInside){value=vec3((1.-paletteVec.y)/kPaletteLength*.5+.5);if(uColorMode==0)if(paletteVec.x<-.33*kPaletteWidth)value.y=value.z=0.;else if(paletteVec.x<.33*kPaletteWidth)value.x=value.z=0.;else value.x=value.y=0.;}vec2 distToEdge=clamp(1.-abs(vec2(kPaletteWidth,kPaletteLength)-abs(paletteVec))/kPaletteEdgeWidth,0.,1.);bool bInsideEdge=abs(paletteVec.x)<kPaletteWidth+kPaletteEdgeWidth&&abs(paletteVec.y)<kPaletteLength+kPaletteEdgeWidth;fade=max(distToEdge.x,distToEdge.y)*(bInsideEdge?1.:0.);}vec3 color=colorMap(RGBtoLuma(value.xyz),uColorMode);if(uMarkInfNaN)if(isNaN(value.x)||isNaN(value.y)||isNaN(value.z))color=vec3(1,0,0);else if(isInf(value.x)||isInf(value.y)||isInf(value.z))color=vec3(0,1,0);color=lerp(color,vec3(.5),fade);outColor=vec4(color,1);}",inputs:2,UI:{uAbsolute:{name:"Absolute",type:"bool",value:!0},uSignFlip:{name:"Sign flip",type:"bool",value:!1,condition:"!uAbsolute"},uSquared:{name:"Squared",type:"bool",value:!1},uMarkInfNaN:{name:"Mark Inf/NaN",type:"bool",value:!1},uTolerance:{name:"Tolerance",type:"float",value:0,min:0,max:1,step:.001,format:"%.03f"},uMultiplier:{name:"Multiplier",type:"float",value:1,min:1,max:100,step:1,format:"%.0f"},uMode:{name:"Mode",type:"dropdown",value:0,alternatives:["RGB difference","CIE-LAB difference","Luminance difference"]},uColorMode:{name:"Color mode",type:"dropdown",value:2,alternatives:["Per-channel differences","Jet","Heatmap","Grayscale","Black-blue-violet-yellow-white","Binary"]},uShowColorMap:{name:"Show Color Map Legend",type:"dropdown",value:1,alternatives:["None","Top Left","Top Right","Bottom Left","Bottom Right"]}}};const Ue={id:"gaussian",inputIds:[],name:"Gaussian blur",source:"#version 300 es\nprecision highp float;uniform bool uSymmetric;uniform int uRadius,uRadiusX,uRadiusY;uniform bool uHalfRadiusSigma;uniform float uSigma,uSigmaX,uSigmaY,uAngle;uniform int uTonemapper;uniform float uGamma,uExposure;uniform sampler2D uTexture0;in vec2 vTextureCoord;out vec4 outColor;void main(){ivec2 dimensions=textureSize(uTexture0,0),loc2d=ivec2(vTextureCoord*vec2(dimensions));vec4 colorSum=vec4(0,0,0,1);float kernelSum=0.;int radiusX=uRadiusX,radiusY=uRadiusY;float sigmaX=uSigmaX,sigmaY=uSigmaY;if(uSymmetric)radiusX=uRadius,radiusY=uRadius,sigmaY=uHalfRadiusSigma?(sigmaX=float(radiusX)/2.,float(radiusY)/2.):(sigmaX=uSigma,uSigma);float invSX=1./(2.*sigmaX*sigmaX),invSY=1./(2.*sigmaY*sigmaY),theta=radians(uAngle),sinTheta=sin(theta),cosTheta=cos(theta),invGamma=1./uGamma,exposure=uExposure;for(int y=-radiusY;y<=radiusY;y++)for(int x=-radiusX;x<=radiusX;x++){float xp=float(x),yp=float(y);if(!uSymmetric)xp=xp*cosTheta-yp*sinTheta,yp=xp*sinTheta+yp*cosTheta;float weight=exp(-xp*xp*invSX-yp*yp*invSY);ivec2 tap=loc2d+ivec2(x,y);if(tap.x>=0&&tap.x<dimensions.x&&tap.y>=0&&tap.y<dimensions.y){kernelSum+=weight;vec4 txl=texelFetch(uTexture0,tap,0);if(uTonemapper==0)txl.x=exposure*pow(txl.x,invGamma),txl.y=exposure*pow(txl.y,invGamma),txl.z=exposure*pow(txl.z,invGamma);colorSum+=txl*weight;}}outColor=vec4(colorSum/kernelSum);}",inputs:1,UI:{uSymmetric:{name:"Symmetric",type:"bool",value:!0},uRadius:{name:"Radius",type:"int",value:3,min:1,max:32,step:.01,condition:"uSymmetric"},uRadiusX:{name:"X Radius",type:"int",value:1,min:1,max:32,condition:"!uSymmetric"},uRadiusY:{name:"Y Radius",type:"int",value:1,min:1,max:32,condition:"!uSymmetric"},uHalfRadiusSigma:{name:"Half radius sigma",type:"bool",value:!0},uSigma:{name:"Sigma",type:"float",value:1.5,min:0,max:16,step:.1,condition:"uSymmetric & !uHalfRadiusSigma"},uSigmaX:{name:"X Sigma",type:"float",value:1.5,min:0,max:16,step:.1,condition:"!uSymmetric & !uHalfRadiusSigma"},uSigmaY:{name:"Y Sigma",type:"float",value:1.5,min:0,max:16,step:.1,condition:"!uSymmetric & !uHalfRadiusSigma"},uAngle:{name:"Angle",type:"float",value:0,min:0,max:360,step:1,condition:"!uSymmetric"}}};const We={id:"pixelate",inputIds:[],name:"Pixelization",source:"#version 300 es\nprecision highp float;float uSigma=1.5;uniform int uTonemapper;uniform float uExposure,uGamma,multiplicative_scalar;uniform bool uInvert;uniform int uColorMode,uShowColorMap;uniform sampler2D uTexture0,uTexture1;in vec2 vTextureCoord;out vec4 outColor;vec4 exposureGamma(vec4 txl,float invGamma,float exposure){if(uTonemapper==0)txl.x=exposure*pow(txl.x,invGamma),txl.y=exposure*pow(txl.y,invGamma),txl.z=exposure*pow(txl.z,invGamma);return txl;}float RGBtoLuma(vec3 color){const float RED_COEFFICIENT=.212655,GREEN_COEFFICIENT=.715158,BLUE_COEFFICIENT=.072187;return color.x*RED_COEFFICIENT+color.y*GREEN_COEFFICIENT+color.z*BLUE_COEFFICIENT;}vec3 RGBtoYUV(vec3 color){vec3 yuv;yuv.x=.257*color.x+.504*color.y+.098*color.z+16.;yuv.y=-.148*color.x-.291*color.y+.439*color.z+128.;yuv.z=.439*color.x-.368*color.y-.071*color.z+128.;return yuv;}vec3 HSVtoRGB(vec3 hsv){float h=hsv.x,s=hsv.y,v=hsv.z;const float PI=acos(-1.);vec3 rgb=vec3(v);if(s>0.){h=mod(h+2.*PI,2.*PI);h/=PI/3.;int i=int(floor(h));float f=h-float(i),p=v*(1.-s),q=v*(1.-s*f),t=v*(1.-s*(1.-f));rgb=i==0?vec3(v,t,p):i==1?vec3(q,v,p):i==2?vec3(p,v,t):i==3?vec3(p,q,v):i==4?vec3(t,p,v):vec3(v,p,q);}return rgb;}vec3 heatMap(float value,float lb,float ub){float p=clamp((value-lb)/(ub-lb),0.,1.),h=3.7*(1.-p),s=sqrt(p),v=sqrt(p);return HSVtoRGB(vec3(h,s,v));}vec3 colorRamp(float value){vec3 color;if(value<.25)color.x=0.;else if(value>=.57)color.x=1.;else color.x=value*3.215-.78125;if(value<.42)color.y=0.;else if(value>=.92)color.y=1.;else color.y=2.*value-.84;if(value<0.)color.z=0.;else if(value>1.)color.z=1.;else if(value<.25)color.z=4.*value;else if(value<.42)color.z=1.;else if(value<.92)color.z=-2.*value+1.84;else color.z=value*12.5-11.5;return color;}vec3 colorMap(float value,int mode){vec3 color;if(mode==0);else color=mode==1?clamp(1.5-abs(4.*clamp(value,0.,1.)-vec3(3,2,1)),0.,1.):mode==2?heatMap(value,0.,1.):mode==3?vec3(value):mode==4?colorRamp(value):value>0.?vec3(1):vec3(0);return color;}float lerp(float a,float b,float v){v=clamp(v,0.,1.);return a*(1.-v)+b*v;}vec3 lerp(vec3 a,vec3 b,float v){v=clamp(v,0.,1.);return a*(1.-v)+b*v;}\n#define KERNELWIDTH 11\nfloat psnr(ivec2 loc2d,float sigma,float invGamma,float exposure){const int kKernelWidth=KERNELWIDTH;float mse=0.;vec3 color_0_max=vec3(0),color_1_max=vec3(0);for(int y=0;y<kKernelWidth;++y)for(int x=0;x<kKernelWidth;++x){vec3 color0=RGBtoYUV(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(x,y),0),invGamma,exposure).xyz),color1=RGBtoYUV(exposureGamma(texelFetch(uTexture1,loc2d+ivec2(x,y),0),invGamma,exposure).xyz);color_0_max=max(color_0_max,color0);color_1_max=max(color_1_max,color1);float ydiff=color0.x-color1.x,udiff=color0.y-color1.y,vdiff=color0.z-color1.z,ydiff2=ydiff*ydiff,udiff2=udiff*udiff,vdiff2=vdiff*vdiff;mse+=(ydiff2+udiff2+vdiff2)/3.;}vec3 color_max=vec3(max(color_0_max,color_1_max));float maxI=max(color_max.x,max(color_max.y,color_max.z));mse/=float(kKernelWidth*kKernelWidth);float psnrSimple=0.;psnrSimple=(20.*log(maxI)-10.*log(mse))/log(10.);return psnrSimple*multiplicative_scalar;}void main(){ivec2 dimensions=textureSize(uTexture0,0),loc2d=ivec2(vTextureCoord*vec2(dimensions));float invGamma=1./uGamma,exposure=uExposure,psnrValue=1.-psnr(loc2d,uSigma,invGamma,exposure);if(uInvert)psnrValue=1.-psnrValue;vec3 value=vec3(psnrValue);float fade=0.;if(uColorMode!=0&&uShowColorMap!=0){vec2 paletteCorner=vec2(uShowColorMap==1||uShowColorMap==3?0.:1.,uShowColorMap==1||uShowColorMap==2?1.:0.);float kPaletteEdgeWidth=2.,kPaletteLength=float(min(dimensions.x,dimensions.y))*.1,kPaletteWidth=kPaletteLength/5.;vec2 kPaletteCenter=abs(vec2(float(dimensions.x),float(dimensions.y))*paletteCorner-vec2(kPaletteWidth*5.,kPaletteLength*2.)),paletteVec=vec2(loc2d)-vec2(float(kPaletteCenter.x),float(kPaletteCenter.y)),paletteDim=vec2(kPaletteWidth,kPaletteLength);bool bInside=abs(paletteVec.x)<kPaletteWidth&&abs(paletteVec.y)<kPaletteLength;if(bInside){value=vec3((1.-paletteVec.y)/kPaletteLength*.5+.5);if(uColorMode==0)if(paletteVec.x<-.33*kPaletteWidth)value.y=value.z=0.;else if(paletteVec.x<.33*kPaletteWidth)value.x=value.z=0.;else value.x=value.y=0.;}vec2 distToEdge=clamp(1.-abs(vec2(kPaletteWidth,kPaletteLength)-abs(paletteVec))/kPaletteEdgeWidth,0.,1.);bool bInsideEdge=abs(paletteVec.x)<kPaletteWidth+kPaletteEdgeWidth&&abs(paletteVec.y)<kPaletteLength+kPaletteEdgeWidth;fade=max(distToEdge.x,distToEdge.y)*(bInsideEdge?1.:0.);}vec3 color;color=uColorMode!=0?(color=colorMap(RGBtoLuma(value.xyz),uColorMode),lerp(color,vec3(.5),fade)):vec3(1.-psnrValue,1.-psnrValue,1.-psnrValue);outColor=vec4(color,1);}",inputs:1,UI:{uFixed:{name:"Same width and height",type:"bool",value:!0},uSize:{name:"Size",type:"int",value:16,min:1,max:64,step:1,condition:"uFixed"},uWidth:{name:"Width",type:"int",value:16,min:1,max:64,condition:"!uFixed"},uHeight:{name:"Height",type:"int",value:16,min:1,max:64,condition:"!uFixed"},uAverage:{name:"Average colors (slower)",type:"bool",value:!1}}};const Ke={id:"sharpness",inputIds:[],name:"Sharpness",source:"#version 300 es\nprecision highp float;uniform vec2 uMouse;uniform float uTime,uFrame;uniform int uType,uVarianceRadius;uniform float uMultiplier,uTolerance;uniform bool uOverlay;uniform int uTonemapper;uniform float uGamma,uExposure;uniform sampler2D uTexture0,uTexture1;in vec2 vTextureCoord;out vec4 outColor;float RGBtoLuma(vec3 color){const float RED_COEFFICIENT=.212655,GREEN_COEFFICIENT=.715158,BLUE_COEFFICIENT=.072187;return color.x*RED_COEFFICIENT+color.y*GREEN_COEFFICIENT+color.z*BLUE_COEFFICIENT;}vec4 exposureGamma(vec4 txl,float invGamma,float exposure){if(uTonemapper==0)txl.x=exposure*pow(txl.x,invGamma),txl.y=exposure*pow(txl.y,invGamma),txl.z=exposure*pow(txl.z,invGamma);return txl;}float sobel(sampler2D texture,ivec2 loc2d,ivec2 dimensions,float invGamma,float exposure){const mat3 kGx=mat3(-1.,0.,1.,-2.,0.,2.,-1.,0.,1.),kGy=mat3(-1.,-2.,-1.,0.,0.,0.,1.,2.,1.);vec3 G=vec3(0);for(int y=-1;y<=1;y++)for(int x=-1;x<=1;x++){ivec2 pos=loc2d+ivec2(x,y);if(pos.x<0||pos.x>=dimensions.x||pos.y<0||pos.y>=dimensions.y)continue;vec3 c=exposureGamma(texelFetch(texture,loc2d+ivec2(x,y),0),invGamma,exposure).xyz;float luminance=(c.x+c.y+c.z)/3.;G.x+=luminance*kGx[y+1][x+1];G.y+=luminance*kGy[y+1][x+1];}return length(G);}float laplacian(sampler2D texture,ivec2 loc2d,float invGamma,float exposure){float c0=RGBtoLuma(exposureGamma(texelFetch(texture,loc2d,0),invGamma,exposure).xyz),c1=RGBtoLuma(exposureGamma(texelFetch(texture,loc2d+ivec2(-1,0),0),invGamma,exposure).xyz),c2=RGBtoLuma(exposureGamma(texelFetch(texture,loc2d+ivec2(1,0),0),invGamma,exposure).xyz),c3=RGBtoLuma(exposureGamma(texelFetch(texture,loc2d+ivec2(0,-1),0),invGamma,exposure).xyz),c4=RGBtoLuma(exposureGamma(texelFetch(texture,loc2d+ivec2(0,1),0),invGamma,exposure).xyz);return-4.*c0+c1+c2+c3+c4;}float laplacian2(sampler2D texture,ivec2 loc2d,float invGamma,float exposure){float c0=RGBtoLuma(exposureGamma(texelFetch(texture,loc2d+ivec2(-1,-1),0),invGamma,exposure).xyz),c1=RGBtoLuma(exposureGamma(texelFetch(texture,loc2d+ivec2(0,-1),0),invGamma,exposure).xyz),c2=RGBtoLuma(exposureGamma(texelFetch(texture,loc2d+ivec2(1,-1),0),invGamma,exposure).xyz),c3=RGBtoLuma(exposureGamma(texelFetch(texture,loc2d+ivec2(-1,0),0),invGamma,exposure).xyz),c4=RGBtoLuma(exposureGamma(texelFetch(texture,loc2d+ivec2(0,0),0),invGamma,exposure).xyz),c5=RGBtoLuma(exposureGamma(texelFetch(texture,loc2d+ivec2(1,0),0),invGamma,exposure).xyz),c6=RGBtoLuma(exposureGamma(texelFetch(texture,loc2d+ivec2(-1,1),0),invGamma,exposure).xyz),c7=RGBtoLuma(exposureGamma(texelFetch(texture,loc2d+ivec2(0,1),0),invGamma,exposure).xyz),c8=RGBtoLuma(exposureGamma(texelFetch(texture,loc2d+ivec2(1,1),0),invGamma,exposure).xyz);return.25*c0+.5*c1+.25*c2+.5*c3-3.*c4+.5*c5+.25*c6+.5*c7+.25*c8;}float laplacianVariance(sampler2D texture,ivec2 loc2d,int radius,ivec2 dimensions,float invGamma,float exposure){float sum=0.,variance=0.,n=0.;for(int y=-radius;y<=radius;y++)for(int x=-radius;x<=radius;x++){ivec2 pos=loc2d+ivec2(x,y);if(pos.x<0||pos.x>=dimensions.x||pos.y<0||pos.y>=dimensions.y)continue;float value=laplacian(texture,pos,invGamma,exposure);sum+=value;n+=1.;}float mean=sum/n;for(int y=-radius;y<=radius;y++)for(int x=-radius;x<=radius;x++){ivec2 pos=loc2d+ivec2(x,y);if(pos.x<0||pos.x>=dimensions.x||pos.y<0||pos.y>=dimensions.y)continue;float value=laplacian(texture,pos,invGamma,exposure);variance+=pow(value-mean,2.);}variance/=n;return variance;}void main(){ivec2 dimensions=textureSize(uTexture0,0),loc2d=ivec2(vTextureCoord*vec2(dimensions));float invGamma=1./uGamma,exposure=uExposure,value0,value1;if(uType==0)value0=sobel(uTexture0,loc2d,dimensions,invGamma,exposure),value1=sobel(uTexture1,loc2d,dimensions,invGamma,exposure);if(uType==1)value0=laplacian(uTexture0,loc2d,invGamma,exposure),value1=laplacian(uTexture1,loc2d,invGamma,exposure);if(uType==2)value0=laplacian2(uTexture0,loc2d,invGamma,exposure),value1=laplacian2(uTexture1,loc2d,invGamma,exposure);if(uType==3)value0=laplacianVariance(uTexture0,loc2d,uVarianceRadius,dimensions,invGamma,exposure),value1=laplacianVariance(uTexture1,loc2d,uVarianceRadius,dimensions,invGamma,exposure);float value=(value0-value1)*uMultiplier;outColor=vec4(0,0,0,1);if(uOverlay)outColor=exposureGamma(texelFetch(uTexture0,loc2d,0),invGamma,exposure);if(value>uTolerance)outColor+=vec4(0,value,0,0);else if(value<-uTolerance)outColor+=vec4(-value,0,0,0);}",inputs:2,UI:{uType:{name:"Type",type:"dropdown",value:3,alternatives:["Sobel","Laplacian (five point)","Laplacian (nine point)","Laplacian variance"]},uVarianceRadius:{name:"Radius",type:"int",value:3,min:1,max:25,condition:"uType == 3"},uMultiplier:{name:"Multiplier",type:"float",value:3,min:1,max:100,step:.5},uTolerance:{name:"Tolerance",type:"float",value:0,min:0,max:10,step:.1},uOverlay:{name:"Overlay",type:"bool",value:!0}}};const qe={id:"sobel",inputIds:[],name:"Sobel",source:"#version 300 es\nprecision highp float;uniform vec2 uMouse;uniform float uTime,uFrame;uniform int uType;uniform bool uX,uY,uAngle;uniform int uVarianceRadius;uniform float uMultiplier;uniform int uTonemapper;uniform float uGamma,uExposure;uniform sampler2D uTexture0;in vec2 vTextureCoord;out vec4 outColor;vec4 exposureGamma(vec4 txl,float invGamma,float exposure){if(uTonemapper==0)txl.x=exposure*pow(txl.x,invGamma),txl.y=exposure*pow(txl.y,invGamma),txl.z=exposure*pow(txl.z,invGamma);return txl;}float RGBtoLuma(vec3 color){const float RED_COEFFICIENT=.212655,GREEN_COEFFICIENT=.715158,BLUE_COEFFICIENT=.072187;return color.x*RED_COEFFICIENT+color.y*GREEN_COEFFICIENT+color.z*BLUE_COEFFICIENT;}float laplacian(ivec2 loc2d,float invGamma,float exposure){float c0=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d,0),invGamma,exposure).xyz),c1=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(-1,0),0),invGamma,exposure).xyz),c2=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(1,0),0),invGamma,exposure).xyz),c3=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(0,-1),0),invGamma,exposure).xyz),c4=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(0,1),0),invGamma,exposure).xyz);return-4.*c0+c1+c2+c3+c4;}float laplacian2(ivec2 loc2d,float invGamma,float exposure){float c0=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(-1,-1),0),invGamma,exposure).xyz),c1=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(0,-1),0),invGamma,exposure).xyz),c2=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(1,-1),0),invGamma,exposure).xyz),c3=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(-1,0),0),invGamma,exposure).xyz),c4=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(0,0),0),invGamma,exposure).xyz),c5=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(1,0),0),invGamma,exposure).xyz),c6=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(-1,1),0),invGamma,exposure).xyz),c7=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(0,1),0),invGamma,exposure).xyz),c8=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(1,1),0),invGamma,exposure).xyz);return.25*c0+.5*c1+.25*c2+.5*c3-3.*c4+.5*c5+.25*c6+.5*c7+.25*c8;}float laplacianVariance(ivec2 loc2d,int radius,ivec2 dimensions,float invGamma,float exposure){float sum=0.,variance=0.,n=0.;for(int y=-radius;y<=radius;y++)for(int x=-radius;x<=radius;x++){ivec2 pos=loc2d+ivec2(x,y);if(pos.x<0||pos.x>=dimensions.x||pos.y<0||pos.y>=dimensions.y)continue;float value=laplacian(pos,invGamma,exposure);sum+=value;n+=1.;}float mean=sum/n;for(int y=-radius;y<=radius;y++)for(int x=-radius;x<=radius;x++){ivec2 pos=loc2d+ivec2(x,y);if(pos.x<0||pos.x>=dimensions.x||pos.y<0||pos.y>=dimensions.y)continue;float value=laplacian(pos,invGamma,exposure);variance+=pow(value-mean,2.);}variance/=n;return variance;}void main(){ivec2 dimensions=textureSize(uTexture0,0),loc2d=ivec2(vTextureCoord*vec2(dimensions));float invGamma=1./uGamma,exposure=uExposure;const float Pi=acos(-1.),TwoDivPi=2./Pi;const mat3 kGx=mat3(-1.,0.,1.,-2.,0.,2.,-1.,0.,1.),kGy=mat3(-1.,-2.,-1.,0.,0.,0.,1.,2.,1.);vec4 colorSum=vec4(0,0,0,1);float kernelSum=0.;if(uType==1){float laplacian=laplacian(loc2d,invGamma,exposure)*uMultiplier;outColor=vec4(laplacian,laplacian,laplacian,1);return;}if(uType==2){float laplacian=laplacian2(loc2d,invGamma,exposure)*uMultiplier;outColor=vec4(laplacian,laplacian,laplacian,1);return;}if(uType==3){float laplacianVariance=laplacianVariance(loc2d,uVarianceRadius,dimensions,invGamma,exposure)*uMultiplier;outColor=vec4(laplacianVariance,laplacianVariance,laplacianVariance,1);return;}vec3 G=vec3(0);for(int y=-1;y<=1;y++)for(int x=-1;x<=1;x++){ivec2 pos=loc2d+ivec2(x,y);if(pos.x<0||pos.x>=dimensions.x||pos.y<0||pos.y>=dimensions.y)continue;vec3 c=exposureGamma(texelFetch(uTexture0,loc2d+ivec2(x,y),0),invGamma,exposure).xyz;float luminance=(c.x+c.y+c.z)/3.;if(uX)G.x+=luminance*kGx[y+1][x+1];if(uY)G.y+=luminance*kGy[y+1][x+1];}if(uAngle){float angle=atan(G.y/G.x)*TwoDivPi;outColor=vec4(angle>0.?angle:0.,angle<0.?-angle:0.,0,1);}else{float value=length(G);outColor=vec4(value,value,value,1);}}",inputs:1,UI:{uType:{name:"Type",type:"dropdown",value:0,alternatives:["Sobel","Laplacian (five point)","Laplacian (nine point)","Laplacian variance"]},uX:{name:"X",type:"bool",value:!0,condition:"uType == 0"},uY:{name:"Y",type:"bool",value:!0,sameLine:!0,condition:"uType == 0"},uAngle:{name:"Show angle",type:"bool",value:!1,condition:"uType == 0"},uVarianceRadius:{name:"Radius",type:"int",value:3,min:1,max:25,condition:"uType == 3"},uMultiplier:{name:"Multiplier",type:"float",value:10,min:1,max:100,step:.5,condition:"uType == 1,2,3"}}};const Ze={id:"ssim",inputIds:[],name:"SSIM",source:"#version 300 es\nprecision highp float;uniform vec2 uMouse;uniform float uTime,uFrame;uniform int uMode;uniform float uC1,uC2,uC3,uSigma,uWeightLuminance,uWeightContrast,uWeightStructure;uniform bool uInvert;uniform int uColorMode,uShowColorMap,uTonemapper;uniform float uGamma,uExposure;uniform sampler2D uTexture0,uTexture1;in vec2 vTextureCoord;out vec4 outColor;vec4 exposureGamma(vec4 txl,float invGamma,float exposure){if(uTonemapper==0)txl.x=exposure*pow(txl.x,invGamma),txl.y=exposure*pow(txl.y,invGamma),txl.z=exposure*pow(txl.z,invGamma);return txl;}float RGBtoLuma(vec3 color){const float RED_COEFFICIENT=.212655,GREEN_COEFFICIENT=.715158,BLUE_COEFFICIENT=.072187;return color.x*RED_COEFFICIENT+color.y*GREEN_COEFFICIENT+color.z*BLUE_COEFFICIENT;}vec3 HSVtoRGB(vec3 hsv){float h=hsv.x,s=hsv.y,v=hsv.z;const float PI=acos(-1.);vec3 rgb=vec3(v);if(s>0.){h=mod(h+2.*PI,2.*PI);h/=PI/3.;int i=int(floor(h));float f=h-float(i),p=v*(1.-s),q=v*(1.-s*f),t=v*(1.-s*(1.-f));rgb=i==0?vec3(v,t,p):i==1?vec3(q,v,p):i==2?vec3(p,v,t):i==3?vec3(p,q,v):i==4?vec3(t,p,v):vec3(v,p,q);}return rgb;}vec3 heatMap(float value,float lb,float ub){float p=clamp((value-lb)/(ub-lb),0.,1.),r,g,b,h=3.7*(1.-p),s=sqrt(p),v=sqrt(p);return HSVtoRGB(vec3(h,s,v));}vec3 colorRamp(float value){vec3 color;if(value<.25)color.x=0.;else if(value>=.57)color.x=1.;else color.x=value*3.215-.78125;if(value<.42)color.y=0.;else if(value>=.92)color.y=1.;else color.y=2.*value-.84;if(value<0.)color.z=0.;else if(value>1.)color.z=1.;else if(value<.25)color.z=4.*value;else if(value<.42)color.z=1.;else if(value<.92)color.z=-2.*value+1.84;else color.z=value*12.5-11.5;return color;}vec3 colorMap(float value,int mode){vec3 color;if(mode==0);else color=mode==1?clamp(1.5-abs(4.*clamp(value,0.,1.)-vec3(3,2,1)),0.,1.):mode==2?heatMap(value,0.,1.):mode==3?vec3(value):mode==4?colorRamp(value):value>0.?vec3(1):vec3(0);return color;}bool isNaN(float val){return!(val<0.||0.<val||val==0.);}bool isInf(float val){return val!=0.&&val*2.==val;}float lerp(float a,float b,float v){v=clamp(v,0.,1.);return a*(1.-v)+b*v;}vec3 lerp(vec3 a,vec3 b,float v){v=clamp(v,0.,1.);return a*(1.-v)+b*v;}\n#define KERNELWIDTH 11\nfloat ssim(ivec2 loc2d,float sigma,float invGamma,float exposure){const int kKernelWidth=KERNELWIDTH,kHalfKernelWidth=(kKernelWidth-1)/2;float weights[kKernelWidth],weightsSum=0.,sigmaSq=sigma*sigma;int i=0;for(i=0;i<kKernelWidth;i++){float x=float(i-kHalfKernelWidth);weights[i]=exp(-x*x/(2.*sigmaSq));weightsSum+=weights[i];}for(i=0;i<kKernelWidth;i++)weights[i]/=weightsSum;float mu0=0.,mu1=0.;for(int y=0;y<kKernelWidth;y++)for(int x=0;x<kKernelWidth;x++){float weight=weights[x]*weights[y];mu0+=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(x,y),0),invGamma,exposure).xyz)/255.;mu1+=RGBtoLuma(exposureGamma(texelFetch(uTexture1,loc2d+ivec2(x,y),0),invGamma,exposure).xyz)/255.;}float mu0Sq=mu0*mu0,mu1Sq=mu1*mu1,mu0mu1=mu0*mu1,sigma0Sq=0.,sigma1Sq=0.,sigma01=0.;for(int y=0;y<kKernelWidth;++y)for(int x=0;x<kKernelWidth;++x){float weight=weights[x]*weights[y],color0=RGBtoLuma(exposureGamma(texelFetch(uTexture0,loc2d+ivec2(x,y),0),invGamma,exposure).xyz)/255.,color1=RGBtoLuma(exposureGamma(texelFetch(uTexture1,loc2d+ivec2(x,y),0),invGamma,exposure).xyz)/255.;sigma0Sq+=(color0-mu0)*(color0-mu0)*weight;sigma1Sq+=(color1-mu1)*(color1-mu1)*weight;sigma01+=(color0-mu0)*(color1-mu1)*weight;}float sigma0sigma1=sqrt(sigma0Sq*sigma1Sq),ssimSimple=(2.*mu0mu1+uC1)*(2.*sigma01+uC2)/((mu0Sq+mu1Sq+uC1)*(sigma0Sq+sigma1Sq+uC2)),L=pow((2.*mu0mu1+uC1)/(mu0Sq+mu1Sq+uC1),uWeightLuminance),C=pow((2.*sigma0sigma1+uC2)/(sigma0Sq+sigma1Sq+uC2),uWeightContrast),S=(sigma01+uC3)/(sigma0sigma1+uC3);S=uWeightStructure==float(int(uWeightStructure))?S:pow(S,uWeightStructure);float ssim=1.;if(uMode==0)ssim=L*C*S;else if(uMode==1)ssim=ssimSimple;else if(uMode==2)ssim=L;else if(uMode==3)ssim=C;else if(uMode==4)ssim=S;return ssim;}void main(){ivec2 dimensions=textureSize(uTexture0,0),loc2d=ivec2(vTextureCoord*vec2(dimensions));float invGamma=1./uGamma,exposure=uExposure,ssimValue=1.-ssim(loc2d,uSigma,invGamma,exposure);if(uInvert)ssimValue=1.-ssimValue;vec3 value=vec3(ssimValue);float fade=0.;if(uColorMode!=0&&uShowColorMap!=0){vec2 paletteCorner=vec2(uShowColorMap==1||uShowColorMap==3?0.:1.,uShowColorMap==1||uShowColorMap==2?0.:1.);float kPaletteEdgeWidth=2.,kPaletteLength=float(min(dimensions.x,dimensions.y))*.1,kPaletteWidth=kPaletteLength/5.;vec2 kPaletteCenter=abs(vec2(float(dimensions.x),float(dimensions.y))*paletteCorner-vec2(kPaletteWidth*5.,kPaletteLength*2.)),paletteVec=vec2(loc2d)-vec2(float(kPaletteCenter.x),float(kPaletteCenter.y)),paletteDim=vec2(kPaletteWidth,kPaletteLength);bool bInside=abs(paletteVec.x)<kPaletteWidth&&abs(paletteVec.y)<kPaletteLength;if(bInside){value=vec3((1.-paletteVec.y)/kPaletteLength*.5+.5);if(uColorMode==0)if(paletteVec.x<-.33*kPaletteWidth)value.y=value.z=0.;else if(paletteVec.x<.33*kPaletteWidth)value.x=value.z=0.;else value.x=value.y=0.;}vec2 distToEdge=clamp(1.-abs(vec2(kPaletteWidth,kPaletteLength)-abs(paletteVec))/kPaletteEdgeWidth,0.,1.);bool bInsideEdge=abs(paletteVec.x)<kPaletteWidth+kPaletteEdgeWidth&&abs(paletteVec.y)<kPaletteLength+kPaletteEdgeWidth;fade=max(distToEdge.x,distToEdge.y)*(bInsideEdge?1.:0.);}vec3 color;color=uColorMode!=0?(color=colorMap(RGBtoLuma(value.xyz),uColorMode),lerp(color,vec3(.5),fade)):vec3(1.-ssimValue,1.-ssimValue,1.-ssimValue);outColor=vec4(color,1);}",inputs:2,UI:{uMode:{name:"SSIM Mode",type:"dropdown",value:1,alternatives:["SSIM full","SSIM simplified","Luminance error only","Contrast error only","Structural error only"]},uC1:{name:"C1",type:"float",value:1e-4,min:0,max:1,step:1e-5,displayFormat:"%.5f"},uC2:{name:"C2",type:"float",value:9e-4,min:0,max:1,step:1e-5,displayFormat:"%.5f"},uC3:{name:"C3",type:"float",value:45e-5,min:0,max:1,step:1e-5,displayFormat:"%.5f"},uSigma:{name:"Sigma",type:"float",value:1.5,min:.1,max:16,step:.1,displayFormat:"%.1f"},uWeightLuminance:{name:"Weight Luminance",type:"float",value:1,min:0,max:5,step:.01,displayFormat:"%.2f",condition:"uMode == 0,2"},uWeightContrast:{name:"Weight Contrast",type:"float",value:1,min:0,max:5,step:.01,displayFormat:"%.2f",condition:"uMode == 0,3"},uWeightStructure:{name:"Weight Structure",type:"float",value:1,min:0,max:5,step:.01,displayFormat:"%.2f",condition:"uMode == 0,4"},uInvert:{type:"bool",name:"Invert output",value:!1},uColorMode:{name:"Color mode",type:"dropdown",value:0,alternatives:["None (SSIM default)","Jet","Heatmap","Grayscale","Black-blue-violet-yellow-white","Binary"]},uShowColorMap:{name:"Show Color Map Legend",type:"dropdown",value:1,alternatives:["None","Top Left","Top Right","Bottom Left","Bottom Right"],condition:"uColorMode != 0"}}};const Ye={id:"blend",inputIds:[],name:"Blend",source:"#version 300 es\nprecision highp float;uniform sampler2D uTexture0,uTexture1;uniform int uMode;uniform float uOpacity;uniform bool uTint;uniform float uTintRed,uTintGreen,uTintBlue;in vec2 vTextureCoord;out vec4 outColor;float blendReflect(float base,float blend){return blend==1.?blend:min(base*base/(1.-blend),1.);}vec3 blendReflect(vec3 base,vec3 blend){return vec3(blendReflect(base.x,blend.x),blendReflect(base.y,blend.y),blendReflect(base.z,blend.z));}vec3 blendReflect(vec3 base,vec3 blend,float opacity){return blendReflect(base,blend)*opacity+base*(1.-opacity);}float blendOverlay(float base,float blend){return base<.5?2.*base*blend:1.-2.*(1.-base)*(1.-blend);}vec3 blendOverlay(vec3 base,vec3 blend){return vec3(blendOverlay(base.x,blend.x),blendOverlay(base.y,blend.y),blendOverlay(base.z,blend.z));}vec3 blendOverlay(vec3 base,vec3 blend,float opacity){return blendOverlay(base,blend)*opacity+base*(1.-opacity);}float blendColorBurn(float base,float blend){return blend==0.?blend:max(1.-(1.-base)/blend,0.);}vec3 blendColorBurn(vec3 base,vec3 blend){return vec3(blendColorBurn(base.x,blend.x),blendColorBurn(base.y,blend.y),blendColorBurn(base.z,blend.z));}vec3 blendColorBurn(vec3 base,vec3 blend,float opacity){return blendColorBurn(base,blend)*opacity+base*(1.-opacity);}float blendColorDodge(float base,float blend){return blend==1.?blend:min(base/(1.-blend),1.);}vec3 blendColorDodge(vec3 base,vec3 blend){return vec3(blendColorDodge(base.x,blend.x),blendColorDodge(base.y,blend.y),blendColorDodge(base.z,blend.z));}vec3 blendColorDodge(vec3 base,vec3 blend,float opacity){return blendColorDodge(base,blend)*opacity+base*(1.-opacity);}float blendVividLight(float base,float blend){return blend<.5?blendColorBurn(base,2.*blend):blendColorDodge(base,2.*(blend-.5));}vec3 blendVividLight(vec3 base,vec3 blend){return vec3(blendVividLight(base.x,blend.x),blendVividLight(base.y,blend.y),blendVividLight(base.z,blend.z));}vec3 blendVividLight(vec3 base,vec3 blend,float opacity){return blendVividLight(base,blend)*opacity+base*(1.-opacity);}vec3 blendNormal(vec3 base,vec3 blend){return blend;}vec3 blendNormal(vec3 base,vec3 blend,float opacity){return blendNormal(base,blend)*opacity+base*(1.-opacity);}float blendAdd(float base,float blend){return min(base+blend,1.);}vec3 blendAdd(vec3 base,vec3 blend){return min(base+blend,vec3(1));}vec3 blendAdd(vec3 base,vec3 blend,float opacity){return blendAdd(base,blend)*opacity+base*(1.-opacity);}vec3 blendAverage(vec3 base,vec3 blend){return(base+blend)/2.;}vec3 blendAverage(vec3 base,vec3 blend,float opacity){return blendAverage(base,blend)*opacity+base*(1.-opacity);}float blendDarken(float base,float blend){return min(blend,base);}vec3 blendDarken(vec3 base,vec3 blend){return vec3(blendDarken(base.x,blend.x),blendDarken(base.y,blend.y),blendDarken(base.z,blend.z));}vec3 blendDarken(vec3 base,vec3 blend,float opacity){return blendDarken(base,blend)*opacity+base*(1.-opacity);}vec3 blendDifference(vec3 base,vec3 blend){return abs(base-blend);}vec3 blendDifference(vec3 base,vec3 blend,float opacity){return blendDifference(base,blend)*opacity+base*(1.-opacity);}vec3 blendExclusion(vec3 base,vec3 blend){return base+blend-2.*base*blend;}vec3 blendExclusion(vec3 base,vec3 blend,float opacity){return blendExclusion(base,blend)*opacity+base*(1.-opacity);}vec3 blendGlow(vec3 base,vec3 blend){return blendReflect(blend,base);}vec3 blendGlow(vec3 base,vec3 blend,float opacity){return blendGlow(base,blend)*opacity+base*(1.-opacity);}vec3 blendHardLight(vec3 base,vec3 blend){return blendOverlay(blend,base);}vec3 blendHardLight(vec3 base,vec3 blend,float opacity){return blendHardLight(base,blend)*opacity+base*(1.-opacity);}float blendHardMix(float base,float blend){return blendVividLight(base,blend)<.5?0.:1.;}vec3 blendHardMix(vec3 base,vec3 blend){return vec3(blendHardMix(base.x,blend.x),blendHardMix(base.y,blend.y),blendHardMix(base.z,blend.z));}vec3 blendHardMix(vec3 base,vec3 blend,float opacity){return blendHardMix(base,blend)*opacity+base*(1.-opacity);}float blendLighten(float base,float blend){return max(blend,base);}vec3 blendLighten(vec3 base,vec3 blend){return vec3(blendLighten(base.x,blend.x),blendLighten(base.y,blend.y),blendLighten(base.z,blend.z));}vec3 blendLighten(vec3 base,vec3 blend,float opacity){return blendLighten(base,blend)*opacity+base*(1.-opacity);}float blendLinearBurn(float base,float blend){return max(base+blend-1.,0.);}vec3 blendLinearBurn(vec3 base,vec3 blend){return max(base+blend-vec3(1),vec3(0));}vec3 blendLinearBurn(vec3 base,vec3 blend,float opacity){return blendLinearBurn(base,blend)*opacity+base*(1.-opacity);}float blendLinearDodge(float base,float blend){return min(base+blend,1.);}vec3 blendLinearDodge(vec3 base,vec3 blend){return min(base+blend,vec3(1));}vec3 blendLinearDodge(vec3 base,vec3 blend,float opacity){return blendLinearDodge(base,blend)*opacity+base*(1.-opacity);}float blendLinearLight(float base,float blend){return blend<.5?blendLinearBurn(base,2.*blend):blendLinearDodge(base,2.*(blend-.5));}vec3 blendLinearLight(vec3 base,vec3 blend){return vec3(blendLinearLight(base.x,blend.x),blendLinearLight(base.y,blend.y),blendLinearLight(base.z,blend.z));}vec3 blendLinearLight(vec3 base,vec3 blend,float opacity){return blendLinearLight(base,blend)*opacity+base*(1.-opacity);}vec3 blendMultiply(vec3 base,vec3 blend){return base*blend;}vec3 blendMultiply(vec3 base,vec3 blend,float opacity){return blendMultiply(base,blend)*opacity+base*(1.-opacity);}vec3 blendNegation(vec3 base,vec3 blend){return vec3(1)-abs(vec3(1)-base-blend);}vec3 blendNegation(vec3 base,vec3 blend,float opacity){return blendNegation(base,blend)*opacity+base*(1.-opacity);}vec3 blendPhoenix(vec3 base,vec3 blend){return min(base,blend)-max(base,blend)+vec3(1);}vec3 blendPhoenix(vec3 base,vec3 blend,float opacity){return blendPhoenix(base,blend)*opacity+base*(1.-opacity);}float blendPinLight(float base,float blend){return blend<.5?blendDarken(base,2.*blend):blendLighten(base,2.*(blend-.5));}vec3 blendPinLight(vec3 base,vec3 blend){return vec3(blendPinLight(base.x,blend.x),blendPinLight(base.y,blend.y),blendPinLight(base.z,blend.z));}vec3 blendPinLight(vec3 base,vec3 blend,float opacity){return blendPinLight(base,blend)*opacity+base*(1.-opacity);}float blendScreen(float base,float blend){return 1.-(1.-base)*(1.-blend);}vec3 blendScreen(vec3 base,vec3 blend){return vec3(blendScreen(base.x,blend.x),blendScreen(base.y,blend.y),blendScreen(base.z,blend.z));}vec3 blendScreen(vec3 base,vec3 blend,float opacity){return blendScreen(base,blend)*opacity+base*(1.-opacity);}float blendSoftLight(float base,float blend){return blend<.5?2.*base*blend+base*base*(1.-2.*blend):sqrt(base)*(2.*blend-1.)+2.*base*(1.-blend);}vec3 blendSoftLight(vec3 base,vec3 blend){return vec3(blendSoftLight(base.x,blend.x),blendSoftLight(base.y,blend.y),blendSoftLight(base.z,blend.z));}vec3 blendSoftLight(vec3 base,vec3 blend,float opacity){return blendSoftLight(base,blend)*opacity+base*(1.-opacity);}float blendSubtract(float base,float blend){return max(base+blend-1.,0.);}vec3 blendSubtract(vec3 base,vec3 blend){return max(base+blend-vec3(1),vec3(0));}vec3 blendSubtract(vec3 base,vec3 blend,float opacity){return blendSubtract(base,blend)*opacity+base*(1.-opacity);}void main(){vec3 color=vec3(0);vec4 bgColor=texture(uTexture0,vTextureCoord),fgColor=texture(uTexture1,vTextureCoord);if(uTint)fgColor.xyz*=vec3(uTintRed,uTintGreen,uTintBlue);color=uMode==1?blendAdd(bgColor.xyz,fgColor.xyz,uOpacity):uMode==2?blendAverage(bgColor.xyz,fgColor.xyz,uOpacity):uMode==3?blendColorBurn(bgColor.xyz,fgColor.xyz,uOpacity):uMode==4?blendColorDodge(bgColor.xyz,fgColor.xyz,uOpacity):uMode==5?blendDarken(bgColor.xyz,fgColor.xyz,uOpacity):uMode==6?blendDifference(bgColor.xyz,fgColor.xyz,uOpacity):uMode==7?blendExclusion(bgColor.xyz,fgColor.xyz,uOpacity):uMode==8?blendGlow(bgColor.xyz,fgColor.xyz,uOpacity):uMode==9?blendHardLight(bgColor.xyz,fgColor.xyz,uOpacity):uMode==10?blendHardMix(bgColor.xyz,fgColor.xyz,uOpacity):uMode==11?blendLighten(bgColor.xyz,fgColor.xyz,uOpacity):uMode==12?blendLinearBurn(bgColor.xyz,fgColor.xyz,uOpacity):uMode==13?blendLinearDodge(bgColor.xyz,fgColor.xyz,uOpacity):uMode==14?blendLinearLight(bgColor.xyz,fgColor.xyz,uOpacity):uMode==15?blendMultiply(bgColor.xyz,fgColor.xyz,uOpacity):uMode==16?blendNegation(bgColor.xyz,fgColor.xyz,uOpacity):uMode==17?blendOverlay(bgColor.xyz,fgColor.xyz,uOpacity):uMode==18?blendPhoenix(bgColor.xyz,fgColor.xyz,uOpacity):uMode==19?blendPinLight(bgColor.xyz,fgColor.xyz,uOpacity):uMode==20?blendReflect(bgColor.xyz,fgColor.xyz,uOpacity):uMode==21?blendScreen(bgColor.xyz,fgColor.xyz,uOpacity):uMode==22?blendSoftLight(bgColor.xyz,fgColor.xyz,uOpacity):uMode==23?blendSubtract(bgColor.xyz,fgColor.xyz,uOpacity):uMode==24?blendVividLight(bgColor.xyz,fgColor.xyz,uOpacity):blendNormal(bgColor.xyz,fgColor.xyz,uOpacity);outColor=vec4(color,1);}",inputs:2,UI:{uMode:{name:"Mode",type:"dropdown",value:0,alternatives:["Normal","Add","Average","Color Burn","Color Dodge","Darken","Difference","Exclusion","Glow","Hard Light","Hard Mix","Lighten","Linear Burn","Linear Dodge","Linear Light","Multiply","Negation","Overlay","Phoenix","Pin Light","Reflect","Screen","Soft Light","Subtract","Vivid Light"]},uOpacity:{name:"Opacity",type:"float",value:1,min:0,max:1,step:.001},uTint:{name:"Foreground tint",type:"bool",value:!1},uTintRed:{name:"Red",type:"float",value:0,min:0,max:1,step:.001,condition:"uTint"},uTintGreen:{name:"Green",type:"float",value:0,min:0,max:1,step:.001,condition:"uTint"},uTintBlue:{name:"Blue",type:"float",value:0,min:0,max:1,step:.001,condition:"uTint"}}};var Xe,Je,Qe,et,tt,it,nt,at=Object.defineProperty,st=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,lt=Math.pow,dt=(e,t,i)=>t in e?at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ct=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},ht=(e,t,i)=>(ct(e,t,"read from private field"),i?i.call(e):t.get(e)),ut=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},mt=(e,t,i,n)=>(ct(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),pt=(e,t,i)=>(ct(e,t,"access private method"),i),gt=new Uint8Array(8),bt=new DataView(gt.buffer),vt=e=>[(e%256+256)%256],ft=e=>(bt.setUint16(0,e,!1),[gt[0],gt[1]]),yt=e=>(bt.setUint32(0,e,!1),[gt[1],gt[2],gt[3]]),xt=e=>(bt.setUint32(0,e,!1),[gt[0],gt[1],gt[2],gt[3]]),wt=e=>(bt.setUint8(0,e),bt.setUint8(1,e<<8),[gt[0],gt[1]]),kt=e=>(bt.setUint16(0,e,!1),bt.setUint16(2,e<<16,!1),[gt[0],gt[1],gt[2],gt[3]]),zt=(e,t=!1)=>{let i=Array(e.length).fill(null).map(((t,i)=>e.charCodeAt(i)));return t&&i.push(0),i},St=e=>e&&e[e.length-1],Mt=(e,t,i=!0)=>{let n=e*t;return i?Math.round(n):n},Ct=[65536,0,0,0,65536,0,0,0,1073741824].map(xt),jt=(e,t,i)=>({type:e,contents:t&&new Uint8Array(t.flat(10)),children:i}),Lt=(e,t,i,n,a)=>jt(e,[vt(t),yt(i),null!=n?n:[]],a),Et=(e,t)=>{let i=Mt(Math.max(0,...t.filter((e=>e.samples.length>0)).map((e=>St(e.samples).timestamp+St(e.samples).duration))),Ki),n=Math.max(...t.map((e=>e.id)))+1;return Lt("mvhd",0,0,[xt(e),xt(e),xt(Ki),xt(i),kt(1),wt(1),Array(10).fill(0),Ct,Array(24).fill(0),xt(n)])},_t=(e,t)=>jt("trak",null,[It(e,t),Tt(e,t)]),It=(e,t)=>{let i=St(e.samples),n=Mt(i?i.timestamp+i.duration:0,Ki);return Lt("tkhd",0,3,[xt(t),xt(t),xt(e.id),xt(0),xt(n),Array(8).fill(0),ft(0),ft(0),wt("audio"===e.info.type?1:0),ft(0),Ct,kt("video"===e.info.type?e.info.width:0),kt("video"===e.info.type?e.info.height:0)])},Tt=(e,t)=>jt("mdia",null,[Pt(e,t),Ft("video"===e.info.type?"vide":"soun"),At(e)]),Pt=(e,t)=>{let i=St(e.samples),n=Mt(i?i.timestamp+i.duration:0,e.timescale);return Lt("mdhd",0,0,[xt(t),xt(t),xt(e.timescale),xt(n),ft(21956),ft(0)])},Ft=e=>Lt("hdlr",0,0,[zt("mhlr"),zt(e),xt(0),xt(0),xt(0),zt("mp4-muxer-hdlr")]),At=e=>jt("minf",null,["video"===e.info.type?Rt():Gt(),Bt(),Dt(e)]),Rt=()=>Lt("vmhd",0,1,[ft(0),ft(0),ft(0),ft(0)]),Gt=()=>Lt("smhd",0,0,[ft(0),ft(0)]),Bt=()=>jt("dinf",null,[Vt()]),Vt=()=>Lt("dref",0,0,[xt(1)],[Nt()]),Nt=()=>Lt("url ",0,1),Dt=e=>jt("stbl",null,[Ot(e),Ut(e),Wt(e),Kt(e),qt(e),Zt(e)]),Ot=e=>Lt("stsd",0,0,[xt(1)],["video"===e.info.type?Ht(Yt[e.info.codec],e):$t(Jt[e.info.codec],e)]),Ht=(e,t)=>{return jt(e,[Array(6).fill(0),ft(1),ft(0),ft(0),Array(12).fill(0),ft(t.info.width),ft(t.info.height),xt(4718592),xt(4718592),xt(0),ft(1),Array(32).fill(0),ft(24),(i=65535,bt.setInt16(0,i,!1),[gt[0],gt[1]])],[Xt[t.info.codec](t)]);var i},$t=(e,t)=>jt(e,[Array(6).fill(0),ft(1),ft(0),ft(0),xt(0),ft(t.info.numberOfChannels),ft(16),ft(0),ft(0),kt(t.info.sampleRate)],[Qt[t.info.codec](t)]),Ut=e=>Lt("stts",0,0,[xt(e.timeToSampleTable.length),e.timeToSampleTable.map((e=>[xt(e.sampleCount),xt(e.sampleDelta)]))]),Wt=e=>{if(e.samples.every((e=>"key"===e.type)))return null;let t=[...e.samples.entries()].filter((([,e])=>"key"===e.type));return Lt("stss",0,0,[xt(t.length),t.map((([e])=>xt(e+1)))])},Kt=e=>Lt("stsc",0,0,[xt(e.compactlyCodedChunkTable.length),e.compactlyCodedChunkTable.map((e=>[xt(e.firstChunk),xt(e.samplesPerChunk),xt(1)]))]),qt=e=>Lt("stsz",0,0,[xt(0),xt(e.samples.length),e.samples.map((e=>xt(e.size)))]),Zt=e=>e.writtenChunks.length>0&&St(e.writtenChunks).offset>=lt(2,32)?Lt("co64",0,0,[xt(e.writtenChunks.length),e.writtenChunks.map((e=>{return t=e.offset,bt.setUint32(0,Math.floor(t/lt(2,32)),!1),bt.setUint32(4,t,!1),[gt[0],gt[1],gt[2],gt[3],gt[4],gt[5],gt[6],gt[7]];var t}))]):Lt("stco",0,0,[xt(e.writtenChunks.length),e.writtenChunks.map((e=>xt(e.offset)))]),Yt={avc:"avc1",hevc:"hvc1",vp9:"vp09",av1:"av01"},Xt={avc:e=>e.codecPrivate&&jt("avcC",[...e.codecPrivate]),hevc:e=>e.codecPrivate&&jt("hvcC",[...e.codecPrivate]),vp9:e=>e.codecPrivate&&jt("vpcC",[...e.codecPrivate]),av1:e=>e.codecPrivate&&jt("av1C",[...e.codecPrivate])},Jt={aac:"mp4a",opus:"opus"},Qt={aac:e=>Lt("esds",0,0,[xt(58753152),vt(32+e.codecPrivate.byteLength),ft(1),vt(0),xt(75530368),vt(18+e.codecPrivate.byteLength),vt(64),vt(21),yt(0),xt(130071),xt(130071),xt(92307584),vt(e.codecPrivate.byteLength),...e.codecPrivate,xt(109084800),vt(1),vt(2)]),opus:e=>jt("dOps",[vt(0),vt(e.info.numberOfChannels),ft(3840),xt(e.info.sampleRate),wt(0),vt(0)])},ei=class{constructor(){this.buffer=null}},ti=class{constructor(e,t,i){this.onData=e,this.onDone=t,this.options=i}},ii=class{constructor(e,t){this.stream=e,this.options=t}},ni=class{constructor(){this.pos=0,ut(this,Xe,new Uint8Array(8)),ut(this,Je,new DataView(ht(this,Xe).buffer)),this.offsets=new WeakMap}seek(e){this.pos=e}writeU32(e){ht(this,Je).setUint32(0,e,!1),this.write(ht(this,Xe).subarray(0,4))}writeU64(e){ht(this,Je).setUint32(0,Math.floor(e/lt(2,32)),!1),ht(this,Je).setUint32(4,e,!1),this.write(ht(this,Xe).subarray(0,8))}writeAscii(e){for(let t=0;t<e.length;t++)ht(this,Je).setUint8(t%8,e.charCodeAt(t)),t%8==7&&this.write(ht(this,Xe));e.length%8!=0&&this.write(ht(this,Xe).subarray(0,e.length%8))}writeBox(e){var t,i;if(this.offsets.set(e,this.pos),e.contents&&!e.children)this.writeBoxHeader(e,null!=(t=e.size)?t:e.contents.byteLength+8),this.write(e.contents);else{let t=this.pos;if(this.writeBoxHeader(e,0),e.contents&&this.write(e.contents),e.children)for(let t of e.children)t&&this.writeBox(t);let n=this.pos,a=null!=(i=e.size)?i:n-t;this.seek(t),this.writeBoxHeader(e,a),this.seek(n)}}writeBoxHeader(e,t){this.writeU32(e.largeSize?1:t),this.writeAscii(e.type),e.largeSize&&this.writeU64(t)}patchBox(e){let t=this.pos;this.seek(this.offsets.get(e)),this.writeBox(e),this.seek(t)}};Xe=new WeakMap,Je=new WeakMap;var ai,si,oi=class extends ni{constructor(e){super(),ut(this,it),ut(this,Qe,void 0),ut(this,et,new ArrayBuffer(lt(2,16))),ut(this,tt,new Uint8Array(ht(this,et))),mt(this,Qe,e)}write(e){pt(this,it,nt).call(this,this.pos+e.byteLength),ht(this,tt).set(e,this.pos),this.pos+=e.byteLength}finalize(){pt(this,it,nt).call(this,this.pos),ht(this,Qe).buffer=ht(this,et).slice(0,this.pos)}};Qe=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakSet,nt=function(e){let t=ht(this,et).byteLength;for(;t<e;)t*=2;if(t===ht(this,et).byteLength)return;let i=new ArrayBuffer(t),n=new Uint8Array(i);n.set(ht(this,tt),0),mt(this,et,i),mt(this,tt,n)};var ri=class extends ni{constructor(e){super(),ut(this,ai,void 0),ut(this,si,[]),mt(this,ai,e)}write(e){ht(this,si).push({data:e.slice(),start:this.pos}),this.pos+=e.byteLength}flush(){if(0===ht(this,si).length)return;let e=[],t=[...ht(this,si)].sort(((e,t)=>e.start-t.start));e.push({start:t[0].start,size:t[0].data.byteLength});for(let i=1;i<t.length;i++){let n=e[e.length-1],a=t[i];a.start<=n.start+n.size?n.size=Math.max(n.size,a.start+a.data.byteLength-n.start):e.push({start:a.start,size:a.data.byteLength})}for(let t of e){t.data=new Uint8Array(t.size);for(let e of ht(this,si))t.start<=e.start&&e.start<t.start+t.size&&t.data.set(e.data,e.start-t.start);ht(this,ai).onData(t.data,t.start)}ht(this,si).length=0}finalize(){var e,t;null==(t=(e=ht(this,ai)).onDone)||t.call(e)}};ai=new WeakMap,si=new WeakMap;var li,di,ci,hi,ui,mi,pi,gi,bi,vi,fi,yi=lt(2,24),xi=class extends ni{constructor(e){var t,i;if(super(),ut(this,hi),ut(this,mi),ut(this,gi),ut(this,vi),ut(this,li,void 0),ut(this,di,void 0),ut(this,ci,[]),mt(this,li,e),mt(this,di,null!=(i=null==(t=e.options)?void 0:t.chunkSize)?i:yi),!Number.isInteger(ht(this,di))||ht(this,di)<lt(2,10))throw new Error("Invalid StreamTarget options: chunkSize must be an integer not smaller than 1024.")}write(e){pt(this,hi,ui).call(this,e,this.pos),pt(this,vi,fi).call(this),this.pos+=e.byteLength}finalize(){var e,t;pt(this,vi,fi).call(this,!0),null==(t=(e=ht(this,li)).onDone)||t.call(e)}};li=new WeakMap,di=new WeakMap,ci=new WeakMap,hi=new WeakSet,ui=function(e,t){let i=ht(this,ci).findIndex((e=>e.start<=t&&t<e.start+ht(this,di)));-1===i&&(i=pt(this,gi,bi).call(this,t));let n=ht(this,ci)[i],a=t-n.start,s=e.subarray(0,Math.min(ht(this,di)-a,e.byteLength));n.data.set(s,a);let o={start:a,end:a+s.byteLength};if(pt(this,mi,pi).call(this,n,o),0===n.written[0].start&&n.written[0].end===ht(this,di)&&(n.shouldFlush=!0),ht(this,ci).length>2){for(let e=0;e<ht(this,ci).length-1;e++)ht(this,ci)[e].shouldFlush=!0;pt(this,vi,fi).call(this)}s.byteLength<e.byteLength&&pt(this,hi,ui).call(this,e.subarray(s.byteLength),t+s.byteLength)},mi=new WeakSet,pi=function(e,t){let i=0,n=e.written.length-1,a=-1;for(;i<=n;){let s=Math.floor(i+(n-i+1)/2);e.written[s].start<=t.start?(i=s+1,a=s):n=s-1}for(e.written.splice(a+1,0,t),(-1===a||e.written[a].end<t.start)&&a++;a<e.written.length-1&&e.written[a].end>=e.written[a+1].start;)e.written[a].end=Math.max(e.written[a].end,e.written[a+1].end),e.written.splice(a+1,1)},gi=new WeakSet,bi=function(e){let t={start:Math.floor(e/ht(this,di))*ht(this,di),data:new Uint8Array(ht(this,di)),written:[],shouldFlush:!1};return ht(this,ci).push(t),ht(this,ci).sort(((e,t)=>e.start-t.start)),ht(this,ci).indexOf(t)},vi=new WeakSet,fi=function(e=!1){for(let t=0;t<ht(this,ci).length;t++){let i=ht(this,ci)[t];if(i.shouldFlush||e){for(let e of i.written)ht(this,li).onData(i.data.subarray(e.start,e.end),i.start+e.start);ht(this,ci).splice(t--,1)}}};var wi,ki,zi,Si,Mi,Ci,ji,Li,Ei,_i,Ii,Ti,Pi,Fi,Ai,Ri,Gi,Bi,Vi,Ni,Di,Oi,Hi,$i,Ui,Wi=class extends xi{constructor(e){var t;super(new ti(((t,i)=>e.stream.write({type:"write",data:t,position:i})),void 0,{chunkSize:null==(t=e.options)?void 0:t.chunkSize}))}},Ki=1e3,qi=["avc","hevc","vp9","av1"],Zi=["aac","opus"],Yi=["strict","offset"],Xi=class{constructor(e){var t;if(ut(this,Li),ut(this,_i),ut(this,Ti),ut(this,Fi),ut(this,Ri),ut(this,Bi),ut(this,Ni),ut(this,Oi),ut(this,$i),ut(this,wi,void 0),ut(this,ki,void 0),ut(this,zi,void 0),ut(this,Si,null),ut(this,Mi,null),ut(this,Ci,Math.floor(Date.now()/1e3)+2082844800),ut(this,ji,!1),pt(this,Li,Ei).call(this,e),this.target=e.target,mt(this,wi,((e,t)=>{for(var i in t||={})ot.call(t,i)&&dt(e,i,t[i]);if(st)for(var i of st(t))rt.call(t,i)&&dt(e,i,t[i]);return e})({firstTimestampBehavior:"strict"},e)),e.target instanceof ei)mt(this,ki,new oi(e.target));else if(e.target instanceof ti)mt(this,ki,(null==(t=e.target.options)?void 0:t.chunked)?new xi(e.target):new ri(e.target));else{if(!(e.target instanceof ii))throw new Error(`Invalid target: ${e.target}`);mt(this,ki,new Wi(e.target))}pt(this,_i,Ii).call(this),pt(this,Ti,Pi).call(this)}addVideoChunk(e,t,i){let n=new Uint8Array(e.byteLength);e.copyTo(n),this.addVideoChunkRaw(n,e.type,null!=i?i:e.timestamp,e.duration,t)}addVideoChunkRaw(e,t,i,n,a){if(pt(this,$i,Ui).call(this),!ht(this,wi).video)throw new Error("No video track declared.");pt(this,Ri,Gi).call(this,ht(this,Si),e,t,i,n,a)}addAudioChunk(e,t,i){let n=new Uint8Array(e.byteLength);e.copyTo(n),this.addAudioChunkRaw(n,e.type,null!=i?i:e.timestamp,e.duration,t)}addAudioChunkRaw(e,t,i,n,a){if(pt(this,$i,Ui).call(this),!ht(this,wi).audio)throw new Error("No audio track declared.");pt(this,Ri,Gi).call(this,ht(this,Mi),e,t,i,n,a)}finalize(){ht(this,Si)&&pt(this,Ni,Di).call(this,ht(this,Si)),ht(this,Mi)&&pt(this,Ni,Di).call(this,ht(this,Mi));let e=ht(this,ki).offsets.get(ht(this,zi)),t=ht(this,ki).pos-e;ht(this,zi).size=t,ht(this,ki).patchBox(ht(this,zi));let i=(n=[ht(this,Si),ht(this,Mi)].filter(Boolean),a=ht(this,Ci),jt("moov",null,[Et(a,n),...n.map((e=>_t(e,a)))]));var n,a;ht(this,ki).writeBox(i),pt(this,Oi,Hi).call(this),ht(this,ki).finalize(),mt(this,ji,!0)}};wi=new WeakMap,ki=new WeakMap,zi=new WeakMap,Si=new WeakMap,Mi=new WeakMap,Ci=new WeakMap,ji=new WeakMap,Li=new WeakSet,Ei=function(e){if(e.video&&!qi.includes(e.video.codec))throw new Error(`Unsupported video codec: ${e.video.codec}`);if(e.audio&&!Zi.includes(e.audio.codec))throw new Error(`Unsupported audio codec: ${e.audio.codec}`);if(e.firstTimestampBehavior&&!Yi.includes(e.firstTimestampBehavior))throw new Error(`Invalid first timestamp behavior: ${e.firstTimestampBehavior}`)},_i=new WeakSet,Ii=function(){var e;let t="hevc"===(null==(e=ht(this,wi).video)?void 0:e.codec);ht(this,ki).writeBox((e=>jt("ftyp",e?[zt("isom"),xt(0),zt("iso4"),zt("hvc1")]:[zt("isom"),xt(0),zt("isom"),zt("avc1"),zt("mp41")]))(t)),mt(this,zi,{type:"mdat",largeSize:!0}),ht(this,ki).writeBox(ht(this,zi)),pt(this,Oi,Hi).call(this)},Ti=new WeakSet,Pi=function(){if(ht(this,wi).video&&mt(this,Si,{id:1,info:{type:"video",codec:ht(this,wi).video.codec,width:ht(this,wi).video.width,height:ht(this,wi).video.height},timescale:720,codecPrivate:new Uint8Array(0),samples:[],writtenChunks:[],currentChunk:null,firstTimestamp:void 0,lastTimestamp:-1,timeToSampleTable:[],lastTimescaleUnits:null,compactlyCodedChunkTable:[]}),ht(this,wi).audio){let e=pt(this,Fi,Ai).call(this,2,ht(this,wi).audio.sampleRate,ht(this,wi).audio.numberOfChannels);mt(this,Mi,{id:ht(this,wi).video?2:1,info:{type:"audio",codec:ht(this,wi).audio.codec,numberOfChannels:ht(this,wi).audio.numberOfChannels,sampleRate:ht(this,wi).audio.sampleRate},timescale:ht(this,wi).audio.sampleRate,codecPrivate:e,samples:[],writtenChunks:[],currentChunk:null,firstTimestamp:void 0,lastTimestamp:-1,timeToSampleTable:[],lastTimescaleUnits:null,compactlyCodedChunkTable:[]})}},Fi=new WeakSet,Ai=function(e,t,i){let n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350].indexOf(t),a=i,s="";s+=e.toString(2).padStart(5,"0"),s+=n.toString(2).padStart(4,"0"),15===n&&(s+=t.toString(2).padStart(24,"0")),s+=a.toString(2).padStart(4,"0");let o=8*Math.ceil(s.length/8);s=s.padEnd(o,"0");let r=new Uint8Array(s.length/8);for(let e=0;e<s.length;e+=8)r[e/8]=parseInt(s.slice(e,e+8),2);return r},Ri=new WeakSet,Gi=function(e,t,i,n,a,s){var o;let r=n/1e6,l=a/1e6;if(void 0===e.firstTimestamp&&(e.firstTimestamp=r),r=pt(this,Bi,Vi).call(this,r,e),e.lastTimestamp=r,(!e.currentChunk||r-e.currentChunk.startTimestamp>=.5)&&(e.currentChunk&&pt(this,Ni,Di).call(this,e),e.currentChunk={startTimestamp:r,sampleData:[],sampleCount:0}),e.currentChunk.sampleData.push(t),e.currentChunk.sampleCount++,(null==(o=null==s?void 0:s.decoderConfig)?void 0:o.description)&&(e.codecPrivate=new Uint8Array(s.decoderConfig.description)),e.samples.push({timestamp:r,duration:l,size:t.byteLength,type:i}),null!==e.lastTimescaleUnits){let t=Mt(r,e.timescale,!1),i=Math.round(t-e.lastTimescaleUnits);e.lastTimescaleUnits+=i;let n=St(e.timeToSampleTable);1===n.sampleCount?(n.sampleDelta=i,n.sampleCount++):n.sampleDelta===i?n.sampleCount++:(n.sampleCount--,e.timeToSampleTable.push({sampleCount:2,sampleDelta:i}))}else e.lastTimescaleUnits=0,e.timeToSampleTable.push({sampleCount:1,sampleDelta:Mt(l,e.timescale)})},Bi=new WeakSet,Vi=function(e,t){if("strict"===ht(this,wi).firstTimestampBehavior&&-1===t.lastTimestamp&&0!==e)throw new Error(`The first chunk for your media track must have a timestamp of 0 (received ${e}). Non-zero first timestamps are often caused by directly piping frames or audio data from a MediaStreamTrack into the encoder. Their timestamps are typically relative to the age of the document, which is probably what you want.\n\nIf you want to offset all timestamps of a track such that the first one is zero, set firstTimestampBehavior: 'offset' in the options.\n`);if("offset"===ht(this,wi).firstTimestampBehavior&&(e-=t.firstTimestamp),e<t.lastTimestamp)throw new Error(`Timestamps must be monotonically increasing (went from ${1e6*t.lastTimestamp} to ${1e6*e}).`);return e},Ni=new WeakSet,Di=function(e){if(e.currentChunk){e.currentChunk.offset=ht(this,ki).pos;for(let t of e.currentChunk.sampleData)ht(this,ki).write(t);e.currentChunk.sampleData=null,0!==e.compactlyCodedChunkTable.length&&St(e.compactlyCodedChunkTable).samplesPerChunk===e.currentChunk.sampleCount||e.compactlyCodedChunkTable.push({firstChunk:e.writtenChunks.length+1,samplesPerChunk:e.currentChunk.sampleCount}),e.writtenChunks.push(e.currentChunk),pt(this,Oi,Hi).call(this)}},Oi=new WeakSet,Hi=function(){ht(this,ki)instanceof ri&&ht(this,ki).flush()},$i=new WeakSet,Ui=function(){if(ht(this,ji))throw new Error("Cannot add new video or audio chunks after the file has been finalized.")};const Ji="0.6.17",Qi="external";function en(e=[],t=!1){const i=document.createElement("input");return i.type="file",i.multiple=!0,i.accept=e.join(","),t&&i.setAttribute("webkitdirectory","true"),i}function tn(e){return new Promise((t=>{const i=ke(e.path||e.webkitdirectory||e.name),n={id:h(),src:l.getUrl(e)||"",base:e.name,path:i.path,extension:i.ext,width:0,height:0,size:e.size,modified:new Date(e.lastModified).getTime(),created:new Date(e.lastModified).getTime(),displayWidth:95,x:0,y:0,visible:!0,type:"overlay"},a=new Image;a.onload=()=>{n.width=a.naturalWidth||a.width,n.height=a.naturalHeight||a.height,a.onload=null,a.onerror=null,a.src="",t({data:n,file:e})},a.onerror=()=>{a.onload=null,a.onerror=null,a.src="";try{URL.revokeObjectURL(n.src)}catch(e){}t(`Could not load logo ${e.name}`)},a.src=n.src}))}class nn extends HTMLElement{j=!0;get isEmbed(){return this.j}set isEmbed(e){this.j=e,this.shadowRoot.getElementById("top-bar").setAttribute("data-is-embed",e.toString())}L="";get packageType(){return this.L}set packageType(e){const t=le(e,["external","internal"],"external");this.L=t,this.shadowRoot.getElementById("top-bar").setAttribute("data-package",t)}constructor(){super(),i(this,a('<div id="top-bar" data-is-embed="true" data-package=""><div id="top-bar-left" class="content-row"><slot name="left"></slot></div><div id="top-bar-center" class="content-row"><slot name="center"></slot></div><div id="top-bar-right" class="content-row"><slot name="right"></slot></div></div>',"#top-bar{align-items:center;background-color:#2b2b2b;box-sizing:border-box;display:grid;grid-template-columns:1fr 15em 1fr;padding:0 1em;position:relative;width:100%}#top-bar[data-is-embed=true],#top-bar[data-package=external]{display:flex;justify-content:space-between;padding:0 .5em}#top-bar[data-is-embed=true] #top-bar-left,#top-bar[data-package=external] #top-bar-left{display:none}.content-row{align-items:center;display:flex}#top-bar-center{gap:1.25em}#top-bar-left,#top-bar-right{flex-grow:1;gap:.25em}#top-bar-right{justify-content:flex-end}"))}connectedCallback(){this.isEmbed=this.j}}function an(e,t){if(!e||!t)return!1;const i=t.composedPath()[0];if(!i)return!1;if(e===i||e.contains(i)||e.shadowRoot&&e.shadowRoot.contains(i))return!0;const n=i.getRootNode();if(!n)return!1;const a=n.host;return!!a&&(e===a||e.contains(a)||e.shadowRoot&&e.shadowRoot.contains(a))}s("top-bar",nn);var sn='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6"/></svg>';const on=["in","out"],rn=["info","stack","communication-forward","filter","video","pencil","plus-multiple","fullscreen","settings"],ln=["image","cog","wand","cards","close","speaker","speaker-off","speaker-medium","speaker-mute","eye","eye-off","layout-detail","help-circle","plus","minus","export","floppy","folder-open","eyedropper","magnifying-glass","play","pause","first-frame","last-frame","next-frame","previous-frame","loop","chevron-up","chevron-down","chevron-down-select","chevron-right","chevron-left","mirror","sticker","shader"];class dn extends HTMLElement{static get observedAttributes(){return["circle","widecircle","type","fill_stroke"]}_=!1;get circle(){return this._}set circle(e){const t=$(e);t!==this._&&(this._=t,this.I().setAttribute("data-circle",t.toString()))}T="";get type(){return this.T}set type(e){e!==this.T&&(this.T=e,this.I().setAttribute("data-type",e),this.P())}F=!1;get widecircle(){return this.F}set widecircle(e){const t=$(e);t!==this.F&&(this.F=t,this.I().setAttribute("data-wide-circle",t.toString()))}V="";get fill_stroke(){return this.V}set fill_stroke(e){const t=le(e,["fill","stroke",""],this.V);t!==this.V&&(this.V=t,this.N())}constructor(){super(),i(this,a('<div id="icon-element-container" data-circle="false" data-type="" data-wide-circle="false"></div>',"#icon-element-container{align-items:center;box-sizing:border-box;display:flex;height:1em;justify-content:center;transition:color .2s;width:1em}#icon-element-container svg{fill:currentColor;height:100%;width:100%}#icon-element-container[data-circle=true]{border-radius:50%;box-shadow:inset 0 0 0 1px;height:1.5em;padding:.33em;width:1.5em}#icon-element-container[data-wide-circle=true]{border-radius:50%;box-shadow:inset 0 0 0 1px;height:1.75em;padding:.5em;width:1.75em}#icon-element-container[data-type=crosshair]{font-size:110%}#icon-element-container[data-type=filter]{font-size:130%;margin:-.1655em -.1155em -.066em}#icon-element-container[data-type=pencil]{font-size:73%}#icon-element-container[data-type=play][data-circle=true] svg,#icon-element-container[data-type=play][data-wide-circle=true] svg{left:.1em;position:relative}#icon-element-container[data-type=check]{width:1.2em}#icon-element-container[data-type=fullscreen] svg{height:75%;width:75%}#icon-element-container[data-type=loop]{height:1.15em;width:1.15em}#icon-element-container[data-type=loop][data-circle=true]{height:1.65em;width:1.65em}#icon-element-container[data-type=loop][data-wide-circle=true]{height:1.9em;width:1.9em}#icon-element-container[stroke-icon=true] svg{fill:none;stroke:currentColor;stroke-width:1px}#icon-element-container[stroke-icon=true] svg path{stroke:currentColor}#icon-element-container[fill-icon=true] svg,#icon-element-container[no-style-icon=true] svg{fill:unset;stroke:unset;stroke-width:unset}#icon-element-container[fill-icon=true] svg path,#icon-element-container[fill-icon=true] svg polygon{fill:currentColor}"))}I(){return this.shadowRoot.getElementById("icon-element-container")}N(){this.I().setAttribute("stroke-icon",(ln.indexOf(this.type)>-1).toString()),this.I().setAttribute("no-style-icon",(on.indexOf(this.type)>-1).toString()),this.I().setAttribute("fill-icon",(this.V||rn.indexOf(this.type)>-1).toString())}P(){this.I().innerHTML=this.D(this.type),this.N()}D=e=>e?"nvidia"===e?'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 30 20" style="enable-background:new 0 0 30 20;" xml:space="preserve"><path d="M11.3,6V4.2c0.2,0,0.4,0,0.5,0C16.8,4,20,8.4,20,8.4s-3.5,4.9-7.3,4.9c-0.5,0-1-0.1-1.5-0.2V7.5c1.9,0.2,2.3,1.1,3.5,3\n\tl2.6-2.2c-1.2-1.5-3.1-2.4-5-2.5C11.9,5.9,11.6,5.9,11.3,6 M11.3,0v2.7c0.2,0,0.4,0,0.5,0c6.9-0.2,11.3,5.6,11.3,5.6\n\ts-5.1,6.3-10.5,6.3c-0.5,0-0.9,0-1.4-0.1v1.7c0.4,0,0.8,0.1,1.2,0.1c5,0,8.6-2.5,12.1-5.6c0.6,0.5,2.9,1.6,3.4,2.1\n\tc-3.3,2.8-11.1,5-15.4,5c-0.4,0-0.8,0-1.2-0.1V20h18.9V0L11.3,0z M11.3,13v1.4c-4.6-0.8-5.9-5.6-5.9-5.6C7,7.2,9,6.2,11.3,6v1.6h0\n\tc-1.3,0-2.6,0.6-3.4,1.6C7.8,9.1,8.7,12.1,11.3,13 M3.1,8.6c2-2.6,5-4.2,8.2-4.4V2.7C5.2,3.2,0,8.3,0,8.3s3,8.6,11.3,9.4v-1.6\n\tC5.2,15.3,3.1,8.6,3.1,8.6L3.1,8.6z"/></svg>':"stack"===e?'<svg height="16" width="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 .921 14.992 5 8 9.079 1.008 5 8 .921ZM2.992 5 8 7.921 13.008 5 8 2.079 2.992 5ZM1.238 7.926l.524-.852L8 10.913l6.238-3.839.524.852L8 12.087 1.238 7.926Zm0 3 .524-.852L8 13.913l6.238-3.839.524.852L8 15.087l-6.762-4.161Z"></path></svg>':"info"===e?'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 2a6 6 0 1 0 0 12A6 6 0 0 0 8 2ZM1 8a7 7 0 1 1 14 0A7 7 0 0 1 1 8Zm7.5-4v1h-1V4h1Zm0 2v6h-1V6h1Z" clip-rule="evenodd"/></svg>':"communication-forward"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="m13.207 5.5-2.854-2.854-.707.708L11.293 5H2.678l2.045 7.63.966-.26L3.982 6h7.31L9.647 7.646l.707.708L13.207 5.5Z"></path></svg>':"filter"===e?'<svg height="16" width="16" fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13 6H3V5h10v1Zm-2 3H5V8h6v1Zm-2 3H7v-1h2v1Z" clip-rule="evenodd"></path></svg>':"settings"===e?'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M28,9H11a1,1,0,0,1,0-2H28a1,1,0,0,1,0,2Z"/><path d="M7,9H4A1,1,0,0,1,4,7H7A1,1,0,0,1,7,9Z"/><path d="M21,17H4a1,1,0,0,1,0-2H21a1,1,0,0,1,0,2Z"/><path d="M11,25H4a1,1,0,0,1,0-2h7a1,1,0,0,1,0,2Z"/><path d="M9,11a3,3,0,1,1,3-3A3,3,0,0,1,9,11ZM9,7a1,1,0,1,0,1,1A1,1,0,0,0,9,7Z"/><path d="M23,19a3,3,0,1,1,3-3A3,3,0,0,1,23,19Zm0-4a1,1,0,1,0,1,1A1,1,0,0,0,23,15Z"/><path d="M13,27a3,3,0,1,1,3-3A3,3,0,0,1,13,27Zm0-4a1,1,0,1,0,1,1A1,1,0,0,0,13,23Z"/><path d="M28,17H25a1,1,0,0,1,0-2h3a1,1,0,0,1,0,2Z"/><path d="M28,25H15a1,1,0,0,1,0-2H28a1,1,0,0,1,0,2Z"/></svg>':"overlay"===e?'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 .921 14.992 5 8 9.079 1.008 5 8 .921ZM2.992 5 8 7.921 13.008 5 8 2.079 2.992 5ZM1.238 7.926l.524-.852L8 10.913l6.238-3.839.524.852L8 12.087 1.238 7.926Zm0 3 .524-.852L8 13.913l6.238-3.839.524.852L8 15.087l-6.762-4.161Z"></path></svg>':"wrench"===e?'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M6 6a4 4 0 0 1 7.66-1.616l.31.702h-3.66L9.852 6l.457.914h3.661l-.31.702a4 4 0 0 1-4.79 2.222l-5.37 5.37L.793 12.5l5.37-5.37A4.001 4.001 0 0 1 6 6Zm4-3a3 3 0 0 0-2.798 4.084l.117.304L2.207 12.5 3.5 13.793 8.612 8.68l.304.117a2.994 2.994 0 0 0 3.394-.884H9.691L8.734 6l.957-1.914h2.62A2.994 2.994 0 0 0 10 3Z"></path></svg>':"pencil"===e?'<svg xmlns="http://www.w3.org/2000/svg" width="800px" height="800px" viewBox="0 0 528.899 528.899"><path d="M328.883,89.125l107.59,107.589l-272.34,272.34L56.604,361.465L328.883,89.125z M518.113,63.177l-47.981-47.981\n\t\tc-18.543-18.543-48.653-18.543-67.259,0l-45.961,45.961l107.59,107.59l53.611-53.611\n\t\tC532.495,100.753,532.495,77.559,518.113,63.177z M0.3,512.69c-1.958,8.812,5.998,16.708,14.811,14.565l119.891-29.069\n\t\tL27.473,390.597L0.3,512.69z"/></svg>':"fullscreen"===e?'<svg id="Fullscreen" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 480"><polygon points="299 62 420 62 420 181.5 480 181.5 480 0 299 0 299 62"/><polygon points="62 181.5 62 62 182 62 182 0 0 0 0 181.5 62 181.5"/><polygon points="182 420 62 420 62 298.5 0 298.5 0 480 182 480 182 420"/><polygon points="420 298.5 420 420 299 420 299 480 480 480 480 298.5 420 298.5"/></svg>':"layout-detail"===e?'<svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 0.5V6M4.5 6V11.5M4.5 6H11.5M0.5 0.5H11.5V11.5H0.5V0.5Z"/></svg>':"cog"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.87309 4.36418L5.30059 5.04816C5.7245 4.66028 6.23225 4.36251 6.79349 4.18517L6.91489 2.60702C7.2657 2.53682 7.62856 2.5 8.00002 2.5C8.3715 2.5 8.73438 2.53683 9.0852 2.60703L9.2066 4.1852C9.76782 4.36254 10.2755 4.66031 10.6994 5.04818L12.127 4.36419C12.6048 4.90622 12.9776 5.54313 13.2134 6.24304L11.9068 7.13765C11.9678 7.41538 12 7.70394 12 8C12 8.29606 11.9678 8.58461 11.9068 8.86234L13.2134 9.75695C12.9776 10.4569 12.6049 11.0938 12.127 11.6358L10.6994 10.9518C10.2755 11.3397 9.76782 11.6375 9.2066 11.8148L9.0852 13.393C8.73438 13.4632 8.3715 13.5 8.00002 13.5C7.62856 13.5 7.2657 13.4632 6.91489 13.393L6.79349 11.8148C6.23224 11.6375 5.72449 11.3397 5.30058 10.9518L3.87308 11.6358C3.39519 11.0938 3.02241 10.4569 2.78662 9.75697L4.0932 8.86238C4.03217 8.58464 4 8.29607 4 8C4 7.70392 4.03217 7.41535 4.0932 7.1376L2.78663 6.24302C3.02242 5.54311 3.3952 4.9062 3.87309 4.36418ZM8.00002 9.5C8.82844 9.5 9.50002 8.82843 9.50002 8C9.50002 7.17157 8.82844 6.5 8.00002 6.5C7.17159 6.5 6.50002 7.17157 6.50002 8C6.50002 8.82843 7.17159 9.5 8.00002 9.5Z"/></svg>':"help-circle"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 11V12M6.5 6C6.5 5.17157 7.17157 4.5 8 4.5C8.82843 4.5 9.5 5.17157 9.5 6C9.5 7.5 8 7.5 8 8.5V10M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8Z"/></svg>':"plus-multiple"===e?'<svg width="800px" height="800px" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M464,128H272L208,64H48A48,48,0,0,0,0,112V400a48,48,0,0,0,48,48H464a48,48,0,0,0,48-48V176A48,48,0,0,0,464,128ZM359.5,296a16,16,0,0,1-16,16h-64v64a16,16,0,0,1-16,16h-16a16,16,0,0,1-16-16V312h-64a16,16,0,0,1-16-16V280a16,16,0,0,1,16-16h64V200a16,16,0,0,1,16-16h16a16,16,0,0,1,16,16v64h64a16,16,0,0,1,16,16Z"/></svg>':"plus"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 12.5V3.5M12.5 8H3.5"/></svg>':"minus"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M12.5 8H3.5"/></svg>':"export"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5 5.5H3.5V12.5H12.5V5.5H11M8 2V9"/><path d="M6 4L8 2L10 4"/></svg>':"floppy"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.5 13.5L11.5 8.5H4.5V13.5M5.5 2.5V6.5H10.5V2.5M2.5 2.5V13.5H13.5V4.5L11.75 2.5H2.5Z"/></svg>':"folder-open"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M1.49878 12.5L1.501 12.4945M1.501 12.4945L3.5 7.5H12.5M1.501 12.4945L1.501 12.5H12.4988L14.5 7.5H12.5M1.501 12.4945L1.5 3.5L5.49999 3.5L6.03589 5.5L12.5 5.5V7.5"/></svg>':"eyedropper"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M10.75 6.75L5.5 12L3.5 13L3 12.5L4 10.5L9.25 5.25M8 4L12 8M9 5L10.5 3.5C11.0523 2.94771 11.9477 2.94771 12.5 3.5C13.0523 4.05228 13.0523 4.94771 12.5 5.5L11 7L9 5Z"/></svg>':"magnifying-glass"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.0001 14.0001L9.32849 9.32842M10.5 6.5C10.5 8.70914 8.70914 10.5 6.5 10.5C4.29086 10.5 2.5 8.70914 2.5 6.5C2.5 4.29086 4.29086 2.5 6.5 2.5C8.70914 2.5 10.5 4.29086 10.5 6.5Z"/></svg>':"play"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.5 8L5.5 11.5V4.5L11.5 8Z"/></svg>':"pause"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 4V12M10.5 4V12"/></svg>':"first-frame"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 3.5V12.5M5.5 8L11.5 11.5V4.5L5.5 8Z"/></svg>':"previous-frame"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M12.5 3.5V12.5M3.5 8L9.5 11.5V4.5L3.5 8Z"/></svg>':"next-frame"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 3.5V12.5M12.5 8L6.5 11.5V4.5L12.5 8Z"/></svg>':"last-frame"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.5 3.5V12.5M4.5 11.5V4.5L10.5 8L4.5 11.5Z"/></svg>':"loop"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 11.5H5C3.067 11.5 1.5 9.933 1.5 8C1.5 6.067 3.067 4.5 5 4.5H11C12.933 4.5 14.5 6.067 14.5 8C14.5 9.933 12.933 11.5 11 11.5"/><path d="M6.5 13.5L8.5 11.5L6.5 9.5"/></svg>':"chevron-up"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M12 10L8 6L4 10"/></svg>':"chevron-down"===e||"chevron-down-select"===e?sn:"mirror"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 2V14M10 8L13.5 4.5V11.5L10 8ZM6 8L2.5 4.5V11.5L6 8Z"/></svg>':"chevron-right"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4"/></svg>':"chevron-left"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M10 4L6 8L10 12"/></svg>':"sticker"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 2.5H13.5V13.5H6.5L2.5 9.5V2.5Z"/><path d="M6.5 13.5V9.5H2.5"/></svg>':"shader"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.5 8C13.5 11.0376 11.0376 13.5 8 13.5C4.96243 13.5 2.5 11.0376 2.5 8C2.5 4.96243 4.96243 2.5 8 2.5C11.0376 2.5 13.5 4.96243 13.5 8Z"/><path d="M7.99986 10V11.5M7.99986 10C7.25964 10 6.61335 9.59788 6.26752 9.00017M7.99986 10C8.74007 10 9.38636 9.59788 9.73219 9.00017M7.99986 6V4.5M7.99986 6C7.25964 6 6.61335 6.40212 6.26752 6.99983M7.99986 6C8.74007 6 9.38636 6.40212 9.73219 6.99983M4.96826 6.24971L6.26752 6.99983M6.26752 6.99983C6.09729 7.29404 5.99986 7.63564 5.99986 8C5.99986 8.36436 6.09729 8.70596 6.26752 9.00017M6.26752 9.00017L4.96826 9.75029M9.73219 9.00017C9.90242 8.70596 9.99986 8.36436 9.99986 8C9.99986 7.63564 9.90242 7.29404 9.73219 6.99983M9.73219 9.00017L11.0314 9.75029M9.73219 6.99983L11.0314 6.24971"/></svg>':"in"===e?'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#filter0_d_1401_46522)"><path d="M15.7133 2.00098L4 2V18H20.0002L15.7133 2.00098Z" fill="#2B2B2B"/><path d="M18.0453 16.5H5.5V3.50013L14.5622 3.50088L18.0453 16.5Z" stroke="#76B900" stroke-width="3"/></g><defs><filter id="filter0_d_1401_46522" x="0" y="0" width="24.0002" height="24" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="2"/><feGaussianBlur stdDeviation="2"/><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1401_46522"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1401_46522" result="shape"/></filter></defs></svg>':"out"===e?'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#filter0_d_1401_46521)"><path d="M8.28693 2.00098L20.0002 2V18H4L8.28693 2.00098Z" fill="#2B2B2B"/><path d="M5.95484 16.5L9.43794 3.50088L18.5002 3.50013V16.5H5.95484Z" stroke="#76B900" stroke-width="3"/></g><defs><filter id="filter0_d_1401_46521" x="0" y="0" width="24.0002" height="24" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="2"/><feGaussianBlur stdDeviation="2"/><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1401_46521"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1401_46521" result="shape"/></filter></defs></svg>':"close"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3 3L13 13M13 3L3 13"/></svg>':"eye"===e?'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 8C9.5 8.82843 8.82843 9.5 8 9.5C7.17157 9.5 6.5 8.82843 6.5 8C6.5 7.17157 7.17157 6.5 8 6.5C8.82843 6.5 9.5 7.17157 9.5 8Z" stroke="black"/><path d="M14.5 8C13.9348 9 11.1216 11.5 8 11.5C4.87839 11.5 2.06522 9 1.5 8C2.06522 7 4.87839 4.5 8 4.5C11.1216 4.5 13.9348 7 14.5 8Z" stroke="black"/></svg>':"eye-off"===e?'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="mask0_2_2047" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="16" height="16"><path d="M2.8284 0L16 13.1716V0H2.8284Z" fill="#FF0000"/><path d="M16 16L0 2.89679e-05V16H16Z" fill="#FF0000"/></mask><g mask="url(#mask0_2_2047)"><path d="M9.5 8C9.5 8.82843 8.82843 9.5 8 9.5C7.17157 9.5 6.5 8.82843 6.5 8C6.5 7.17157 7.17157 6.5 8 6.5C8.82843 6.5 9.5 7.17157 9.5 8Z" stroke="black"/><path d="M14.5 8C13.9348 9 11.1216 11.5 8 11.5C4.87839 11.5 2.06522 9 1.5 8C2.06522 7 4.87839 4.5 8 4.5C11.1216 4.5 13.9348 7 14.5 8Z" stroke="black"/></g><path d="M2 2L14 14" stroke="black" stroke-miterlimit="2.16568" stroke-linejoin="round"/></svg>':"speaker"===e?'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 6.5L10.5 3.5V12.5L7 9.5H5.5V6.5H7Z" stroke="black"/></svg>':"speaker-off"===e?'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="mask0_2_1973" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="16" height="16"><path d="M2.8284 0L16 13.1716V0H2.8284Z" fill="#FF0000"/><path d="M16 16L0 2.89679e-05V16H16Z" fill="#FF0000"/></mask><g mask="url(#mask0_2_1973)"><path d="M6 6.5L9.5 3.5V12.5L6 9.5H4.5V6.5H6Z" stroke="black"/></g><path d="M2 2L14 14" stroke="black" stroke-miterlimit="2.16568" stroke-linejoin="round"/></svg>':"speaker-medium"===e?'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 6V10M12.5 5V11M8.5 3.5L5 6.5H3.5V9.5H5L8.5 12.5V3.5Z" stroke="black"/></svg>':"speaker-mute"===e?'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 6.5L13.5 10.5M9.5 10.5L13.5 6.5M7.5 3.5L4 6.5H2.5V9.5H4L7.5 12.5V3.5Z" stroke="black"/></svg>':"wand"===e?'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.75 6.75L2 12.5L3.5 14L9.25 8.25M7.75 6.75L10 4.5L11.5 6L9.25 8.25M7.75 6.75L9.25 8.25M4.68604 4.5761L6.61836 5.0939M8.57596 0.686066L9.09375 2.61839M13.8891 2.11086L12.4748 3.52508M15.3138 7.4239L13.3815 6.90614M11.4237 11.3139L10.906 9.38154" stroke="black"/></svg>':"cards"===e?'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.49996 11.5H6.99996M5.49996 11.5L4.05111 11.8882L2.23938 5.12676L5.49996 4.25309M5.49996 11.5V4.25309M6.99996 11.5L8.44885 11.8882L11.8316 12.7946L14.161 4.10131L9.32933 2.80667L9.14355 3.50001M6.99996 11.5L9.14355 3.50001M9.14355 3.50001H5.49996V4.25309" stroke="black"/></svg>':"video"===e?'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 1V14H3V1H2ZM4 1V14H5V1H4ZM4.5 2H2.5V3H4.5V2ZM4.5 6H2.5V7H4.5V6ZM4.5 8H2.5V9H4.5V8ZM4.5 12H2.5V13H4.5V12ZM11 1V14H12V1H11ZM13 1V14H14V1H13ZM13.5 2H11.5V3H13.5V2ZM13.5 12H11.5V13H13.5V12ZM13.5 6H11.5V7H13.5V6ZM13.5 8H11.5V9H13.5V8ZM13.5 4H2.5V5H13.5V4ZM13.5 10H2.5V11H13.5V10Z" fill="black"/></svg>':"image"===e?'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.5 10.8236L10.0168 8.81711L6.53361 10.8236L2.5 8.5M2.5 2.5H13.5V13.5H2.5V2.5ZM7.5 6.5C7.5 7.05228 7.05228 7.5 6.5 7.5C5.94772 7.5 5.5 7.05228 5.5 6.5C5.5 5.94772 5.94772 5.5 6.5 5.5C7.05228 5.5 7.5 5.94772 7.5 6.5Z" stroke="black"/></svg>':"close-thin"===e?'<svg id="Close_thin" data-name="Close thin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 499.03 499.03"><defs><style>.cls-1{fill-rule:evenodd;}</style></defs><polygon class="cls-1" points="499.02 49.75 449.28 0 249.51 199.76 49.75 0 0 49.75 199.76 249.51 0 449.28 49.75 499.02 249.51 299.26 449.28 499.02 499.02 449.28 299.26 249.51 499.02 49.75"/></svg>':"speed"===e?'<svg id="Speed" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 491 431.87"><path d="M286.89,226l.11,0L179,76l27,176,.05,0A44,44,0,1,0,286.89,226Z" transform="translate(-5 -5)"/><path d="M495.87,243h0c0-.24,0-.47,0-.71,0-.65-.05-1.3-.07-1.94s0-1.2-.07-1.8l0-.58c0-.62-.08-1.23-.11-1.86s-.07-1-.1-1.52c0-.13,0-.26,0-.39,0-.5-.06-1-.1-1.51l-.06-.93c0-.61-.11-1.2-.16-1.8l-.06-.78v-.08c-.05-.51-.09-1-.14-1.52,0-.24,0-.47-.06-.7,0-.43-.07-.87-.11-1.3-.1-.92-.21-1.84-.32-2.76-.06-.54-.11-1.08-.18-1.62v-.08c-.06-.56-.12-1.11-.19-1.66-.12-1-.26-1.89-.39-2.83-.15-1.09-.29-2.18-.46-3.26s-.31-1.9-.46-2.85-.34-2.12-.53-3.18-.36-1.92-.55-2.88-.38-2.07-.59-3.1-.42-1.94-.63-2.91-.42-2-.65-3-.47-2-.71-2.92-.47-2-.72-2.95-.52-2-.78-2.93-.51-1.93-.78-2.89-.57-2-.86-2.94l0-.11,0-.1c-.26-.87-.51-1.74-.78-2.61s-.59-1.83-.88-2.74c-.06-.18-.12-.36-.17-.54-.27-.81-.52-1.62-.79-2.42s-.57-1.63-.85-2.45l-.36-1c-.25-.71-.5-1.43-.76-2.14s-.54-1.45-.81-2.17c-.2-.52-.39-1-.59-1.57s-.46-1.22-.7-1.83l-.76-1.89c-.25-.64-.51-1.28-.77-1.91-.14-.34-.27-.68-.41-1l-.3-.69c-.22-.55-.46-1.09-.69-1.63-.3-.71-.6-1.42-.91-2.12s-.53-1.19-.8-1.78l-.58-1.29c-.36-.78-.71-1.56-1.08-2.34s-.63-1.34-.95-2l-.39-.81c-.41-.85-.82-1.7-1.24-2.55l-1.11-2.18-.17-.33a.75.75,0,0,0-.07-.12c-.45-.9-.91-1.79-1.38-2.68s-.95-1.76-1.43-2.64l-1.43-2.62c-.5-.88-1-1.76-1.52-2.63s-1-1.72-1.49-2.57-1.06-1.75-1.6-2.63-1-1.68-1.54-2.51-1.12-1.75-1.68-2.63-1.05-1.64-1.59-2.45-1.19-1.76-1.79-2.63-1.08-1.6-1.63-2.39-1.25-1.75-1.88-2.63-1.11-1.55-1.68-2.32-1.32-1.76-2-2.64-1.13-1.5-1.71-2.25-1.41-1.77-2.11-2.65l-1.72-2.16-.83-1-.22-.26-1.2-1.44c-.58-.68-1.14-1.37-1.72-2-.2-.24-.41-.47-.61-.7L435.4,89l-1-1.15-.21-.24c-.19-.21-.37-.43-.56-.65l-.07-.06-.82-.93-.39-.43-1.72-1.85h0l-.9-1-.35-.37c-.3-.31-.58-.63-.88-.95l-.19-.19-.75-.78a10.73,10.73,0,0,0-.79-.86l-2.65-2.66h0L420,72.83a14.53,14.53,0,0,0-1.33-1.16h0l-.52-.48c-.47-.45-1-.89-1.43-1.33l-1.31-1.21-.43-.4c-.46-.42-.93-.82-1.39-1.23l-1.15-1-.3-.26-1.13-1c-.23-.21-.46-.42-.7-.62L408.93,63l-.59-.5-.08-.06-1.17-1c-.17-.15-.34-.3-.52-.44l-1-.84c-.72-.59-1.45-1.15-2.18-1.73l-1.27-1-.07,0-1.31-1c-.75-.58-1.51-1.15-2.27-1.72s-1.75-1.33-2.63-2-1.57-1.13-2.36-1.7-1.73-1.25-2.6-1.86-1.63-1.11-2.45-1.67-1.72-1.18-2.59-1.76-1.67-1.08-2.51-1.62-1.72-1.12-2.59-1.66-1.71-1.05-2.56-1.57l-2.6-1.58c-.87-.52-1.75-1-2.62-1.51s-1.73-1-2.6-1.5-1.79-1-2.69-1.46l-.1-.06-.09,0-2.39-1.3L362.53,32l-.51-.27-2.26-1.14c-.78-.39-1.56-.76-2.34-1.14l-1-.47c-.68-.33-1.36-.67-2.05-1l-2.11-1-1.52-.69-1.8-.8-1.87-.8-1.9-.81-1-.42-.7-.28-1.64-.66-2.15-.85-1.81-.7-1.33-.5-2.41-.9-2.09-.74-.85-.29-2.68-.93-2.33-.75-.35-.11-.13-.05c-1-.3-1.91-.62-2.87-.91L320,15c-1-.29-1.91-.57-2.88-.84s-1.95-.53-2.93-.8l-2.86-.76-3-.73-2.86-.68c-1-.24-2-.45-3.05-.67l-2.87-.61c-1-.21-2.07-.4-3.11-.6l-2.85-.53c-1.06-.19-2.13-.36-3.19-.53s-1.88-.32-2.82-.46l-3.27-.46-2.8-.38c-1.12-.14-2.24-.26-3.36-.39-.92-.1-1.83-.21-2.75-.3l-1.29-.12-.35,0-1.87-.16c-.88-.08-1.76-.17-2.64-.24l-.93-.06-1.24-.07-1.55-.1-.3,0-.85-.06h-.1L263,5.32l-.58,0-2.53-.09-1.33-.06h-.5l-1.3,0h-1.35C255,5,254.65,5,254.26,5h-9.52a12.79,12.79,0,0,0-1.76.13h0l-.71,0-1.95.07-1.79.07-.58,0-1.85.11-1.53.1-.39,0-1.51.1-.93.06c-.61,0-1.2.11-1.8.16l-.78.06h-.08l-1.52.14c-.24,0-.47,0-.7.06l-1.3.11-2.76.32-1.62.18h-.08L219.43,7c-1,.12-1.89.26-2.83.39-1.09.15-2.18.29-3.26.46s-1.9.31-2.85.46-2.12.34-3.18.53-1.92.36-2.88.55-2.07.38-3.1.59-1.94.42-2.91.63-2,.42-3,.65l-2.92.71c-1,.23-2,.47-2.95.72s-2,.52-2.93.78-1.93.51-2.89.78l-2.94.86-.11,0-.1,0L178,15.9l-2.74.88-.54.17-2.42.79-2.45.85-1,.36-2.14.76c-.73.26-1.45.54-2.17.81l-1.57.59-1.83.7-1.89.76-1.91.77-1,.41-.69.3c-.55.22-1.09.46-1.63.69l-2.12.91-1.78.8-1.29.58c-.78.36-1.56.71-2.34,1.08l-2,.95-.81.39L141,30.69l-2.18,1.11-.33.17-.12.07c-.9.45-1.79.91-2.68,1.38l-2.64,1.43-2.62,1.43-2.63,1.52c-.86.49-1.72,1-2.57,1.49s-1.75,1.06-2.62,1.59-1.69,1-2.52,1.55-1.75,1.12-2.62,1.68-1.65,1-2.46,1.6-1.75,1.18-2.62,1.77-1.61,1.09-2.4,1.64-1.75,1.25-2.62,1.88-1.56,1.11-2.33,1.68-1.76,1.32-2.63,2-1.51,1.13-2.26,1.71-1.76,1.4-2.65,2.11L95.37,60.2l-1,.83-.26.22-1.43,1.19-2,1.73-.7.61c-.32.27-.62.55-.93.82l-1.14,1-.25.22-.65.56-.06.07-.93.82-.43.39L83.7,70.39h0l-1,.9-.37.35c-.31.3-.63.58-.95.88l-.19.19-.78.75a10.73,10.73,0,0,0-.86.79L72.83,81a14.53,14.53,0,0,0-1.16,1.33l-.48.53c-.45.47-.89,1-1.33,1.43l-1.21,1.31c-.14.14-.27.28-.4.43-.42.46-.82.93-1.23,1.39l-1,1.15-.26.3-1,1.13c-.21.23-.42.46-.62.7L63,92.07c-.17.19-.33.39-.5.59l-.06.08-1,1.17c-.15.17-.3.34-.44.52l-.84,1c-.59.72-1.15,1.45-1.73,2.18l-1,1.27,0,.07c-.34.43-.7.87-1,1.31-.58.75-1.15,1.51-1.72,2.27s-1.33,1.75-2,2.63-1.13,1.57-1.7,2.36-1.25,1.73-1.86,2.6-1.11,1.63-1.67,2.45-1.18,1.72-1.76,2.59-1.08,1.67-1.62,2.51-1.12,1.72-1.66,2.59-1.05,1.71-1.57,2.56-1.06,1.73-1.58,2.6-1,1.75-1.51,2.62-1,1.73-1.5,2.6-1,1.79-1.46,2.69l-.06.1,0,.09-1.3,2.39L32,138.47l-.27.51c-.38.76-.77,1.51-1.14,2.26s-.76,1.56-1.14,2.34c-.16.33-.32.66-.47,1-.33.68-.67,1.36-1,2.05l-1,2.11-.69,1.52c-.26.6-.54,1.2-.8,1.8s-.53,1.24-.8,1.87l-.81,1.9c-.13.33-.28.66-.42,1s-.19.46-.28.7l-.66,1.64c-.29.71-.57,1.43-.85,2.15s-.47,1.2-.7,1.81c-.17.44-.33.89-.5,1.33l-.9,2.41L18.88,169c-.09.28-.19.57-.29.85l-.93,2.68-.75,2.33a3.58,3.58,0,0,0-.11.35s0,.09-.05.13c-.3,1-.62,1.91-.91,2.87s-.57,1.91-.85,2.87-.57,1.91-.84,2.88-.53,2-.8,2.93-.51,1.9-.76,2.86-.49,2-.73,3-.46,1.9-.68,2.86-.45,2-.67,3.05-.41,1.91-.61,2.87-.4,2.07-.6,3.11-.36,1.9-.53,2.85-.36,2.13-.53,3.19-.32,1.88-.46,2.82c-.16,1.09-.31,2.18-.46,3.27-.12.93-.26,1.86-.38,2.8-.14,1.12-.26,2.24-.39,3.36-.1.92-.21,1.83-.3,2.75,0,.43-.08.86-.12,1.29l0,.35c-.06.62-.11,1.24-.16,1.87-.08.88-.17,1.76-.24,2.64l-.06.93c0,.41,0,.83-.07,1.24s-.07,1-.1,1.55c0,.1,0,.2,0,.3l-.06.85v.1c0,.41,0,.82-.07,1.23l0,.58c0,.85-.06,1.69-.09,2.53,0,.45,0,.89-.06,1.33,0,.17,0,.34,0,.5,0,.44,0,.87,0,1.3a2.17,2.17,0,0,1,0,.26c0,.37,0,.73,0,1.09s-.06.78-.06,1.17v9.52A12.79,12.79,0,0,0,5.13,258h0c0,.24,0,.47,0,.71,0,.65,0,1.3.07,1.94s0,1.25.08,1.87c0,.79.09,1.58.13,2.37,0,.53.07,1.06.1,1.6v0c0,.63.07,1.26.12,1.89.06.88.13,1.75.21,2.62l.06.78.12,1.28c0,.38.06.76.1,1.15.17,1.74.36,3.47.56,5.2,0,.19,0,.38.07.57q.33,2.81.74,5.6a.78.78,0,0,0,0,.14,241.92,241.92,0,0,0,7.55,34.52,1.8,1.8,0,0,1,.05.19c.53,1.77,1.07,3.54,1.64,5.29.07.22.14.45.22.67q.77,2.39,1.59,4.74l.44,1.26.26.72c.06.18.13.37.19.56.34.94.69,1.87,1,2.81.21.57.43,1.14.65,1.71l.48,1.26c.3.78.61,1.55.92,2.32s.51,1.28.77,1.91l.63,1.53.77,1.8c.3.71.6,1.42.91,2.12s.53,1.19.8,1.78l.58,1.29c.36.78.71,1.56,1.08,2.34s.63,1.34.95,2l.39.81c.41.85.82,1.7,1.24,2.55l1.11,2.18.17.33.07.12c.45.9.91,1.79,1.38,2.68s.95,1.76,1.43,2.64l1.43,2.62c.5.88,1,1.75,1.52,2.63s1,1.72,1.49,2.57,1.06,1.75,1.59,2.62,1,1.69,1.55,2.52,1.12,1.75,1.68,2.62,1,1.65,1.6,2.46,1.18,1.75,1.77,2.62,1.09,1.61,1.64,2.4,1.25,1.75,1.88,2.62,1.11,1.56,1.68,2.33,1.32,1.76,2,2.63,1.13,1.51,1.71,2.26,1.4,1.76,2.11,2.65l1.72,2.16.83,1,.22.26c.39.48.8.95,1.19,1.43l1.73,2.05c.2.24.41.47.61.7s.55.62.82.93l1,1.14.57.65c.09.1.18.21.28.31l.82.93.39.43,1.72,1.85.12.13,1.13,1.22c.3.31.58.63.88,1l.19.19.75.78a10.73,10.73,0,0,0,.79.86l2.65,2.66h0L81,428.17a14.53,14.53,0,0,0,1.33,1.16l.53.48c.47.45,1,.89,1.43,1.33l1.31,1.21.43.4c.46.42.93.82,1.39,1.23l1.15,1,.3.26,1.13,1c.23.21.46.42.7.62.09.07,8-7.62,17.45-16.91a12.26,12.26,0,0,0,1-.89l6.59-6.6c12.36-12.14,24.64-24.27,24.64-24.27a13.63,13.63,0,0,0,1.65-2l8.54-8.53a10.72,10.72,0,0,0,0-15.15L124,335.93a10.72,10.72,0,0,0-15.15,0L85,359.78a198.37,198.37,0,0,1-17-31.56c-.1-.22-.19-.44-.28-.67-.38-.88-.74-1.77-1.1-2.66A198.56,198.56,0,0,1,54.41,280H89.29A10.72,10.72,0,0,0,100,269.29V231.71A10.72,10.72,0,0,0,89.29,221H54.4a199.3,199.3,0,0,1,12.07-44.61l.28-.67q.54-1.33,1.11-2.67a197.83,197.83,0,0,1,22.49-39.48l24,24a10.72,10.72,0,0,0,15.15,0L156.07,131a10.72,10.72,0,0,0,0-15.15L131.83,91.61A199.28,199.28,0,0,1,172.78,68l.66-.28c.89-.38,1.78-.74,2.68-1.11a198.67,198.67,0,0,1,43.88-12V87.29A10.72,10.72,0,0,0,230.71,98h37.58A10.72,10.72,0,0,0,279,87.29v-33a199.19,199.19,0,0,1,45.61,12.22l.67.28,2.67,1.1A198.47,198.47,0,0,1,368,90.77l-25.08,25.08a10.72,10.72,0,0,0,0,15.15l26.57,26.57a10.72,10.72,0,0,0,15.15,0l25.16-25.16A199,199,0,0,1,433,172.78c.1.22.19.44.28.67.38.88.74,1.77,1.1,2.66A198.56,198.56,0,0,1,446.59,221H412.71A10.72,10.72,0,0,0,402,231.71v37.58A10.72,10.72,0,0,0,412.71,280H446.6a198.11,198.11,0,0,1-29.33,78.05l-22.12-22.12a10.72,10.72,0,0,0-15.15,0L353.43,362.5a10.72,10.72,0,0,0,0,15.15l6.65,6.65a13.94,13.94,0,0,0,2,2.49s14.83,14.6,28.33,27.8l4.48,4.48a10.43,10.43,0,0,0,1,.88c8.86,8.64,16,15.55,16.13,15.45l1.14-1,.25-.22.7-.62.94-.83.43-.39,1.85-1.72h0l1.32-1.23,1-.9.19-.19.78-.75a10.73,10.73,0,0,0,.86-.79l2.66-2.65h0l4.07-4.07a14.53,14.53,0,0,0,1.16-1.33l.57-.62,1.16-1.25c.43-.47.87-.93,1.29-1.4.14-.14.27-.28.4-.43.46-.51.9-1,1.36-1.54l.76-.86.39-.44,1-1.13c.21-.23.42-.46.62-.7.45-.52.88-1.05,1.32-1.57l.17-.21.23-.28,1-1.17c.15-.17.3-.34.44-.52l.84-1c.59-.72,1.15-1.45,1.73-2.18l1-1.27,0-.07c.34-.43.7-.87,1-1.31.58-.75,1.15-1.51,1.72-2.27s1.33-1.75,2-2.63,1.13-1.57,1.7-2.36,1.25-1.73,1.86-2.6,1.11-1.63,1.67-2.45,1.18-1.72,1.76-2.59,1.08-1.67,1.62-2.51,1.12-1.72,1.66-2.59,1-1.71,1.57-2.57,1.06-1.72,1.58-2.59,1-1.75,1.52-2.62,1-1.73,1.49-2.6,1-1.79,1.46-2.69l.06-.1.05-.09,1.3-2.39,1.31-2.56.27-.51c.38-.76.77-1.51,1.14-2.26s.76-1.56,1.14-2.34l.48-1c.32-.68.66-1.36,1-2.05l1-2.11.69-1.53c.26-.59.54-1.19.8-1.78l.8-1.88c.3-.7.6-1.4.89-2.1.21-.5.42-1,.62-1.5l.66-1.64c.36-.89.71-1.78,1.06-2.68.15-.4.3-.79.46-1.19s.35-1,.53-1.42c.4-1.07.8-2.15,1.19-3.23.05-.16.11-.31.16-.46s.11-.32.17-.49l.41-1.17c.43-1.23.85-2.47,1.26-3.71.09-.27.18-.54.26-.82a1.72,1.72,0,0,0,.07-.21c.08-.22.15-.45.22-.67.43-1.33.85-2.67,1.26-4,.07-.26.15-.51.23-.77l.15-.51a1.8,1.8,0,0,1,.05-.19c.43-1.43.84-2.86,1.24-4.3.06-.24.13-.48.19-.72q.69-2.55,1.34-5.11c.05-.22.11-.44.16-.67q.65-2.6,1.23-5.21c.05-.2.09-.4.13-.6.39-1.77.77-3.55,1.12-5.33,0-.19.07-.37.11-.55q.52-2.71,1-5.44c0-.16.05-.32.08-.48q.47-2.76.88-5.55c0-.14,0-.28.06-.42s0-.09,0-.14a.78.78,0,0,0,0-.14q.39-2.68.72-5.38l0-.26.06-.53c.2-1.73.39-3.46.56-5.2,0-.39.07-.77.1-1.15.14-1.56.28-3.12.39-4.68.05-.63.08-1.26.12-1.89l.09-1.36.06-.85v-.1c0-.56.07-1.13.09-1.7.05-.88.07-1.76.1-2.64,0-.45.05-.89.06-1.33,0-.17,0-.34,0-.5,0-.5,0-1,.05-1.5s0-.77,0-1.15.06-.78.06-1.17v-9.52A12.79,12.79,0,0,0,495.87,243Z" transform="translate(-5 -5)"/></svg>':"restore"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="#fff"><path d="M3 5v9h9V5H3zm8 8H4V6h7v7z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5 5h1V4h7v7h-1v1h2V3H5v2z"/></svg>':"minimize"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="#fff"><path d="M14 8v1H3V8h11z"/></svg>':"maximize"===e?'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="#fff"><path d="M3 3v10h10V3H3zm9 9H4V4h8v8z"/></svg>':"mouse"===e?'<svg width="14" height="18" viewBox="0 0 14 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0.75 0.25V11.5C0.75 14.9518 3.54822 17.75 7 17.75C10.4518 17.75 13.25 14.9518 13.25 11.5V0.25H0.75ZM6.375 1.5H2V5.875H6.375V1.5ZM7.625 1.5V5.875H12V1.5H7.625ZM2 11.5V7.125H12V11.5C12 14.2614 9.76142 16.5 7 16.5C4.23858 16.5 2 14.2614 2 11.5Z" fill="white"/></svg>':"arrow-up"===e?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 383.63 500"><polygon points="232.34 500 232.34 153.63 327.06 248.34 383.63 191.78 191.85 0 191.81 0.04 191.78 0 0 191.78 56.57 248.34 152.34 152.57 152.34 500 232.34 500"/></svg>':"arrow-down"===e?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 383.63 500"><polygon points="151.28 0 151.28 346.37 56.57 251.66 0 308.22 191.78 500 191.81 499.96 191.85 500 383.63 308.22 327.06 251.66 231.28 347.43 231.28 0 151.28 0"/></svg>':"arrow-left"===e?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 383.63"><polygon points="500 151.28 153.63 151.28 248.34 56.57 191.78 0 0 191.78 0.04 191.81 0 191.85 191.78 383.63 248.34 327.06 152.57 231.28 500 231.28 500 151.28"/></svg>':"arrow-right"===e?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 383.63"><polygon points="0 232.34 346.37 232.34 251.66 327.06 308.22 383.63 500 191.85 499.96 191.81 500 191.78 308.22 0 251.66 56.57 347.43 152.34 0 152.34 0 232.34"/></svg>':"":"";attributeChangedCallback(e,t,i){"circle"===e?this.circle=i:"type"===e?this.type=i:"widecircle"===e?this.widecircle=i:"fill_stroke"===e&&(this.fill_stroke=i)}}s("icon-element",dn);class cn extends HTMLElement{static get observedAttributes(){return["key","translate"]}O={};H="";get key(){return this.H}set key(e){this.H!==e&&(this.H=e,this.setAttribute("key",e),this.$())}U=!0;get translate(){return this.U}set translate(e){const t=ae(e);this.U!==t&&(this.U=t,this.$())}constructor(){super(),i(this,a('<div id="text-container"><slot></slot></div>',':host{display:inline}:host([key=""]){display:none}'))}$=()=>{this.innerHTML="";const e=this.H||this.getAttribute("key");this.appendChild(n({tag:"span",properties:{textContent:this.U?xe(e):e}}))};W=()=>{this.K(),this.O.languagechange=()=>{window.removeEventListener("languagechange",this.$),delete this.O.languagechange},window.addEventListener("languagechange",this.$)};K=()=>{Object.keys(this.O).forEach((e=>{try{this.O[`${e}`]()}catch(e){}delete this.O[`${e}`]}))};attributeChangedCallback(e,t,i){"key"===e&&t!==i?this.key=i:"translate"===e&&t!==i&&(this.translate=i)}connectedCallback(){this.W(),this.$()}disconnectedCallback(){this.K()}}s("text-element",cn);const hn=["down","up"],un=["left","right"],mn=e=>{let t=e;if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}return Array.isArray(t)?t.reduce(((e,t)=>{let i=t;return"string"==typeof i&&(i={value:i,label:i,id:i}),i&&e.push(i),e}),[]):[]};class pn extends HTMLElement{static get observedAttributes(){return["alignment","closeonclick","direction","directiondownpaddingem","directionuppaddingem","flyout","flyoutdirection","fullwidth","minWidth","minwidth","options","value"]}ondropdownclick=null;ondropdownvisibility=null;docClick=()=>{};boundingParent;boundingParentIgnoreOverflow=!1;optionClicked=!1;q=hn[0];Z=un[0];get alignment(){return this.Z}set alignment(e){const t=le(e,un,this.Z);t!==this.Z&&(this.Z=t,this.Y().setAttribute("data-align",t))}X=!0;get closeOnClick(){return this.X}set closeOnClick(e){const t=ae(e);this.X=t}J=hn[0];get direction(){return this.J}set direction(e){const t=le(e,hn,this.J);t!==this.J&&(this.J=t,this.ee(t))}te="-2.25";get directionDownPaddingEm(){return this.te}set directionDownPaddingEm(e){e!==this.te&&(this.te=e,this.shadowRoot.getElementById("direction-down-padding").textContent=`.drop-down-container[data-direction="down"][data-flyout="true"] .drop-down-container-inner #drop-down-options-container{top:${e}em;}`)}ie="2.25";get directionUpPaddingEm(){return this.ie}set directionUpPaddingEm(e){e!==this.ie&&(this.ie=e,this.shadowRoot.getElementById("direction-up-padding").textContent=`.drop-down-container[data-direction="up"] .drop-down-container-inner #drop-down-options-container{bottom:${e}em;}`)}ne=!1;get fullwidth(){return this.ne}set fullwidth(e){const t=$(e);t!==this.ne&&(this.ne=t,this.Y().setAttribute("data-fullwidth",t.toString()))}ae="";get minWidth(){return this.ae}set minWidth(e){this.ae=e}se=[];get options(){return this.se}set options(e){const t=mn(e);Ve(this.se,t)||(this.se=t,this.oe())}re=!1;get flyout(){return this.re}set flyout(e){const t=$(e);t!==this.re&&(this.re=t,this.setAttribute("flyout",t.toString()),this.Y().setAttribute("data-flyout",t.toString()))}le=un[0];get flyoutDirection(){return this.le}set flyoutDirection(e){const t=le(e,un,this.le);t!==this.le&&(this.le=t,this.Y().setAttribute("data-flyout-direction",t),this.oe())}de="";get value(){return this.de}set value(e){e!==this.de&&(this.de=e,this.oe(),this.ce())}he=!1;get visible(){return this.he}set visible(e){const t=$(e);if(t!==this.he){if(this.he=t,this.Y().setAttribute("data-visible",t.toString()),"function"==typeof this.docClick&&this.docClick(),t){const e=e=>{an(this,e)&&!this.closeOnClick||(this.visible=!1)};window.addEventListener("click",e),this.docClick=()=>window.removeEventListener("click",e),this.ue(),this.updateAlignment(),this.style.width="100%",this.style.minWidth=this.minWidth,this.style.removeProperty("overflow")}else this.style.width="0%",this.style.overflow="hidden";"function"==typeof this.ondropdownvisibility&&this.ondropdownvisibility(new CustomEvent("dropdownvisibility",{bubbles:!0,composed:!0,detail:t})),this.dispatchEvent(new CustomEvent("dropdownvisibility",{bubbles:!0,composed:!0,detail:t}))}}constructor(){super(),i(this,a('<div class="drop-down-container" data-align="left" data-fullwidth="false" data-flyout-direction="left" data-flyout="false" data-visible="false" data-direction="down"><div class="drop-down-container-inner"><div id="drop-down-options-container"><slot name="drop-down-option"></slot></div></div><style id="direction-down-padding">.drop-down-container[data-direction="down"][data-flyout="true"] .drop-down-container-inner #drop-down-options-container {\n            top: -2.25em;\n        }</style><style id="direction-up-padding">.drop-down-container[data-direction="up"] .drop-down-container-inner #drop-down-options-container {\n            bottom: 2.25em;\n        }</style></div>',":host{display:block;height:0;position:relative;width:0}:host([flyout=true]){bottom:0;left:0;position:absolute}.drop-down-container{pointer-events:none;position:absolute;width:100%;z-index:999999}.drop-down-container .drop-down-container-inner{height:100%;position:relative;width:100%}.drop-down-container #drop-down-options-container{background:#424242;border-radius:4px;box-shadow:0 10px 30px -10px #000;opacity:0;position:absolute;transition:opacity .2s}.drop-down-container .drop-down-option{align-items:center;background-color:initial;cursor:pointer;display:flex;flex-wrap:nowrap;gap:.5em;line-height:125%;padding:.75em;position:relative;transition:background-color .2s,opacity .3s,color .2s;white-space:nowrap}.drop-down-container .drop-down-option:first-of-type{border-radius:4px 4px 0 0}.drop-down-container .drop-down-option:last-of-type{border-radius:0 0 4px 4px}.drop-down-container .drop-down-option:last-of-type:first-of-type,.drop-down-container .drop-down-option:only-child{border-radius:4px}.drop-down-container .drop-down-option:hover{background-color:#5c5c5c;color:#fff}.drop-down-container .drop-down-option[data-active=true],.drop-down-container .drop-down-option[data-active=true]:hover{background-color:#76b900;color:#fff}.drop-down-container .drop-down-option .drop-down-option-text{flex-grow:1;white-space:nowrap}.drop-down-container .drop-down-option .drop-down-option-value-text{margin-left:1em;opacity:.5;white-space:nowrap}.drop-down-container .drop-down-option icon-element+.drop-down-option-text{display:block}.drop-down-container[data-direction=up]{top:0}.drop-down-container[data-direction=down],.drop-down-container[data-direction=up] #drop-down-options-container{bottom:0}.drop-down-container[data-direction=down] #drop-down-options-container{top:0}.drop-down-container[data-fullwidth=true] #drop-down-options-container{min-width:100%}.drop-down-container[data-align=left],.drop-down-container[data-align=left] #drop-down-options-container{left:0}.drop-down-container[data-align=left][data-flyout=true] #drop-down-options-container{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.drop-down-container[data-align=right],.drop-down-container[data-align=right] #drop-down-options-container{right:0}.drop-down-container[data-align=right][data-flyout=true] #drop-down-options-container{-webkit-transform:translateX(100%);transform:translateX(100%)}.drop-down-container[data-visible=true]{pointer-events:all}.drop-down-container[data-visible=true] #drop-down-options-container{opacity:1}"))}Y(){return this.shadowRoot.querySelector(".drop-down-container")}me(){return this.shadowRoot.getElementById("drop-down-options-container")}pe(){return Array.from(this.shadowRoot.querySelectorAll(".drop-down-option")).concat(Array.from(this.querySelectorAll('[slot="drop-down-option"]')))}oe(){const e=e=>void 0===e?"":e;this.options?De({container:this.me(),array:this.options,getElementsFn:()=>this.pe(),valueKeyFn:e=>e.id,elementValueKeyFn:e=>e.optionId,updateFn:(t,i,a)=>{const s=t.querySelector("icon-element"),o=t.querySelector(".drop-down-option-text"),r=e(i.label),l=t.querySelector("drop-down"),d=t.querySelector(".drop-down-option-value-text");if(t.value=i.value,t.onclick=e=>this.ge(e,i,a),t.setAttribute("data-active",(i.value===this.value).toString()),i.icon||i.options?i.icon&&!s&&t.insertBefore(n({tag:"icon-element",properties:{type:i.icon}}),o):s&&s.parentElement.removeChild(s),o&&(o.key!==r&&(o.key=r),o.translate!==i.translate&&o.setAttribute("translate",(void 0===i.translate||!!i.translate).toString())),i.options&&i.options.length||!l){if(i.options&&i.options.length&&!l){if(i.displayLabelValue){const e=i.options.find((e=>e.value===i.value)),a=e?e.label:i.value;t.appendChild(n({tag:"span",attributes:{class:"drop-down-option-value-text"},properties:{key:a}}))}const e=n({tag:"drop-down",properties:{options:i.options,flyout:!0,flyoutDirection:this.flyoutDirection,value:i.value}});e.ondropdownclick=e=>{e.preventDefault(),e.stopPropagation(),this.be(i,a,e.detail.value)},t.appendChild(e)}else if(i.options&&i.options.length&&l){if(i.displayLabelValue&&d){const e=i.options.find((e=>e.value===i.value)),t=e?e.label:i.value;d.key=t.toString()}l.options=i.options,l.flyoutDirection=this.flyoutDirection,l.value=i.value}}else l.parentElement.removeChild(l),d&&d.parentElement.removeChild(d)},createFn:(t,i)=>{const a=[];if(t.icon&&a.push(n({tag:"icon-element",attributes:{type:t.icon,style:`font-size:${t.iconsize}`}})),a.push(n({tag:"text-element",attributes:{class:"drop-down-option-text",key:e(t.label),translate:(!!t.translate).toString()}})),t.options&&t.options.length){if(t.displayLabelValue){const e=t.options.find((e=>e.value===t.value)),i=e?e.label:t.value;a.push(n({tag:"span",attributes:{class:"drop-down-option-value-text"},properties:{key:i}}))}a.push(n({tag:"icon-element",attributes:{class:"drop-down-option-options-arrow",type:"chevron-right"}}));const e=n({tag:"drop-down",properties:{options:t.options,flyout:!0,flyoutDirection:this.flyoutDirection,value:t.value}});e.ondropdownclick=e=>{e.preventDefault(),e.stopPropagation(),this.be(t,i,e.detail.value)},a.push(e)}const s=n({tag:"div",attributes:{class:"drop-down-option","data-active":(t.value===this.value).toString()},properties:{value:t.value,optionId:t.id},children:a});return s.onclick=e=>this.ge(e,t,i),s}}):this.me().innerHTML=""}be(e,t,i){this.closeOnClick&&(this.visible=!1),e.onclick&&this.dispatchEvent(new CustomEvent(e.onclick,{bubbles:!0,composed:!0,detail:{value:i,option:e,index:t}}))}ge(e,t,i){e.preventDefault(),e.stopPropagation(),this.optionClicked=!0;const n=this.pe();if(n.forEach((e=>{const t=e.querySelector("drop-down");t&&(t.visible=!1)})),t.options&&t.options.length){const e=n[Number(i)];if(e){const t=e.querySelector("drop-down");if(t)return t.visible=!0,void(this.optionClicked=!1)}}this.closeOnClick&&(this.visible=!1),t.onclick&&this.dispatchEvent(new CustomEvent(t.onclick,{bubbles:!0,composed:!0,detail:{value:t.value,label:t.label,index:i}})),"function"==typeof this.ondropdownclick&&this.ondropdownclick(new CustomEvent("dropdownclick",{bubbles:!0,composed:!0,detail:{value:t.value,label:t.label,index:i}})),this.dispatchEvent(new CustomEvent("dropdownclick",{bubbles:!0,composed:!0,detail:{value:t.value,label:t.label,index:i}})),this.optionClicked=!1}ue(){this.boundingParent=function(e,t=!0){const i=e.boundingParentIgnoreOverflow;let n=getComputedStyle(e);const a=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=e=>e?e.assignedSlot||e.parentElement||e.getRootNode().host:null;let o,r=s(e);if("fixed"===n.position||e.parentElement===window)return document.body;for(;!o&&r&&r!==document.body;)if(n=getComputedStyle(r),"absolute"===n.position||"static"===n.position)r=s(r);else{if(!i&&a.test(n.overflow+n.overflowY+n.overflowX))return o=!0,r;r=s(r)}return document.body}(this)}ce=()=>{const e=this.value;this.pe().forEach((t=>{const i=t.value===e||t.getAttribute("value")===e;try{t.setAttribute("data-active",i.toString())}catch(e){}i&&t.scrollIntoView()}))};ee=e=>{this.q=e,this.Y().setAttribute("data-direction",e)};updateAlignment(){this.boundingParent||this.ue();const e=this.flyout;e&&(this.directionUpPaddingEm="0"),this.alignment=e?this.flyoutDirection:"left",this.ee(this.direction);const t=this.me();t.style.removeProperty("max-height"),t.style.removeProperty("overflow");const i=this.boundingParent.getBoundingClientRect();let n=t.getBoundingClientRect();const a=n.x-i.x+n.width>i.width,s=n.x<0;if(e||(a?this.alignment="right":s&&(this.alignment="left")),n.y+n.height>i.height){const e=n.y-i.y,a=i.height-e;this.ee(e>a?"up":"down"),n=t.getBoundingClientRect(),n.y<i.y?(t.style.maxHeight=`${n.y-(i.y+10)+n.height}px`,t.style.overflow="auto"):"down"===this.q&&a<n.height?(t.style.maxHeight=`${a}px`,t.style.overflow="auto"):"up"===this.q&&e<n.height&&(t.style.maxHeight=`${e}px`,t.style.overflow="auto")}else n.y<i.y&&(t.style.maxHeight=`${n.y-(i.y+10)+n.height}px`,t.style.overflow="auto")}attributeChangedCallback(e,t,i){"alignment"===e?this.alignment=i:"closeonclick"===e?this.closeOnClick=i:"direction"===e?this.direction=i:"directiondownpaddingem"===e?this.directionDownPaddingEm=i:"directionuppaddingem"===e?this.directionUpPaddingEm=i:"flyout"===e?this.flyout=i:"flyoutdirection"===e?this.flyoutDirection=i:"fullwidth"===e?this.fullwidth=i:"minwidth"===e?this.minWidth=i:"options"===e?this.options=i:"value"===e?this.value=i:"visible"===e&&(this.visible=i)}connectedCallback(){this.directionDownPaddingEm=this.getAttribute("directiondownpaddingem")||this.te,this.directionUpPaddingEm=this.getAttribute("directionuppaddingem")||this.ie;this.shadowRoot.querySelector('slot[name="drop-down-option"]').onchange=this.ce}disconnectedCallback(){"function"==typeof this.docClick&&this.docClick(),this.boundingParent=null}}s("drop-down",pn);const gn=[1,2,3,4,5,6],bn=[0,1,2,3,4],vn=["primary","secondary","danger","link","circle","outline","active-underline"],fn=["center","left","right"];class yn extends HTMLElement{static get observedAttributes(){return["active","alignment","customstyles","customstylesdropdown","dim","direction","dropdownsize","flyoutdirection","overflowbreakout","fullwidth","hoversecondary","icon","iconcircle","iconsize","nodropdownicon","size","slim","text","textwrap","type","value"]}ve=!1;get active(){return this.ve}set active(e){const t=$(e);t!==this.ve&&(this.ve=t,this.fe().setAttribute("data-active",t.toString()))}Z=fn[0];get alignment(){return this.Z}set alignment(e){const t=le(e,fn,this.Z);t!==this.Z&&(this.Z=t,this.fe().setAttribute("data-alignment",t))}ye={};get customStyles(){return this.ye}set customStyles(e){let t=e;if("string"==typeof e)try{t=JSON.parse(e)}catch(e){}if(t===this.ye)return;this.ye=t;const i=this.fe();i&&(i.setAttribute("style",""),Object.keys(t||{}).forEach((e=>{i.style[`${e}`]=t[`${e}`]})))}xe={};get customStylesDropdown(){return this.xe}set customStylesDropdown(e){let t=e;if("string"==typeof e)try{t=JSON.parse(e)}catch(e){}if(t===this.xe)return;this.xe=t;const i=this.we();i&&(i.setAttribute("style",""),Object.keys(t||{}).forEach((e=>{i.style[`${e}`]=t[`${e}`]})))}ke=1;get dim(){return this.ke}set dim(e){const t=le(te(e,1),bn,bn[1]);t!==this.ke&&(this.ke=t,this.fe().setAttribute("data-dim",t.toString()))}J="down";get direction(){return this.J}set direction(e){const t=le(e,hn,this.J);t!==this.J&&(this.J=t,this.we().direction=this.J)}te="-2.25";get directionDownPaddingEm(){return this.te}set directionDownPaddingEm(e){e!==this.te&&(this.te=e,this.we().directionDownPaddingEm=e)}ie="2.25";get directionUpPaddingEm(){return this.ie}set directionUpPaddingEm(e){e!==this.ie&&(this.ie=e,this.we().directionUpPaddingEm=e)}ze="";get dropdownsize(){return this.ze}set dropdownsize(e){e!==this.ze&&(this.ze=e,this.we().style.fontSize=e)}Se=!1;get overflowbreakout(){return this.Se}set overflowbreakout(e){const t=$(e);t!==this.Se&&(this.Se=t,this.fe().setAttribute("data-dropdown-overflow-breakout",t.toString()),this.we().boundingParentIgnoreOverflow=t)}le="left";get flyoutDirection(){return this.le}set flyoutDirection(e){const t=le(e,un,this.le);t!==this.le&&(this.le=t,this.we().flyoutDirection=t)}ne=!1;get fullwidth(){return this.ne}set fullwidth(e){const t=$(e);t!==this.ne&&(this.ne=t,this.fe().setAttribute("data-fullwidth",t.toString()),this.we().fullwidth=t)}Me=!1;get hoversecondary(){return this.Me}set hoversecondary(e){const t=$(e);t!==this.Me&&(this.Me=t,this.fe().setAttribute("data-hover-secondary",this.Me.toString()))}Ce="";get icon(){return this.Ce}set icon(e){if(e===this.Ce)return;this.Ce=e,Array.from(this.querySelectorAll('[slot="icon"]')).forEach((e=>this.removeChild(e)));const t=n({tag:"icon-element",attributes:{slot:"icon",type:e,circle:this.iconCircle.toString()}});t.style.fontSize=this.iconsize,this.appendChild(t)}je=!1;get iconCircle(){return this.je}set iconCircle(e){const t=$(e);if(t===this.je)return;this.je=t;const i=this.querySelector('[slot="icon"]');i&&i.setAttribute("circle",t.toString())}Le="";get iconsize(){return this.Le}set iconsize(e){if(e===this.Le)return;this.Le=e;const t=this.querySelector('[slot="icon"]');t&&(t.style.fontSize=e)}Ee=!1;get nodropdownicon(){return this.Ee}set nodropdownicon(e){const t=$(e);t!==this.Ee&&(this.Ee=t,this.fe().setAttribute("data-hide-drop-down-icon",t.toString()))}se=[];get options(){return this.se}set options(e){const t=mn(e);Ve(t,this.se)||(this.se=t,this.fe().setAttribute("data-option-count",t.length.toString()),this.we().options=t)}_e=gn[2];get size(){return this._e}set size(e){const t=le(te(e,gn[2]),gn,this._e);t!==this._e&&(this._e=t,this.fe().setAttribute("data-size",t.toString()))}Ie=!1;get slim(){return this.Ie}set slim(e){const t=$(e);t!==this.Ie&&(this.Ie=t,this.fe().setAttribute("data-slim",t.toString()))}Te="";get text(){return this.Te}set text(e){e!==this.Te&&(this.Te=e,Array.from(this.querySelectorAll('[slot="text"]')).forEach((e=>this.removeChild(e))),this.appendChild(n({tag:"text-element",attributes:{slot:"text",key:e}})))}Pe=!1;get textwrap(){return this.Pe}set textwrap(e){const t=ae(e);t!==this.Pe&&(this.Pe=t,this.fe().setAttribute("data-text-wrap",t.toString()))}T=vn[0];get type(){return this.T}set type(e){const t=le(e,vn,vn[0]);t!==this.T&&(this.T=t,this.fe().setAttribute("data-type",t))}de="";get value(){return this.de}set value(e){e!==this.de&&(this.de=e,this.we().value=e)}constructor(){super(),i(this,a('<button class="button-element" type="button" data-active="false" data-alignment="center" data-dim="1" data-dropdown-overflow-breakout="false" data-fullwidth="false" data-hover-secondary="false" data-hide-drop-down-icon="false" data-option-count="0" data-size="3" data-slim="false" data-text-wrap="false" data-type="primary"><div class="button-element-content"><div id="button-text-icon"><slot name="icon"></slot><slot name="text"></slot></div><div class="drop-down-arrow"><icon-element type="chevron-down"></icon-element></div><div id="drop-down-container"><drop-down id="drop-down"></drop-down></div></div><div class="active-indicator"></div></button>',':host(button-element[fullwidth=true]){width:100%}:host(button-element){align-items:center;display:flex}button{background-color:#76b900;border:none;border-radius:2px;box-shadow:none;color:#fff;cursor:pointer;display:block;font-family:inherit;font-size:inherit;font-weight:400;line-height:100%;outline:none!important;padding:.75em 1em;position:relative;text-align:left;transition:background-color .2s,color .2s}button:after{border-radius:2px;box-shadow:inset 0 0 .01em .1em #a3ff05;content:"";height:100%;left:0;opacity:.25;position:absolute;top:0;transition:opacity .2s,color .2s;width:100%}button:active,button:hover{background-color:#5d9300;color:#fff}button:active:after,button:hover:after{opacity:.2}button #button-text-icon,button .button-element-content{align-items:center;display:flex}button #button-text-icon{gap:.62em;transition:opacity .2s}button .button-element-content{gap:.38em;position:relative}button[data-type=active-underline][data-dim="0"],button[data-type=active-underline][data-dim="0"][data-option-count]:not([data-option-count="0"]),button[data-type=active-underline][data-dim="0"][data-option-count]:not([data-option-count="0"]) #button-text-icon,button[data-type=link][data-dim="0"],button[data-type=link][data-dim="0"][data-option-count]:not([data-option-count="0"]),button[data-type=link][data-dim="0"][data-option-count]:not([data-option-count="0"]) #button-text-icon{opacity:1}button[data-type=active-underline][data-dim="1"],button[data-type=link][data-dim="1"]{opacity:.75}button[data-type=active-underline][data-dim="1"][data-option-count]:not([data-option-count="0"]),button[data-type=link][data-dim="1"][data-option-count]:not([data-option-count="0"]){opacity:1}button[data-type=active-underline][data-dim="1"][data-option-count]:not([data-option-count="0"]) #button-text-icon,button[data-type=link][data-dim="1"][data-option-count]:not([data-option-count="0"]) #button-text-icon{opacity:.75}button[data-type=active-underline][data-dim="1"][data-option-count]:not([data-option-count="0"]).active #button-text-icon,button[data-type=active-underline][data-dim="1"][data-option-count]:not([data-option-count="0"]):active #button-text-icon,button[data-type=active-underline][data-dim="1"][data-option-count]:not([data-option-count="0"]):hover #button-text-icon,button[data-type=link][data-dim="1"][data-option-count]:not([data-option-count="0"]).active #button-text-icon,button[data-type=link][data-dim="1"][data-option-count]:not([data-option-count="0"]):active #button-text-icon,button[data-type=link][data-dim="1"][data-option-count]:not([data-option-count="0"]):hover #button-text-icon{opacity:1}button[data-type=active-underline][data-dim="2"],button[data-type=link][data-dim="2"]{opacity:.56}button[data-type=active-underline][data-dim="2"][data-option-count]:not([data-option-count="0"]),button[data-type=link][data-dim="2"][data-option-count]:not([data-option-count="0"]){opacity:1}button[data-type=active-underline][data-dim="2"][data-option-count]:not([data-option-count="0"]) #button-text-icon,button[data-type=link][data-dim="2"][data-option-count]:not([data-option-count="0"]) #button-text-icon{opacity:.56}button[data-type=active-underline][data-dim="2"][data-option-count]:not([data-option-count="0"]).active #button-text-icon,button[data-type=active-underline][data-dim="2"][data-option-count]:not([data-option-count="0"]):active #button-text-icon,button[data-type=active-underline][data-dim="2"][data-option-count]:not([data-option-count="0"]):hover #button-text-icon,button[data-type=link][data-dim="2"][data-option-count]:not([data-option-count="0"]).active #button-text-icon,button[data-type=link][data-dim="2"][data-option-count]:not([data-option-count="0"]):active #button-text-icon,button[data-type=link][data-dim="2"][data-option-count]:not([data-option-count="0"]):hover #button-text-icon{opacity:1}button[data-type=active-underline][data-dim="3"],button[data-type=link][data-dim="3"]{opacity:.28}button[data-type=active-underline][data-dim="3"][data-option-count]:not([data-option-count="0"]),button[data-type=link][data-dim="3"][data-option-count]:not([data-option-count="0"]){opacity:1}button[data-type=active-underline][data-dim="3"][data-option-count]:not([data-option-count="0"]) #button-text-icon,button[data-type=link][data-dim="3"][data-option-count]:not([data-option-count="0"]) #button-text-icon{opacity:.28}button[data-type=active-underline][data-dim="3"][data-option-count]:not([data-option-count="0"]).active #button-text-icon,button[data-type=active-underline][data-dim="3"][data-option-count]:not([data-option-count="0"]):active #button-text-icon,button[data-type=active-underline][data-dim="3"][data-option-count]:not([data-option-count="0"]):hover #button-text-icon,button[data-type=link][data-dim="3"][data-option-count]:not([data-option-count="0"]).active #button-text-icon,button[data-type=link][data-dim="3"][data-option-count]:not([data-option-count="0"]):active #button-text-icon,button[data-type=link][data-dim="3"][data-option-count]:not([data-option-count="0"]):hover #button-text-icon{opacity:1}button[data-type=active-underline][data-dim="4"],button[data-type=link][data-dim="4"]{opacity:0}button[data-type=active-underline][data-dim="4"][data-option-count]:not([data-option-count="0"]),button[data-type=link][data-dim="4"][data-option-count]:not([data-option-count="0"]){opacity:1}button[data-type=active-underline][data-dim="4"][data-option-count]:not([data-option-count="0"]) #button-text-icon,button[data-type=link][data-dim="4"][data-option-count]:not([data-option-count="0"]) #button-text-icon{opacity:0}button[data-type=active-underline][data-dim="4"][data-option-count]:not([data-option-count="0"]).active #button-text-icon,button[data-type=active-underline][data-dim="4"][data-option-count]:not([data-option-count="0"]):active #button-text-icon,button[data-type=active-underline][data-dim="4"][data-option-count]:not([data-option-count="0"]):hover #button-text-icon,button[data-type=link][data-dim="4"][data-option-count]:not([data-option-count="0"]).active #button-text-icon,button[data-type=link][data-dim="4"][data-option-count]:not([data-option-count="0"]):active #button-text-icon,button[data-type=link][data-dim="4"][data-option-count]:not([data-option-count="0"]):hover #button-text-icon{opacity:1}button[data-type=secondary]{background-color:#757575;color:#fafafa}button[data-type=secondary]:after{box-shadow:inset 0 0 .01em .1em #9f9f9f}button[data-type=secondary]:active,button[data-type=secondary]:hover{background-color:#858585;box-shadow:inset 0 0 .01em .1em #9f9f9f;color:#fff}button[data-type=link][data-hover-secondary=true]:active,button[data-type=link][data-hover-secondary=true]:hover,button[data-type=outline][data-hover-secondary=true]:active,button[data-type=outline][data-hover-secondary=true]:hover{background-color:hsla(0,0%,46%,.5);color:#fff}button[data-type=danger]{background-color:#a10005;color:#ffecec}button[data-type=danger]:after{box-shadow:inset 0 0 .01em .1em #ff0d15}button[data-type=danger]:active,button[data-type=danger]:hover{background-color:#d90007;box-shadow:inset 0 0 .01em .1em #ff0d15;color:#fff}button[data-type=outline]{background-color:initial;color:#eee}button[data-type=outline]:after{box-shadow:inset 0 0 0 1px;color:#616161;opacity:1}button[data-type=outline]:active,button[data-type=outline]:hover{background-color:initial;color:#fff}button[data-type=outline]:active:after,button[data-type=outline]:hover:after{box-shadow:inset 0 0 0 1px;color:#828282;opacity:1}button[data-type=active-underline],button[data-type=active-underline]:active,button[data-type=active-underline]:hover,button[data-type=link],button[data-type=link]:active,button[data-type=link]:hover{background-color:initial;box-shadow:none;padding:.5em;text-transform:unset;transition:opacity .2s}button[data-type=active-underline]:active:after,button[data-type=active-underline]:after,button[data-type=active-underline]:hover:after,button[data-type=link]:active:after,button[data-type=link]:after,button[data-type=link]:hover:after{display:none}button[data-type=active-underline]:active,button[data-type=active-underline]:active:active,button[data-type=active-underline]:active:hover,button[data-type=active-underline]:hover,button[data-type=active-underline]:hover:active,button[data-type=active-underline]:hover:hover,button[data-type=link]:active,button[data-type=link]:active:active,button[data-type=link]:active:hover,button[data-type=link]:hover,button[data-type=link]:hover:active,button[data-type=link]:hover:hover{opacity:1}button[data-type=active-underline][data-active=true],button[data-type=active-underline][data-active=true]:active,button[data-type=active-underline][data-active=true]:hover{color:#76b900;opacity:1}button[data-type=active-underline]{border-radius:0;padding:.875em .5em;transition:opacity .2s,color .2s,box-shadow .2s}button[data-type=active-underline][data-active=false]:active .active-indicator,button[data-type=active-underline][data-active=false]:hover .active-indicator,button[data-type=active-underline][data-active=true] .active-indicator{color:currentColor}button[data-type=active-underline][data-active=true] .active-indicator{opacity:1}button[data-type=active-underline] .active-indicator{color:transparent;display:block}button[data-type=circle],button[data-type=circle]:active,button[data-type=circle]:hover{background-color:initial;padding:.5em}button[data-type=circle] #button-text-icon,button[data-type=circle] .button-element-content,button[data-type=circle]:active #button-text-icon,button[data-type=circle]:active .button-element-content,button[data-type=circle]:hover #button-text-icon,button[data-type=circle]:hover .button-element-content{align-items:center;display:flex;justify-content:center}button[data-type=circle]:active:after,button[data-type=circle]:after,button[data-type=circle]:hover:after{border-radius:50%;box-shadow:inset 0 0 0 1px}button[data-size="1"]{font-size:.62em}button[data-size="2"]{font-size:.75em}button[data-size="3"]{font-size:.88em}button[data-size="4"]{font-size:1em}button[data-size="5"]{font-size:1.2em}button[data-size="6"]{font-size:1.5em}button[data-fullwidth=true],button[data-fullwidth=true] button{width:100%}button[data-fullwidth=true] #button-text-icon,button[data-fullwidth=true] .button-element-content,button[data-fullwidth=true] button #button-text-icon,button[data-fullwidth=true] button .button-element-content{align-items:center;display:flex;justify-content:center;width:100%}button[data-fullwidth=true] button[data-alignment=left] #button-text-icon,button[data-fullwidth=true] button[data-alignment=left] .button-element-content,button[data-fullwidth=true][data-alignment=left] #button-text-icon,button[data-fullwidth=true][data-alignment=left] .button-element-content{justify-content:left}button[data-fullwidth=true] button[data-alignment=right] #button-text-icon,button[data-fullwidth=true] button[data-alignment=right] .button-element-content,button[data-fullwidth=true][data-alignment=right] #button-text-icon,button[data-fullwidth=true][data-alignment=right] .button-element-content{justify-content:right}button[data-slim=true],button[data-slim=true]:active,button[data-slim=true]:hover{padding:.25em}button[data-dropdown-overflow-breakout=false] #drop-down-container{bottom:0;left:0;position:absolute}button[data-dropdown-overflow-breakout=true] #drop-down-container{position:fixed;z-index:9999999999999}button[data-text-wrap=false] slot[name=text]{white-space:nowrap}button drop-down{bottom:0;display:none;left:0;position:absolute}button .drop-down-arrow{display:none}button[data-option-count]:not([data-option-count="0"]) .drop-down-arrow,button[data-option-count]:not([data-option-count="0"]) drop-down{display:block}button[data-option-count]:not([data-option-count="0"])[data-hide-drop-down-icon=true] .drop-down-arrow{display:none}button .drop-down-option{align-items:center;background-color:initial;cursor:pointer;display:flex;flex-wrap:nowrap;gap:.75em;line-height:125%;padding:.5em .75em;transition:background-color .2s,opacity .3s,color .2s;white-space:nowrap}button .drop-down-option:first-of-type{border-radius:4px 4px 0 0}button .drop-down-option:last-of-type{border-radius:0 0 4px 4px}button .drop-down-option:only-child{border-radius:4px}button .drop-down-option:hover{background-color:#5c5c5c;color:#fff}button .drop-down-option[data-active=true],button .drop-down-option[data-active=true]:hover{background-color:#76b900;color:#fff}button .drop-down-option .drop-down-option-text{font-size:inherit}.active-indicator{color:transparent;display:none;height:0;opacity:.25;pointer-events:none;position:relative;transition:color .2s,opacity .2s;width:100%}.active-indicator:after{background:currentColor;bottom:-.85em;content:"";display:block;height:.15em;left:0;pointer-events:none;position:absolute;width:100%}'))}we(){return this.shadowRoot.getElementById("drop-down")}fe(){return this.shadowRoot.querySelector(".button-element")}attributeChangedCallback(e,t,i){"active"===e?this.active=i:"alignment"===e?this.alignment=i:"customstyles"===e?this.customStyles=i:"customstylesdropdown"===e?this.customStylesDropdown=i:"dim"===e?this.dim=i:"direction"===e?this.direction=i:"directionDownPaddingEm"===e||"directiondownpaddingem"===e?this.directionDownPaddingEm=i:"directionUpPaddingEm"===e||"directionuppaddingem"===e?this.directionUpPaddingEm=i:"dropdownsize"===e?this.dropdownsize=i:"overflowbreakout"===e?this.overflowbreakout=i:"flyoutdirection"===e?this.flyoutDirection=i:"fullwidth"===e?this.fullwidth=i:"hoversecondary"===e?this.hoversecondary=i:"icon"===e?this.icon=i:"iconcircle"===e||"iconCircle"===e?this.iconCircle=i:"iconsize"===e?this.iconsize=i:"nodropdownicon"===e?this.nodropdownicon=i:"size"===e?this.size=i:"slim"===e?this.slim=i:"text"===e?this.text=i:"textwrap"===e?this.textwrap=i:"type"===e?this.type=i:"value"===e&&(this.value=i)}connectedCallback(){this.size=this.getAttribute("size")||this._e,this.type=this.getAttribute("type")||this.T,this.dim=this.getAttribute("dim")||this.ke,this.overflowbreakout=this.getAttribute("overflowbreakout")||this.Se,this.directionDownPaddingEm=this.getAttribute("directiondownpaddingem")||this.te,this.directionUpPaddingEm=this.getAttribute("directionuppaddingem")||this.ie,this.textwrap=this.getAttribute("textwrap")||this.Pe,this.fe().onclick=()=>{let e=this.we();if(!e)return;const t=e.visible;e=null,t||requestAnimationFrame((()=>{e=this.we(),e&&(this.options&&this.options.length&&(e.visible=!t,e.visible?"up"===e.direction&&(e.style.top="0px"):e.style.removeProperty("top")),e=null)}))}}}s("button-element",yn);class xn extends HTMLElement{constructor(){super(),i(this,a('<div class="default-screen-container"><div class="steps-container"><p class="heading"><span><text-element key="Let\'s Get Started"></text-element></span></p><div class="step"><span class="number"><text-element key="1"></text-element></span><span><text-element key="Click Add Media or drag and drop video/image files into this window to compare them."></text-element></span></div><div class="step"><span class="number"><text-element key="2"></text-element></span><span><text-element key="Adjust the clip offset to align the videos."></text-element></span></div><div class="step"><span class="number"><text-element key="3"></text-element></span><span><text-element key="Add Overlay to annotate your comparison."></text-element></span></div><div class="upload-btn"><button-element id="add-media-button" size="5" fullwidth="true" text="Add media"></button-element></div></div></div>',":host(default-screen){flex-grow:1;height:100%;width:100%}.default-screen-container{color:#eee;flex-direction:column;font-size:1em;height:100%;justify-content:center;padding:2em}.default-screen-container,.default-screen-container .heading,.default-screen-container .step{align-items:center;display:flex}.default-screen-container .heading{font-size:1.25em;margin:0 0 .5em}.default-screen-container .steps-container{display:flex;flex-direction:column}.default-screen-container .step{font-weight:100;margin:.5em 0}.default-screen-container .step .number{align-items:center;border:1px solid #76b900;box-sizing:border-box;display:flex;font-size:1.25em;height:48px;justify-content:center;margin:0 10px 0 0;min-width:48px;width:48px}.default-screen-container .upload-btn{border-top:1px solid #757575;display:flex;margin-top:.5em;padding:1rem 0}"))}connectedCallback(){this.shadowRoot.getElementById("add-media-button").onclick=()=>this.dispatchEvent(new CustomEvent("selectmedia",{bubbles:!0,composed:!0}))}}s("default-screen",xn);const wn=(e,t=100)=>{let i=null;return(...n)=>{null===i&&(i=setTimeout((()=>{e(...n),i=null}),t))}};const kn=(e,t)=>{const i=(e=>`input-element-${e}-container`)(e);return-1===t.indexOf(i)&&t.push(i),t.join(" ")},zn=e=>{if(void 0===e)return null;if(!Number.isNaN(e)&&"string"!=typeof e)return e;const t=parseFloat(e);return Number.isNaN(t)?null:t},Sn=e=>null==e||!1===e,Mn=e=>Array.isArray(e)?e:"string"==typeof e?(e||"").split(" ").map((e=>e.trim())).filter((e=>!!e)):[];class Cn extends HTMLElement{static get observedAttributes(){return["aligncenter","classes","css","disabled","disabledtext","dropdownalign","dropdowndirection","dropdownfullwidth","help","inlineedit","label","liveinput","max","min","nobackground","noinnerborders","noinput","nomargin","nominheight","options","overflowbreakout","prefixclass","prefixicon","prefixiconsize","prefixtext","readonly","slimpadding","smalllabel","step","suffixclass","suffixicon","suffixiconsize","suffixtext","tighticons","trimvalue","type","value"]}oninputvalue=null;oninputblur=null;get Fe(){return"checkboxes-dropdown"===this.type||"toggles-dropdown"===this.type}O={};Ae="";Re=!1;Ge=!1;Be=!1;Ve;Ne="";De="";Oe=!1;get isFocused(){return!!this.Oe||!!this.inlineEdit&&this.editing}He=!1;get aligncenter(){return this.He}set aligncenter(e){const t=$(e);t!==this.He&&(this.He=t,this.Y().setAttribute("data-align-center",this.He.toString()))}Se=!1;get overflowbreakout(){return this.Se}set overflowbreakout(e){const t=$(e);t!==this.Se&&(this.Se=t,this.Y().setAttribute("data-dropdown-overflow-breakout",t.toString()),this.we().boundingParentIgnoreOverflow=t)}$e=[];get classes(){return this.$e}set classes(e){const t=Mn(e);Ve(this.$e,t)||(this.$e=t,this.Y().className=t.join(" "))}Ue="";get css(){return this.css}set css(e){let t="";if(e&&"string"==typeof e){t=(new DOMParser).parseFromString(e,"text/html").body.innerHTML}t!==this.Ue&&(this.Ue=t,this.shadowRoot.getElementById("custom-css").textContent=this.Ue)}We=!1;get disabled(){return this.We}set disabled(e){const t=$(e);t!==this.We&&(this.We=t,this.Y().setAttribute("data-disabled",t.toString()),this.Ke())}qe="";get disabledText(){return this.qe}set disabledText(e){e!==this.qe&&(this.qe=e,this.Ze().key=e,this.Ke())}Ye=un[0];get dropdownAlign(){return this.Ye}set dropdownAlign(e){const t=le(e,un,this.Ye);t!==this.Ye&&(this.Ye=t,this.we().alignment=t)}Xe=hn[0];get dropdownDirection(){return this.Xe}set dropdownDirection(e){const t=le(e,hn,this.Xe);t!==this.Xe&&(this.Xe=t,this.we().direction=t)}Je=!0;get dropdownFullwidth(){return this.Je}set dropdownFullwidth(e){const t=ae(e);t!==this.Je&&(this.Je=t,this.we().fullwidth=t)}Qe="";get help(){return this.Qe}set help(e){e!==this.Qe&&(this.Qe=e,this.et().setAttribute("data-help-length",`${e.length}`),this.tt().key=e)}it=!1;get inlineEdit(){return this.it}set inlineEdit(e){const t=$(e);t!==this.it&&(this.it=t,this.Y().setAttribute("data-inline-edit",`${t}`))}nt="";get label(){return this.nt}set label(e){e!==this.nt&&(this.nt=e,this.st().key=e)}ot=!0;get liveInput(){return this.ot}set liveInput(e){const t=ae(e);t!==this.ot&&(this.ot=t)}rt=null;get max(){return this.rt}set max(e){const t=zn(e);t!==this.rt&&(this.rt=t,this.lt())}dt=null;get min(){return this.dt}set min(e){const t=zn(e);t!==this.dt&&(this.dt=t,this.ct())}ht=!1;get nobackground(){return this.ht}set nobackground(e){const t=$(e);t!==this.ht&&(this.ht=t,this.Y().setAttribute("data-no-background",t.toString()))}ut=!1;get noinnerborders(){return this.ut}set noinnerborders(e){const t=$(e);t!==this.ut&&(this.ut=t,this.Y().setAttribute("data-no-inner-borders",t.toString()))}gt=!1;get noInput(){return this.gt}set noInput(e){const t=$(e);t!==this.gt&&(this.gt=t,this.bt().setAttribute("no-input",t.toString()))}vt=!1;get nomargin(){return this.vt}set nomargin(e){const t=$(e);t!==this.vt&&(this.vt=t,this.Y().setAttribute("data-no-margin",t.toString()))}ft=!1;get nominheight(){return this.ft}set nominheight(e){const t=$(e);t!==this.ft&&(this.ft=t,this.Y().setAttribute("data-no-min-height",t.toString()))}se=[];get options(){return this.se}set options(e){const t=mn(e);Ve(this.se,t)||(this.se=t,this.Y().setAttribute("data-has-options",`${t&&t.length}`),this.yt(),this.xt())}wt=[];get prefixClass(){return this.wt}set prefixClass(e){const t=Mn(e);Ve(this.wt,t)||(this.wt=t,this.kt().parentElement.className=kn("prefix",t))}zt="";get prefixIcon(){return this.zt}set prefixIcon(e){e!==this.zt&&(this.zt=e,this.kt().parentElement.setAttribute("data-icon",e),this.St().setAttribute("type",e))}Mt="";get prefixIconSize(){return this.Mt}set prefixIconSize(e){e!==this.Mt&&(this.Mt=e,this.St().style.fontSize=e)}Ct="";get prefixText(){return this.Ct}set prefixText(e){if(e===this.Ct)return;this.Ct=e;const t=this.kt();t.key=e,t.parentElement.setAttribute("data-text",e)}jt=!1;get readOnly(){return this.jt}set readOnly(e){const t=$(e);t!==this.jt&&(this.jt=t,this.Lt())}Et=!1;get slimpadding(){return this.Et}set slimpadding(e){const t=$(e);t!==this.Et&&(this.Et=t,this.Y().setAttribute("data-slim-padding",`${t}`))}_t=!1;get smallLabel(){return this._t}set smallLabel(e){const t=$(e);t!==this._t&&(this._t=t,this.It().setAttribute("data-small",`${t}`))}Tt=null;get step(){return this.Tt}set step(e){const t=zn(e);t!==this.Tt&&(this.Tt=t,this.Pt())}Ft=[];get suffixClass(){return this.Ft}set suffixClass(e){const t=Mn(e);Ve(this.Ft,t)||(this.Ft=t,this.At().parentElement.className=kn("suffix",t))}Rt="";get suffixIcon(){return this.Rt}set suffixIcon(e){e!==this.Rt&&(this.Rt=e,this.At().parentElement.setAttribute("data-icon",e),this.Gt().setAttribute("type",e))}Bt="";get suffixIconSize(){return this.Bt}set suffixIconSize(e){e!==this.Bt&&(this.Bt=e,this.Gt().style.fontSize=e)}Vt="";get suffixText(){return this.Vt}set suffixText(e){if(e===this.Vt)return;this.Vt=e;const t=this.At();t.key=e,t.parentElement.setAttribute("data-text",e)}Nt=!1;get tighticons(){return this.Nt}set tighticons(e){const t=$(e);t!==this.Nt&&(this.Nt=t,this.Y().setAttribute("data-tight-icons",`${t}`))}Dt=0;get trimValue(){return this.Dt}set trimValue(e){const t=te(e,0);t!==this.Dt&&(this.Dt=t,this.yt())}T="";get type(){return this.T}set type(e){e!==this.T&&(this.T=e,this.Y().setAttribute("data-type",e),this.Ot().type="toggle"===e?"checkbox":e,this.lt(),this.ct(),this.Pt(),this.Ht(),this.$t(),this.Ut())}de="";get value(){return this.de}set value(e){const t=this.Re?$(e):e;t!==this.de&&(this.de=t,this.De=t,this.yt(),this.Ot().value=void 0===t?null:t,this.we().value=t,this.Be=!1)}Wt=!1;get editing(){return this.Wt}set editing(e){if(this.it&&e!==this.Wt&&e!==this.Wt&&(this.Wt=e,this.Y().setAttribute("data-editing",`${this.Wt}`),this.Wt)){this.focus();const e=this.Ot(),t=e.value.length;try{e.setSelectionRange(t,t)}catch(e){}}}constructor(){super(),i(this,a('<div id="input-element-container" data-dropdown-overflow-breakout="false" data-editing="false" data-disabled="false" data-inline-edit="false" data-no-background="false" data-no-inner-borders="false" data-no-margin="false" data-no-min-height="false" data-slim-padding="false" data-tight-icons="false" data-type="" data-has-options="false" data-is-range="false" data-show-disabled-text="false" data-align-center="false"><div class="input-element-label-section" data-small="false"><slot name="label"></slot><text-element class="label-element"></text-element><span class="help-content" data-help-length="0"><slot name="help"></slot><text-element class="help-text"></text-element></span></div><div class="input-element-input-section" no-input="false"><div data-icon="" data-text="" class="input-element-prefix-container"><icon-element id="prefix-icon"></icon-element><text-element class="prefix-text"></text-element></div><span class="range"><span class="range-bar"></span> <span id="range-progress-bar"></span> <span id="range-handle"></span> </span><input id="input"> <span id="display-value"></span><text-element class="disabled-text"></text-element><span class="slider" data-value=""></span> <span class="checkbox-input" data-value=""></span><text-element class="select-value"></text-element><div data-icon="" data-text="" class="input-element-suffix-container"><icon-element id="suffix-icon"></icon-element><text-element class="suffix-text"></text-element></div><div class="input-buttons"><slot name="input-button"></slot></div></div><div id="drop-down-container"><drop-down id="dropdown"></drop-down></div><style id="custom-css"></style></div>',':host(input-element){display:block;max-width:25em;width:100%}#input-element-container{color:#eee;margin:0;min-width:100%;position:relative;width:auto}#input-element-container .input-element-prefix-container,#input-element-container .input-element-suffix-container{align-items:center;align-self:stretch;box-shadow:inset -1px 0 0 0 #616161;cursor:pointer;display:flex;line-height:100%;padding-top:.5px}#input-element-container .input-element-prefix-container .icon-container,#input-element-container .input-element-suffix-container .icon-container{font-size:.75em}#input-element-container .input-element-prefix-container .icon-container,#input-element-container .input-element-prefix-container .input-element-prefix-text,#input-element-container .input-element-prefix-container .input-element-suffix-text,#input-element-container .input-element-suffix-container .icon-container,#input-element-container .input-element-suffix-container .input-element-prefix-text,#input-element-container .input-element-suffix-container .input-element-suffix-text{line-height:100%;padding:.5em}#input-element-container .input-element-prefix-container icon-element,#input-element-container .input-element-suffix-container icon-element{margin-right:.5em}#input-element-container .input-element-prefix-container icon-element[type=""],#input-element-container .input-element-suffix-container icon-element[type=""]{display:none}#input-element-container .input-element-prefix-container icon-element:not([type=""]),#input-element-container .input-element-suffix-container icon-element:not([type=""]){margin-left:.38em}#input-element-container .input-element-prefix-container .prefix-text,#input-element-container .input-element-prefix-container .suffix-text,#input-element-container .input-element-suffix-container .prefix-text,#input-element-container .input-element-suffix-container .suffix-text{margin-left:.5em;margin-right:.5em}#input-element-container .input-element-prefix-container .prefix-text:empty,#input-element-container .input-element-prefix-container .suffix-text:empty,#input-element-container .input-element-suffix-container .prefix-text:empty,#input-element-container .input-element-suffix-container .suffix-text:empty{display:none}#input-element-container .input-element-prefix-container.dim,#input-element-container .input-element-suffix-container.dim{opacity:.5}#input-element-container .input-element-prefix-container.small-icon icon-element,#input-element-container .input-element-suffix-container.small-icon icon-element{font-size:.62em}#input-element-container .input-element-prefix-container.medium-icon icon-element,#input-element-container .input-element-suffix-container.medium-icon icon-element{font-size:1.125em}#input-element-container .input-element-prefix-container.large-icon icon-element,#input-element-container .input-element-suffix-container.large-icon icon-element{font-size:1.38em}#input-element-container .input-element-prefix-container[data-icon=""][data-text=""],#input-element-container .input-element-suffix-container[data-icon=""][data-text=""]{display:none}#input-element-container .input-element-prefix-container:not([data-icon=""]) .prefix-text,#input-element-container .input-element-prefix-container:not([data-icon=""]) .suffix-text,#input-element-container .input-element-suffix-container:not([data-icon=""]) .prefix-text,#input-element-container .input-element-suffix-container:not([data-icon=""]) .suffix-text{margin-left:.25em}#input-element-container .input-element-prefix-container[data-icon=""] icon-element,#input-element-container .input-element-prefix-container[data-text=""] text-element,#input-element-container .input-element-suffix-container[data-icon=""] icon-element,#input-element-container .input-element-suffix-container[data-text=""] text-element{display:none}#input-element-container .input-element-suffix-container{box-shadow:inset 1px 0 0 0 #616161;padding-left:1px}#input-element-container .input-element-suffix-container icon-element:not([type=""]){margin-left:.5em}#input-element-container .input-element-prefix-container+.input-element-suffix-container{box-shadow:none}#input-element-container[data-is-ios=true] input{font-size:16px;padding:.125em .38em}#input-element-container[data-disabled=true]{opacity:.38;pointer-events:none}#input-element-container[data-disabled=true][data-show-disabled-text=true]{opacity:1;pointer-events:all}#input-element-container[data-disabled=true][data-show-disabled-text=true] .input-element-input-section{background-color:initial;box-shadow:none;min-height:0}#input-element-container[data-disabled=true][data-show-disabled-text=true] .input-element-input-section #input{display:none}#input-element-container[data-disabled=true][data-show-disabled-text=true] .input-element-input-section .disabled-text,#input-element-container[data-inline-edit=true] #display-value{display:block}#input-element-container[data-inline-edit=true] #input{background-color:initial;display:none}#input-element-container[data-inline-edit=true][data-editing=false] .input-element-input-section{background-color:initial;box-shadow:none}#input-element-container[data-inline-edit=true][data-editing=true] #display-value{display:none}#input-element-container[data-inline-edit=true][data-editing=true] #input{display:block}#input-element-container[data-inline-edit=true][data-editing=true] .input-element-input-section{background-color:#111}#input-element-container[data-no-background=true] .input-element-input-section{background-color:initial;box-shadow:none}#input-element-container[data-no-background=true] .select-value{background-color:initial}#input-element-container[data-no-background=true][data-type=select] .input-element-suffix-container[data-icon=chevron-down-select] icon-element{margin:0}#input-element-container[data-dropdown-overflow-breakout=false] #drop-down-container{bottom:0;left:0;position:absolute}#input-element-container[data-dropdown-overflow-breakout=true] #drop-down-container{position:fixed;z-index:9999999999999}#input-element-container #display-value{box-sizing:border-box;display:none;max-width:100%;overflow:hidden;padding:.0625em .25em;text-overflow:ellipsis;white-space:nowrap}#input-element-container .drop-down-option{padding:.25em 1em}#input-element-container .drop-down-option input-element{max-width:unset}#input-element-container .drop-down-option:first-of-type{border-radius:4px 4px 0 0}#input-element-container .drop-down-option:last-of-type{border-radius:0 0 4px 4px}#input-element-container .drop-down-option:only-child{border-radius:4px}#input-element-container .disabled-text{display:none;font-style:italic;line-height:100%;opacity:.38}#input-element-container .select-value{background-color:#424242;color:inherit;display:none;flex-grow:1;font-family:inherit;font-size:inherit;line-height:calc(100% + 2px);max-width:100%;overflow:hidden;padding:.5em;white-space:nowrap}#input-element-container .checkbox-input,#input-element-container .range,#input-element-container .slider{display:none}#input-element-container .input-element-label-section{line-height:120%;opacity:.75;text-align:left}#input-element-container .input-element-label-section[data-small=true]{font-size:75%}#input-element-container .help-content{position:relative;vertical-align:middle}#input-element-container[data-type=select]{cursor:pointer}#input-element-container[data-type=select] input{display:none}#input-element-container[data-type=select] .select-value{display:flex}#input-element-container[data-type=checkbox],#input-element-container[data-type=toggle]{align-items:center;display:flex;margin:0 -.25em;width:calc(100% - .5em)}#input-element-container[data-type=checkbox] .input-element-input-section,#input-element-container[data-type=checkbox] .input-element-label-section,#input-element-container[data-type=toggle] .input-element-input-section,#input-element-container[data-type=toggle] .input-element-label-section{margin:.25em}#input-element-container[data-type=checkbox] .input-element-label-section,#input-element-container[data-type=toggle] .input-element-label-section{cursor:pointer;overflow:hidden;padding-bottom:0;padding-top:.25em;text-overflow:ellipsis;white-space:nowrap}#input-element-container[data-type=checkbox] .input-element-input-section,#input-element-container[data-type=toggle] .input-element-input-section{border-radius:1em;min-height:1.5em;position:relative}#input-element-container[data-type=checkbox] .input-element-input-section input,#input-element-container[data-type=toggle] .input-element-input-section input{height:0;opacity:0;padding:0;position:absolute;width:0;z-index:-1}#input-element-container[data-type=toggle]{justify-content:space-between}#input-element-container[data-type=toggle] .input-element-label-section{flex-grow:1}#input-element-container[data-type=toggle] .input-element-input-section .slider{align-self:stretch;background-color:#424242;border-radius:1em;cursor:pointer;display:inline-block;position:relative;transition:background-color .3s;width:2.75em}#input-element-container[data-type=toggle] .input-element-input-section .slider:after{background-color:#a2a2a2;border-radius:50%;box-shadow:inset 0 0 0 1px #bbb,1px 1px 3px #111;content:"";display:block;height:calc(100% - .35em);left:.25em;position:absolute;top:.175em;transition:left .2s;width:1.125em}#input-element-container[data-type=toggle] .input-element-input-section .slider[data-value=true]{background-color:#76b900}#input-element-container[data-type=toggle] .input-element-input-section .slider[data-value=true]:after,#input-element-container[data-type=toggle] .input-element-input-section .slider[data-value=true]:hover:after{background-color:#424242;box-shadow:0 0 0 1px #2b2b2b;left:1.35em}#input-element-container[data-type=checkbox]{margin-bottom:-.5em}#input-element-container[data-type=checkbox] .input-element-input-section{background-color:initial;box-shadow:none}#input-element-container[data-type=checkbox] .input-element-input-section .checkbox-input{cursor:pointer;display:block;height:1em;margin-top:.125em;position:relative;width:1em}#input-element-container[data-type=checkbox] .input-element-input-section .checkbox-input:after,#input-element-container[data-type=checkbox] .input-element-input-section .checkbox-input:before{border-radius:2px;content:"";display:block;pointer-events:none;position:absolute;transition:opacity .2s}#input-element-container[data-type=checkbox] .input-element-input-section .checkbox-input:before{background-color:#bbb;box-shadow:inset 0 0 0 1px #eee;height:100%;left:0;top:0;width:100%}#input-element-container[data-type=checkbox] .input-element-input-section .checkbox-input:after{border-bottom:.2em solid #fff;border-left:.2em solid #fff;box-sizing:border-box;height:.35em;left:.2em;opacity:0;top:.25em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);width:.62em}#input-element-container[data-type=checkbox] .input-element-input-section .checkbox-input[data-value=true]:before{background-color:#76b900;box-shadow:inset 0 0 0 1px #84d100}#input-element-container[data-type=checkbox] .input-element-input-section .checkbox-input[data-value=true]:after{opacity:1}#input-element-container[data-has-options=true] input[readonly=true]{cursor:pointer}#input-element-container[data-is-range=true] .input-element-input-section input{background:rgba(43,43,43,.38);border-radius:4px;flex-grow:0;margin-left:.25em;max-width:5em;min-width:5em;text-align:right;width:5em}#input-element-container[data-is-range=true] .input-element-input-section .range{box-sizing:border-box;cursor:grab;display:block;flex-grow:1;margin:0 .5em;padding:.5em;position:relative;width:100%}#input-element-container[data-is-range=true] .input-element-input-section .range .range-bar{background-color:#bbb;display:block;height:1px;left:0;position:absolute;top:calc(50% - 1px);width:100%}#input-element-container[data-is-range=true] .input-element-input-section .range #range-progress-bar{background-color:#76b900;display:block;height:4px;left:0;position:absolute;top:calc(50% - 2px);width:0}#input-element-container[data-is-range=true] .input-element-input-section .range #range-handle{background-color:#eee;border-radius:50%;display:block;height:1em;left:0;position:absolute;top:calc(50% - .5em);width:1em}#input-element-container[data-no-min-height=true] .input-element-input-section{min-height:0}#input-element-container[data-no-margin=true] .input-element-input-section{margin:0}#input-element-container[data-slim-padding=true] .input-element-input-section input{padding:.25em}#input-element-container[data-slim-padding=true] .select-value{line-height:100%}#input-element-container[data-no-inner-borders=true] .input-element-prefix-container,#input-element-container[data-no-inner-borders=true] .input-element-suffix-container{box-shadow:none}#input-element-container[data-tight-icons=true] .input-element-prefix-container icon-element:not([type=""]){margin-right:0}#input-element-container[data-tight-icons=true] .input-element-prefix-container[data-icon=speed] icon-element{margin-right:.25em}#input-element-container[data-tight-icons=true] .input-element-suffix-container icon-element:not([type=""]){margin-left:0;margin-right:.25em}#input-element-container[data-align-center=true] .select-value{justify-content:center;text-align:center}#input-element-container[data-align-center=true] input#input{text-align:center}#input-element-container .input-element-input-section{align-items:center;background-color:#424242;border-radius:2px;box-shadow:0 0 0 1px #616161;display:flex;margin:.25em 0;min-height:2.5em}#input-element-container .input-element-input-section[no-input=true] input{display:none}#input-element-container input{background-color:#424242;border:none;box-sizing:border-box;color:inherit;display:block;flex-grow:1;font-family:inherit;font-size:inherit;line-height:150%;outline:none!important;padding:.5em;width:100%}#input-element-container input::-webkit-inner-spin-button,#input-element-container input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}#input-element-container input[type=number]{-moz-appearance:textfield}#input-element-container input.has-suffix{padding-right:0}#input-element-container.short-input input{max-width:4.5em}#input-element-container.medium-short-input input{max-width:3.5em}#input-element-container.very-short-input input{max-width:2.7em}#input-element-container .input-buttons{align-items:center;display:flex;justify-content:center}#input-element-container drop-down{position:absolute}.help-content{font-size:90%;font-style:italic;opacity:.75}'))}Ot(){return this.shadowRoot.getElementById("input")}Y(){return this.shadowRoot.getElementById("input-element-container")}we(){return this.shadowRoot.getElementById("dropdown")}Kt(){return this.shadowRoot.getElementById("display-value")}qt(){return this.shadowRoot.querySelector(".slider")}Zt(){return this.shadowRoot.querySelector(".checkbox-input")}Yt(){return this.shadowRoot.querySelector(".select-value")}Ze(){return this.shadowRoot.querySelector(".disabled-text")}et(){return this.shadowRoot.querySelector(".help-content")}tt(){return this.shadowRoot.querySelector(".help-text")}st(){return this.shadowRoot.querySelector(".label-element")}bt(){return this.shadowRoot.querySelector(".input-element-input-section")}kt(){return this.shadowRoot.querySelector(".prefix-text")}St(){return this.shadowRoot.getElementById("prefix-icon")}At(){return this.shadowRoot.querySelector(".suffix-text")}Gt(){return this.shadowRoot.getElementById("suffix-icon")}It(){return this.shadowRoot.querySelector(".input-element-label-section")}Xt(){return this.shadowRoot.querySelector(".range")}Ut(){this.we().closeOnClick=!this.Fe}xt(){const e=this.Fe,t=this.we(),i=this.options;if(e){const e=i.reduce(((e,t)=>Math.max(e,(t.label||"").toString().length)),0);t.minWidth=.5*e+6+"em",De({container:t,array:i,getElementsFn:()=>Array.from(t.querySelectorAll('[slot="drop-down-option"]')),valueKeyFn:e=>e.id,elementValueKeyFn:e=>e.id,updateFn:(e,t)=>{const i=e.querySelector("icon-element"),a=e.querySelector("input-element");t.icon?t.icon&&!i&&a&&e.insertBefore(n({tag:"icon-element",properties:{type:t.icon}}),a):i&&i.parentElement.removeChild(i),a&&(a.label=t.label,a.value=t.value)},createFn:e=>{const t=[];return e.icon&&t.push(n({tag:"icon-element",properties:{type:e.icon}})),t.push(n({tag:"input-element",properties:{type:"toggle",label:e.label,value:e.value,id:e.id}})),n({tag:"div",attributes:{class:"drop-down-option",id:e.id,slot:"drop-down-option"},children:t})}})}else t.options=this.options}lt(){this.Ot()[Sn(this.max)?"removeAttribute":"setAttribute"]("number"===this.type?"max":"maxlength",this.max),this.Jt()}ct(){this.Ot()[Sn(this.min)?"removeAttribute":"setAttribute"]("number"===this.type?"min":"minlength",this.min),this.Jt()}Pt(){this.Ot()[Sn(this.step)?"removeAttribute":"setAttribute"]("step",this.step)}Lt(){this.Ot()[Sn(this.readOnly)?"removeAttribute":"setAttribute"]("readonly",this.readOnly)}yt(){this.Ae=((e,t,i=0)=>{let n=e;if(t&&t.length){-1===t.findIndex((e=>"number"!=typeof e.value))&&(n=Number(n));const e=t[t.findIndex((e=>e.value===n))];let a=void 0===n?"":n;return e&&(e.displayValue?a=e.value:void 0!==e.label&&(a=e.label)),i&&a.length>i?`${a.slice(0,i)}...`:a}return e})(this.De,this.options,this.trimValue),void 0!==this.Ae&&this.Ot().setAttribute("value",this.Ae),this.Kt().textContent=this.Ae,this.qt().setAttribute("data-value",this.Ae),this.Zt().setAttribute("data-value",this.Ae);const e=this.Yt();if(e&&(e.key=this.Ae,this.se&&this.se.length)){const t=-1===this.se.findIndex((e=>"number"!=typeof e.value));let i=this.De;t&&(i=Number(i));const n=this.se[this.se.findIndex((e=>e.value===i))];n&&n.translate!==e.translate&&(e.translate=n.translate)}if(null===this.max||null===this.min)return{};this.Ve||this.Qt();const t=this.ei(),i=`calc(${t}% - ${this.Ve.width/2}px)`,n=`${t}%`;this.shadowRoot.getElementById("range-handle").style.left=i,this.shadowRoot.getElementById("range-progress-bar").style.width=n}Ht(){let e=this.suffixIcon;"select"!==this.type||this.suffixIcon?"select"!==this.type&&"chevron-down-select"===this.suffixIcon&&(e=""):e="chevron-down-select",this.suffixIcon=e}Jt(){const e=e=>null!==e&&!Number.isNaN(e)&&"string"!=typeof e;this.Ge=e(this.max)&&e(this.min)&&"number"===this.type,this.Y().setAttribute("data-is-range",`${this.Ge}`)}$t(){this.Re="toggle"===this.type||"checkbox"===this.type}ti(){this.dispatchEvent(new CustomEvent("input",{bubbles:!0,composed:!0,detail:this})),this.dispatchEvent(new CustomEvent("inputvalue",{bubbles:!0,composed:!0,detail:this})),"function"==typeof this.oninputvalue&&this.oninputvalue(new CustomEvent("inputvalue",{bubbles:!0,composed:!0,detail:this}))}ii(){this.Oe||(this.Oe=!0,this.editing=!0,this.Ne=this.getValue(),this.dispatchEvent(new CustomEvent("input-focus",{bubbles:!0,composed:!0,detail:this})))}ni(){this.Oe&&(this.Oe=!1,this.editing=!1,"function"==typeof this.O.dropdownArrow&&this.O.dropdownArrow(),requestAnimationFrame((()=>{const e=this.we();e&&this.options&&this.options.length>0&&e.visible&&(e.visible=!1),"function"==typeof this.oninputblur&&this.oninputblur(new CustomEvent("input-blur",{bubbles:!0,composed:!0,detail:this})),this.dispatchEvent(new CustomEvent("input-blur",{bubbles:!0,composed:!0,detail:this})),this.inlineEdit&&this.Be&&this.ti()})))}ai=()=>{if(!this.Re)return;const e=this.Ot();"toggle"===this.type?(this.De=!this.De,e.value=this.De):e.value=!this.De,this.ti(),this.Oe=!0,this.ni()};si=e=>{e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation(),document.getSelection().removeAllRanges(),document.body.style.userSelect="none";const t=this.Ot(),{width:i,left:n}=this.shadowRoot.querySelector(".range-bar").getBoundingClientRect();this.Qt();const a=this.step,s=this.min,o=this.max;if(null===o||null===s)return;const r=wn((e=>{const r=Math.min(1,Math.max(0,(e.clientX-n)/i)),l=Math.min(o,Math.max(s,(o-s)*r));t.value=a&&l!==o&&l!==s?l-l%a:l,this.ti()}),100),l=e=>{e.preventDefault(),document.body.style.removeProperty("user-select"),window.removeEventListener("pointermove",r),document.removeEventListener("pointerup",l),document.removeEventListener("pointerleave",l),this.Oe=!0,this.ni()};r(e),window.addEventListener("pointermove",r),document.addEventListener("pointerup",l),document.addEventListener("pointerleave",l)};Qt(){this.Ve=this.shadowRoot.getElementById("range-handle").getBoundingClientRect()}ei(){if(null===this.max||null===this.min)return;const e=this.max-this.min;return(Number.isNaN(this.De)||"string"==typeof this.De?parseFloat(this.De):this.De)/e*100}Ke(){this.Y().setAttribute("data-show-disabled-text",`${!!this.disabled&&!!this.disabledText}`)}oi=e=>{this.Ot().value=e.detail.value,this.dispatchEvent(new CustomEvent("optionClicked",{bubbles:!0,composed:!0,detail:e.detail.value})),this.ti()};ri=e=>{this.options&&0!==this.options.length&&(e.detail?this.ii():this.ni())};K=()=>{Object.keys(this.O).forEach((e=>{try{this.O[`${e}`]()}catch(e){}delete this.O[`${e}`]}))};li=()=>{const e=this.we();e.addEventListener("dropdownclick",this.oi),this.O.dropdownclick=()=>{this.we().removeEventListener("dropdownclick",this.oi),delete this.O.dropdownclick},e.addEventListener("dropdownvisibility",this.ri),this.O.dropdownvisibility=()=>{this.we().removeEventListener("dropdownvisibility",this.ri),delete this.O.dropdownvisibility}};focus(){if("checkbox"!==this.T&&"toggle"!==this.T)try{this.Ot().focus()}catch(e){}this.ii()}getValue(){const e=this.Ot();if("number"===this.type){let t=e.value;const i=this.max,n=this.min,a=this.step;return(Number.isNaN(e.value)||"string"==typeof t)&&(t=100*e.value/100),null!==a&&null!==i&&t!==i&&null!==n&&t!==n&&(t-=t%a),null!==i&&t>i&&(t=i),null!==n&&t<n&&(t=n),t}if(this.Re)try{return JSON.parse(e.value)}catch(e){return!1}if(this.options.length){if(-1===this.options.findIndex((e=>"number"!=typeof e.value)))return Number(e.value)}return e.value}attributeChangedCallback(e,t,i){"aligncenter"===e?this.aligncenter=i:"classes"===e?this.classes=i:"css"===e?this.css=i:"disabled"===e?this.disabled=i:"disabledtext"===e?this.disabledText=i:"dropdownalign"===e?this.dropdownAlign=i:"dropdowndirection"===e?this.dropdownDirection=i:"dropdownfullwidth"===e?this.dropdownFullwidth=i:"inlineedit"===e?this.inlineEdit=i:"help"===e?this.help=i:"label"===e?this.label=i:"liveinput"===e?this.liveInput=i:"max"===e?this.max=i:"min"===e?this.min=i:"nobackground"===e?this.nobackground=i:"noinnerborders"===e?this.noinnerborders=i:"noinput"===e?this.noInput=i:"nomargin"===e?this.nomargin=i:"nominheight"===e?this.nominheight=i:"options"===e?this.options=i:"overflowbreakout"===e?this.overflowbreakout=i:"prefixclass"===e?this.prefixClass=i:"prefixicon"===e?this.prefixIcon=i:"prefixiconsize"===e?this.prefixIconSize=i:"prefixtext"===e?this.prefixText=i:"readonly"===e?this.readOnly=i:"step"===e?this.step=i:"slimpadding"===e?this.slimpadding=i:"smalllabel"===e?this.smallLabel=i:"suffixclass"===e?this.suffixClass=i:"suffixicon"===e?this.suffixIcon=i:"suffixiconsize"===e?this.suffixIconSize=i:"suffixtext"===e?this.suffixText=i:"tighticons"===e?this.tighticons=i:"trimvalue"===e?this.trimValue=i:"type"===e?this.type=i:"value"===e&&(this.value=i)}connectedCallback(){const e=this.we();e&&(e.visible=this.Oe),this.prefixClass=this.wt,this.prefixIcon=this.zt,this.prefixText=this.Ct,this.suffixClass=this.Ft,this.suffixIcon=this.Rt,this.suffixText=this.Vt,this.inlineEdit=this.it,this.editing=!1,this.aligncenter=this.getAttribute("aligncenter")||this.He;const t=this.Ot(),i=this.Y();i.setAttribute("data-is-ios",l.iOS.toString()),i?(i.onclick=e=>{if(this.inlineEdit)return;if("toggle"!==this.type&&"checkbox"!==this.type)try{t.focus()}catch(e){}this.ii();const i=this.we(),n=i.visible;an(i,e)&&this.Fe&&n||requestAnimationFrame((()=>{if(this.options&&this.options.length){const e=this.we();if("select"===this.type?e.visible=!n:e.visible=!0,"function"==typeof this.O.dropdownArrow&&this.O.dropdownArrow(),e.visible&&"number"!==this.type){let e=e=>{if("ArrowDown"===e.key||"ArrowUp"===e.key){const t=this.getValue(),i=this.options.findIndex((e=>e.value===t)),n="ArrowDown"===e.key?i+1:i-1;return this.value=U(this.options,[n,"value"],t),requestAnimationFrame((()=>this.we().updateAlignment())),this.ti()}if("Enter"===e.key){const e=this.Ot();return this.De=e.value,e.blur(),this.ni(),this.ti()}if("Escape"===e.key){const e=this.Ot();return this.De=this.Ne,e.value=this.Ne,e.blur(),this.ni(),this.ti()}};window.addEventListener("keydown",e),this.O.dropdownArrow=()=>{window.removeEventListener("keydown",e),e=null,delete this.O.dropdownArrow}}}}))},i.ondblclick=()=>{this.inlineEdit&&("toggle"!==this.type&&"checkbox"!==this.type&&requestAnimationFrame((()=>{t.focus()})),this.ii())}):console.warn("Could not find container",this),t.oninput=e=>{this.Be=!0,this.liveInput&&(this.De=e.target.value,this.ti())},t.onblur=()=>{this.options&&this.options.length>0||this.ni()},t.onkeydown=e=>{if(!this.liveInput)return"Enter"===e.key?(this.De=this.Ot().value,t.blur(),this.options&&this.options.length>0&&this.ni(),this.ti()):void("Escape"===e.key&&(this.De=this.Ne,t.value=this.Ne,t.blur(),this.options&&this.options.length>0&&this.ni()))},this.Zt().onclick=this.ai,this.qt().onclick=this.ai,this.It().onclick=this.ai,this.Xt().onpointerdown=this.si,this.li()}disconnectedCallback(){this.K()}}s("input-element",Cn);class jn extends HTMLElement{O={};set uiVisibility(e){e&&void 0!==e.contentSidebar&&(this.style.display=e.contentSidebar?"block":"none")}di=[];ci={};hi=[];ui;get controller(){return this.ui}set controller(e){this.ui=e,e&&0===this.mi&&(this.width=210)}mi=0;get width(){return this.mi}set width(e){e!==this.mi&&(this.style.width=`${e}px`)}pi="";get activeSet(){return this.pi}set activeSet(e){e!==this.pi&&(this.pi=e,this.updateSets(this.di))}gi=0;set setsHeight(e){const t=Math.min(.9,te(e,0));if(t===this.gi)return;this.gi=t;const i=this.shadowRoot.getElementById("sets-container"),n=this.shadowRoot.getElementById("media-container");if(0===t)i.style.removeProperty("height"),i.style.removeProperty("maxHeight"),n.style.removeProperty("height"),n.style.removeProperty("maxHeight");else{const e=`calc(${100*t}% - 4em)`;i.style.height=e,i.style.maxHeight=e;const a=`calc(${100-100*t}% - 4em)`;n.style.height=a,n.style.maxHeight=a}}constructor(){super(),i(this,a('<div id="content-sidebar"><div class="heading"><span class="heading-text"><text-element key="Comparison sets"></text-element><button-element slim="true" type="link" icon="chevron-down" nodropdownicon="true" id="sets-sort-btn" hoversecondary="true" overflowbreakout="true"></button-element></span><button-element id="add-magic-set" icon="plus-multiple" slim="true" type="link" hoversecondary="true"></button-element><button-element id="add-set" icon="plus" slim="true" type="link" hoversecondary="true"></button-element></div><div id="sets-container"></div><div id="inner-drag-handle"></div><div class="heading"><span class="heading-text"><text-element key="Media"></text-element><button-element slim="true" type="link" icon="chevron-down" nodropdownicon="true" id="media-sort-btn" hoversecondary="true" overflowbreakout="true"></button-element></span><button-element id="add-media" icon="plus" slim="true" type="link" hoversecondary="true"></button-element></div><div id="media-container"></div><div id="drag-handle"></div></div>',":host{background-color:#212121;box-shadow:inset 0 9px 9px -9px #111,inset -1px 1px 0 0 #111;height:100%;max-width:50%;min-width:16em;position:relative}#content-sidebar{display:flex;flex-direction:column;height:100%;max-height:100%}.heading{box-shadow:inset 0 1px #111;padding:1em}.heading,.heading-text{align-items:center;display:flex}.heading-text{flex-grow:1;font-size:87.5%;gap:.25em}#add-magic-set,.heading-text{margin-right:.5em}#media-container,#sets-container{max-height:calc(100% - 4em);min-height:3em}#sets-container{direction:rtl;margin-bottom:1em;margin-top:-.5em;overflow:auto}#sets-container:empty{display:none}#media-container{direction:rtl;overflow:auto}.set-item{align-items:center;box-sizing:border-box;cursor:pointer;direction:ltr;display:flex;font-size:80%;gap:.5em;max-width:100%;padding:.5em 1em}.set-item icon-element{font-size:1.25em}.set-item button-element{opacity:0;pointer-events:none;transition:opacity .2s}.set-item input-element{flex-grow:1;flex-shrink:1;font-size:94%;max-width:calc(100% - 7em)}.set-item:hover{background-color:#2b2b2b}.set-item:hover button-element{opacity:1;pointer-events:all}.set-item.active,.set-item.active:hover{background-color:#424242}.media-item{align-items:center;box-sizing:border-box;cursor:pointer;direction:ltr;display:flex;font-size:80%;gap:.5em;padding:.5em 1em}.media-item icon-element{font-size:1.25em}.media-item button-element{opacity:0;pointer-events:none;transition:opacity .2s}.media-item .media-item-text{flex-grow:1;font-size:94%;line-height:125%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.media-item:hover{background-color:#2b2b2b}.media-item:hover button-element{opacity:1;pointer-events:all}#drag-handle,#inner-drag-handle{box-shadow:inset -3px 0 0 #76b900;cursor:col-resize;height:100%;opacity:0;position:absolute;right:0;top:0;transition:opacity .2s;width:15px}#drag-handle.active,#drag-handle:hover,#inner-drag-handle.active,#inner-drag-handle:hover{opacity:1}#inner-drag-handle{box-shadow:inset 0 -3px 0 #76b900;cursor:row-resize;height:15px;margin-top:-15px;max-height:15px;min-height:15px;position:relative;width:100%}#empty-media{align-items:center;display:flex;flex-direction:column;justify-content:center;margin:auto;max-width:150px;text-align:center}#empty-media-text{font-size:75%;font-style:italic;line-height:175%;opacity:.5;padding:1em 1em 1.5em}"))}bi(){return this.shadowRoot.getElementById("add-media")}vi(){return this.shadowRoot.getElementById("add-set")}fi(){return this.shadowRoot.getElementById("add-magic-set")}yi(){return this.shadowRoot.getElementById("sets-container")}xi(){return Array.from(this.shadowRoot.querySelectorAll(".set-item"))}wi(){return this.shadowRoot.getElementById("media-container")}ki(){return Array.from(this.shadowRoot.querySelectorAll(".media-item"))}zi(){return this.shadowRoot.getElementById("drag-handle")}Si(){return this.shadowRoot.getElementById("inner-drag-handle")}Mi(){return this.shadowRoot.getElementById("sets-sort-btn")}Ci(){return this.shadowRoot.getElementById("media-sort-btn")}K=()=>{Object.keys(this.O).forEach((e=>{try{this.O[`${e}`]()}catch(e){}delete this.O[`${e}`]}))};ji=e=>{e.preventDefault(),e.stopPropagation();const t=e.detail.value;me.set({setOrder:t}),this.Mi().value=t,this.updateSets(this.di)};Li=e=>{e.preventDefault(),e.stopPropagation();const t=e.detail.value;me.set({mediaOrder:t}),this.Ci().value=t,this.updateMedia(this.hi)};clear=()=>{this.hi=[],this.updateMedia([]),this.updateSets([])};updateMedia=e=>{const t=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),i=Pe(e),a={};e.forEach((e=>{a[`${e.id}`]=i(e)})),this.ci=a,this.hi="alphabetic"===le(this.Ci().value,["alphabetic","created"],"alphabetic")?e.sort(((e,i)=>t.compare(a[`${e.id}`],a[`${i.id}`]))):e.sort(((e,t)=>e.created>t.created?1:-1)),De({container:this.wi(),array:this.hi,getElementsFn:()=>this.ki(),valueKeyFn:e=>e.id,elementValueKeyFn:e=>e.id,createFn:e=>{const t=n({tag:"button-element",attributes:{icon:"close",type:"link",hoversecondary:"true"}}),i=()=>this.dispatchEvent(new CustomEvent("confirm-delete-media",{bubbles:!0,composed:!0,detail:e}));this.O[`mediadelete${e.id}`]&&this.O[`mediadelete${e.id}`](),t.addEventListener("click",i),this.O[`mediadelete${e.id}`]=()=>{t.removeEventListener("click",i),delete this.O[`mediadelete${e.id}`]};const a=n({tag:"div",attributes:{class:"media-item",id:e.id,draggable:"true"},children:[n({tag:"icon-element",attributes:{type:"video"===e.type?"video":"image"}}),n({tag:"div",attributes:{class:"media-item-text"},properties:{textContent:this.ci[`${e.id}`]}}),t]}),s=t=>{if(!this.controller)return t.preventDefault(),void t.stopPropagation();document.getSelection().removeAllRanges(),document.body.style.userSelect="none";a.ondrag=()=>{},a.ondragend=t=>{const i=t.clientX,n=t.clientY,a=this.controller.getElementAtPoint(i,n),s=this.di.find((e=>e.id===this.pi));if(!a)return;document.getSelection().removeAllRanges(),document.body.style.userSelect="none";const o=a.tagName;if("DEFAULT-SCREEN"===o)return this.dispatchEvent(new CustomEvent("add-media-to-current-set",{bubbles:!0,composed:!0,detail:{file:e,index:0,media:e}}));if("CANVAS"===o){const t=a.getBoundingClientRect(),n=this.controller.getMediaIndexAtX((i-t.left)/t.width);return this.dispatchEvent(new CustomEvent("add-media-to-current-set",{bubbles:!0,composed:!0,detail:{file:e,index:n,media:e}}))}if("TIMELINE-ITEM"===o){const t=a.getBoundingClientRect(),i=s.mediaOrder.findIndex((e=>e===a.id)),o=n-t.y<t.height/2;return this.dispatchEvent(new CustomEvent("add-media-to-current-set",{bubbles:!0,composed:!0,detail:{file:e,index:i+(o?0:1),media:e}}))}return"media-controller-container"===a.id||a.classList&&"function"==typeof a.classList.contains&&a.classList.contains("canvas-container")?this.dispatchEvent(new CustomEvent("add-media-to-current-set",{bubbles:!0,composed:!0,detail:{file:e,index:0,media:e}})):void 0}};return this.O[`mediaondragstart${e.id}`]&&this.O[`mediaondragstart${e.id}`](),a.addEventListener("dragstart",s),this.O[`mediaondragstart${e.id}`]=()=>{a.removeEventListener("dragstart",s),delete this.O[`mediaondragstart${e.id}`]},a},updateFn:(e,t)=>{e.querySelector(".media-item-text").textContent=this.ci[`${t.id}`];e.querySelector("icon-element").type="video"===t.type?"video":"image"}})};updateSets=e=>{const t=this.yi(),i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),a=le(this.Mi().value,["alphabetic","created"],"alphabetic");this.di="alphabetic"===a?e.sort(((e,t)=>i.compare(e.label,t.label))):e.sort(((e,t)=>e.created>t.created?1:-1)),De({container:t,array:this.di,getElementsFn:()=>this.xi(),valueKeyFn:e=>e.id,elementValueKeyFn:e=>e.id,createFn:e=>{const t=()=>{const t=s.getValue(),i=this.di.find((t=>t.id===e.id));i&&(t||(s.value=i.label),this.dispatchEvent(new CustomEvent("rename-set",{bubbles:!0,composed:!0,detail:{id:e.id,label:t}})))},i=e=>{e.preventDefault(),e.stopPropagation();const t=s.editing;s.editing=!t},a=t=>{t.preventDefault(),t.stopPropagation();this.di.find((t=>t.id===e.id))&&this.dispatchEvent(new CustomEvent("confirm-delete-set",{bubbles:!0,composed:!0,detail:e.id}))},s=n({tag:"input-element",attributes:{id:`input-${e.id}`,value:e.label,class:"set-item-input",nomargin:"true",nominheight:"true",slimpadding:"true",liveInput:"false"},properties:{inlineEdit:!0}}),o=n({tag:"button-element",attributes:{icon:"pencil",type:"link",hoversecondary:"true"}}),r=n({tag:"button-element",attributes:{icon:"close",type:"link",hoversecondary:"true"}});this.O[`setinput${e.id}`]&&this.O[`setinput${e.id}`](),this.O[`setblur${e.id}`]&&this.O[`setblur${e.id}`](),this.O[`setedit${e.id}`]&&this.O[`setedit${e.id}`](),this.O[`setdelete${e.id}`]&&this.O[`setdelete${e.id}`](),s.addEventListener("inputvalue",t),this.O[`setinput${e.id}`]=()=>{s.removeEventListener("inputvalue",t),delete this.O[`setinput${e.id}`]},s.addEventListener("input-blur",t),this.O[`setblur${e.id}`]=()=>{s.removeEventListener("input-blur",t),delete this.O[`setblur${e.id}`]},o.addEventListener("pointerdown",i),this.O[`setedit${e.id}`]=()=>{o.removeEventListener("pointerdown",i),delete this.O[`setedit${e.id}`]},r.addEventListener("click",a),this.O[`setdelete${e.id}`]=()=>{r.removeEventListener("click",a),delete this.O[`setdelete${e.id}`]};return n({tag:"div",attributes:{id:e.id,class:e.id===this.pi?"set-item active":"set-item"},properties:{onclick:t=>{const i=this.shadowRoot.getElementById(`input-${e.id}`),n=i&&i.isFocused;2===t.detail||this.pi===e.id||n||this.dispatchEvent(new CustomEvent("loadset",{bubbles:!0,composed:!0,detail:e.id}))}},children:[n({tag:"icon-element",attributes:{type:"cards"}}),s,o,r]})},updateFn:(e,t)=>{e.classList[t.id===this.pi?"add":"remove"]("active");const i=e.querySelector(".set-item-input");i&&(i.value=t.label)}})};deleteMedia=e=>{this.hi=this.hi.filter((t=>t.path!==e.path||t.size!==e.size||t.modified!==e.modified)),this.updateMedia(this.hi)};scrollToMedia=e=>{const t=this.ki().find((t=>t.id===e));t&&t.scrollIntoView({behavior:"smooth",block:"center"})};scrollToSet=e=>{const t=this.xi().find((t=>t.id===e));t&&t.scrollIntoView({behavior:"smooth",block:"center"})};connectedCallback(){this.K(),this.clear(),this.bi().onclick=()=>this.dispatchEvent(new CustomEvent("selectmedia",{bubbles:!0,composed:!0})),this.vi().onclick=()=>this.dispatchEvent(new CustomEvent("newset",{bubbles:!0,composed:!0})),this.fi().onclick=()=>this.dispatchEvent(new CustomEvent("openabfoldersmodal",{bubbles:!0,composed:!0})),this.setsHeight=0,this.zi().onpointerdown=e=>{const t=wn((e=>{this.width=e.clientX}),33);this.zi().classList.add("active"),t(e);const i=e=>{e.preventDefault(),t(e)},n=e=>{e.preventDefault(),this.zi().classList.remove("active"),document.body.style.removeProperty("user-select"),window.removeEventListener("pointermove",i),document.removeEventListener("pointerup",n),document.removeEventListener("pointerleave",n),i(e)};document.getSelection().removeAllRanges(),document.body.style.userSelect="none",window.addEventListener("pointermove",i),document.addEventListener("pointerup",n),document.addEventListener("pointerleave",n)},this.Si().onpointerdown=e=>{const t=this.Si().getBoundingClientRect(),i=t.height-(e.clientY-t.top),n=e=>{const t=this.getBoundingClientRect();this.setsHeight=(e+i-t.top)/t.height};this.Si().classList.add("active"),n(e.clientY);const a=e=>{e.preventDefault(),n(e.clientY)},s=e=>{e.preventDefault(),this.Si().classList.remove("active"),document.body.style.removeProperty("user-select"),window.removeEventListener("pointermove",a),document.removeEventListener("pointerup",s),document.removeEventListener("pointerleave",s),a(e)};document.getSelection().removeAllRanges(),document.body.style.userSelect="none",window.addEventListener("pointermove",a),document.addEventListener("pointerup",s),document.addEventListener("pointerleave",s)};const{setOrder:e,mediaOrder:t}=me.get(),i=this.Mi(),n=this.Ci(),a=[{value:"alphabetic",label:xe("Sort alphabetically"),id:"alphabetic"},{value:"created",label:xe("Sort by created"),id:"created"}];i.options=Y(a),i.value=e,n.options=Y(a),n.value=t,i.addEventListener("dropdownclick",this.ji),this.O.setsSortBtnClick=()=>{this.Mi().removeEventListener("dropdownclick",this.ji),delete this.O.setsSortBtnClick},n.addEventListener("dropdownclick",this.Li),this.O.mediaSortBtnClick=()=>{this.Ci().removeEventListener("dropdownclick",this.Li),delete this.O.mediaSortBtnClick}}disconnectedCallback(){this.clear(),this.K()}}s("content-sidebar",jn);class Ln extends HTMLElement{static get observedAttributes(){return["visible","scrim","message"]}he=!0;get visible(){return this.he}set visible(e){const t=ae(e);this.he!==t&&(this.he=t,this.Y.setAttribute("data-show",`${t}`))}Ei=!1;get scrim(){return this.Ei}set scrim(e){const t=$(e);this.Ei!==t&&(this.Ei=t,this.Y.setAttribute("data-scrim",`${t}`))}_i="";get message(){return this._i}set message(e){this._i!==e&&(this._i=e,this.innerHTML="",""!==e&&this.appendChild(n({tag:"text-element",attributes:{key:e}})))}Y;constructor(){super(),i(this,a('<div class="spinner" data-scrim="false" data-show="true"><span class="text"><slot></slot></span></div>','@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}:host{height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.spinner{align-items:center;color:#76b900;display:none;height:100%;justify-content:center;left:0;pointer-events:none;position:absolute;top:0;width:100%}.spinner[data-show=true]{display:flex;pointer-events:all}.spinner[data-show=true][data-scrim=true]{background-color:hsla(0,0%,7%,.9)}.spinner:after,.spinner:before{border:.25em solid;border-radius:50%;content:"";height:5em;left:2.75em;min-height:5em;min-width:5em;position:relative;width:5em}.spinner:before{opacity:.25}.spinner:after{-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite;border-bottom-color:transparent;border-left-color:transparent;border-right-color:transparent;left:-2.75em}.spinner .text{color:#fff;position:absolute;top:calc(50% + 5em)}')),this.xi()}xi=()=>{this.Y=this.shadowRoot.querySelector(".spinner")};attributeChangedCallback(e,t,i){"visible"===e?this.visible=i:"scrim"===e?this.scrim=i:"message"===e&&(this.message=i)}connectedCallback(){this.xi()}}s("spinner-element",Ln);class En extends HTMLElement{static get observedAttributes(){return["message","visible"]}Ii=null;_i="";get message(){return this._i}set message(e){this._i=e,this.appendChild(n({tag:"text-element",attributes:{slot:"content",key:e}})),this._i&&this.updateVisible()}he=!1;get visible(){return this.he}set visible(e){const t=$(e);if(this.he===t)return;this.he=t;const i=this.I();i&&(i.setAttribute("data-shown",`${t}`),t?(i.onkeydown=this.Ti,i.focus()):(i.onkeydown=null,i.blur(),this.dispatchEvent(new CustomEvent("messageoverlayhidden",{bubbles:!0,composed:!0,detail:this}))))}constructor(){super(),i(this,a('<div id="message-container" tabindex="0" data-shown="false"><div class="message-inner"><div class="message-background"></div><div class="message-box-outer"><div class="message-box"><div id="message-content"><slot name="content"></slot></div><div id="message-close"><button-element id="close-button" icon="close" bind-events="click:close" slim="true" size="6" type="link"></button-element></div></div></div></div></div>',":host{height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%;z-index:99999}#message-container{height:100%;left:0;opacity:0;outline:none!important;pointer-events:none;position:absolute;top:0;width:100%;z-index:-1}#message-container[data-shown=true]{opacity:1;z-index:99999}#message-container[data-shown=true] .message-inner .message-background,#message-container[data-shown=true] .message-inner .message-box,#message-container[data-shown=true] .message-inner .message-box-outer{pointer-events:all}#message-container .message-inner{align-items:center;color:inherit;display:flex;height:100%;justify-content:center;position:relative;width:100%}#message-container .message-inner .message-background{background-color:#000;height:100%;opacity:.8;position:absolute;width:100%}#message-container .message-inner .message-box-outer{align-items:center;display:inline-flex;justify-content:center;max-height:90%;max-width:90%;pointer-events:none;position:relative;width:auto}#message-container .message-inner .message-box{align-items:flex-start;background:#424242;border-radius:1px;box-shadow:0 0 0 1px #000,0 10px 20px -10px #000,0 10px 40px #000;box-sizing:border-box;display:flex;flex-wrap:nowrap;overflow:auto;padding:1em}#message-container .message-inner .message-box #message-content{display:flex;flex-direction:column;flex-grow:1;gap:1em}#message-container .message-inner .message-box #message-content>span{text-align:center;white-space:pre-wrap}#message-container #message-close{align-items:center;display:flex;height:3.5em;justify-content:center;margin:-1em -1em -1em 1em;width:3.5em}#message-container #message-close:hover{background-color:#4f4f4f}#message-container #message-close button-element{font-size:88.9%}"))}I(){return this.shadowRoot.getElementById("message-container")}Ti=e=>{const t=()=>{this.I().onkeydown=null};if(!this.visible)return t();e.path&&"INPUT"===e.path[0].tagName||"Escape"===e.key&&this.visible&&(e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation(),this.close(),t(),this.dispatchEvent(new CustomEvent("appfocus",{bubbles:!0,composed:!0})))};close=()=>{this.message="",this.innerHTML="",this.visible=!1};updateVisible(){const e=!!this.message,t=this.children.length>0;this.visible=e||t}focus(){try{this.I().focus()}catch(e){}}attributeChangedCallback(e,t,i){"visible"===e?this.visible=i:"message"===e&&(this.message=i)}connectedCallback(){this.Ii=new MutationObserver((()=>{this.updateVisible()})),this.Ii.observe(this,{childList:!0,subtree:!0}),this.shadowRoot.getElementById("close-button").onclick=this.close}disconnectedCallback(){this.Ii&&(this.Ii.disconnect(),this.Ii=null)}}s("message-overlay",En);class _n extends HTMLElement{static get observedAttributes(){return["visible","scrim","movable","closable","removecontentonclose"]}oncontentoverlayclose=null;Ii=null;Pi=null;Fi=null;Ai=null;Ri={x:0,y:0};he=!1;get visible(){return this.he}set visible(e){const t=$(e);if(t===this.he)return;this.he=t,this.setAttribute("data-showing",t.toString()),this.Fi&&this.Fi.disconnect(),this.Ai&&this.Ai.disconnect();const i=this.I();if(!i)return;const n=this.Gi();if(n){if(i.onkeydown=null,this.Pi=n.getBoundingClientRect(),t){i.onkeydown=e=>{this.visible&&(e.path&&"INPUT"===e.path[0].tagName||"Escape"===e.key&&this.visible&&(e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation(),this.close(),this.dispatchEvent(new CustomEvent("appfocus",{bubbles:!0,composed:!0}))))},i.focus(),this.Bi();const e=()=>{this.Pi=n.getBoundingClientRect(),this.Bi()};this.Fi=new ResizeObserver((()=>requestAnimationFrame(e))),this.Fi.observe(i),this.Ai=new ResizeObserver((()=>requestAnimationFrame(e))),this.Ai.observe(this.Vi())}else this.Ri={x:0,y:0},this.Pi=null,this.Bi(),i.blur(),"function"==typeof this.oncontentoverlayclose&&this.oncontentoverlayclose(new CustomEvent("contentoverlayclose",{bubbles:!0,composed:!0,detail:this})),this.dispatchEvent(new CustomEvent("contentoverlayclose",{bubbles:!0,composed:!0,detail:this})),this.dispatchEvent(new CustomEvent("icat-focus",{composed:!0,bubbles:!0}));i.setAttribute("data-shown",t.toString())}}Ni=!0;get removeContentOnClose(){return this.Ni}set removeContentOnClose(e){this.Ni=ae(e)}Ei=!0;get scrim(){return this.Ei}set scrim(e){const t=ae(e);t!==this.Ei&&(this.Ei=t,this.I().setAttribute("data-scrim",t.toString()))}Di=!1;get movable(){return this.Di}set movable(e){const t=$(e);t!==this.Di&&(this.Di=t,this.I().setAttribute("data-movable",t.toString()),t||(this.Ri={x:0,y:0},this.Bi()))}Oi=!0;get closable(){return this.Oi}set closable(e){const t=ae(e);t!==this.Oi&&(this.Oi=t,this.I().setAttribute("data-closable",t.toString()))}constructor(){super(),i(this,a('<div id="content-overlay-container" tabindex="0" data-shown="false" data-scrim="true" data-movable="false" data-closable="true" data-showing="false"><div class="content-overlay-inner"><div class="content-overlay-background"><slot name="scrim"><div class="content-overlay-background-content"></div></slot></div><div class="content-overlay-box-outer"><div class="heading-container"><div class="heading"><slot name="heading"></slot></div><div id="content-overlay-close"><button-element id="close-button" icon="close" type="link" size="3" iconsize="1.137em"></button-element></div></div><div class="content-box"><div id="content"><slot></slot></div></div><div class="footer-container"><div class="footer"><slot name="footer"></slot></div></div></div></div></div>',":host{height:100%;left:0;pointer-events:none;position:fixed;top:0;width:100%;z-index:99999}:host(content-overlay[data-showing=false]){display:none}#content-overlay-container{height:100%;left:0;opacity:0;outline:none!important;pointer-events:none;position:absolute;top:0;width:100%;z-index:-1}#content-overlay-container[data-shown=true]{opacity:1;z-index:99999}#content-overlay-container[data-shown=true] .content-overlay-inner .content-box,#content-overlay-container[data-shown=true] .content-overlay-inner .content-overlay-box-outer{pointer-events:all}#content-overlay-container[data-shown=true][data-scrim=true] .content-overlay-background{opacity:1;pointer-events:all}#content-overlay-container[data-shown=true][data-has-footer=true] .footer-container{background-color:#2b2b2b;padding:1em}#content-overlay-container[data-shown=true][data-has-footer=true] #close-button{padding:.73em .25em}#content-overlay-container[data-closable=false] #close-button{display:none}#content-overlay-container .content-overlay-inner{align-items:center;color:inherit;display:flex;height:100%;justify-content:center;position:relative;width:100%}#content-overlay-container .content-overlay-inner .content-overlay-background{height:100%;opacity:0;pointer-events:none;position:absolute;width:100%}#content-overlay-container .content-overlay-inner .content-overlay-background .content-overlay-background-content,#content-overlay-container .content-overlay-inner .content-overlay-background [slot=scrim]{height:100%;position:absolute;width:100%}#content-overlay-container .content-overlay-inner .content-overlay-background .content-overlay-background-content{background-color:#000;opacity:.8}#content-overlay-container .content-overlay-inner .content-overlay-box-outer{align-items:center;border-radius:4px;box-shadow:0 10px 20px -10px #000,0 0 2em rgba(0,0,0,.5);display:inline-flex;flex-direction:column;justify-content:center;max-height:90%;max-width:90%;min-width:20em;pointer-events:none;position:relative;width:auto}#content-overlay-container .content-overlay-inner .content-box{align-items:flex-start;background:#2b2b2b;box-sizing:border-box;display:flex;flex-wrap:nowrap;min-width:100%;overflow:auto;padding:1em}#content-overlay-container .content-overlay-inner .content-box #content{flex-grow:1}#content-overlay-container[data-movable=true] .heading-container .heading{cursor:grab}.heading-container{align-items:flex-start;background-color:#2b2b2b;border-radius:4px 4px 0 0;display:flex;flex-wrap:nowrap;justify-content:space-between;min-width:100%}.heading-container .heading{align-self:center;flex-grow:1;padding:1.5em 1em 1em}#close-button{border-radius:0 4px 0 0;cursor:pointer;padding:.25em;transition:background-color .2s}#close-button:hover{background-color:#424242}.footer-container{border-radius:0 0 4px 4px;box-sizing:border-box;min-width:100%}.footer-container .footer{align-items:center;display:flex;justify-content:flex-end;min-width:100%}slot[name=heading]{font-size:1.5em}"))}I(){return this.shadowRoot.getElementById("content-overlay-container")}Gi(){return this.shadowRoot.querySelector(".content-overlay-box-outer")}Vi(){return this.shadowRoot.getElementById("content")}Hi(){const e=Array.from(this.children),t=e.findIndex((e=>"footer"===e.slot))>-1;this.removeContentOnClose&&(this.visible=e.length>0),this.I().setAttribute("data-has-footer",t.toString())}Bi=()=>{if(!this.Ri)return;const e=this.Gi();this.Pi||(this.Pi=e.getBoundingClientRect());const t=(this.offsetHeight-this.Pi.height)/this.Pi.height/2;let i=this.Ri.y/100;i>t&&(i=t),i<-t&&(i=-t);const n=(this.offsetWidth-this.Pi.width)/this.Pi.width/2;let a=this.Ri.x/100;a>n&&(a=n),a<-n&&(a=-n),e.style.transform=`translateX(${100*a}%) translateY(${100*i}%)`};$i=e=>{if(e.preventDefault(),e.stopPropagation(),!this.movable)return;document.body.style.userSelect="none",document.getSelection().removeAllRanges();const t=this.Gi(),i=e.clientX,n=e.clientY,a=this.Ri.x/100,s=this.Ri.y/100;this.Pi=t.getBoundingClientRect();const o=wn((e=>{e.preventDefault();const t=e.clientX-i,o=e.clientY-n,r=(this.offsetHeight-this.Pi.height)/this.Pi.height/2,l=(this.offsetWidth-this.Pi.width)/this.Pi.width/2;let d=t/this.Pi.width+a,c=o/this.Pi.height+s;Number.isFinite(d)&&Number.isFinite(c)&&(d<-l&&(d=-l),d>l&&(d=l),c>r&&(c=r),c<-r&&(c=-r),this.Ri={x:100*d,y:100*c},this.Bi())}),100),r=e=>{e.preventDefault(),document.body.style.removeProperty("user-select"),window.removeEventListener("pointermove",o),document.removeEventListener("pointerup",r),document.removeEventListener("pointerleave",r)};window.addEventListener("pointermove",o),document.addEventListener("pointerup",r),document.addEventListener("pointerleave",r)};close=()=>{this.removeContentOnClose&&(this.innerHTML=""),this.visible=!1};resetScroll(){this.shadowRoot.querySelector(".content-box").scrollTo(0,0)}focus(){if(this.visible)try{this.I().focus()}catch(e){}}attributeChangedCallback(e,t,i){"visible"===e?this.visible=i:"scrim"===e?this.scrim=i:"movable"===e?this.movable=i:"closable"===e?this.closable=i:"removecontentonclose"===e&&(this.removeContentOnClose=i)}connectedCallback(){this.Hi();this.shadowRoot.querySelector(".heading-container .heading").onpointerdown=this.$i,this.shadowRoot.getElementById("close-button").onclick=this.close,this.Ii=new MutationObserver((()=>{this.Hi()})),this.Ii.observe(this,{childList:!0,subtree:!0})}disconnectedCallback(){this.Ii&&(this.Ii.disconnect(),this.Ii=null)}}s("content-overlay",_n);const In=e=>Number.isNaN(e)||"string"==typeof e?parseFloat(e):e,Tn=(e,t,i)=>{e.shadowRoot.querySelector(`#${t}-toggle .media-settings-item-value`).textContent=i,e.shadowRoot.querySelector(`#${t}-label`).textContent=i},Pn=(e,t,i)=>{e.shadowRoot.querySelector(`#${t}-toggle icon-element`).type=i?"eye":"eye-off",e.shadowRoot.querySelector(`#${t}-label`).setAttribute("data-show",i.toString())},Fn=(e,t)=>"true"===e.shadowRoot.querySelector(`#${t}-label`).getAttribute("data-show");class An extends HTMLElement{Ui=!1;Wi=!1;Ki=!1;qi="";set Zi(e){this.Yi().help=`(${e})`}set Xi(e){this.I().setAttribute("data-has-audio",e.toString())}set Ji(e){Tn(this,"bitrate",(e=>{if(0===e)return"0bps";const t=Math.floor(Math.log(e)/Math.log(1e3));return`${Math.round(e/1e3**t)}${["bps","Kbps","Mbps","Gbps","Tbps"][Number(t)]}`})(e))}set Qi(e){Tn(this,"codec",e)}set en(e){Tn(this,"duration",`${J(e,this.tn)}s`)}set nn(e){Tn(this,"format",e)}set an(e){Tn(this,"start-time",`[${e<0?"-":""}${J(Math.abs(e),this.tn)}]`)}get tn(){return parseInt((e=this,t="fps",e.shadowRoot.querySelector(`#${t}-toggle .media-settings-item-value`).textContent).slice(0,-3),10);var e,t}set tn(e){Tn(this,"fps",`${e}FPS`)}set sn(e){this.on().type=e?"speaker-off":"speaker-medium"}set rn(e){this.ln().textContent=e,this.Yi().value=e}set Ri(e){e&&(void 0!==e.x&&(this.dn().value=e.x),void 0!==e.y&&(this.cn().value=e.y),void 0!==e.z&&(this.hn().value=e.z))}un="";get mediaId(){return this.un}set mediaId(e){this.un!==e&&(this.un=e,this.mn().value=e)}pn=0;get index(){return this.pn}set index(e){this.pn=e}se=[];get options(){return this.se.map((e=>({...e})))}set options(e){Ve(this.se,e)||(this.se=e.map((e=>({...e,translate:!1}))),this.mn().options=this.se)}gn=!1;get editable(){return this.gn}set editable(e){this.gn!==e&&(this.gn=e,this.I().setAttribute("data-editable",e.toString()))}bn=!1;get fullscreen(){return this.bn}set fullscreen(e){this.bn!==e&&(this.bn=e,this.I().setAttribute("data-fullscreen",e.toString()))}constructor(){super(),i(this,a('<div id="media-meta-container" data-fullscreen="false" data-editable="false" data-align-right="false" data-has-audio="false"><div class="media-meta-container-inner"><div class="media-meta-labels"><span id="media-select" title="Switch media"><input-element id="select-media-input" type="select" dropdowndirection="up" noinnerborders="true" nobackground="true" nomargin="true" nominheight="true"></input-element><span id="media-title"></span> </span><span id="visibility-button" class="media-info-btn" title="Toggle visibility"><icon-element type="eye"></icon-element></span><span id="mute-button" class="media-info-btn" title="Toggle audio"><icon-element type="speaker-off"></icon-element></span><span id="settings-button" class="media-info-btn" title="Edit media position"><icon-element type="cog"></icon-element></span><span id="delete-button" class="media-info-btn" title="Delete media from set"><icon-element type="close"></icon-element></span><span class="optional-labels-container"><span class="optional-media-label" id="duration-label" title="Duration"></span> <span class="optional-media-label" id="start-time-label" title="Start time"></span> <span class="optional-media-label" id="fps-label" title="Frames per second"></span> <span class="optional-media-label" id="dimensions-label" title="Dimensions"></span> <span class="optional-media-label" id="codec-label" title="Codec"></span> <span class="optional-media-label" id="format-label" title="Format"></span> <span class="optional-media-label" id="bitrate-label" title="Bitrate"></span></span></div></div><content-overlay id="media-info-item-settings-overlay" visible="false" removecontentonclose="false" movable="true" scrim="false"><div slot="heading" id="media-setting-heading"><span id="settings-name-label"></span><span>&nbsp;</span><text-element key="Settings"></text-element></div><div slot="scrim" class="media-setting-bg"></div><div class="media-settings-content"><div class="media-settings-item input-grid media-name-input-container"><div class="input-control"><input-element id="media-name-input" label="Label"></input-element></div><div class="input-control btn-control"><button-element id="reset-name-button" size="4" text="Reset"></button-element></div></div><div class="dimension-settings input-grid"><div class="media-settings-item input-control short-input"><input-element id="media-scale-input" label="Scale %" type="number" step="1"><button-element id="media-z-decrease" class="dimension-input-button" type="link" slot="input-button" icon="chevron-down" slim="true"></button-element><button-element id="media-z-increase" class="dimension-input-button" type="link" slot="input-button" icon="chevron-up" slim="true"></button-element></input-element></div><div class="media-settings-item input-control short-input"><input-element id="media-x-input" label="Left/Right PX" type="number" step="1"><button-element id="media-x-decrease" class="dimension-input-button" type="link" slot="input-button" icon="chevron-left" slim="true"></button-element><button-element id="media-x-increase" class="dimension-input-button" type="link" slot="input-button" icon="chevron-right" slim="true"></button-element></input-element></div><div class="media-settings-item input-control short-input"><input-element id="media-y-input" label="Up/Down PX" type="number" step="1"><button-element id="media-y-decrease" class="dimension-input-button" type="link" slot="input-button" icon="chevron-down" slim="true"></button-element><button-element id="media-y-increase" class="dimension-input-button" type="link" slot="input-button" icon="chevron-up" slim="true"></button-element></input-element></div><div class="input-control btn-control"><button-element id="reset-media-position-button" size="4" text="Reset"></button-element></div></div><div class="label-toggles"><div class="media-settings-item meta-item meta-item-duration"><button-element id="duration-toggle" type="link" size="2.5"><icon-element type="eye-off" iconsize="1.174em" slot="icon" id="duration-toggle-icon"></icon-element><span class="media-settings-item-text" slot="text"><span class="media-settings-item-label"><text-element key="Duration"></text-element>:</span> <span class="media-settings-item-value"></span></span></button-element></div><div class="media-settings-item meta-item meta-item-startTime"><button-element id="start-time-toggle" type="link" size="2.5"><icon-element id="start-time-toggle-icon" type="eye-off" iconsize="1.174em" slot="icon"></icon-element><span class="media-settings-item-text" slot="text"><span class="media-settings-item-label"><text-element key="Start time"></text-element>:</span> <span class="media-settings-item-value"></span></span></button-element></div><div class="media-settings-item meta-item meta-item-fps"><button-element id="fps-toggle" type="link" size="2.5"><icon-element id="fps-toggle-icon" type="eye-off" iconsize="1.174em" slot="icon"></icon-element><span class="media-settings-item-text" slot="text"><span class="media-settings-item-label"><text-element key="FPS"></text-element>:</span> <span class="media-settings-item-value"></span></span></button-element></div><div class="media-settings-item meta-item meta-item-dimensions"><button-element id="dimensions-toggle" type="link" size="2.5"><icon-element id="dimensions-toggle-icon" type="eye-off" iconsize="1.174em" slot="icon"></icon-element><span class="media-settings-item-text" slot="text"><span class="media-settings-item-label"><text-element key="Dimensions"></text-element>:</span> <span class="media-settings-item-value"></span></span></button-element></div><div class="media-settings-item meta-item meta-item-codec"><button-element id="codec-toggle" type="link" size="2.5"><icon-element id="codec-toggle-icon" type="eye-off" iconsize="1.174em" slot="icon"></icon-element><span class="media-settings-item-text" slot="text"><span class="media-settings-item-label"><text-element key="Codec"></text-element>:</span> <span class="media-settings-item-value"></span></span></button-element></div><div class="media-settings-item meta-item meta-item-format"><button-element id="format-toggle" type="link" size="2.5"><icon-element id="format-toggle-icon" type="eye-off" iconsize="1.174em" slot="icon"></icon-element><span class="media-settings-item-text" slot="text"><span class="media-settings-item-label"><text-element key="Format"></text-element>:</span> <span class="media-settings-item-value"></span></span></button-element></div><div class="media-settings-item meta-item meta-item-bitrate"><button-element id="bitrate-toggle" type="link" size="2.5"><icon-element id="bitrate-toggle-icon" type="eye-off" iconsize="1.174em" slot="icon"></icon-element><span class="media-settings-item-text" slot="text"><span class="media-settings-item-label"><text-element key="Bitrate"></text-element>:</span> <span class="media-settings-item-value"></span></span></button-element></div></div></div></content-overlay></div>','.input-grid{align-items:flex-end;display:flex;flex-wrap:wrap;margin:0 -.5em}.input-grid .input-control{margin:.5em .5em 0}.input-grid .input-control:not(.btn-control){padding:0 0 .5em}.input-grid .btn-control{align-self:flex-end;margin-bottom:.75em}.input-grid.no-wrap{flex-wrap:nowrap}.short-input{max-width:6.18em}[slot=input-button]{font-size:85%;position:relative}[slot=input-button]:first-child:before{box-shadow:-1px 0 0 0;content:"";display:block;height:100%;opacity:.1;position:absolute;width:1px}:host{display:block;position:relative}#media-meta-container{max-width:100%;pointer-events:all;width:100%}#media-meta-container #select-media-input{font-size:1.071425em;max-width:100%}#media-meta-container #media-select{align-self:center;margin-right:.25em;max-width:100%}#media-meta-container .media-meta-container-inner{position:relative;width:100%}#media-meta-container .media-meta-container-inner .media-meta-labels{align-items:flex-start;box-sizing:border-box;display:flex;flex-wrap:wrap;padding:.75em;width:100%}#media-meta-container .media-meta-container-inner .media-meta-labels .optional-labels-container{align-items:center;align-self:center;display:flex;flex-wrap:wrap;font-size:1em;gap:1em;margin-left:.5em;margin-top:0;opacity:.5}#media-meta-container .media-meta-container-inner .media-meta-labels .optional-labels-container>.optional-media-label{align-items:center;display:flex;flex-wrap:nowrap;white-space:nowrap}#media-meta-container .media-meta-container-inner .media-meta-labels .optional-labels-container>.optional-media-label:empty,#media-meta-container .media-meta-container-inner .media-meta-labels .optional-labels-container>.optional-media-label[data-show=false]{display:none}#media-meta-container .media-info-btn{align-self:center;background-color:initial;border-radius:4px;color:#eee;cursor:pointer;font-size:1.5em;padding:.25em;transition:color .2s,background-color .2s}#media-meta-container .media-info-btn:hover{background-color:hsla(0,0%,46%,.5);color:#eee}#media-meta-container[data-editable=false] #delete-button,#media-meta-container[data-editable=false] #settings-button,#media-meta-container[data-editable=false] #visibility-button,#media-meta-container[data-fullscreen=true] #delete-button,#media-meta-container[data-fullscreen=true] #filter-button,#media-meta-container[data-fullscreen=true] #info-button,#media-meta-container[data-fullscreen=true] #mute-button,#media-meta-container[data-fullscreen=true] #settings-button,#media-meta-container[data-fullscreen=true] .optional-labels-container,#media-meta-container[data-has-audio=false] #mute-button{display:none}#media-meta-container[data-align-right=true] .media-meta-container-inner .media-meta-labels{justify-content:flex-end}#media-meta-container #media-info-item-settings-overlay{font-size:1.25em}#media-meta-container .label-toggles{margin-top:.25em}#media-meta-container #visibility-button{display:none}#media-meta-container .media-settings-item-label{display:inline-flex}#media-meta-container #media-setting-heading{align-items:center;display:flex;flex-wrap:wrap}#info-button[data-showing-info-text=false]{opacity:.5}#info-button[data-show=false]{display:none}#frame-images-button[data-showing-frame-images=false]{opacity:.5}#frame-images-button[data-show=false]{display:none}#filter-button[data-showing-filter=false]{opacity:.5}#filter-button[data-show=false]{display:none}'))}mn(){return this.shadowRoot.getElementById("select-media-input")}vn(){return this.shadowRoot.getElementById("visibility-button")}fn(){return this.shadowRoot.getElementById("settings-button")}yn(){return this.shadowRoot.getElementById("delete-button")}xn(){return this.shadowRoot.getElementById("mute-button")}on(){return this.xn().querySelector("icon-element")}I(){return this.shadowRoot.getElementById("media-meta-container")}wn(){return this.shadowRoot.getElementById("media-info-item-settings-overlay")}ln(){return this.shadowRoot.getElementById("settings-name-label")}Yi(){return this.shadowRoot.getElementById("media-name-input")}kn(){return this.shadowRoot.getElementById("reset-name-button")}dn(){return this.shadowRoot.getElementById("media-x-input")}cn(){return this.shadowRoot.getElementById("media-y-input")}hn(){return this.shadowRoot.getElementById("media-scale-input")}zn(){return this.shadowRoot.getElementById("reset-media-position-button")}Sn(){return this.shadowRoot.getElementById("duration-toggle")}Mn(){return this.shadowRoot.getElementById("start-time-toggle")}Cn(){return this.shadowRoot.getElementById("fps-toggle")}jn(){return this.shadowRoot.getElementById("dimensions-toggle")}Ln(){return this.shadowRoot.getElementById("codec-toggle")}En(){return this.shadowRoot.getElementById("format-toggle")}_n(){return this.shadowRoot.getElementById("bitrate-toggle")}In=()=>{this.mn().oninputvalue=()=>this.dispatchEvent(new CustomEvent("switchOrder",{bubbles:!0,composed:!0,detail:{id:this.mn().getValue(),to:this.index}})),this.vn().onclick=()=>this.dispatchEvent(new CustomEvent("togglemediavisibility",{bubbles:!0,composed:!0,detail:this.mediaId})),this.xn().onclick=()=>this.dispatchEvent(new CustomEvent("toggleMute",{bubbles:!0,composed:!0,detail:this.mediaId})),this.yn().onclick=()=>this.dispatchEvent(new CustomEvent("deleteMedia",{bubbles:!0,composed:!0,detail:this.mediaId})),this.fn().onclick=()=>{this.wn().visible=!this.wn().visible},this.kn().onclick=()=>this.dispatchEvent(new CustomEvent("updatemedianame",{bubbles:!0,composed:!0,detail:{id:this.mediaId,value:this.qi}})),this.shadowRoot.getElementById("media-x-decrease").onclick=()=>this.Tn({x:In(this.dn().getValue())-1}),this.shadowRoot.getElementById("media-x-increase").onclick=()=>this.Tn({x:In(this.dn().getValue())+1}),this.shadowRoot.getElementById("media-y-decrease").onclick=()=>this.Tn({y:In(this.cn().getValue())-1}),this.shadowRoot.getElementById("media-y-increase").onclick=()=>this.Tn({y:In(this.cn().getValue())+1}),this.shadowRoot.getElementById("media-z-decrease").onclick=()=>this.Tn({z:Math.max(0,In(this.hn().getValue())-1)}),this.shadowRoot.getElementById("media-z-increase").onclick=()=>this.Tn({z:In(this.hn().getValue())+1}),this.zn().onclick=()=>this.Tn({z:100,x:0,y:0}),this.Sn().onclick=()=>this.Pn("duration"),this.Mn().onclick=()=>this.Pn("startTime"),this.Cn().onclick=()=>this.Pn("fps"),this.jn().onclick=()=>this.Pn("dimensions"),this.Ln().onclick=()=>this.Pn("codec"),this.En().onclick=()=>this.Pn("format"),this._n().onclick=()=>this.Pn("bitrate"),this.Yi().oninputvalue=()=>this.dispatchEvent(new CustomEvent("updatemedianame",{bubbles:!0,composed:!0,detail:{id:this.mediaId,value:this.Yi().getValue()}})),this.dn().oninputvalue=()=>this.Tn({x:In(this.dn().getValue())}),this.cn().oninputvalue=()=>this.Tn({y:In(this.cn().getValue())}),this.hn().oninputvalue=()=>this.Tn({z:In(this.hn().getValue())})};Tn=e=>{const t=void 0===e.x?this.dn().getValue():e.x,i=void 0===e.y?this.cn().getValue():e.y,n=void 0===e.z?this.hn().getValue():e.z;this.dispatchEvent(new CustomEvent("updatemediaposition",{bubbles:!0,composed:!0,detail:{x:t,y:i,z:n,id:this.un}}))};Pn=e=>this.dispatchEvent(new CustomEvent("updatemedialabel",{bubbles:!0,composed:!0,detail:{id:this.un,key:e,value:!Fn(this,"startTime"===e?"start-time":e)}}));updateInfo=(e,t,i,n,a)=>{this.editable=e,this.index=a,this.mediaId=t.id,this.options=i,Pn(this,"duration",t.labelVisibility.duration),Pn(this,"start-time",t.labelVisibility.startTime),Pn(this,"fps",t.labelVisibility.fps),Pn(this,"dimensions",t.labelVisibility.dimensions),Pn(this,"codec",t.labelVisibility.codec),Pn(this,"format",t.labelVisibility.format),Pn(this,"bitrate",t.labelVisibility.bitrate),this.Xi=t.hasAudio,this.Qi=t.codec,this.nn=t.format,this.tn=t.fps,this.an=t.startTime,this.en=t.duration,this.Ji=t.bitrate,Tn(this,"dimensions",`${t.width}x${t.height}`),this.Zi=t.name,this.qi=t.originalBase,this.rn=t.base,this.Ri={x:t.x,y:t.y,z:t.z},this.an=t.startTime,this.sn=t.muted,this.Ui=t.showInfoText,this.Wi=t.showShader,this.Ki=t.showFrameImages};connectedCallback(){this.In()}}function Rn(e,t){const i=[],a=Array.from(e.querySelectorAll("input-element")).reduce(((e,n)=>{const a=n.getAttribute("name");return a&&t[`${a}`]?e[`${a}`]=n:i.push(n),e}),{});i.forEach((t=>e.removeChild(t))),Object.keys(t).forEach(((i,s)=>{const o=t[`${i}`],r=a[`${i}`],l=!(d=o.condition)||d.split("&").reduce(((e,i)=>{const n=i.trim();if(!n)return e;const a="!"===n[0],s=n.split("==").map((e=>e.trim())).filter((e=>!!e));if(s.length>1){const e=s[0],i=t[`${e}`],n=s[1].split(",").includes(i.value.toString());if(a&&n||!a&&!n)return!1}else{const i=a?n.slice(1):n,s=t[`${i}`];if(!s)return e;const o=s.value;if(a&&o||!a&&!o)return!1}return e}),!0);var d;const c=U(o,["alternatives"],[]).map(((e,t)=>({id:e,value:t,label:e})));let h="text";if(c.length&&(h="select"),"bool"===o.type&&(h="checkbox"),"float"!==o.type&&"int"!==o.type||(h="number"),r){r.value=U(o,["value"]);l!==JSON.parse(r.getAttribute("data-show"))&&r.setAttribute("data-show",l.toString())}else{const t={max:U(o,["max"]),min:U(o,["min"]),step:U(o,["step"]),value:U(o,["value"],""),label:U(o,["name"],i),options:c,type:h};c.length&&(t.overflowbreakout=!0);const a=n({tag:"input-element",attributes:{name:i,"data-show":l.toString()},properties:t});e.insertBefore(a,e.children[Number(s)])}}))}s("media-info-item",An);class Gn extends HTMLElement{O={};index=0;qi="";set fullname(e){this.Yi().help=`(${e})`}set mediaName(e){this.ln().textContent=e,this.Yi().value=e}un="";get mediaId(){return this.un}set mediaId(e){this.un!==e&&(this.un=e,this.mn().value=e)}se=[];get options(){return this.se.map((e=>({...e})))}set options(e){Ve(this.se,e)||(this.se=e.map((e=>({...e,translate:!1}))),this.mn().options=this.se)}Fn=[];get inputOptions(){return this.Fn.map((e=>({...e})))}set inputOptions(e){this.Fn=e}gn=!1;get editable(){return this.gn}set editable(e){this.gn!==e&&(this.gn=e,this.I().setAttribute("data-editable",e.toString()))}An={};get uiSettings(){return this.An}set uiSettings(e){Ve(this.An,e)||(this.An=e,this.Rn())}Gn=[];get inputs(){return this.Gn}set inputs(e){Ve(this.Gn,e)||(this.Gn=e,this.Bn())}bn=!1;get fullscreen(){return this.bn}set fullscreen(e){this.bn!==e&&(this.bn=e,this.I().setAttribute("data-fullscreen",e.toString()))}constructor(){super(),i(this,a('<div id="media-meta-container" data-fullscreen="false" bind-attr-noselect="data-no-select" data-editable="false" data-align-right="false"><div class="media-meta-container-inner"><div class="media-meta-labels"><span id="media-select"><input-element id="select-media-input" type="select" dropdowndirection="up" noinnerborders="true" nobackground="true" nomargin="true" nominheight="true"></input-element><span id="media-title"></span> </span><span id="visibility-button" class="media-info-btn"><icon-element type="eye"></icon-element></span><span id="settings-button" class="media-info-btn"><icon-element type="cog"></icon-element></span><span id="delete-button" class="media-info-btn"><icon-element type="close"></icon-element></span></div></div><content-overlay id="media-info-item-settings-overlay" visible="false" removecontentonclose="false" movable="true" scrim="false"><div slot="heading" id="media-setting-heading"><span id="settings-name-label"></span><span>&nbsp;</span><text-element key="Settings"></text-element></div><div slot="scrim" class="media-setting-bg"></div><div class="media-settings-content"><div class="media-settings-item input-grid media-name-input-container"><div class="input-control"><input-element id="media-name-input" label="Label"></input-element></div><div class="input-control btn-control"><button-element id="reset-name-button" size="4" text="Reset"></button-element></div></div><div id="reference-input-container"></div><div id="ui-input-container"></div></div></content-overlay></div>','.input-grid{align-items:flex-end;display:flex;flex-wrap:wrap;margin:0 -.5em}.input-grid .input-control{margin:.5em .5em 0}.input-grid .input-control:not(.btn-control){padding:0 0 .5em}.input-grid .btn-control{align-self:flex-end;margin-bottom:.75em}.input-grid.no-wrap{flex-wrap:nowrap}.short-input{max-width:6.18em}[slot=input-button]{font-size:85%;position:relative}[slot=input-button]:first-child:before{box-shadow:-1px 0 0 0;content:"";display:block;height:100%;opacity:.1;position:absolute;width:1px}:host{display:block;position:relative}#media-meta-container{max-width:100%;pointer-events:all;width:100%}#media-meta-container #select-media-input{font-size:1.071425em;max-width:100%}#media-meta-container #media-select{align-self:center;margin-right:.25em;max-width:100%}#media-meta-container .media-meta-container-inner{position:relative;width:100%}#media-meta-container .media-meta-container-inner .media-meta-labels{align-items:flex-start;box-sizing:border-box;display:flex;flex-wrap:wrap;padding:.75em;width:100%}#media-meta-container .media-meta-container-inner .media-meta-labels .optional-labels-container{align-items:center;align-self:center;display:flex;flex-wrap:wrap;font-size:1em;gap:1em;margin-left:.5em;margin-top:0;opacity:.5}#media-meta-container .media-meta-container-inner .media-meta-labels .optional-labels-container>.optional-media-label{align-items:center;display:flex;flex-wrap:nowrap;white-space:nowrap}#media-meta-container .media-meta-container-inner .media-meta-labels .optional-labels-container>.optional-media-label:empty,#media-meta-container .media-meta-container-inner .media-meta-labels .optional-labels-container>.optional-media-label[data-show=false]{display:none}#media-meta-container .media-info-btn{align-self:center;background-color:initial;border-radius:4px;color:#eee;cursor:pointer;font-size:1.5em;padding:.25em;transition:color .2s,background-color .2s}#media-meta-container .media-info-btn:hover{background-color:hsla(0,0%,46%,.5);color:#eee}#media-meta-container[data-editable=false] #delete-button,#media-meta-container[data-editable=false] #settings-button,#media-meta-container[data-editable=false] #visibility-button,#media-meta-container[data-has-audio=false] #mute-button{display:none}#media-meta-container[data-align-right=true] .media-meta-container-inner .media-meta-labels{justify-content:flex-end}#media-meta-container[data-fullscreen=true] #delete-button,#media-meta-container[data-fullscreen=true] #mute-button,#media-meta-container[data-fullscreen=true] #settings-button,#media-meta-container[data-fullscreen=true] .optional-labels-container{display:none}#media-meta-container #media-info-item-settings-overlay{font-size:1.25em}#media-meta-container .label-toggles{margin-top:.25em}#media-meta-container #visibility-button{display:none}#media-meta-container #reference-input-container input-element,#media-meta-container #ui-input-container input-element{display:block;margin:1em 0}#media-meta-container #ui-input-container input-element[data-show=false]{display:none}#media-meta-container #media-setting-heading{align-items:center;display:flex;flex-wrap:wrap}'))}mn(){return this.shadowRoot.getElementById("select-media-input")}vn(){return this.shadowRoot.getElementById("visibility-button")}fn(){return this.shadowRoot.getElementById("settings-button")}yn(){return this.shadowRoot.getElementById("delete-button")}I(){return this.shadowRoot.getElementById("media-meta-container")}wn(){return this.shadowRoot.getElementById("media-info-item-settings-overlay")}ln(){return this.shadowRoot.getElementById("settings-name-label")}Yi(){return this.shadowRoot.getElementById("media-name-input")}kn(){return this.shadowRoot.getElementById("reset-name-button")}Vn(){return this.shadowRoot.getElementById("reference-input-container")}Nn(){return this.shadowRoot.getElementById("ui-input-container")}Bn(){const e=e=>`${xe("Input")} ${this.Gn.length>1?e+1:""}`,t=this.inputOptions;De({container:this.shadowRoot.getElementById("reference-input-container"),array:this.Gn,getElementsFn:()=>Array.from(this.shadowRoot.querySelectorAll(".input-reference")),valueKeyFn:(e,t)=>t,elementValueKeyFn:e=>e.mediaIndex,createFn:(i,a)=>n({tag:"input-element",attributes:{id:i,type:"select",class:"input-reference"},properties:{options:t,label:e(a),mediaIndex:a,value:i||null}}),updateFn:(i,n,a)=>{i.options=t,i.label=e(a),i.value=n||null}})}Rn=()=>Rn(this.Nn(),this.uiSettings);Dn=e=>{const t=e.detail;if(!t)return;const i=t.mediaIndex,n=t.getValue();this.dispatchEvent(new CustomEvent("updateshaderinput",{bubbles:!0,composed:!0,detail:{index:i,value:n,id:this.mediaId}}))};On=e=>{const t=e.detail;if(!t)return;const i=t.getValue(),n=t.getAttribute("name");this.dispatchEvent(new CustomEvent("updateshadersetting",{bubbles:!0,composed:!0,detail:{key:n,value:i,id:this.un}}))};In=()=>{this.Vn().addEventListener("inputvalue",this.Dn),this.O.Dn=()=>{this.Vn().removeEventListener("inputvalue",this.Dn),delete this.O.Dn},this.Nn().addEventListener("inputvalue",this.On),this.O.On=()=>{this.Nn().removeEventListener("inputvalue",this.On),delete this.O.On},this.mn().oninputvalue=()=>this.dispatchEvent(new CustomEvent("switchOrder",{bubbles:!0,composed:!0,detail:{id:this.mn().getValue(),to:this.index}})),this.Yi().oninputvalue=()=>this.dispatchEvent(new CustomEvent("updatemedianame",{bubbles:!0,composed:!0,detail:{id:this.mediaId,value:this.Yi().getValue()}})),this.vn().onclick=()=>this.dispatchEvent(new CustomEvent("togglemediavisibility",{bubbles:!0,composed:!0,detail:this.mediaId})),this.yn().onclick=()=>this.dispatchEvent(new CustomEvent("deleteMedia",{bubbles:!0,composed:!0,detail:this.mediaId})),this.fn().onclick=()=>{this.wn().visible=!this.wn().visible},this.kn().onclick=()=>this.dispatchEvent(new CustomEvent("updatemedianame",{bubbles:!0,composed:!0,detail:{id:this.mediaId,value:this.qi}}))};K=()=>{Object.keys(this.O).forEach((e=>{try{this.O[`${e}`]()}catch(e){console.warn(e)}delete this.O[`${e}`]}))};updateInfo=(e,t,i,n,a)=>{this.editable=e,this.index=a,this.mediaId=t.id,this.options=i,this.uiSettings=Y(t.shaderSettings),this.inputOptions=n,this.inputs=t.shaderInputs.slice(),this.fullname=t.originalBase,this.mediaName=t.base,this.qi=t.originalBase};updateShaderInput=e=>{this.inputs=e.inputs};updateShaderSetting=e=>{this.uiSettings={...this.uiSettings,[`${e.updatedKey}`]:{...this.uiSettings[`${e.updatedKey}`],value:e.updatedValue}}};connectedCallback(){this.In()}disconnectedCallback(){this.K()}}s("filter-info-item",Gn);const Bn=e=>Array.from(e.shadowRoot.querySelectorAll(".media-info-item"));class Vn extends HTMLElement{Hn=y[0];set layout(e){this.Hn!==e&&(this.Hn=e,this.shadowRoot.getElementById("media-info-bar").setAttribute("data-layout",e),this.$n())}Un=!1;get editable(){return this.Un}set editable(e){this.Un!==e&&(this.Un=e,Bn(this).forEach((t=>{t.editable=e})))}bn=!1;get fullscreen(){return this.bn}set fullscreen(e){this.bn!==e&&(this.bn=e,Bn(this).forEach((t=>{t.fullscreen=e})),this.shadowRoot.getElementById("media-info-bar").setAttribute("data-fullscreen",e.toString()))}he=!0;get visible(){return this.he}set visible(e){this.he!==e&&(this.he=e,e?this.classList.remove("hide-media-info"):this.classList.add("hide-media-info"))}se=[];Fn=[];Wn={};constructor(){super(),i(this,a('<div id="media-info-bar" data-layout="tile" data-fullscreen="false"></div>',':host(.hide-media-info){display:none}#media-info-bar{align-items:flex-start;background-color:hsla(0,0%,7%,.9);display:flex;display:grid;flex-wrap:nowrap;grid-auto-columns:minmax(0,1fr);grid-auto-flow:column;justify-content:space-around;width:100%}#media-info-bar filter-info-item[data-visible=false],#media-info-bar media-info-item[data-visible=false]{height:0;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;width:0;z-index:-1}#media-info-bar[data-layout=split] filter-info-item[data-layout-split-hide=true],#media-info-bar[data-layout=split] media-info-item[data-layout-split-hide=true]{display:none}#media-info-bar[data-layout=split] filter-info-item[data-layout-split-index="0"],#media-info-bar[data-layout=split] media-info-item[data-layout-split-index="0"]{justify-self:flex-start}#media-info-bar[data-layout=split] filter-info-item[data-layout-split-index="1"],#media-info-bar[data-layout=split] media-info-item[data-layout-split-index="1"]{justify-self:flex-end}#media-info-bar[data-fullscreen=true]{margin-bottom:-1.5em;padding-bottom:1em}'))}$n=()=>{let e=0;const t="data-layout-split-hide",i="data-layout-split-index";Bn(this).forEach(((n,a)=>{const s=n.mediaId,o=this.Wn[`${s}`];if(!o)return n.setAttribute("data-visible","false"),n.setAttribute(t,"true"),void n.setAttribute(i,"-1");n.setAttribute("data-visible",o.toString()),"split"!==this.Hn?(n.setAttribute(t,"false"),n.setAttribute(i,a.toString())):(o&&(e+=1),n.setAttribute(t,e<=2?"false":"true"),n.setAttribute(i,(e-1).toString()))}))};updateMedia=e=>{const t=this.shadowRoot.getElementById("media-info-bar");if(0===e.length)return void(t.innerHTML="");const i=[],a=[],s={};e.forEach((e=>{s[`${e.id}`]=e.visible,i.push({id:e.id,value:e.id,label:e.base}),"filter"!==e.type&&a.push({id:e.id,value:e.id,label:e.base})})),this.se=i,this.Fn=a,this.Wn=s,De({container:this.shadowRoot.getElementById("media-info-bar"),array:e,getElementsFn:()=>Bn(this),valueKeyFn:e=>e.id,elementValueKeyFn:e=>e.mediaId,updateFn:(e,t,i)=>{e.setAttribute("data-visible",t.visible.toString()),e.updateInfo(this.Un,t,this.se,this.Fn,i)},createFn:(e,t)=>{const i=n({tag:"filter"===e.type?"filter-info-item":"media-info-item",attributes:{class:"media-info-item","data-visible":e.visible.toString()}});return i.updateInfo(this.Un,e,this.se,this.Fn,t),i}}),this.$n()};updateItem=e=>{const t=Bn(this),i=Bn(this).findIndex((t=>t.mediaId===e.id)),n=t[Number(i)];n&&(this.Wn[`${e.id}`]=e.visible,n.updateInfo(this.Un,e,this.se,this.Fn,i),this.$n())}}s("media-info-bar",Vn);class Nn extends HTMLElement{static get observedAttributes(){return[""]}O={};Kn=0;get totalDuration(){return this.Kn}set totalDuration(e){const t=te(e,0);this.Kn!==t&&(this.Kn=t,this.qn())}an=0;get startTime(){return this.an}set startTime(e){const t=te(e,0);this.an!==t&&(this.an=t,this.qn())}S=0;get endTime(){return this.S}set endTime(e){const t=te(e,0);this.S!==t&&(this.S=t,this.qn())}constructor(){super(),i(this,a('<div id="trim-controls-container"><div id="in-out-left"></div><div id="in-out-center"><div id="in-out-left-handle"><icon-element type="in"></icon-element></div><div id="in-out-center-bar"></div><div id="in-out-right-handle"><icon-element type="out"></icon-element></div></div><div id="in-out-right"></div></div>',":host{align-items:center;display:flex;width:100%}#in-out-center,#trim-controls-container{align-items:center;display:flex;flex-grow:1}#in-out-center{position:relative}#in-out-center-bar{background-color:#bbb;flex-grow:1;height:3px;width:100%}#in-out-left-handle{left:0;-webkit-transform:translate(-50%,calc(-50% + 2px));transform:translate(-50%,calc(-50% + 2px))}#in-out-left-handle,#in-out-right-handle{cursor:grab;font-size:1.25em;position:absolute;top:0}#in-out-right-handle{right:0;-webkit-transform:translate(50%,calc(-50% + 2px));transform:translate(50%,calc(-50% + 2px))}#in-out-left,#in-out-right{background-color:#111;cursor:pointer;height:3px}"))}I(){return this.shadowRoot.getElementById("trim-controls-container")}Zn(){return this.shadowRoot.getElementById("in-out-left")}Yn(){return this.shadowRoot.getElementById("in-out-right")}Xn(){return this.shadowRoot.getElementById("in-out-left-handle")}Jn(){return this.shadowRoot.getElementById("in-out-right-handle")}qn(){const e=this.an,t=this.S,i=this.Kn;this.Zn().style.minWidth=e/i*100+"%",this.Yn().style.minWidth=(i-t)/i*100+"%"}K=()=>{Object.keys(this.O).forEach((e=>{try{this.O[`${e}`]()}catch(e){}delete this.O[`${e}`]}))};connectedCallback(){this.K();const e=(e,t)=>{const i=this.S,n=this.an,a=this.Kn,s=this.I().getBoundingClientRect(),o=(t-s.left)/s.width,r=Math.min(a,Math.max(0,a*o));let l;if("updatestarttime"===e){const e=(i/a*s.width-16)/s.width*a;l=Math.min(e,r)}else{const e=(n/a*s.width+16)/s.width*a;l=Math.max(e,r)}return l},t=t=>i=>{this.dispatchEvent(new CustomEvent("dopause",{bubbles:!0,composed:!0})),this.dispatchEvent(new CustomEvent(t,{bubbles:!0,composed:!0,detail:e(t,i.clientX)}));const n=i=>{i.preventDefault(),this.dispatchEvent(new CustomEvent(t,{bubbles:!0,composed:!0,detail:e(t,i.clientX)}))},a=e=>{e.preventDefault(),document.body.style.removeProperty("user-select"),window.removeEventListener("pointermove",n),document.removeEventListener("pointerup",a),document.removeEventListener("pointerleave",a),n(e)};document.getSelection().removeAllRanges(),document.body.style.userSelect="none",window.addEventListener("pointermove",n),document.addEventListener("pointerup",a),document.addEventListener("pointerleave",a)},i=t=>{this.dispatchEvent(new CustomEvent("dopause",{bubbles:!0,composed:!0})),this.dispatchEvent(new CustomEvent("updatestarttime",{bubbles:!0,composed:!0,detail:e("updatestarttime",t.clientX)}))},n=t=>{this.dispatchEvent(new CustomEvent("dopause",{bubbles:!0,composed:!0})),this.dispatchEvent(new CustomEvent("updateendtime",{bubbles:!0,composed:!0,detail:e("updateendtime",t.clientX)}))};let a=t("updatestarttime");this.Xn().addEventListener("pointerdown",a),this.O.handleStart=()=>{this.Xn().removeEventListener("pointerdown",a),a=null,delete this.O.handleStart};let s=t("updateendtime");this.Jn().addEventListener("pointerdown",s),this.O.handleEnd=()=>{this.Jn().removeEventListener("pointerdown",s),s=null,delete this.O.handleEnd},this.Zn().addEventListener("pointerdown",i),this.O.handleLeftContainer=()=>{this.Zn().removeEventListener("pointerdown",i),delete this.O.handleLeftContainer},this.Yn().addEventListener("pointerdown",n),this.O.handleRightContainer=()=>{this.Yn().removeEventListener("pointerdown",n),delete this.O.handleRightContainer}}disconnectedCallback(){this.K()}}s("trim-controls",Nn);class Dn extends HTMLElement{O={};L="";set uiVisibility(e){if(!e)return;!1===e.inOutSlider?this.Qn().style.display="none":!0===e.inOutSlider&&this.Qn().style.removeProperty("display"),!1===e.addLogoBtn?this.ea().style.display="none":!0===e.addLogoBtn&&this.ea().style.removeProperty("display"),!1===e.addLogoBtn&&!1===e.inOutSlider?this.I().style.display="none":!0!==e.addLogoBtn&&!0!==e.inOutSlider||this.I().style.removeProperty("display");const t=this.ta();t&&(!1===e.addFilterBtn?t.style.display="none":!0===e.addFilterBtn&&t.style.removeProperty("display"))}set hasVideo(e){const t=$(e);this.I().setAttribute("data-has-video",t.toString())}Kn=0;get totalDuration(){return this.Kn}set totalDuration(e){const t=te(e,0);this.Kn!==t&&(this.Kn=t,this.ia().totalDuration=t)}an=0;get startTime(){return this.an}set startTime(e){const t=te(e,0);this.an!==t&&(this.an=t,this.ia().startTime=t)}S=0;get endTime(){return this.S}set endTime(e){const t=te(e,0);this.S!==t&&(this.S=t,this.ia().endTime=t)}na=[];get filterOptions(){return this.na}set filterOptions(e){if(l.isElectron&&e.push({value:"custom",label:"Add custom",data:{},id:"add-custom-filter"}),Ve(this.na,e))return;this.na=e;const t=this.ta();t&&(t.options=this.na)}constructor(){super(),i(this,a('<div id="secondary-controls-root" data-has-video="false"><div id="secondary-controls-left"><button-element type="link" size="2" iconsize="1.334em" icon="sticker" text="Add overlay" id="add-overlay-btn"></button-element><button-element type="link" size="2" iconsize="1.334em" icon="filter" text="Add filter" id="add-filter-select" overflowbreakout="true" directionuppaddingem="1" dropdowndirection="up"></button-element></div><div id="secondary-controls-right"><trim-controls id="trim-controls"></trim-controls></div></div>',"#secondary-controls-root{align-items:center;background-color:#212121;box-shadow:inset 0 0 0 1px #111,inset 10px 10px 5px -10px #111;box-sizing:border-box;display:flex;padding:.5em;width:100%}#secondary-controls-root[data-has-video=false] #secondary-controls-right{display:none}#secondary-controls-left{align-items:center;display:flex;gap:.75em;min-width:27em}#secondary-controls-right{align-items:center;display:flex;flex-grow:1;margin:.5em 1em}"))}ta(){return this.shadowRoot.getElementById("add-filter-select")}I(){return this.shadowRoot.getElementById("secondary-controls-root")}ea(){return this.shadowRoot.getElementById("add-overlay-btn")}Qn(){return this.shadowRoot.getElementById("secondary-controls-right")}ia(){return this.shadowRoot.getElementById("trim-controls")}K=()=>{Object.keys(this.O).forEach((e=>{try{this.O[`${e}`]()}catch(e){}delete this.O[`${e}`]}))};aa=e=>{const t=this.na.find((t=>t.value===e.detail.value));if(t){if("custom"===t.value){if(!l.isElectron)return;return this.dispatchEvent(new CustomEvent("select-custom-filter",{bubbles:!0,composed:!0}))}this.dispatchEvent(new CustomEvent("add-filter",{composed:!0,bubbles:!0,detail:t.data}))}};connectedCallback(){this.K(),this.L=Qi;const e=this.ta();"internal"!==this.L?e.remove():(this.ta().addEventListener("dropdownclick",this.aa),this.O.addFilterSelect=()=>{this.ta().removeEventListener("dropdownclick",this.aa),delete this.O.addFilterSelect}),this.ea().onclick=()=>this.dispatchEvent(new CustomEvent("selectlogo",{bubbles:!0,composed:!0})),this.O.addOverlayBtn=()=>{this.ea().onclick=null}}disconnectedCallback(){this.K()}}s("secondary-controls",Dn);const On=["video","image","hdrimage","filter","overlay",""];class Hn extends HTMLElement{mediaId="";set mediaIndex(e){this.shadowRoot.getElementById("timeline-thumbnails-main-content").setAttribute("data-even",(e%2==0).toString())}set showThumbnails(e){this.I().setAttribute("data-show-thumbs",(e||0).toString())}get showThumbnails(){return parseInt(this.I().getAttribute("data-show-thumbs"),10)}set mediaThumbnails(e){const t=this.shadowRoot.getElementById("timeline-thumbnails-main-content-images");De({container:t,array:e||[],getElementsFn:()=>Array.from(t.querySelectorAll(".timeline-thumbnail-image")),createFn:(e,t)=>n({tag:"div",attributes:{class:"timeline-thumbnail-image","data-index":t.toString(),style:`background-image:url(${e});`}}),valueKeyFn:(e,t)=>t,elementValueKeyFn:e=>parseInt(e.getAttribute("data-index"),10)})}set overlay(e){this.mediaId=e.id,this.rn=e.base,this.muted=!0,this.type="overlay",this.an=0,this.sa=0,this.tn=0,this.visible=e.visible,this.oa(),this.ra(),this.la(),this.I().setAttribute("data-has-audio","false")}set media(e){this.mediaId=e.id,this.rn=e.base,this.muted=e.muted,this.type=e.type,this.an=e.startTime,this.sa=e.duration,this.tn=e.fps,this.visible=e.visible,this.mediaThumbnails=e.thumbnails,this.oa(),this.ra(),this.la(),this.I().setAttribute("data-has-audio",(e.hasAudio||!1).toString())}set mediaOverlay(e){}O={};an=0;sa=0;tn=0;da=0;set rn(e){this.shadowRoot.getElementById("media-name").textContent=e}Kn=0;get totalDuration(){return this.Kn}set totalDuration(e){this.Kn!==e&&(this.Kn=e,this.oa())}T="";get type(){return this.T}set type(e){this.T=le(e,On,"")}sn=!0;get muted(){return this.sn}set muted(e){const t=ae(e);if(this.sn===t)return;this.sn=t;this.shadowRoot.getElementById("mute-button").icon=this.sn?"speaker-off":"speaker-medium"}he=!0;get visible(){return this.he}set visible(e){const t=ae(e);if(this.he===t)return;this.he=t;this.shadowRoot.getElementById("show-hide-button").icon=this.he?"eye":"eye-off"}constructor(){super(),i(this,a('<div id="timeline-item"><div id="timeline-item-main-content"><div class="timeline-item-controls"><button-element id="delete-button" class="delete-button" size="4" type="link" icon="close" slim="true" hoversecondary="true" title="Delete from set"></button-element><div id="media-name" class="media-name"></div><button-element id="show-hide-button" size="4" type="link" icon="eye" slim="true" hoversecondary="true" title="Toggle visibility"></button-element><button-element id="mute-button" class="video-control" size="4" type="link" icon="speaker-off" slim="true" hoversecondary="true" title="Toggle audio"></button-element><button-element id="previous-frame-button" class="video-control" size="4" type="link" icon="previous-frame" slim="true" hoversecondary="true" title="In point -1 frame"></button-element><div id="start-time" class="start-time video-control"></div><button-element id="next-frame-button" class="video-control" size="4" type="link" icon="next-frame" slim="true" hoversecondary="true" title="In point +1 frame"></button-element></div><div id="timeline-bar-container-main-content" class="timeline-bar-container"><div id="timeline-thumbnails-main-content"><div id="timeline-thumbnails-main-content-images" class="timeline-thumbnails"></div><div id="timeline-thumbnails-main-content-svg"></div></div></div></div><div id="timeline-item-children-content"><div id="media-overlay-container"></div></div></div>',':host(timeline-item){display:block}#timeline-item{box-sizing:border-box;width:100%}#timeline-item #timeline-item-main-content{align-items:center;box-shadow:inset 10px 0 5px -10px #111;display:flex;padding:0 0 0 .5em}#timeline-item[data-type=video] .video-control{opacity:1;pointer-events:all}#timeline-item[data-type=audio] #media-name,#timeline-item[data-type=filter] #media-name,#timeline-item[data-type=video] #media-name,#timeline-item[data-type=video] .timeline-thumbnails{cursor:grab}#timeline-item[data-type=overlay] .timeline-thumbnail-image{background-size:contain}#timeline-item[data-type=filter] #filter-button,#timeline-item[data-type=overlay] #filter-button{opacity:.25;pointer-events:none}#timeline-item[data-show-thumbs="1"] .timeline-thumbnails{background-color:initial;box-shadow:none!important}#timeline-item[data-show-thumbs="1"] .timeline-thumbnails[data-even=true]{background-color:initial;box-shadow:inset 0 1px 0 0 #40465c,inset 0 -1px 0 0 #303445}#timeline-item[data-show-thumbs="0"] .timeline-thumbnail-image{background-size:0 0}#timeline-item[data-has-audio=false] #mute-button{opacity:.25;pointer-events:none}#timeline-item[data-type=filter] .timeline-thumbnails,#timeline-item[data-type=overlay] .timeline-thumbnails{align-items:center;background-color:#484d62!important;box-shadow:inset 0 1px 0 0 #505773,inset 0 -1px 0 0 #2d303f!important;display:flex;flex-wrap:nowrap;height:100%;position:relative}.timeline-item-child{align-items:center;background-color:#111;box-shadow:inset 10px 0 5px -10px #111;box-sizing:border-box;display:flex;padding:0;width:100%}.timeline-item-child[data-type=video] .video-control{opacity:1;pointer-events:all}.timeline-item-child[data-type=video] .timeline-thumbnails{cursor:grab}.timeline-item-child .media-name{opacity:.85}.video-control{opacity:.25;pointer-events:none}.timeline-item-controls{align-items:center;box-shadow:inset -1px 0 0 #111;display:flex;min-width:27em;padding:.5em 1em .5em 0}.media-name{flex-grow:1;font-size:75%;overflow:hidden;position:relative;text-overflow:ellipsis;white-space:nowrap;width:17em}.delete-button{margin-left:.125em;margin-right:.25em}.start-time{font-size:75%;text-align:center;width:3em}.timeline-bar-container{flex-grow:1;height:2.5em;overflow:hidden;position:relative;width:100%}.timeline-thumbnails{align-items:center;background-color:#484d62;box-shadow:inset 0 1px 0 0 #505773,inset 0 -1px 0 0 #2d303f;display:flex;flex-wrap:nowrap;height:100%;position:relative}.timeline-thumbnails[data-even=true]{background-color:#3a4452;box-shadow:inset 0 1px 0 0 #40465c,inset 0 -1px 0 0 #303445}.timeline-thumbnail-image{background-position:50% 50%;background-size:cover;height:calc(100% - 2px);pointer-events:none;width:6.6666666667%}#timeline-item-children-content .timeline-item-controls{min-width:26.5em;padding-left:1em}#timeline-item-children-content .timeline-item-controls .child-icon{opacity:.32;-webkit-transform:scaleY(-1) translateY(.05em);transform:scaleY(-1) translateY(.05em)}#timeline-thumbnails-main-content,#timeline-thumbnails-main-content-images{height:100%;left:0;position:absolute;top:0;width:100%}#timeline-thumbnails-main-content-svg,.graph-svg{height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.graph-svg{-webkit-transform:scaleY(-1);transform:scaleY(-1)}.graph-svg polyline{fill:none;stroke:red;stroke-width:2px}'))}I(){return this.shadowRoot.getElementById("timeline-item")}ca(){return this.shadowRoot.getElementById("media-overlay-container")}ha(){return this.shadowRoot.querySelector(".media-overlay.timeline-item-child")}ua=()=>this.shadowRoot.getElementById("timeline-bar-container-main-content").offsetWidth;ra(){var e;this.shadowRoot.getElementById("start-time").textContent="video"===this.T?`${e=this.an,e<0?"-":e>0?"+":""}${J(Math.abs(this.an),this.tn||30)}`:"00.00"}la(){this.I().setAttribute("data-type",this.T);const e=this.shadowRoot.getElementById("media-name");""===this.T||"overlay"===this.T?e.removeAttribute("draggable"):e.setAttribute("draggable","true")}ma=(e,t,i)=>{"video"===this.T&&(this.dispatchEvent(new CustomEvent("dopause",{bubbles:!0,composed:!0})),this.dispatchEvent(new CustomEvent("updatemediastarttime",{bubbles:!0,composed:!0,detail:{id:t,time:e,duration:i,width:this.ua()}})))};oa=()=>{const e=this.ha(),t=e?e.getAttribute("data-type"):"",i=e?e.startTime:0,n=e?e.duration:0;if("video"===this.T||"video"===t){const t=this.shadowRoot.getElementById("timeline-thumbnails-main-content"),a=e?e.querySelector(".timeline-thumbnails"):null;this.Kn?(t.style.left=(this.an||0)/this.Kn*100+"%",t.style.width=`${Math.max(0,Math.min(100,this.sa/this.Kn*100))}%`,a&&(a.style.left=(i||0)/this.Kn*100+"%",a.style.width=`${Math.max(0,Math.min(100,n/this.Kn*100))}%`)):(t.style.left="0%",t.style.width="100%",a&&(a.style.left="0%",a.style.width="100%"))}};pa=()=>{const e="overlay"===this.T?"deleteOverlay":"deleteMedia";this.dispatchEvent(new CustomEvent(e,{bubbles:!0,composed:!0,detail:this.mediaId}))};ga=()=>{const e="overlay"===this.T?"toggle-overlay-visibility":"togglemediavisibility";this.dispatchEvent(new CustomEvent(e,{bubbles:!0,composed:!0,detail:this.mediaId}))};ba=()=>this.dispatchEvent(new CustomEvent("toggleMute",{bubbles:!0,composed:!0,detail:this.mediaId}));va=()=>{"video"===this.T&&this.dispatchEvent(new CustomEvent("updatemediastartframe",{bubbles:!0,composed:!0,detail:{id:this.mediaId,forward:!1,duration:this.sa,width:this.ua()}}))};fa=()=>{"video"===this.T&&this.dispatchEvent(new CustomEvent("updatemediastartframe",{bubbles:!0,composed:!0,detail:{id:this.mediaId,forward:!0,duration:this.sa,width:this.ua()}}))};In=()=>{this.K(),this.shadowRoot.getElementById("delete-button").addEventListener("click",this.pa),this.O.deleteClick=()=>{this.shadowRoot.getElementById("delete-button").removeEventListener("click",this.pa),delete this.O.deleteClick},this.shadowRoot.getElementById("show-hide-button").addEventListener("click",this.ga),this.O.visClick=()=>{this.shadowRoot.getElementById("show-hide-button").removeEventListener("click",this.ga),delete this.O.visClick},this.shadowRoot.getElementById("mute-button").addEventListener("click",this.ba),this.O.muteClick=()=>{this.shadowRoot.getElementById("mute-button").removeEventListener("click",this.ba),delete this.O.muteClick},this.shadowRoot.getElementById("previous-frame-button").addEventListener("click",this.va),this.O.prevFrame=()=>{this.shadowRoot.getElementById("previous-frame-button").removeEventListener("click",this.va),delete this.O.prevFrame},this.shadowRoot.getElementById("next-frame-button").addEventListener("click",this.fa),this.O.nextFrame=()=>{this.shadowRoot.getElementById("next-frame-button").removeEventListener("click",this.fa),delete this.O.nextFrame},this.shadowRoot.getElementById("timeline-bar-container-main-content").onpointerdown=e=>{if(e.preventDefault(),"video"!==this.T)return;document.body.style.userSelect="none",document.getSelection().removeAllRanges();const t=this.shadowRoot.getElementById("timeline-bar-container-main-content").getBoundingClientRect(),i=e=>e-t.left;this.da=i(e.clientX);const n=e=>{if(e.preventDefault(),"video"!==this.T)return;const n=i(e.clientX),a=this.da-n,s=Math.min(.99,a/t.width),o=this.Kn*s;this.da=n,this.ma(this.an-o,this.mediaId,this.sa)},a=e=>{e.preventDefault(),this.da=0,document.body.style.removeProperty("user-select"),window.removeEventListener("pointermove",n),document.removeEventListener("pointerup",a),document.removeEventListener("pointerleave",a)};window.addEventListener("pointermove",n),document.addEventListener("pointerup",a),document.addEventListener("pointerleave",a)};const e=this.shadowRoot.getElementById("media-name");e.ondragstart=e=>{""!==this.T&&"overlay"!==this.T||(e.preventDefault(),e.stopPropagation()),document.getSelection().removeAllRanges()},e.ondragover=e=>{e.dataTransfer.dropEffect="move",e.preventDefault()},e.ondragend=e=>{if(""===this.T||"overlay"===this.T)return e.preventDefault(),void e.stopPropagation();this.dispatchEvent(new CustomEvent("icat-timeline-item-reorder-end",{bubbles:!0,composed:!0,detail:{element:this,x:e.clientX,y:e.clientY}}))}};K=()=>{Object.keys(this.O).forEach((e=>{try{this.O[`${e}`]()}catch(e){}delete this.O[`${e}`]}))};updateMediaStartTime=e=>{this.an=e,this.oa(),this.ra()};connectedCallback(){this.K(),this.ra(),this.la(),this.oa(),this.In()}disconnectedCallback(){this.K()}}s("timeline-item",Hn);class $n extends HTMLElement{set hasVideo(e){this.shadowRoot.getElementById("timelines-container-root").setAttribute("data-has-video",$(e).toString())}ya=0;get progress(){return this.ya}set progress(e){const t=te(e,0);this.ya!==t&&(this.ya=t,this.xa())}Kn=0;get totalDuration(){return this.Kn}set totalDuration(e){const t=te(e,0);this.Kn!==t&&(this.Kn=t,this.xa(),this.wa(),this.ka().forEach((e=>{e.totalDuration=t})))}an=0;get startTime(){return this.an}set startTime(e){const t=te(e,0);this.an!==t&&(this.an=t,this.wa())}S=0;get endTime(){return this.S}set endTime(e){const t=te(e,0);this.S!==t&&(this.S=t,this.wa())}za=0;get maxHeight(){return this.za}set maxHeight(e){const t=Math.min(3e3,Math.max(e,0));if(this.za===t)return;this.Sa().style.height=`${t}px`}Ma=0;get showThumbnails(){return this.Ma}set showThumbnails(e){this.Ma!==e&&(this.Ma=e,this.ka().forEach((t=>{t.showThumbnails=e})))}constructor(){super(),i(this,a('<div id="timelines-container-root"><div id="timeline-items-wrapper"><div id="timeline-overlay-items-wrapper"></div><div id="timeline-media-items-wrapper"></div></div><div id="timeline-mask"><div id="timeline-mask-left"></div><div id="timeline-mask-center"><div id="playhead"></div></div><div id="timeline-mask-right"></div></div></div>',"#timelines-container-root{background-color:#212121;position:relative;width:100%}#timelines-container-root #timeline-items-wrapper{box-sizing:border-box;max-height:15em;overflow:overlay;padding-right:1.5em}#timelines-container-root #timeline-media-items-wrapper timeline-item:nth-child(odd),#timelines-container-root #timeline-overlay-items-wrapper timeline-item:nth-child(odd){background-color:#2b2b2b}#timelines-container-root #timeline-media-items-wrapper timeline-item.overlay-timeline,#timelines-container-root #timeline-overlay-items-wrapper timeline-item.overlay-timeline{background-color:#212121}#timelines-container-root[data-has-video=false] #timeline-mask{display:none}#timeline-mask{align-items:center;display:flex;height:100%;left:28.5em;pointer-events:none;position:absolute;top:0;width:calc(100% - 30em)}#timeline-mask-left,#timeline-mask-right{background-color:#111;height:100%;opacity:.75;position:relative;top:0;width:0}#timeline-mask-center{flex-grow:1;height:100%;position:relative}#playhead{box-shadow:inset 1px 0 0 #fff;height:100%;pointer-events:none;position:absolute;width:100%}"))}Sa(){return this.shadowRoot.getElementById("timeline-items-wrapper")}Ca(){return this.shadowRoot.getElementById("timeline-overlay-items-wrapper")}ja(){return this.shadowRoot.getElementById("timeline-media-items-wrapper")}ka(e=""){return Array.from(this.shadowRoot.querySelectorAll(`timeline-item${e}`))}xa(){this.shadowRoot.getElementById("playhead").style.transform=`translateX(${100*this.ya}%)`}wa(){const e=this.an,t=this.S,i=this.Kn;this.shadowRoot.getElementById("timeline-mask-left").style.minWidth=e/i*100+"%",this.shadowRoot.getElementById("timeline-mask-right").style.minWidth=(i-t)/i*100+"%"}updateOverlays=e=>{De({container:this.Ca(),array:e,getElementsFn:()=>this.ka(".overlay-timeline"),valueKeyFn:e=>e.id,elementValueKeyFn:e=>e.id,createFn:(e,t)=>n({tag:"timeline-item",attributes:{id:e.id},properties:{className:"overlay-timeline",overlay:e,mediaIndex:t}}),updateFn:(e,t,i)=>{e.overlay=t,e.mediaIndex=i}})};updateOverlay=e=>{const t=this.ka(".overlay-timeline").find((t=>t.id===e.id));t&&(t.overlay=e)};updateMedia=e=>{De({container:this.ja(),array:e,getElementsFn:()=>this.ka(".media-timeline"),valueKeyFn:e=>e.id,elementValueKeyFn:e=>e.id,createFn:(e,t)=>n({tag:"timeline-item",attributes:{id:e.id},properties:{className:"media-timeline",media:e,totalDuration:this.Kn,mediaIndex:t,showThumbnails:this.showThumbnails}}),updateFn:(e,t,i)=>{e.media=t,e.totalDuration=this.Kn,e.mediaIndex=i,e.showThumbnails=this.showThumbnails}})};updateItem=e=>{const t=this.ka(".media-timeline").find((t=>t.id===e.id));t&&(t.media=e)};updateMediaOverlay=(e,t)=>{const i=this.ka(".media-timeline").find((t=>t.id===e));i&&(i.mediaOverlay=t)};updateMediaStartTime=(e,t)=>{const i=this.ka(".media-timeline").find((t=>t.id===e));i&&i.updateMediaStartTime(t)};updateMediaThumbnails=(e,t)=>{const i=this.ka(".media-timeline").find((t=>t.id===e));i&&(i.mediaThumbnails=t)};getElementAtPoint=(e,t)=>{const i=this.shadowRoot.elementFromPoint(e,t);return i&&"function"==typeof i.getElementAtPoint?i.getElementAtPoint(e,t):i};connectedCallback(){this.wa(),this.xa(),this.addEventListener("icat-timeline-item-reorder-end",(e=>{const t=e.detail.element,i=this.ka(".media-timeline").map((e=>e.id)).slice();if(i.length<2)return;if(!t||t&&!t.id)return;const n=t.id,a=i.findIndex((e=>e===n));if(-1===a)return;const s=e.detail.x,o=e.detail.y,r=this.getElementAtPoint(s,o);if(!r||r&&!r.id)return;const l=r.id,d=i.findIndex((e=>e===l));if(-1===d||d===a)return;const c=r.getBoundingClientRect(),h=a<d?0:1,u=d+((o<c.top+c.height/2?-1:0)+h);u<0||u===a||(i.splice(a,1),i.splice(u,0,n),this.dispatchEvent(new CustomEvent("icat-update-media-order",{bubbles:!0,composed:!0,detail:i})))}))}}s("timelines-container",$n);const Un=[{value:0,displayValue:!0,label:"Fit",id:"fit"},{value:100,label:100,id:"100"},{value:200,label:200,id:"200"},{value:300,label:300,id:"300"},{value:400,label:400,id:"400"},{value:500,label:500,id:"500"},{value:600,label:600,id:"600"},{value:700,label:700,id:"700"},{value:800,label:800,id:"800"},{value:900,label:900,id:"900"},{value:1e3,label:1e3,id:"1000"}],Wn=[{value:.25,label:".25x",id:"0.25"},{value:.5,label:".5x",id:"0.5"},{value:.75,label:".75x",id:"0.75"},{value:1,label:"1x",id:"1"},{value:1.25,label:"1.25x",id:"1.25"},{value:1.5,label:"1.5x",id:"1.5"},{value:1.75,label:"1.75x",id:"1.75"},{value:2,label:"2x",id:"2"}],Kn=["grid","antialias"];class qn extends HTMLElement{controller;O={};La=Kn.slice();set uiVisibility(e){if(!e)return;let t=!1;const i=this.I();if(!1===e.gridSelect){const e=this.La.indexOf("grid");e>-1&&(this.La.splice(e,1),t=!0)}else!0===e.gridSelect&&-1===this.La.indexOf("grid")&&(this.La.push("grid"),t=!0);if(!1===e.speedSelect){const e=this.La.indexOf("speed");e>-1&&(this.La.splice(e,1),t=!0)}else!0===e.speedSelect&&-1===this.La.indexOf("speed")&&(this.La.push("speed"),t=!0);if(!1===e.speedSelect?this.Ea().style.display="none":!0===e.speedSelect&&this.Ea().style.removeProperty("display"),!1===e.antiAliasSelect){const e=this.La.indexOf("antialias");e>-1&&(this.La.splice(e,1),t=!0)}else!0===e.antiAliasSelect&&-1===this.La.indexOf("antialias")&&(this.La.push("antialias"),t=!0);!1===e.controlBar?i.style.display="none":e.controlBar&&i.style.removeProperty("display"),!1===e.zoomSelect?this._a().style.display="none":!0===e.zoomSelect&&this._a().style.removeProperty("display"),!1===e.loopButton?this.Ia().style.display="none":!0===e.loopButton&&this.Ia().style.removeProperty("display"),!1===e.fullscreenButton?this.Ta().style.display="none":!0===e.loopButton&&this.Ta().style.removeProperty("display"),i.setAttribute("data-in-out-slider",(!!e.inOutSlider).toString()),i.setAttribute("data-timeline-in-out-slider",(!!e.timelineInOutSlider).toString()),void 0===e.inOutSlider&&void 0===e.addLogoBtn||(this.Pa().uiVisibility=e,!1===e.inOutSlider&&!1===e.addLogoBtn?(this.Fa().style.minWidth="unset",this.Aa().style.display="none",this.Ra().style.display="none"):(this.Fa().style.removeProperty("min-width"),this.Aa().style.removeProperty("display"),this.Ra().style.removeProperty("display"))),i.setAttribute("data-timelines",(!!e.timeline).toString()),!1===e.timeline?(this.zi().style.display="none",this.Ga().style.display="none"):!0===e.timeline&&(this.Ga().style.removeProperty("display"),this.zi().style.removeProperty("display")),i.setAttribute("data-show-overlays",(!!e.addLogoBtn).toString()),i.setAttribute("data-show-filters",(!!e.addFilterBtn).toString()),t&&this.Ba()}Va=!1;get looping(){return this.Va}set looping(e){const t=$(e);t!==this.Va&&(this.Va=t,this.Na())}Da=!1;get playing(){return this.Da}set playing(e){const t=$(e);t!==this.Da&&(this.Da=t,this.Na())}Oa=!1;get boomerang(){return this.Oa}set boomerang(e){const t=$(e);t!==this.Oa&&(this.Oa=t,this.Na())}Ha=100;get fitScale(){return this.Ha}set fitScale(e){const t=te(e,100);t!==this.Ha&&(this.Ha=t,this.$a())}Ua=100;get minScale(){return this.Ua}set minScale(e){const t=te(e,100);t!==this.Ua&&(this.Ua=t,this.$a())}Wa=100;get zoom(){return this.Wa}set zoom(e){const t=te(e,100);t!==this.Wa&&(this.Wa=t,this._a().value=t)}Ka=1;get speed(){return this.Ka}set speed(e){const t=te(e,1);t!==this.Ka&&(this.Ka=t,this.Ea().value=t)}qa=0;get grid(){return this.qa}set grid(e){const t=te(e,0);t!==this.qa&&(this.qa=t,this.Ba())}Za=!1;get antiAlias(){return this.Za}set antiAlias(e){const t=$(e);t!==this.Za&&(this.Za=t,this.Ba())}ya=0;get progress(){return this.ya}set progress(e){const t=te(e,0);t!==this.ya&&(this.ya=t,this.xa())}Kn=0;get totalDuration(){return this.Kn}set totalDuration(e){const t=te(e,0);t!==this.Kn&&(this.Kn=t,this.Ya(),this.Xa(),this.xa(),this.Pa().totalDuration=t,this.Ga().totalDuration=t,this.Ja().totalDuration=t)}an=0;get startTime(){return this.an}set startTime(e){const t=te(e,0);t!==this.an&&(this.an=t,this.Ya(),this.Pa().startTime=t,this.Ga().startTime=t,this.Ja().startTime=t)}S=0;get endTime(){return this.S}set endTime(e){const t=te(e,0);t!==this.S&&(this.S=t,this.Xa(),this.xa(),this.Pa().endTime=t,this.Ga().endTime=t,this.Ja().endTime=t)}Ma=0;get showThumbnails(){return this.Ma}set showThumbnails(e){e!==this.Ma&&(this.Ma=e,this.Ba(),this.Ga().showThumbnails=e)}Qa=!1;get seeking(){return this.Qa}set seeking(e){e!==this.Qa&&(this.Qa=e,this.I().setAttribute("data-seeking",e.toString()))}set fullscreen(e){this.I().setAttribute("data-fullscreen",e.toString())}constructor(){super(),i(this,a('<div id="media-controls" data-seeking="false" data-fullscreen="false"><div id="main-control-bar"><div id="media-controls-buttons"><button-element size="4" iconsize="1em" customstylesdropdown=\'{"fontSize":"75%"}\' slim="true" type="outline" icon="chevron-up" nodropdownicon="true" id="settings-btn" flyoutdirection="right" hoversecondary="true" overflowbreakout="true" directionuppaddingem="1" dropdowndirection="up"></button-element><input-element value="100" aligncenter="true" prefixicon="magnifying-glass" prefixiconsize="1.33em" suffixicon="chevron-down" noinnerborders="true" nomargin="true" nominheight="true" slimpadding="true" dropdowndirection="up" classes="very-short-input" tighticons="true" prefixclass="medium-icon" step="1" min="1" type="number" id="zoom-input" overflowbreakout="true" directionuppaddingem="1"></input-element><input-element value="1" aligncenter="true" prefixicon="speed" suffixicon="chevron-down" noinnerborders="true" nomargin="true" nominheight="true" slimpadding="true" dropdowndirection="up" classes="very-short-input" tighticons="true" prefixclass="medium-icon" type="select" id="speed-input" overflowbreakout="true" directionuppaddingem="1"></input-element><button-element size="4" iconsize="1em" slim="true" type="outline" icon="fullscreen" id="fullscreen-btn" hoversecondary="true"></button-element><div id="video-controls"><button-element size="4" iconsize="1em" slim="true" type="outline" icon="previous-frame" id="previous-frame-btn" hoversecondary="true"></button-element><button-element size="4" iconsize="1em" slim="true" type="primary" icon="play" id="play-pause-btn" overflowbreakout="true" directionuppaddingem="1" dropdowndirection="up"></button-element><button-element size="4" iconsize="1em" slim="true" type="primary" icon="chevron-down" nodropdownicon="true" id="play-pause-dropdown-btn"></button-element><button-element size="4" iconsize="1em" slim="true" type="outline" icon="next-frame" id="next-frame-btn" hoversecondary="true"></button-element></div><div id="time-duration-display"><div id="time-display"></div><div>/</div><div id="duration-display"></div></div></div><div id="time-controls-container"><trim-controls id="inline-trim-controls"></trim-controls><div id="progress-bar-container"><div id="progress-bar-left-container"></div><div id="progress-bar-center-container"><div id="progress-bar-progress"></div><div id="progress-bar-handle"></div></div><div id="progress-bar-right-container"></div></div></div></div><div id="secondary-playback-controls"><secondary-controls id="secondary-controls"></secondary-controls><timelines-container id="timelines-container"></timelines-container></div><div id="drag-handle"></div></div>',':host{display:block;width:100%}#media-controls{position:relative}#media-controls[data-has-video=false] #speed-input,#media-controls[data-has-video=false] #time-controls-container,#media-controls[data-has-video=false] #time-duration-display,#media-controls[data-has-video=false] #video-controls{display:none}#media-controls[data-seeking=true] #video-controls{opacity:.5;pointer-events:none}#media-controls[data-timeline-in-out-slider=true] #time-controls-container #inline-trim-controls{display:flex}#media-controls[data-is-embed=true] #drag-handle,#media-controls[data-is-embed=true] #progress-bar-left-container,#media-controls[data-is-embed=true] #progress-bar-right-container,#media-controls[data-is-embed=true] #secondary-playback-controls,#media-controls[data-show-overlays=false][data-show-filters=false] #secondary-controls{display:none}#media-controls[data-is-embed=true][data-timeline-in-out-slider=true] #progress-bar-left-container,#media-controls[data-is-embed=true][data-timeline-in-out-slider=true] #progress-bar-right-container{display:block!important}#media-controls[data-fullscreen=true] #drag-handle{display:none}#drag-handle{box-shadow:inset 0 3px 0 #76b900;cursor:row-resize;height:15px;opacity:0;position:absolute;right:0;top:0;transition:opacity .2s;width:100%}#drag-handle.active,#drag-handle:hover{opacity:1}#main-control-bar{align-items:center;background-color:#424242;box-shadow:inset 1px 1px 0 #111,inset 10px 0 5px -10px #2b2b2b;box-sizing:border-box;display:flex;padding:.5em;width:100%}#media-controls-buttons{align-items:center;display:flex;min-width:27em}#media-controls-buttons>*{margin:0 .25em}#media-controls-buttons>input-element{font-size:.75em}#video-controls{align-items:center;display:flex;transition:opacity .2s}#speed-input,#zoom-input{max-width:6em}#play-pause-btn{margin-left:.125em;margin-right:1px}#play-pause-dropdown-btn{margin-left:0}#first-frame-btn,#next-frame-btn,#play-pause-dropdown-btn,#previous-frame-btn{margin-right:.125em}#last-frame-btn,#next-frame-btn,#play-pause-btn,#previous-frame-btn{margin-left:.125em}#time-duration-display{align-items:center;border-radius:4px;box-shadow:inset 0 0 0 1px hsla(0,0%,93%,.15);display:flex;flex-grow:1;font-size:75%;gap:.25em;justify-content:center;padding:0 .5em}#time-duration-display>*{opacity:.5}#time-duration-display #time-display{opacity:1}#time-controls-container{align-items:center;display:flex;flex-direction:column;flex-grow:1;gap:.75em;margin-left:1em;padding-right:1em}#inline-trim-controls{display:none;height:1em}#progress-bar-container{align-items:center;display:flex;width:100%}#progress-bar-left-container{background:#76b900;height:3px;opacity:.38}#progress-bar-right-container{background:#111;height:3px;opacity:.38}#progress-bar-center-container{cursor:pointer;flex-grow:1;height:3px;padding:7px 0;position:relative}#progress-bar-center-container:before{background:#111;content:"";display:block;height:3px;left:0;position:absolute;top:7px;width:100%}#progress-bar-progress{background:#76b900;height:3px;position:relative;-webkit-transform-origin:0 0;transform-origin:0 0;width:100%}#progress-bar-handle{height:100%;left:0;pointer-events:none;position:absolute;top:50%;width:100%}#progress-bar-handle:after{background:#111;border-radius:50%;box-shadow:inset 0 0 0 2px #76b900;content:"";cursor:grab;display:block;height:1em;pointer-events:all;position:relative;-webkit-transform:translate(-50%,calc(-50% - 1px));transform:translate(-50%,calc(-50% - 1px));width:1em}'))}es(){return this.shadowRoot.getElementById("play-pause-btn")}Ia(){return this.shadowRoot.getElementById("play-pause-dropdown-btn")}ts(){return this.shadowRoot.getElementById("previous-frame-btn")}ns(){return this.shadowRoot.getElementById("next-frame-btn")}_a(){return this.shadowRoot.getElementById("zoom-input")}Ea(){return this.shadowRoot.getElementById("speed-input")}fn(){return this.shadowRoot.getElementById("settings-btn")}ss(){return this.shadowRoot.getElementById("duration-display")}os(){return this.shadowRoot.getElementById("time-display")}Aa(){return this.shadowRoot.getElementById("progress-bar-left-container")}Ra(){return this.shadowRoot.getElementById("progress-bar-right-container")}rs(){return this.shadowRoot.getElementById("progress-bar-progress")}ls(){return this.shadowRoot.getElementById("progress-bar-handle")}ds(){return this.shadowRoot.getElementById("progress-bar-center-container")}Pa(){return this.shadowRoot.getElementById("secondary-controls")}Ja(){return this.shadowRoot.getElementById("inline-trim-controls")}Ga(){return this.shadowRoot.getElementById("timelines-container")}zi(){return this.shadowRoot.getElementById("drag-handle")}cs(){return this.shadowRoot.getElementById("main-control-bar")}I(){return this.shadowRoot.getElementById("media-controls")}Ta(){return this.shadowRoot.getElementById("fullscreen-btn")}Fa(){return this.shadowRoot.getElementById("media-controls-buttons")}Ya=()=>{this.Aa().style.minWidth=this.an/this.totalDuration*100+"%"};Xa=()=>{const e=this.Ra(),t=this.totalDuration;e.style.minWidth=(t-this.S)/t*100+"%"};xa(){const e=this.rs(),t=this.ls(),i=this.ya;e.style.transform=`scale(${i}, 1)`,t.style.transform=`translateX(${100*i}%)`,this.Ga().progress=i}Na(){const e=this.es(),t=this.Va,i=this.Da,n=this.Oa;let a="1em";i?e.icon="pause":t?(e.icon="loop",a="0.85em"):e.icon=n?"mirror":"play",e.iconsize=a}$a(){const e=this._a(),t=Un.slice();t[0]={value:Math.ceil(this.Ha),displayValue:!0,label:"Fit",id:"fit"},e.options=t}Ba(){const e=this.qa,t=this.Za,i=this.fn(),n=[];if(0===this.La.length)return i.options=[],void(i.style.display="none");i.style.removeProperty("display"),this.La.indexOf("thumbnails")>-1&&n.push({id:"thumbs",label:"Show thumbnails",value:this.Ma,onclick:"show-thumbnails-update",displayLabelValue:!0,options:[{label:"Off",value:0,id:"off"},{label:"On",value:1,id:"on"}]}),this.La.indexOf("grid")>-1&&n.push({id:"grid",label:"Grid overlay",value:e,onclick:"grid-update",displayLabelValue:!0,options:[{label:"None",value:0,id:"none"},{label:"Small",value:1,id:"small"},{label:"Medium",value:2,id:"medium"},{label:"Large",value:3,id:"large"}]}),this.La.indexOf("antialias")>-1&&n.push({id:"antialias",label:"Filtering mode",value:t,onclick:"antialias-update",displayLabelValue:!0,options:[{label:"Nearest Neighbor",value:!1,id:"off"},{label:"Bilinear",value:!0,id:"on"}]}),i.options=n}K=()=>{Object.keys(this.O).forEach((e=>{try{this.O[`${e}`]()}catch(e){}delete this.O[`${e}`]}))};hs=e=>this.dispatchEvent(new CustomEvent("antialiasupdate",{bubbles:!0,composed:!0,detail:e.detail.value}));us=e=>{this.dispatchEvent(new CustomEvent("setgrid",{bubbles:!0,composed:!0,detail:e.detail.value}))};ps=e=>this.dispatchEvent(new CustomEvent("show-thumbnails",{bubbles:!0,composed:!0,detail:e.detail.value}));gs=()=>this.dispatchEvent(new CustomEvent("gonextframe",{bubbles:!0,composed:!0}));bs=()=>this.dispatchEvent(new CustomEvent("gopreviousframe",{bubbles:!0,composed:!0}));vs=e=>{e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("setlooping",{bubbles:!0,composed:!0,detail:!0})),this.dispatchEvent(new CustomEvent("setboomerang",{bubbles:!0,composed:!0,detail:!1})),this.dispatchEvent(new CustomEvent("doplay",{bubbles:!0,composed:!0}))};fs=e=>{e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("setlooping",{bubbles:!0,composed:!0,detail:!1})),this.dispatchEvent(new CustomEvent("setboomerang",{bubbles:!0,composed:!0,detail:!1})),this.dispatchEvent(new CustomEvent("doplay",{bubbles:!0,composed:!0}))};ys=wn((()=>{const e=this._a(),t=Math.ceil(this.Ua);let i=e.getValue();if(i<1)return e.value=-2,void(e.value=this.Wa);i<t&&(i=t),this.dispatchEvent(new CustomEvent("zoomupdate",{bubbles:!0,composed:!0,detail:i})),e.getValue()!==this.Wa&&(e.value=this.Wa)}));xs=()=>this.dispatchEvent(new CustomEvent("speedupdate",{bubbles:!0,composed:!0,detail:this.Ea().getValue()}));ws=e=>{const t=this.an,i=this.S-t,n=this.ds().getBoundingClientRect(),a=(e.clientX-n.left)/n.width,s=i*a+t;this.dispatchEvent(new CustomEvent("updatetime",{bubbles:!0,composed:!0,detail:{time:s,updatePlayers:!0}}));const o=(e,n=!1)=>{e.preventDefault();const a=this.ds().getBoundingClientRect(),s=(e.clientX-a.left)/a.width,o=i*s+t;this.dispatchEvent(new CustomEvent("updatetime",{bubbles:!0,composed:!0,detail:{time:o,updatePlayers:n}}))},r=e=>{e.preventDefault(),document.body.style.removeProperty("user-select"),window.removeEventListener("pointermove",o),document.removeEventListener("pointerup",r),document.removeEventListener("pointerleave",r),o(e,!0)};document.getSelection().removeAllRanges(),document.body.style.userSelect="none",window.addEventListener("pointermove",o),document.addEventListener("pointerup",r),document.addEventListener("pointerleave",r)};ks=e=>{e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("togglefullscreen",{bubbles:!0,composed:!0}))};zs=e=>{let t=0;const i=this.Pa().offsetHeight,n=this.cs().offsetHeight,a=e=>{const a=this.controller.getBoundingClientRect(),s=(a.height-(e.clientY+t-a.top))/a.height*a.height-(i+n);this.Ga().maxHeight=s};this.zi().classList.add("active");const s=this.getBoundingClientRect();t=s.top-e.clientY,a(e);const o=e=>{e.preventDefault(),a(e)},r=e=>{e.preventDefault(),this.zi().classList.remove("active"),document.body.style.removeProperty("user-select"),window.removeEventListener("pointermove",o),document.removeEventListener("pointerup",r),document.removeEventListener("pointerleave",r),o(e)};document.getSelection().removeAllRanges(),document.body.style.userSelect="none",window.addEventListener("pointermove",o),document.addEventListener("pointerup",r),document.addEventListener("pointerleave",r)};setIsEmbed=e=>{e?this.La=this.La.filter((e=>"thumbnails"!==e)):-1===this.La.indexOf("thumbnails")&&this.La.unshift("thumbnails"),this.Ba(),this.I().setAttribute("data-is-embed",e.toString())};updateMedia=e=>{const t=e.reduce(((e,t)=>e||"video"===t.type),!1),i=this.I();i&&i.setAttribute("data-has-video",t.toString());const n=this.Pa();n&&(n.hasVideo=t);const a=this.Ga();a&&(a.hasVideo=t,a.updateMedia(e))};updateItem=e=>{const t=this.Ga();t&&t.updateItem(e)};updateMediaOverlay=(e,t)=>{const i=this.Ga();i&&i.updateMediaOverlay(e,t)};updateMediaThumbnails=(e,t)=>this.Ga().updateMediaThumbnails(e,t);setFiltersList=e=>{this.Pa().filterOptions=e};setTimeText=e=>{this.os().textContent=e};setDurationText=e=>{this.ss().textContent=e};getElementAtPoint=(e,t)=>{const i=this.shadowRoot.elementFromPoint(e,t);return i&&"function"==typeof i.getElementAtPoint?i.getElementAtPoint(e,t):i};updateOverlays=e=>{const t=this.Ga();t&&t.updateOverlays(e)};updateOverlay=e=>{const t=this.Ga();t&&t.updateOverlay(e)};connectedCallback(){this.K(),this.$a(),this.xa();const e=this.es();e.customStyles={borderRadius:"2px 0 0 2px"},e.onclick=()=>{this.Da?this.dispatchEvent(new CustomEvent("dopause",{bubbles:!0,composed:!0})):this.dispatchEvent(new CustomEvent("doplay",{bubbles:!0,composed:!0}))};const t=this.Ia();t.customStyles={borderRadius:"0 2px 2px 0",paddingLeft:"0",paddingRight:"0"},t.customStylesDropdown={fontSize:"0.75em"},t.options=[{label:"Play",icon:"play",iconsize:"1.125em",onclick:"play-normal",id:"normal"},{label:"Loop",icon:"loop",onclick:"play-loop",id:"loop"}],t.addEventListener("play-normal",this.fs),this.O.playNormal=()=>{this.Ia().removeEventListener("play-normal",this.fs),delete this.O.playNormal},t.addEventListener("play-loop",this.vs),this.O.playLoop=()=>{this.Ia().removeEventListener("play-loop",this.vs),delete this.O.playLoop},this.ts().addEventListener("click",this.bs),this.O.gopreviousframe=()=>{this.ts().removeEventListener("click",this.bs),delete this.O.gopreviousframe},this.ns().addEventListener("click",this.gs),this.O.gonextframe=()=>{this.ns().removeEventListener("click",this.gs),delete this.O.gonextframe},this.Ba();const i=this.fn();i.addEventListener("show-thumbnails-update",this.ps),this.O.showThumbUpdate=()=>{this.fn().removeEventListener("show-thumbnails-update",this.ps),delete this.O.showThumbUpdate},i.addEventListener("grid-update",this.us),this.O.gridUpdate=()=>{this.fn().removeEventListener("grid-update",this.us),delete this.O.gridUpdate},i.addEventListener("antialias-update",this.hs),this.O.antialiasUpdate=()=>{this.fn().removeEventListener("antialias-update",this.hs),delete this.O.antialiasUpdate};const n=this._a();n.addEventListener("inputvalue",this.ys),this.O.zoomInputHandler=()=>{this._a().removeEventListener("inputvalue",this.ys),delete this.O.zoomInputHandler},n.addEventListener("input-blur",this.ys),this.O.zoomBlurHandler=()=>{this._a().removeEventListener("input-blur",this.ys),delete this.O.zoomBlurHandler};const a=this.Ea();a.options=Y(Wn),a.value=this.Ka,a.addEventListener("inputvalue",this.xs),this.O.speedInputHandler=()=>{this.Ea().removeEventListener("inputvalue",this.xs),delete this.O.speedInputHandler},a.addEventListener("input-blur",this.xs),this.O.speedBlurHandler=()=>{this.Ea().removeEventListener("input-blur",this.xs),delete this.O.speedBlurHandler},this.ds().addEventListener("pointerdown",this.ws),this.O.progressHandler=()=>{this.ds().removeEventListener("pointerdown",this.ws),delete this.O.progressHandler},this.zi().addEventListener("pointerdown",this.zs),this.O.dragHandler=()=>{this.zi().removeEventListener("pointerdown",this.zs),delete this.O.dragHandler},this.Ta().addEventListener("click",this.ks),this.O.fullscreenHandler=()=>{this.Ta().removeEventListener("click",this.ks),delete this.O.fullscreenHandler}}disconnectedCallback(){this.K()}}s("media-controls",qn);const Zn=15;class Yn extends HTMLElement{ua=0;Ss=0;Fi;ve=!1;get active(){return this.ve}set active(e){this.ve!==e&&(this.ve=e,this.I().setAttribute("data-active",e.toString()))}Ms=!0;get hideEdit(){return this.Ms}set hideEdit(e){this.Ms!==e&&(this.Ms=e,this.I().setAttribute("data-editable",(!e).toString()))}Cs={displayWidth:0,height:0,width:0,size:0,modified:0,created:0,id:"",base:"",path:"",extension:"",src:"",x:0,y:0,visible:!0,type:"overlay"};get logo(){return this.Cs}set logo(e){if(Ve(this.Cs,e))return;const t=this.Cs.src;if(this.Cs=e,this.shadowRoot.getElementById("logo-container").setAttribute("data-show",e.visible.toString()),e&&e.src){if(t!==e.src){this.js().src=e.src}this.N()}}Ls="";get styleString(){return this.Ls}set styleString(e){this.Ls=e,this.I().setAttribute("style",e)}constructor(){super(),i(this,a('<div id="logo-container" data-show="false"><div id="image-container" draggable="false" data-active="false" data-editable="false"><img id="logo-image" draggable="false"><div class="logo-controls"><div class="resizers"><div class="resizer-handle" id="top-left-handle"></div><div class="resizer-handle" id="top-right-handle"></div><div class="resizer-handle" id="bottom-left-handle"></div><div class="resizer-handle" id="bottom-right-handle"></div></div></div></div></div>',':host(logo-element){display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}#logo-container{height:100%;pointer-events:none;width:100%}#logo-container[data-show=false]{display:none}#logo-container #image-container{display:inline-flex;max-width:95%;pointer-events:none;position:relative}#logo-container #image-container img{display:block;pointer-events:none;width:100%}#logo-container #image-container .logo-controls{height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}#logo-container #image-container .logo-controls .resizers{height:100%;pointer-events:none;position:relative;width:100%}#logo-container #image-container .logo-controls .resizers:before{box-shadow:0 0 0 1px #fff;content:"";height:100%;left:0;opacity:0;position:absolute;top:0;transition:opacity .2s;width:100%}#logo-container #image-container .logo-controls .resizers .resizer-handle{background:#fff;border-radius:50%;height:10px;opacity:0;pointer-events:none;position:absolute;transition:opacity .2s;width:10px}#logo-container #image-container .logo-controls .resizers .resizer-handle#top-left-handle{cursor:nwse-resize;left:-5px;top:-5px}#logo-container #image-container .logo-controls .resizers .resizer-handle#top-right-handle{cursor:nesw-resize;right:-5px;top:-5px}#logo-container #image-container .logo-controls .resizers .resizer-handle#bottom-left-handle{bottom:-5px;cursor:nesw-resize;left:-5px}#logo-container #image-container .logo-controls .resizers .resizer-handle#bottom-right-handle{bottom:-5px;cursor:nwse-resize;right:-5px}#logo-container #image-container[data-editable=true]{pointer-events:all}#logo-container #image-container[data-editable=true] img{cursor:move;pointer-events:all}#logo-container #image-container[data-editable=true]:hover .logo-controls .resizers:before,#logo-container #image-container[data-editable=true][data-active=true] .logo-controls .resizers:before{opacity:1}#logo-container #image-container[data-editable=true]:hover .logo-controls .resizers .resizer-handle,#logo-container #image-container[data-editable=true][data-active=true] .logo-controls .resizers .resizer-handle{opacity:1;pointer-events:all}#logo-container #image-container[data-editable=true] .resizers:hover:before{opacity:1}#logo-container #image-container[data-editable=true] .resizers:hover .resizer-handle{opacity:1;pointer-events:all}'))}Es(){return this.shadowRoot.getElementById("top-left-handle")}_s(){return this.shadowRoot.getElementById("top-right-handle")}Is(){return this.shadowRoot.getElementById("bottom-left-handle")}Ts(){return this.shadowRoot.getElementById("bottom-right-handle")}I(){return this.shadowRoot.getElementById("image-container")}js(){return this.shadowRoot.getElementById("logo-image")}Ps=()=>{this.ua=this.offsetWidth,this.Ss=this.offsetHeight,this.N()};Fs(e,t,i,n,a){let s=e;let o=e/100*this.ua/t*i/this.Ss,r=a,l=n;return o>.85&&(o=.85,s=this.Ss*o/this.ua*(t/i)*100),r+100*o>100&&(r=100-100*o),l+s>100&&(l=100-s),{yPercentage:r,xPercentage:l,widthPercentage:Math.max(.001,s),heightPercentage:o}}N(){const e=this.logo,t=this.Fs(e.displayWidth,e.width,e.height,e.x,e.y);this.styleString=`width:${t.widthPercentage}%;left:${t.xPercentage}%;top:${t.yPercentage}%;`}connectedCallback(){this.Fi=new ResizeObserver((()=>this.Ps())),this.Fi.observe(this),this.Ps();const e=this.js();e.onpointerdown=t=>{let i=0,n=0;const a=t=>{const a=this.getBoundingClientRect(),s=e.getBoundingClientRect();let o=t.clientX+i-a.left,r=t.clientY+n-a.top;o+s.width+a.left>a.right?(i-=o-(a.right-a.left-s.width),o=t.clientX+i-a.left):o<0&&(i-=o,o=t.clientX+i-a.left),r+s.height+a.top>a.bottom?(n-=r-(a.bottom-a.top-s.height),r=t.clientY+n-a.top):r<0&&(n-=r,r=t.clientY+n-a.top);const l=o/a.width*100,d=r/a.height*100;this.dispatchEvent(new CustomEvent("updateOverlayValues",{bubbles:!0,composed:!0,detail:{id:this.logo.id,x:l,y:d}}))};this.active=!0;const s=e.getBoundingClientRect();i=s.left-t.clientX,n=s.top-t.clientY,a(t);const o=e=>{e.preventDefault(),a(e)},r=e=>{e.preventDefault(),this.active=!1,document.body.style.removeProperty("user-select"),window.removeEventListener("pointermove",o),document.removeEventListener("pointerup",r),document.removeEventListener("pointerleave",r),o(e)};document.getSelection().removeAllRanges(),document.body.style.userSelect="none",window.addEventListener("pointermove",o),document.addEventListener("pointerup",r),document.addEventListener("pointerleave",r)};this.Es().onpointerdown=t=>{const i=t=>{const i=this.getBoundingClientRect(),n=e.getBoundingClientRect(),a=Math.max(0,t.clientX+0-i.left),s=Math.max(0,t.clientY+0-i.top),o=i.right-n.left,r=i.bottom-n.top,l=Math.min(Math.max(10,n.right-i.left-a),o),d=Math.min(Math.max(10,n.bottom-i.top-s),r),c=Math.min(l/n.width,d/n.height),h=n.width*c/i.width,u=(n.right-i.left-n.width*c)/i.width,m=(n.bottom-i.top-n.height*c)/i.height;if(Number.isNaN(u)||!Number.isFinite(u)||Number.isNaN(m)||!Number.isFinite(m)||Number.isNaN(h))return;const p=this.logo,g=h*i.width,b=p.height/(p.width/g);g<Zn||b<Zn||this.dispatchEvent(new CustomEvent("updateOverlayValues",{bubbles:!0,composed:!0,detail:{id:this.logo.id,x:100*u,y:100*m,displayWidth:100*h}}))};this.active=!0,i(t);const n=e=>{e.preventDefault(),i(e)},a=e=>{e.preventDefault(),this.active=!1,document.body.style.removeProperty("user-select"),window.removeEventListener("pointermove",n),document.removeEventListener("pointerup",a),document.removeEventListener("pointerleave",a),n(e)};document.getSelection().removeAllRanges(),document.body.style.userSelect="none",window.addEventListener("pointermove",n),document.addEventListener("pointerup",a),document.addEventListener("pointerleave",a)};this._s().onpointerdown=t=>{const i=t=>{const i=this.getBoundingClientRect(),n=e.getBoundingClientRect(),a=Math.max(0,t.clientY+0-i.top),s=i.right-n.left,o=i.bottom-n.top,r=Math.min(Math.max(10,t.clientX+0-n.left),s),l=Math.min(Math.max(10,n.bottom-i.top-a),o),d=Math.min(r/n.width,l/n.height),c=n.width*d/i.width,h=Math.max(0,(n.bottom-i.top-n.height*d)/i.height);if(Number.isNaN(h)||!Number.isFinite(h)||Number.isNaN(c))return;const u=this.logo,m=c*i.width,p=u.height/(u.width/m);m<Zn||p<Zn||this.dispatchEvent(new CustomEvent("updateOverlayValues",{bubbles:!0,composed:!0,detail:{id:this.logo.id,y:100*h,displayWidth:100*c}}))};this.active=!0,i(t);const n=e=>{e.preventDefault(),i(e)},a=e=>{e.preventDefault(),this.active=!1,document.body.style.removeProperty("user-select"),window.removeEventListener("pointermove",n),document.removeEventListener("pointerup",a),document.removeEventListener("pointerleave",a),n(e)};document.getSelection().removeAllRanges(),document.body.style.userSelect="none",window.addEventListener("pointermove",n),document.addEventListener("pointerup",a),document.addEventListener("pointerleave",a)};this.Is().onpointerdown=t=>{const i=t=>{const i=this.getBoundingClientRect(),n=e.getBoundingClientRect(),a=Math.max(0,t.clientX+0-i.left),s=i.right-n.left,o=i.bottom-n.top,r=Math.min(Math.max(10,n.right-i.left-a),s),l=Math.min(Math.max(10,t.clientY+0-n.top),o),d=Math.min(r/n.width,l/n.height),c=n.width*d/i.width,h=Math.max(0,(n.right-i.left-n.width*d)/i.width);if(Number.isNaN(h)||!Number.isFinite(h)||Number.isNaN(c))return;const u=this.logo,m=c*i.width,p=u.height/(u.width/m);m<Zn||p<Zn||this.dispatchEvent(new CustomEvent("updateOverlayValues",{bubbles:!0,composed:!0,detail:{id:this.logo.id,x:100*h,displayWidth:100*c}}))};this.active=!0,i(t);const n=e=>{e.preventDefault(),i(e)},a=e=>{e.preventDefault(),this.active=!1,document.body.style.removeProperty("user-select"),window.removeEventListener("pointermove",n),document.removeEventListener("pointerup",a),document.removeEventListener("pointerleave",a),n(e)};document.getSelection().removeAllRanges(),document.body.style.userSelect="none",window.addEventListener("pointermove",n),document.addEventListener("pointerup",a),document.addEventListener("pointerleave",a)};this.Ts().onpointerdown=t=>{const i=t=>{const i=this.getBoundingClientRect(),n=e.getBoundingClientRect(),a=i.right-n.left,s=i.bottom-n.top,o=Math.min(Math.max(10,t.clientX+0-n.left),a),r=Math.min(Math.max(10,t.clientY+0-n.top),s),l=Math.min(o/n.width,r/n.height),d=n.width*l/i.width;if(Number.isNaN(d))return;const c=this.logo,h=d*i.width,u=c.height/(c.width/h);h<Zn||u<Zn||this.dispatchEvent(new CustomEvent("updateOverlayValues",{bubbles:!0,composed:!0,detail:{id:this.logo.id,displayWidth:100*d}}))};this.active=!0,i(t);const n=e=>{e.preventDefault(),i(e)},a=e=>{e.preventDefault(),this.active=!1,document.body.style.removeProperty("user-select"),window.removeEventListener("pointermove",n),document.removeEventListener("pointerup",a),document.removeEventListener("pointerleave",a),n(e)};document.getSelection().removeAllRanges(),document.body.style.userSelect="none",window.addEventListener("pointermove",n),document.addEventListener("pointerup",a),document.addEventListener("pointerleave",a)}}disconnectedCallback(){this.Fi.disconnect(),this.Fi=null}}s("logo-element",Yn);class Xn extends HTMLElement{static get observedAttributes(){return["visible"]}setId="";set setName(e){this.As().textContent=e}get visible(){return this.Rs().visible}set visible(e){this.Rs().visible=e}constructor(){super(),i(this,a('<div id="confirm-delete-set"><content-overlay id="content-overlay" removecontentonclose="false" scrim="true" movable="false"><div slot="heading" id="heading"><text-element key="Remove comparison set?"></text-element><div id="heading-set-name"></div></div><div class="content"><text-element key="Your media clips will remain in the Media panel, but anything you have done in this comparison set will be lost. Do you want to remove this set?"></text-element></div><div slot="footer"><button-element type="outline" text="Cancel" id="cancel-btn"></button-element><button-element type="danger" id="delete-btn" text="Remove"></button-element></div></content-overlay></div>',":host{height:100%;pointer-events:none;position:absolute;width:100%}#confirm-delete-set{height:100%;position:relative;width:100%}#content-overlay{position:absolute}[slot=footer]{align-items:center;display:flex;gap:.5em}.content{font-size:88%}#heading-set-name{font-size:70%;font-style:italic;opacity:.7}"))}As(){return this.shadowRoot.getElementById("heading-set-name")}Rs(){return this.shadowRoot.getElementById("content-overlay")}Gs(){return this.shadowRoot.getElementById("cancel-btn")}yn(){return this.shadowRoot.getElementById("delete-btn")}attributeChangedCallback(e,t,i){"visible"===e&&(this.visible=i)}connectedCallback(){this.Gs().onclick=()=>{this.visible=!1},this.yn().onclick=()=>{this.visible=!1,this.dispatchEvent(new CustomEvent("delete-set",{bubbles:!0,composed:!0,detail:this.setId}))}}}s("confirm-delete-set",Xn);class Jn extends HTMLElement{static get observedAttributes(){return["visible"]}hi;get media(){return this.hi}set media(e){Ve(this.hi,e)||(this.hi=e,this.As().textContent=e.name)}he=!1;get visible(){return this.he}set visible(e){this.he!==e&&(this.he=e,this.Rs().visible=e)}constructor(){super(),i(this,a('<div id="confirm-delete-media"><content-overlay id="content-overlay" removecontentonclose="false" scrim="true" movable="false"><div slot="heading" id="heading"><text-element key="Remove media?"></text-element><div id="heading-media-name"></div></div><div class="content"><text-element key="This will remove the media from all comparison sets in this project. Do you want to remove this media?"></text-element></div><div slot="footer"><button-element type="outline" text="Cancel" id="cancel-btn"></button-element><button-element type="danger" id="delete-btn" text="Remove"></button-element></div></content-overlay></div>',":host{height:100%;pointer-events:none;position:absolute;width:100%}#confirm-delete-media{height:100%;position:relative;width:100%}#content-overlay{position:absolute}[slot=footer]{align-items:center;display:flex;gap:.5em}.content{font-size:88%}#heading-media-name{font-size:70%;font-style:italic;opacity:.7}"))}As(){return this.shadowRoot.getElementById("heading-media-name")}Rs(){return this.shadowRoot.getElementById("content-overlay")}Gs(){return this.shadowRoot.getElementById("cancel-btn")}yn(){return this.shadowRoot.getElementById("delete-btn")}attributeChangedCallback(e,t,i){"visible"===e&&(this.visible=i)}connectedCallback(){this.Gs().onclick=()=>{this.visible=!1},this.yn().onclick=()=>{this.visible=!1,this.dispatchEvent(new CustomEvent("delete-media-in-all-sets",{bubbles:!0,composed:!0,detail:this.hi}))}}}s("confirm-delete-media",Jn);class Qn extends HTMLElement{static get observedAttributes(){return["visible","showheadingbg","hasoverflowcontent","headingtheme","maxheight"]}he=!1;get visible(){return this.he}set visible(e){const t=$(e);t!==this.he&&(this.he=t,this.dispatchEvent(new CustomEvent("accordianvisibilitychange",{bubbles:!0,composed:!0,detail:this})),t?this.Bs("chevron-up"):this.Bs("chevron-down"),this.shadowRoot.getElementById("accordian-container").setAttribute("data-visible",t.toString()))}Vs=!1;get showHeadingBg(){return this.Vs}set showHeadingBg(e){const t=$(e);t!==this.Vs&&(this.Vs=t,this.shadowRoot.getElementById("accordian-container").setAttribute("data-heading-bg",t.toString()))}Ns=!1;get hasOverflowContent(){return this.Ns}set hasOverflowContent(e){const t=$(e);t!==this.Ns&&(this.Ns=t,this.shadowRoot.getElementById("accordian-container").setAttribute("data-has-overflow-content",t.toString()))}Ds="normal";get headingTheme(){return this.Ds}set headingTheme(e){e!==this.Ds&&(this.Ds=e,this.shadowRoot.getElementById("accordian-container").setAttribute("data-heading-theme",e))}Os="100vh";get maxheight(){return this.Os}set maxheight(e){e!==this.Os&&(this.Os=e,this.shadowRoot.getElementById("content").style.maxHeight=this.Os)}constructor(){super(),i(this,a('<div id="accordian-container" data-heading-theme="normal" data-has-overflow-content="false" data-visible="false"><div id="heading"><slot name="heading"></slot><div id="heading-arrow"><icon-element id="accordian-heading-icon" type="chevron-down"></icon-element></div></div><div id="content" style="max-height: 100vh;"><slot></slot></div></div>',":host{display:block}#heading{align-items:center;cursor:pointer;display:flex;justify-content:space-between}#heading-arrow{padding:.5em}#content{max-height:0;opacity:0;overflow:hidden;pointer-events:none;-webkit-transform:scaleY(0);transform:scaleY(0);-webkit-transform-origin:0 0;transform-origin:0 0;transition:max-height .1s,opacity .1s,-webkit-transform .1s;transition:transform .1s,max-height .1s,opacity .1s;transition:transform .1s,max-height .1s,opacity .1s,-webkit-transform .1s}[data-visible=false] #content{max-height:0!important}[data-visible=true] #content{max-height:100vh;opacity:1;overflow:auto;pointer-events:all;-webkit-transform:scale(1);transform:scale(1)}[data-visible=true][data-has-overflow-content=true] #content{overflow:visible}[data-heading-bg=true] #heading{background-color:#424242;border-radius:2px;margin-bottom:0;padding:.25em 0 .25em .5em;transition:margin-bottom .2s}[data-heading-bg=true] #content{padding:0 .5em}[data-heading-bg=true][data-visible=true] #heading{margin-bottom:.5em}[data-heading-bg=true][data-heading-theme=light] #heading{background-color:#626262}"))}Bs=e=>{this.shadowRoot.getElementById("accordian-heading-icon").type=e};toggle=()=>{this.visible=!this.visible};attributeChangedCallback(e,t,i){"visible"===e?this.visible=i:"showheadingbg"===e?this.showHeadingBg=i:"hasoverflowcontent"===e?this.hasOverflowContent=i:"headingtheme"===e?this.headingTheme=i:"maxheight"===e&&(this.maxheight=i)}connectedCallback(){this.shadowRoot.getElementById("heading").onclick=this.toggle}}s("accordian-content",Qn);class ea extends HTMLElement{static get observedAttributes(){return["visible"]}Hs=[];di=[];he=!1;get visible(){return this.he}set visible(e){const t=$(e);t!==this.he&&(this.he=t,this.$s().value=null,this.Us([]),this.Rs().visible=t)}constructor(){super(),i(this,a('<div id="ab-modal-container" data-folders-count="0"><content-overlay id="ab-content-overlay" removecontentonclose="false" visible="false"><div slot="heading"><text-element key="Automatically create sets"></text-element></div><div class="content"><div class="info"><text-element key="Select folders with matching file names and comparison sets will automatically be created."></text-element></div><div class="info"><text-element key="Files without matching names are marked in red and will be omitted."></text-element></div><div class="no-folder-message"><text-element key="No folders selected"></text-element></div><div id="folder-list"></div></div><div slot="footer" class="footer-buttons"><div class="footer-left"><button-element text="Select folder" id="add-folder-btn"></button-element></div><button-element text="Cancel" type="outline" id="close-btn"></button-element><button-element text="Import" id="import-btn"></button-element></div></content-overlay><input id="folder-input" type="file" multiple="true" directory="true" webkitdirectory="true"></div>','@charset "UTF-8";.footer-buttons{align-items:center;display:flex;justify-content:space-between;margin:0 -.5em;width:calc(100% + 1em)}.footer-buttons>*{margin:0 .5em}.footer-left{flex-grow:1}.no-folder-message{display:none;font-style:italic;margin:1em 0 .5em;opacity:.5}#import-btn{transition:opacity .2s}#ab-modal-container[data-folders-count="0"] .no-folder-message{display:block}#ab-modal-container[data-folders-count="0"] #import-btn{opacity:.5;pointer-events:none}.red{color:#d90007}.folder{margin:1.5em 0}.folder .folder-name-container{align-items:center;background-color:#303030;border-radius:2px;-webkit-column-gap:1em;column-gap:1em;display:flex;padding:.25em .5em;width:100%}.folder .folder-name{flex-grow:1}.folder .folder-files{margin:.125em 1em}.folder .folder-files .folder-file{align-items:center;display:flex;opacity:.75}.folder .folder-files .folder-file:before{content:"";display:block;margin-right:.25em}.folder .folder-files .folder-file[data-match=false],.folder[data-size="1"]{color:#d90007}.folder-stats{-webkit-column-gap:.75em;column-gap:.75em;display:flex}#folder-input{height:0;opacity:0;position:absolute;width:0;z-index:-1}'))}$s(){return this.shadowRoot.getElementById("folder-input")}Rs(){return this.shadowRoot.getElementById("ab-content-overlay")}Ws=()=>this.$s().click();Ks=()=>{const e=[];this.di.forEach((t=>{if(t.files.length>1){const i=[];t.files.forEach((e=>{i.push({file:e.file,size:e.size,modified:e.modified,parsedPath:{...e.parsedPath}})})),e.push({name:t.name,files:i})}})),this.dispatchEvent(new CustomEvent("importabsets",{bubbles:!0,composed:!0,detail:e})),this.visible=!1};Us=e=>{if(!Array.isArray(e)||Ve(e,this.di))return;this.di=e,this.shadowRoot.getElementById("ab-modal-container").setAttribute("data-folders-count",this.di.length.toString());const t=this.shadowRoot.getElementById("folder-list");De({container:t,array:this.di,getElementsFn:()=>Array.from(t.children),valueKeyFn:e=>e.name,elementValueKeyFn:e=>e.getAttribute("data-name"),createFn:e=>n({tag:"accordian-content",attributes:{"data-path":e.name,"data-size":e.files.length.toString(),class:"folder",visible:"false"},properties:{maxheight:"unset"},children:[n({tag:"div",attributes:{class:"folder-name-container",slot:"heading"},children:[n({tag:"div",attributes:{class:"folder-name"},properties:{textContent:e.name}})]}),n({tag:"div",attributes:{class:"folder-files"},children:e.files.map((e=>n({tag:"div",attributes:{class:"folder-file"},properties:{textContent:e.parsedPath.path}})))})]}),updateFn:(e,t)=>e.setAttribute("data-size",t.files.length.toString())})};attributeChangedCallback(e,t,i){"visible"===e&&(this.visible=i)}connectedCallback(){this.shadowRoot.getElementById("add-folder-btn").onclick=this.Ws,this.shadowRoot.getElementById("import-btn").onclick=this.Ks,this.shadowRoot.getElementById("close-btn").onclick=()=>{this.visible=!1};this.$s().onchange=()=>{const e=this.$s();Array.from(e.files).forEach((e=>{const t=ke(e.path||e.webkitRelativePath||e.name);if(-1===v.indexOf(t.ext))return;const i=e.size,n=new Date(e.lastModified).getTime();-1===this.Hs.findIndex((e=>e.size===i&&e.modified===n&&e.parsedPath.path===t.path))&&this.Hs.push({file:e,size:i,modified:n,parsedPath:t})})),e.value=null;const t=[];this.Hs.forEach((e=>{const i=t.findIndex((t=>t.name===e.parsedPath.name));-1===i?t.push({name:e.parsedPath.name,files:[e]}):t[Number(i)].files.push(e)})),this.Us(t)}}}s("ab-modal",ea);class ta extends HTMLElement{static get observedAttributes(){return["exposure","gamma","visible"]}qs=1;get exposure(){return this.qs}set exposure(e){const t=te(e,1);t!==this.qs&&(this.qs=t,this.Zs().value=t)}Ys=1;get gamma(){return this.Ys}set gamma(e){const t=te(e,1);t!==this.Ys&&(this.Ys=t,this.Xs().value=t)}Js=!1;get integerScaling(){return this.Js}set integerScaling(e){const t=$(e);t!==this.Js&&(this.Js=t,this.Qs().value=t)}he=!1;get visible(){return this.he}set visible(e){const t=$(e),i=this.Rs();t===this.he&&i.visible===t||(this.he=t,t&&l.isElectron&&this.eo(),i.visible=t)}constructor(){super(),i(this,a('<div id="app-settings"><content-overlay id="content-overlay" removecontentonclose="false" scrim="false" movable="true"><div slot="heading"><text-element key="Settings"></text-element></div><div class="content"><input-element type="number" value="1" step="0.01" min="0.01" max="10" label="Exposure" id="exposure-input"><button-element slot="input-button" text="Reset" size="4" style="margin-left: 0.5em;" id="reset-exposure-btn"></button-element></input-element><input-element type="number" value="1" step="0.01" min="0.01" max="4" label="Gamma" id="gamma-input"><button-element slot="input-button" text="Reset" size="4" style="margin-left: 0.5em;" id="reset-gamma-btn"></button-element></input-element><input-element type="toggle" value="false" label="Integer scaling" id="integer-scaling-input"></input-element><div id="local-shaders"></div></div></content-overlay></div>',"#app-settings .content{font-size:88%;margin-bottom:1em;margin-top:-1em}#app-settings input-element{display:block;margin:1em 0;width:100%}#app-settings #exposure-input{margin-top:0}#app-settings .local-shaders-heading{margin-top:2em}#app-settings .local-shader-item{align-items:center;border-radius:4px;display:flex;margin:.5em 0;padding:.5em}#app-settings .local-shader-item:nth-child(2n){background-color:#424242}#app-settings .local-shader-item .local-shader-item-name{display:flex;flex-direction:column;flex-grow:1;line-height:125%}#app-settings .local-shader-item .local-shader-item-name span{font-size:90%}#app-settings .local-shader-item .local-shader-item-name small{font-size:75%;font-style:italic;line-height:100%;opacity:.5}#app-settings .local-shader-item button-element{margin-left:.5em}"))}Zs(){return this.shadowRoot.getElementById("exposure-input")}Xs(){return this.shadowRoot.getElementById("gamma-input")}Qs(){return this.shadowRoot.getElementById("integer-scaling-input")}Rs(){return this.shadowRoot.getElementById("content-overlay")}io(){return this.shadowRoot.getElementById("local-shaders")}no=(e,t)=>{e.preventDefault(),e.stopPropagation();let i=t;void 0===i&&(i=this.Zs().getValue()),this.dispatchEvent(new CustomEvent("updateexposure",{bubbles:!0,composed:!0,detail:i}))};ao=e=>this.no(e,1);so=(e,t)=>{e.preventDefault(),e.stopPropagation();let i=t;(void 0===i||Number.isNaN(i))&&(i=this.Xs().getValue()),this.dispatchEvent(new CustomEvent("updategamma",{bubbles:!0,composed:!0,detail:i}))};oo=e=>this.so(e,1);ro=()=>{this.dispatchEvent(new CustomEvent("updateintegerscaling",{bubbles:!0,composed:!0,detail:this.Qs().getValue()}))};eo(){const e=this.io();if(e.innerHTML="",!l.isElectron)return;const i=He.get();i.length&&(e.appendChild(n({tag:"text-element",attributes:{class:"local-shaders-heading",key:"Local shaders"}})),i.forEach((i=>{const a=t.sanitize(U(i,["path"],"")),s=t.sanitize(U(i,["data","name"],"")),o=t.sanitize(U(i,["filename"],"")),r=n({tag:"button-element",attributes:{text:"Reload",size:"2"}});r.onclick=()=>He.reload(a).then((()=>this.eo()));const l=n({tag:"button-element",attributes:{type:"outline",text:"Delete",size:"2"}});l.onclick=()=>{He.remove(a),this.eo()},e.appendChild(n({tag:"div",attributes:{class:"local-shader-item"},children:[n({tag:"div",attributes:{class:"local-shader-item-name"},children:[n({tag:"span",properties:{textContent:s}}),n({tag:"small",properties:{textContent:o}})]}),l,r]}))})))}attributeChangedCallback(e,t,i){"exposure"===e?this.exposure=i:"gamma"===e?this.gamma=i:"visible"===e&&(this.visible=i)}connectedCallback(){this.eo(),this.shadowRoot.getElementById("reset-exposure-btn").onclick=this.ao,this.shadowRoot.getElementById("reset-gamma-btn").onclick=this.oo,this.Zs().oninputvalue=this.no,this.Xs().oninputvalue=this.so,this.Qs().oninputvalue=this.ro,this.Rs().oncontentoverlayclose=()=>{this.visible=!1}}}s("app-settings",ta);class ia extends HTMLElement{constructor(){super(),i(this,a('<div class="shortcuts"><canvas id="gpu-info-canvas"></canvas><p class="title"><text-element key="Shortcuts"></text-element></p><section class="shortcut-details shortcuts-section"><div class="common-section"><div class="key-section"><p class="key-text"><text-element key="Play/Pause"></text-element></p><p class="key"><span class="key-btn"><text-element key="Space"></text-element></span></p></div><div class="key-section"><p class="key-text"><text-element key="Change playback speed"></text-element></p><p class="key"><span class="key-btn">[</span> <span class="key-label">/</span> <span class="key-btn">]</span></p></div><div class="key-section"><p class="key-text"><text-element key="Reset playback speed"></text-element></p><p class="key"><span class="key-btn"><text-element key="P"></text-element></span></p></div><div class="key-section"><p class="key-text"><text-element key="Frame advance"></text-element></p><p class="key"><span class="key-btn">&#8592;</span> <span class="key-label">/</span> <span class="key-btn">&#8594;</span></p></div><div class="key-section"><p class="key-text"><text-element key="Toggle fullscreen"></text-element></p><p class="key"><span class="key-btn"><text-element key="CTRL + f"></text-element></span></p></div><div class="key-section"><p class="key-text"><text-element key="Solo media"></text-element></p><p class="key"><span class="key-btn"><text-element key="CTRL + 1-9"></text-element></span></p></div></div><div class="common-section"><div class="key-section"><p class="key-text"><text-element key="Pan view"></text-element></p><p class="key"><icon-element type="mouse"></icon-element><span class="key-label"><text-element key="Mouse drag"></text-element></span></p></div><div class="key-section"><p class="key-text"><text-element key="Zoom view"></text-element></p><p class="key"><icon-element type="mouse"></icon-element><span class="key-label"><text-element key="Mouse scroll wheel"></text-element></span></p></div><div class="key-section"><p class="key-text"><text-element key="Split screen mode"></text-element></p><p class="key"><span class="key-btn"><text-element key="1"></text-element></span></p></div><div class="key-section"><p class="key-text"><text-element key="Side-by-side mode"></text-element></p><p class="key"><span class="key-btn"><text-element key="2"></text-element></span></p></div><div class="key-section"><p class="key-text"><text-element key="Jump to start"></text-element></p><p class="key"><span class="key-btn"><text-element key="0"></text-element></span></p></div><div class="key-section internal-only"><p class="key-text"><text-element key="Previous/Next set"></text-element></p><p class="key"><span class="key-btn"><text-element key="CTRL +"></text-element>&#8592;</span> <span class="key-label">/</span> <span class="key-btn"><text-element key="CTRL +"></text-element>&#8594;</span></p></div></div></section><section class="shortcut-details bottom-section"><div class="common-section full-width"><div class="key-section"><p class="key-text"><text-element key="Version"></text-element></p><p class="key gap"><text-element id="app-version-text"></text-element><a href="https://www.nvidia.com/en-us/geforce/technologies/icat/release-notes/" target="_blank" class="external-link"><text-element key="View release notes"></text-element></a></p></div></div></section><section class="shortcut-details bottom-section"><div class="common-section full-width"><div class="key-section"><p class="key-text"><a href="http://ffmpeg.org" target="_blank" class="inline-link external-link"><text-element key="FFmpeg"></text-element></a></p><p class="key gap" style="display: block;"><text-element key="This software uses code of FFmpeg licensed under the LGPLv2.1"></text-element><a href="https://icat-public-releases.s3.amazonaws.com/ffmpeg/ffmpeg_lpgl_shared.zip" target="_blank" class="inline-link external-link"><text-element key="Download FFmpeg source."></text-element></a></p></div></div></section><section id="gpu-content" class="shortcut-details bottom-section" data-show-gpu="false"></section><section id="electron-app-content" class="shortcut-details bottom-section" data-is-electron="false"><div class="common-section full-width"><div class="key-section"><p class="key-text"><text-element key="Error logs path"></text-element></p><p class="key" id="error-logs-path"></p></div><div class="key-section hidden-option"><p class="key-text"><text-element key="Hardware acceleration"></text-element></p><p class="key gap"><span id="hw-status" class="status-text"><text-element key="On"></text-element></span><button-element text="Disable" id="toggle-hardware-acceleration-btn"></button-element><span><text-element key="Changing hardware acceleration requires the app to restart so be sure to save your project."></text-element></span></p></div></div></section></div>',":host{display:block;max-width:100%;width:50em}.shortcuts{display:flex;flex-direction:column;padding:0 0 0 1em}.shortcuts .title{font-weight:700;margin-top:0}.shortcuts .shortcut-details{border-bottom:1px solid #616161;border-top:1px solid #616161;display:flex;padding:.5em 0}.shortcuts .shortcut-details.bottom-section{border:none;padding-bottom:0}.shortcut-details .common-section{display:flex;flex-direction:column;width:50%}.shortcut-details .common-section.full-width{width:100%}.shortcut-details .common-section.full-width .key-text{width:25%}.shortcut-details .common-section.full-width .key{width:75%}.shortcut-details.shortcuts-section{display:grid;grid-template-columns:repeat(2,1fr)}.shortcut-details.shortcuts-section .common-section{display:block;width:100%}.shortcut-details.shortcuts-section .common-section .key-section{display:grid;gap:.5em;grid-template-columns:repeat(2,1fr)}.shortcut-details.shortcuts-section .common-section .key-section .key,.shortcut-details.shortcuts-section .common-section .key-section .key-text{max-width:unset;width:100%}.key-section{align-items:center;color:#e0e0e0;display:flex;font-size:12px;font-weight:400;line-height:18px}.key-section .key,.key-section .key-text{align-items:center;display:flex;margin:.5rem 0;width:50%}.key-section .key icon-element,.key-section .key-text icon-element{font-size:1.62em}.key-section .key a,.key-section .key-text a{color:#76b900!important;display:block;text-decoration:none}.key-section .key a.inline-link,.key-section .key-text a.inline-link{display:inline}.key-section .key-text.column,.key-section .key.column{align-items:flex-start;flex-direction:column}.key-section .key-text{max-width:11.5em}.key-section .key-btn{align-items:center;border:1px solid #fff;border-radius:2px;box-sizing:border-box;display:flex;gap:.5em;justify-content:center;padding:2px 6px}.key-section .key-label{margin:0 .5rem}.key-section .gap{gap:1em}#electron-app-content{display:none}#electron-app-content[data-is-electron=true]{display:flex}.status-text{min-width:2em;width:2em}.hidden-option{display:none}#gpu-info-canvas{height:0;pointer-events:none;width:0}#gpu-content[data-show-gpu=false]{display:none}"))}lo(){return this.shadowRoot.getElementById("electron-app-content")}do(){return this.shadowRoot.getElementById("gpu-info-canvas")}connectedCallback(){Array.from(this.shadowRoot.querySelectorAll(".internal-only")).forEach((e=>e.remove()));this.shadowRoot.getElementById("app-version-text").key=Ji;const e=l.isElectron;this.lo().setAttribute("data-is-electron",e.toString());const t=this.do();if(t){const e=t.getContext("experimental-webgl");if(e){let t="";const i=e.getExtension("WEBGL_debug_renderer_info");if(null!=i&&(t=e.getParameter(i.UNMASKED_RENDERER_WEBGL)),t){const e=this.shadowRoot.getElementById("gpu-content");e.setAttribute("data-show-gpu","true"),e.innerHTML='<div class="common-section full-width"><div class="key-section"><p class="key-text"><text-element key="GPU"></text-element></p><p class="key gap"></p></div></div>';const i=e.querySelector(".key.gap");i&&(i.textContent=t)}}}if(!e)return;const i=window.NvCompareApi;this.shadowRoot.getElementById("error-logs-path").textContent=i.getErrorLogsPath(),Array.from(this.shadowRoot.querySelectorAll(".external-link")).forEach((e=>{e.onclick=t=>l.openLink(e.getAttribute("href"),t)}))}}s("help-content",ia);class na extends HTMLElement{static get observedAttributes(){return["activeset","text"]}O={};pi="";get activeSet(){return this.pi}set activeSet(e){if(this.pi===e)return;this.pi=e;const t=this.shadowRoot.getElementById("set-select-button");t&&(t.value=e),this.co()}di=[];get sets(){return this.di}set sets(e){Ve(this.di,e)||(this.di=e,this.co(),this.setAttribute("has-sets",(e.length>1).toString()))}se=[];get options(){return this.se}set options(e){if(Ve(this.se,e))return;this.se=e;const t=this.shadowRoot.getElementById("set-select-button");t&&(t.options=e)}ve=!1;get active(){return this.ve}set active(e){if(this.ve===e)return;this.ve=e;const t=this.shadowRoot.getElementById("set-select-container");t&&t.setAttribute("data-active",e.toString())}constructor(){super(),i(this,a('<div id="set-select-container" data-active="false"><input-element id="set-select-button" noinnerborders="true" nobackground="true" nomargin="true" nominheight="true" type="select"></input-element></div>',":host(set-select[has-sets=false]){display:none}input-element{font-size:95%}#set-select-container{opacity:.56;transition:opacity .2s}#set-select-container[data-active=true]{opacity:1}"))}K=()=>{Object.keys(this.O).forEach((e=>{try{this.O[`${e}`]()}catch(e){}delete this.O[`${e}`]}))};ho=e=>this.dispatchEvent(new CustomEvent("loadset",{bubbles:!0,composed:!0,detail:e.detail.value}));uo=()=>{this.active=!0};mo=()=>{this.active=!1};co(){this.options=this.sets.map((e=>({label:e.label,onclick:"setselected",value:e.id,id:e.id})))}attributeChangedCallback(e,t,i){"activeset"===e&&(this.activeSet=i)}connectedCallback(){this.K(),this.active=this.ve,this.sets=this.di,this.addEventListener("setselected",this.ho),this.O.ho=()=>{delete this.O.ho,this.removeEventListener("setselected",this.ho)},this.addEventListener("input-focus",this.uo),this.O.uo=()=>{delete this.O.uo,this.removeEventListener("input-focus",this.uo)},this.addEventListener("input-blur",this.mo),this.O.mo=()=>{delete this.O.mo,this.removeEventListener("input-blur",this.mo)}}disconnectedCallback(){this.K()}}s("set-select",na);class aa extends HTMLElement{static get observedAttributes(){return["value"]}ontabclicked=null;po=[];get tabs(){return this.po}set tabs(e){Ve(this.po,e)||(this.po=e,this.bo())}de="";get value(){return this.de}set value(e){this.de!==e&&(this.de=e,this.bo())}constructor(){super(),i(this,a('<div id="tab-buttons-container"></div>','#tab-buttons-container{align-items:center;display:flex}#tab-buttons-container .tab-btn{color:inherit;cursor:pointer;opacity:.7;padding:.75em 1em;position:relative;text-transform:capitalize;-webkit-transform:scale(1);transform:scale(1);transition:opacity .2s}#tab-buttons-container .tab-btn:after,#tab-buttons-container .tab-btn:before{bottom:0;content:"";height:3px;left:0;position:absolute;-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;width:100%}#tab-buttons-container .tab-btn:before{background-color:#5c5c5c}#tab-buttons-container .tab-btn:after{background-color:#76b900}#tab-buttons-container .tab-btn:last-of-type:after,#tab-buttons-container .tab-btn:last-of-type:before{-webkit-transform-origin:0 100%;transform-origin:0 100%}#tab-buttons-container .tab-btn:hover{opacity:1}#tab-buttons-container .tab-btn:hover:before{-webkit-transform:scale(1);transform:scale(1)}#tab-buttons-container .tab-btn[data-active=true]{opacity:1}#tab-buttons-container .tab-btn[data-active=true]:after{-webkit-transform:scale(1);transform:scale(1)}'))}I(){return this.shadowRoot.getElementById("tab-buttons-container")}bo(){const e=e=>e.toLowerCase().split(" ").join("-");De({container:this.I(),array:this.tabs,getElementsFn:()=>Array.from(this.I().children),valueKeyFn:t=>e(t),elementValueKeyFn:e=>e.id,updateFn:(e,t)=>{e.key=t,e.setAttribute("data-active",(this.value===t).toString())},createFn:t=>{const i=n({tag:"text-element",attributes:{id:e(t),class:"tab-btn","data-active":(this.value===t).toString()},properties:{key:t.label}});return i.onclick=()=>{"function"==typeof this.ontabclicked&&this.ontabclicked(new CustomEvent("tabclicked",{bubbles:!0,composed:!0,detail:t})),this.dispatchEvent(new CustomEvent("tabclicked",{bubbles:!0,composed:!0,detail:t}))},i},preDeleteFn:e=>{e.onclick=null}})}attributeChangedCallback(e,t,i){"value"===e&&(this.value=i)}connectedCallback(){this.value=this.getAttribute("value")||""}disconnectedCallback(){this.ontabclicked=null}}s("tab-buttons",aa);class sa extends HTMLElement{static get observedAttributes(){return["visible","hassubtext"]}Ii=null;O={};he=!1;get visible(){return this.he}set visible(e){const t=$(e);this.he=t,this.shadowRoot.getElementById("toast-container").setAttribute("data-show",t.toString()),t?this.classList.remove("hide-toast"):(this.classList.add("hide-toast"),this.dispatchEvent(new CustomEvent("toastcontentclose",{bubbles:!0,composed:!0,detail:this})))}vo=!1;get hasSubtext(){return this.vo}set hasSubtext(e){const t=$(e);this.vo=t,this.shadowRoot.getElementById("toast-container").setAttribute("data-has-subtext",t.toString())}constructor(){super(),i(this,a('<div id="toast-container" data-show="false" data-has-subtext="false"><div class="heading-container"><div class="heading"><slot></slot></div><div id="toast-close"><button-element id="close-button" icon="close" type="link" size="3"></button-element></div></div><div class="subtext"><slot name="subtext"></slot></div></div>',":host{background-color:#424242;border-radius:4px;box-shadow:1px 0 3px 0 hsla(0,0%,7%,.5);color:inherit;display:block;width:100%}:host(.hide-toast){display:none}.heading-container{align-items:center;display:flex;justify-content:space-between}.heading-container .heading{padding:1em}.heading-container .heading>*{font-weight:700;line-height:150%}.heading-container #close-button{padding-right:.5em}.subtext{display:none;opacity:.8;padding:0 1em 1em}.subtext>*{line-height:150%}#toast-container{display:none}#toast-container[data-has-subtext=true] .subtext,#toast-container[data-show=true]{display:block}"))}K=()=>{Object.keys(this.O).forEach((e=>{try{this.O[`${e}`]()}catch(e){}delete this.O[`${e}`]}))};Hi=()=>{const e=Array.from(this.children),t=e.findIndex((e=>"subtext"===e.slot))>-1;this.visible=e.length>0,this.hasSubtext=t};close=()=>{this.innerHTML="",this.visible=!1};attributeChangedCallback(e,t,i){"visible"===e?this.visible=i:"hassubtext"===e&&(this.hasSubtext=i)}connectedCallback(){this.Hi(),this.shadowRoot.getElementById("close-button").addEventListener("click",this.close),this.O.close=()=>{this.shadowRoot.getElementById("close-button").removeEventListener("click",this.close),delete this.O.close},this.Ii=new MutationObserver(this.Hi),this.Ii.observe(this,{childList:!0,subtree:!0})}disconnectedCallback(){this.K(),this.Ii&&(this.Ii.disconnect(),this.Ii=null)}}s("toast-content",sa);class oa extends HTMLElement{onpreviousframe=null;onnextframe=null;onaddframe=null;ondeleteframe=null;id="";set label(e){this.st().textContent=e}constructor(){super(),i(this,a('<div id="keyframe-bar"><div id="keyframe-label"></div><div id="keyframe-controls"><div id="keyframes-bar"><svg viewBox="0 0 0 0" id="keyframe-svg" preserveAspectRatio="none"><polyline id="keyframe-svg-line" fill="none" stroke="#fff" stroke-width="1"/></svg><div id="playhead"></div></div><div id="btns-container"><button-element class="keyframe-btn" id="previous-btn" icon="chevron-left" type="link" size="4" dim="0" slim="true" hoversecondary="true"></button-element><button-element class="keyframe-btn" id="next-btn" icon="chevron-right" type="link" size="4" dim="0" slim="true" hoversecondary="true"></button-element><button-element class="keyframe-btn" id="add-btn" icon="plus" type="link" size="4" dim="0" slim="true" hoversecondary="true"></button-element><button-element class="keyframe-btn" id="delete-btn" icon="close" type="link" size="4" dim="0" slim="true" hoversecondary="true"></button-element></div></div></div>',"#keyframe-bar{width:100%}#keyframe-bar #keyframe-label{font-size:.875em;min-width:5em;opacity:.8}#keyframe-bar #keyframe-controls{align-items:center;display:flex;gap:1em}#keyframe-bar #keyframes-bar{background-color:#424242;border-radius:2px;box-shadow:0 0 0 1px #616161;flex-grow:1;height:2.188em;position:relative}#keyframe-bar #keyframes-bar svg{height:100%;width:100%}#keyframe-bar #btns-container{align-items:center;display:flex;gap:.25em}#keyframe-bar .keyframe-dot{background-color:#fff;border-radius:50%;box-shadow:inset 0 0 0 1px #eee;height:.5em;margin-left:-.25em;margin-top:-.25em;position:absolute;top:50%;width:.5em}#keyframe-bar #playhead{background:#76b900;height:100%;left:0;position:absolute;top:0;width:1px}"))}st(){return this.shadowRoot.getElementById("keyframe-label")}fo(){return this.shadowRoot.getElementById("playhead")}get svgElement(){return this.shadowRoot.getElementById("keyframe-svg")}get container(){return this.shadowRoot.getElementById("keyframes-bar")}setTime=(e,t)=>{this.fo().style.left=e/t*100+"%"};connectedCallback(){this.shadowRoot.getElementById("previous-btn").onclick=()=>{"function"==typeof this.onpreviousframe&&this.onpreviousframe(new CustomEvent("previous-keyframe",{composed:!0,bubbles:!0,detail:this.id})),this.dispatchEvent(new CustomEvent("previous-keyframe",{composed:!0,bubbles:!0,detail:this.id}))},this.shadowRoot.getElementById("next-btn").onclick=()=>{"function"==typeof this.onnextframe&&this.onnextframe(new CustomEvent("next-keyframe",{composed:!0,bubbles:!0,detail:this.id})),this.dispatchEvent(new CustomEvent("next-keyframe",{composed:!0,bubbles:!0,detail:this.id}))},this.shadowRoot.getElementById("add-btn").onclick=()=>{"function"==typeof this.onaddframe&&this.onaddframe(new CustomEvent("add-keyframe",{composed:!0,bubbles:!0,detail:this.id})),this.dispatchEvent(new CustomEvent("add-keyframe",{composed:!0,bubbles:!0,detail:this.id}))},this.shadowRoot.getElementById("delete-btn").onclick=()=>{"function"==typeof this.ondeleteframe&&this.ondeleteframe(new CustomEvent("delete-keyframe",{composed:!0,bubbles:!0,detail:this.id})),this.dispatchEvent(new CustomEvent("delete-keyframe",{composed:!0,bubbles:!0,detail:this.id}))}}}s("keyframe-bar",oa);const ra=(e,t,i,n)=>new Promise((a=>{const s=document.createElement("video");s.oncanplaythrough=()=>{s.oncanplaythrough=null,re(s,N(t.timestamps,i-n-N(t.timestamps,t.startTime,t.fps),t.fps)).then((()=>{const e=document.createElement("canvas").getContext("2d");e.canvas.width=s.videoWidth,e.canvas.height=s.videoHeight,e.imageSmoothingEnabled=!1,e.drawImage(s,0,0);const t=e.canvas.toDataURL("image/png");a(t)}))};const o=U(e,[Me(t),"file"]),r=t.src||l.getUrl(o,t.src);s.src=r})),la=["Web"].concat(["Image"],l.isElectron?["Video"]:[]);class da extends HTMLElement{static get observedAttributes(){return["visible"]}he=!1;get visible(){return this.he}set visible(e){const t=$(e);if(this.he!==t)if(this.he=t,t)this.yo();else{this.I().innerHTML="",this.dispatchEvent(new CustomEvent("exportmodalclose",{composed:!0,bubbles:!0}))}}xo=la[0];get mode(){return this.xo}set mode(e){const t=le(e,la,la[0]);this.xo=t;const i=this.wo();i&&(i.value=t);const n=this.ko();n&&n.setAttribute("data-mode",t),this.zo()}So;get data(){return this.So}set data(e){this.So=e;const t=e.sets.filter((e=>e.media.filter((e=>"video"===e.type)).length>0)).length>0,i=this.wo();i&&(i.value=this.mode,i.tabs=t?la:la.filter((e=>"Video"!==e))),this.I().setAttribute("data-show-video-tab",t.toString()),""===this.mode?this.mode=la[0]:this.zo()}files;constructor(){super(),i(this,a('<div id="export-modal-container"></div>',"#footer-buttons{align-items:center;display:flex;gap:.5em;justify-content:flex-end}#export-container{display:flex;flex-direction:column;height:80vh;overflow:hidden;width:80vw}#export-mode-tabs{align-items:center;background:#353535;display:flex;justify-content:flex-start;margin-bottom:2em}#export-content{display:flex;gap:2em;height:100%;overflow:hidden;width:100%}#export-content[data-mode=Image] #export-controls-container,#export-content[data-mode=Video] #export-controls-container{display:none}#export-content[data-mode=Image] #export-footer-btns,#export-content[data-mode=Video] #export-footer-btns{align-items:flex-end}#export-content[data-mode=Video] #export-footer-btns{box-sizing:border-box;flex-wrap:wrap;overflow:hidden;padding-bottom:.25em;padding-top:2em}#export-content[data-mode=Video] #export-footer-btns>*{margin-bottom:.25em;margin-top:.25em}#export-preview-container{display:flex;flex-direction:column;height:100%;overflow:auto;width:100%}#export-preview-container keyframe-bar{width:100%}#export-preview{flex-grow:1;min-height:0;position:relative;width:100%}#export-preview #title-canvas-container,#export-preview icat-app{transition:opacity .2s}#export-preview #title-canvas-container{transition-delay:1s}#export-preview[data-ready=false] #title-canvas-container,#export-preview[data-ready=false] icat-app{opacity:0}#export-preview[data-ready=true] #title-canvas-container,#export-preview[data-ready=true] icat-app{opacity:1;transition:opacity .2s}#title-canvas-container{align-items:center;display:flex;height:100%;justify-content:center;left:0;pointer-events:none;position:absolute;top:0;width:100%}#title-canvas-container #title-canvas-inner{height:100%;position:relative;width:100%}#title-canvas-container #title-canvas{height:100%;max-height:100%;max-width:100%;object-fit:contain;object-position:center center;width:100%}#export-controls-container{box-sizing:initial;display:flex;flex-basis:20em;flex-direction:column;flex-grow:0;flex-shrink:0;gap:2em;max-height:100%;min-height:100%;overflow:auto;padding:0 .5em 0 0;width:0}#export-controls-container accordian-content{width:100%}#export-controls-container[data-has-video=false] #single-frame-input{display:none}.controls-content{display:flex;flex-direction:column;font-size:.875em;gap:1em}#ui-toggles .controls-content{gap:.25em}.media-url-inputs{display:flex;flex-direction:column;gap:1em}.url-label{align-items:center;display:flex;flex-wrap:nowrap}.url-label .label-text{flex-shrink:1;max-width:90%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.url-label .convert-label{opacity:.5;padding-left:.5em}.url-label .convert-label .convert-label-inner{align-items:center;display:flex}.url-label .convert-label .convert-label-inner icon-element{font-size:.75em;margin-right:.5em}#media-settings[data-single-frame=false] .url-label .convert-label{display:none}.preview-heading{font-size:.875em}.preview-heading .heading-subtext{opacity:.5}#export-footer-btns{align-items:center;display:flex;gap:1em;justify-content:flex-end;padding-left:.25em}#export-footer-btns>*{margin-bottom:.5em;margin-top:2.5em}#export-footer-btns[data-show-split-keyframes=false] #split-keyframes{display:none}#export-footer-btns[data-show-split-keyframes=false] #preserve-dimensions-input{display:block}#export-footer-btns[data-show-split-keyframes=true] #preserve-dimensions-input{display:none}#image-export-inputs{align-items:center;display:flex;flex-grow:1;font-size:.875em;gap:2em}.export-video-spinner-message{align-items:center;display:flex;flex-direction:column;gap:.25em;justify-content:center}"))}I(){return this.shadowRoot.getElementById("export-modal-container")}ko(){return this.shadowRoot.getElementById("export-content")}Rs(){return this.shadowRoot.getElementById("export-content-overlay")}wo(){return this.shadowRoot.getElementById("export-mode-tabs")}Mo(){return this.shadowRoot.getElementById("export-spinner")}Co(){return this.shadowRoot.getElementById("preview-width")}jo(){return this.shadowRoot.getElementById("preview-height")}Lo(){return this.shadowRoot.getElementById("export-preview")}Eo(){return this.shadowRoot.getElementById("export-controls-container")}_o(){return this.shadowRoot.getElementById("export-footer-btns")}Io(){return this.shadowRoot.querySelector("message-overlay")}To=(e,t,i,n)=>{const a=e.layout,s=e.getAppData(),o=s.sets.find((e=>e.id===s.activeSet));if(!o)return;const r=o.media.filter((e=>e.visible)),l=e.viewportDimensions,d=l.fitWidth/("split"===a?1:r.length)/("split"===a?Math.min(r.length,2):1),c=r.map((e=>e.base));t.style.width=`${l.width}px`,t.style.height=`${l.height}px`,t.style.left=`${l.left}px`,t.style.top=`${l.top}px`,i.imageSmoothingEnabled=!1,i.canvas.width=l.fitWidth,i.canvas.height=l.fitHeight,i.font=`${n}px sans-serif`;const h=c.map((e=>function(e,t,i,n,a=""){const s=[],o=a.split("");let r="",l=i,d=0,c=0,h=0,u=0;for(let i=0;i<o.length;i+=1){const a=`${r}${o[Number(i)]}`,m=n.measureText(a),p=m.width;p>t-2*e&&i>0?(s.push({line:r,width:c,ascent:m.fontBoundingBoxAscent,descent:m.fontBoundingBoxDescent}),r=o[Number(i)],l=l+m.fontBoundingBoxAscent+m.fontBoundingBoxDescent):(d=Math.max(d,p),r=a,c=p,h=m.fontBoundingBoxAscent,u=m.fontBoundingBoxDescent)}return s.push({line:r,width:c,ascent:h,descent:u}),{lines:s,height:l,width:d}}(20,d,n,i,e))),u=Math.max(16,Math.min(50,.5*n));i.font=`${n}px sans-serif`,i.textBaseline="top",i.shadowColor="black";n&&h.forEach(((e,t)=>{const n=t*d,a=(d-e.width)/2+n,{ascent:s,descent:o}=e.lines[0];let r=l.fitHeight-u-(s+o)*e.lines.length;e.lines.forEach((t=>{i.lineWidth=1,i.shadowBlur=7,i.strokeStyle="#000",i.strokeText(t.line,a+(e.width-t.width)/2,r),i.fillStyle="#FFF",i.imageSmoothingEnabled=!1,i.fillText(t.line,a+(e.width-t.width)/2,r),r+=t.ascent+t.descent}))})),i.fillStyle="",i.strokeStyle=""};Po=(e,t,i,n,a,s)=>{const o=e.viewportDimensions;t&&(t.textContent=o.fitWidth.toString()),i&&(i.textContent=o.fitHeight.toString()),requestAnimationFrame((()=>this.To(e,n,a,s)))};Fo=(e,t,i,n)=>new Promise((a=>{const s=e.toDataURL(),o=new Image;o.onload=()=>{const s=document.createElement("canvas").getContext("2d");s.canvas.width=o.naturalWidth,s.canvas.height=o.naturalHeight,s.imageSmoothingEnabled=!1,s.drawImage(o,0,0),this.To(e,t,i,n),s.imageSmoothingEnabled=!1,s.drawImage(i.canvas,0,0);const r=document.createElement("a"),l=[],d=e.setList.get(e.activeSet);d&&d.mediaOrder.forEach((t=>{const i=e.mediaList.get(t);i&&l.push(i.base)})),r.download=`${l.length?l.join("__"):"export"}.png`,r.href=s.canvas.toDataURL("image/png"),r.click(),a(void 0)},o.src=s}));Ao=(e,t,i,n)=>new Promise((a=>{const s=e.toDataURL(),o=new Image;o.onload=()=>{const s=document.createElement("canvas").getContext("2d");s.canvas.width=o.naturalWidth,s.canvas.height=o.naturalHeight,s.imageSmoothingEnabled=!1,s.drawImage(o,0,0),this.To(e,t,i,n),s.imageSmoothingEnabled=!1,s.drawImage(i.canvas,0,0),a(s.canvas.toDataURL("image/png"))},o.src=s}));Ro=(e,t,i,n)=>{const a=Object.keys(e).map((e=>parseInt(e,10))).sort(((e,t)=>e-t));if(0===a.length)return;let s=[];const o=G(t),r=Math.floor(i/o),l=a[0],d=e[`${l}`];for(;s.length<l;)s.push(d);a.forEach(((t,i)=>{if(0===i)return void s.push(d);const n=a[Number(i-1)],o=t-n,r=e[`${t}`];if(o<1)return;let l=e[`${n}`];void 0===l&&(l=r);const c=(r-l)/o,h=new Array(o).fill(0).map(((e,t)=>(t+1)*c+l));s=s.concat(h)}));let c=s[Number(s.length-1)];for(void 0===c&&(c=n);s.length<r;)s.push(c);return s};Go=(e,t,i,n)=>{const a=Object.keys(e).map((e=>parseInt(e,10))).sort(((e,t)=>e-t));if(0===a.length)return;let s=[];const o=G(t),r=Math.floor(i/o),l=a[0],d=e[`${l}`];for(;s.length<l;)s.push(d);a.forEach(((t,i)=>{if(0===i)return void s.push(d);const n=a[Number(i-1)],o=t-n,r=e[`${t}`];if(o<1)return;let l=e[`${n}`];void 0===l&&(l=r);const c=(r.x-l.x)/o,h=(r.y-l.y)/o,u=(r.z-l.z)/o,m=new Array(o).fill({x:0,y:0,z:100}).map(((e,t)=>({x:(t+1)*c+l.x,y:(t+1)*h+l.y,z:(t+1)*u+l.z})));s=s.concat(m)}));let c=s[Number(s.length-1)];for(void 0===c&&(c=n);s.length<r;)s.push(c);return s};Bo=(e,t,i)=>{const n=this.Mo();n&&(n.visible=e,n.message=t||"",i&&n.appendChild(i))};Vo=e=>{const t=this.Io();t&&(t.message=e)};No=()=>{const e={},t=[];return this.data.sets.forEach((t=>{t.media.forEach((t=>{if("filter"===t.type)return;const i=Me(t);e[`${i}`]?e[`${i}`].push(t.id):e[`${i}`]=[t.id]})),t.overlays.forEach((t=>{const i=Ce(t);e[`${i}`]?e[`${i}`].push(t.id):e[`${i}`]=[t.id]}))})),Object.keys(this.files).forEach((i=>{const n=this.files[`${i}`],a={id:n.id,mediaIds:e[`${i}`]||[],type:"video"===n.type?"video":"image",name:n.name,path:n.path,label:n.base,extension:n.extension,fullPath:n.path,size:n.size,modified:n.modified,customPath:n.base};t.push(a)})),t};Do=()=>{const e=Y(this.data);return e.uiVisibility={antiAliasSelect:!0,fullscreenButton:!0,gridSelect:!0,helpButton:!0,layersButton:!0,layoutTabs:!0,loopButton:!0,mediaInfo:!0,pixelDataButton:!1,progressBar:!0,setSelect:!0,speedSelect:!0,startEndTime:!1,timeDisplay:!0,titleBar:!1,videoControls:!0,zoomSelect:!0,timeline:!1,contentSidebar:!1,controlBar:!0,inOutSlider:!1,timelineInOutSlider:!1,addLogoBtn:!1,appSettingsBtn:!0,addFilterBtn:!1},e.sets.forEach((e=>{e.media.forEach((e=>{delete e.file,e.src=l.clearedUrl(e.src)})),e.overlays.forEach((e=>{delete e.file,e.src=l.clearedUrl(e.src)}))})),e.files={...this.data.files},e};Oo=()=>{this.Bo(!0);const e=this.Lo(),t=this.Eo(),i=this._o();if(!(e&&t&&i&&this.data))return this.Bo(!1);e.innerHTML="",t.innerHTML="",i.innerHTML="",e.setAttribute("data-ready","false");const a=this.Do(),s=a.sets.map((e=>e.layout)),o=this.No(),r=o.filter((e=>"video"===e.type)).length>0;t.setAttribute("data-has-video",r.toString());const d=[{label:"Initial",value:"initial",id:"export-initial-layout"},{label:"Side-by-side",value:"tile",id:"export-tile-layout"},{label:"Split screen",value:"split",id:"export-split-layout"}],c=[{value:0,id:"export-single-frame",label:"Export still images"},{value:1,id:"export-initial",label:"Export video segments"}];let u={antiAliasSelect:!0,fullscreenButton:!0,gridSelect:!0,helpButton:!0,layersButton:!0,layoutTabs:!0,loopButton:!0,mediaInfo:!0,pixelDataButton:!1,progressBar:!0,setSelect:!0,speedSelect:!0,startEndTime:!1,timeDisplay:!0,titleBar:!1,videoControls:!0,zoomSelect:!0,timeline:!1,contentSidebar:!1,controlBar:!0,inOutSlider:!1,timelineInOutSlider:!1,addLogoBtn:!1,appSettingsBtn:!0,addFilterBtn:!1},m=encodeURIComponent(d[0].value),p=!1,g=te(encodeURIComponent(c[1].value),1),b=!1,v=!1,f="";const y=e=>b&&("video"===e.type&&0===g||"image"===e.type),x=async()=>{const e=C.getValue();if(g=e,C.value=e,_.setAttribute("data-single-frame",(0===e).toString()),E.forEach(((e,t)=>{const i=o[Number(t)];e.disabled=y(i)})),0===e){const e=V.getAppData();await e.sets.reduce((async(t,i,n)=>{await t,await i.media.reduce((async(t,a,s)=>{if(await t,"video"===a.type){const t=await ra(this.files,a,i.time,i.startTime);a.src=t,a.path=a.src,a.type="image",e.sets[Number(n)].media[Number(s)]=a}}),Promise.resolve())}),Promise.resolve()),V.loadAppData(e)}else{const e=this.Do(),t=V.getAppData();t.sets.forEach(((t,i)=>{t.media.forEach(((t,n)=>{const a=e.sets[Number(i)].media[Number(n)];t.src=a.src,t.path=a.path,t.type=a.type;const s=V.fileList.get(Me(t));s&&(t.file=s)})),t.overlays.forEach((e=>{const t=V.fileList.get(Ce(e));t&&(e.file=t)}))})),V.loadAppData(t)}},w=()=>{v=Object.keys(u).reduce(((e,t)=>e&&"titleBar"!==t?!u[`${t}`]&&e:e),!0),I.value=v},k=()=>{V.uiVisibility=Y(u)},z=n({tag:"input-element",attributes:{id:"global-layout-select",label:"Global layout",type:"select"},properties:{options:d,value:m}});z.oninputvalue=()=>(()=>{const e=z.getValue();m=e,z.value=e,a.sets=a.sets.map(((t,i)=>(t.layout="initial"===e?s[Number(i)]:e,t))),V.loadAppData(a)})();const S=n({tag:"input-element",attributes:{id:"scale-to-fit-input",label:"Scale to fit",type:"toggle"},properties:{value:p}});S.oninputvalue=()=>(p=!p,S.value=p,void V.setScaleToFit(p));const M=n({tag:"accordian-content",attributes:{id:"general-settings",visible:"true",class:"first-accordian",maxheight:"unset"},properties:{showHeadingBg:!0,headingTheme:"light",hasOverflowContent:!0},children:[n({tag:"text-element",attributes:{class:"settings-header heading",slot:"heading",key:"General"}}),n({tag:"div",attributes:{class:"controls-content"},children:[z,S]})]});t.appendChild(M);const C=n({tag:"input-element",attributes:{id:"single-frame-input",type:"select"},properties:{value:g,options:c}});C.oninputvalue=()=>x();const j=n({tag:"input-element",attributes:{type:"toggle",label:"Embed images in code"},properties:{value:b}});j.oninputvalue=()=>(()=>{const e=j.getValue();b=e,j.value=e,_.setAttribute("data-save-as-data-url",e.toString()),E.forEach(((e,t)=>{const i=o[Number(t)];e.disabled=y(i)}))})();const L=n({tag:"input-element",attributes:{label:"Media domain/path",help:"(i.e. https://domain.com/path)"},properties:{value:f}});L.oninputvalue=()=>(f=L.getValue(),void(L.value=f));const E=o.map(((e,t)=>{const i=n({tag:"input-element",attributes:{id:e.id,class:"media-url-input margin-1-0",disabled:y(e).toString(),value:e.customPath,"data-media-type":e.type,"media-id":e.id,"media-index":t.toString()},properties:{disabledText:"Embedded in webpage code"},children:[n({tag:"span",attributes:{slot:"label",class:"url-label"},children:[n({tag:"span",properties:{textContent:e.label,className:"label-text"}}),n({tag:"span",attributes:{class:"convert-label"},children:[n({tag:"span",attributes:{class:"convert-label-inner"},children:[n({tag:"icon-element",attributes:{type:"arrow-right"}}),n({tag:"span",properties:{textContent:"PNG"}})]})]})]})]});return i.oninputvalue=e=>{e.preventDefault(),e.stopPropagation();const i=e.detail,n=i.getValue();i.value=n,o[Number(t)].customPath=n},i})),_=n({tag:"accordian-content",attributes:{id:"media-settings",visible:"true",class:"first-accordian",maxheight:"unset","data-save-as-data-url":b.toString(),"data-single-frame":(0===g).toString()},properties:{showHeadingBg:!0,headingTheme:"light"},children:[n({tag:"text-element",attributes:{class:"settings-header heading",slot:"heading"},properties:{key:"Media"}}),n({tag:"div",attributes:{class:"controls-content"},children:[C,n({tag:"toast-content",children:[n({tag:"text-element",properties:{textContent:"Hosting media"}}),n({tag:"div",attributes:{slot:"subtext"},children:[n({tag:"text-element",attributes:{key:"If you choose to host media in a different location from the root, specify the URL below."}}),n({tag:"text-element",attributes:{style:"display:block;margin-top:1em;",key:"Images can be embedded directly in webpage embed code without uploading them separately if the total file size is less than 10MB."}})]})]}),j,L,n({tag:"div",attributes:{class:"media-url-inputs"},children:E})]})]});t.appendChild(_);const I=n({tag:"input-element",attributes:{type:"toggle",label:"Hide all"},properties:{value:b}});I.oninputvalue=()=>(()=>{v=!v,I.value=v;const e=["layoutTabs","setSelect","appSettingsBtn","helpButton","controlBar","mediaInfo"];u=Object.keys(u).reduce(((t,i)=>(e.indexOf(i)>-1&&(t[`${i}`]=!v),t)),{}),T.value=u.layoutTabs,P.value=u.setSelect,F.value=u.appSettingsBtn,A.value=u.helpButton,R.value=u.mediaInfo,G.value=u.controlBar,k()})();const T=n({tag:"input-element",attributes:{type:"toggle",label:"Layout tabs"},properties:{value:u.layoutTabs}});T.oninputvalue=()=>(u.layoutTabs=!u.layoutTabs,T.value=u.layoutTabs,w(),void k());const P=n({tag:"input-element",attributes:{type:"toggle",label:"Sets select"},properties:{value:u.setSelect}});P.oninputvalue=()=>(u.setSelect=!u.setSelect,P.value=u.setSelect,w(),void k());const F=n({tag:"input-element",attributes:{type:"toggle",label:"Settings button"},properties:{value:u.appSettingsBtn}});F.oninputvalue=()=>(u.appSettingsBtn=!u.appSettingsBtn,F.value=u.appSettingsBtn,w(),void k());const A=n({tag:"input-element",attributes:{type:"toggle",label:"Help button"},properties:{value:u.helpButton}});A.oninputvalue=()=>(u.helpButton=!u.helpButton,A.value=u.helpButton,w(),void k());const R=n({tag:"input-element",attributes:{type:"toggle",label:"Media selectors"},properties:{value:u.mediaInfo}});R.oninputvalue=()=>(u.mediaInfo=!u.mediaInfo,R.value=u.mediaInfo,w(),void k());const G=n({tag:"input-element",attributes:{type:"toggle",label:"Control bar"},properties:{value:u.controlBar}});G.oninputvalue=()=>(u.controlBar=!u.controlBar,G.value=u.controlBar,w(),void k());const B=n({tag:"accordian-content",attributes:{id:"ui-toggles",visible:"true",class:"first-accordian",maxheight:"unset"},properties:{showHeadingBg:!0,headingTheme:"light"},children:[n({tag:"text-element",attributes:{class:"settings-header heading",slot:"heading",key:"Customization"}}),n({tag:"div",attributes:{class:"controls-content"},children:[I,T,P,F,A,R,G]})]});t.appendChild(B);const V=n({tag:"icat-app"});e.appendChild(V),V.isEmbed=!0,V.displayFpsStats=!1,V.displayRenderMode=!1,V.renderMode="webgl",V.loadAppData(a).then((()=>{this.Bo(!1),e.setAttribute("data-ready","true")})),V.addEventListener("canvas-resized",(()=>{const e=this.Co();e&&(e.textContent=Math.round(V.offsetWidth).toString());const t=this.jo();t&&(t.textContent=Math.round(V.offsetHeight).toString())}));const N=this.Co();N&&(N.textContent=Math.round(V.offsetWidth).toString());const D=this.jo();D&&(D.textContent=Math.round(V.offsetHeight).toString());const O=e=>new Promise((t=>{let i=!1;const n=U(this.files,["overlay"===e.type?Ce(e):Me(e),"file"]);e.src||(i=!0,e.src=l.getUrl(n,e.src));const a=new Image;a.onload=()=>{const n=document.createElement("canvas").getContext("2d");n.canvas.width=a.naturalWidth,n.canvas.height=a.naturalWidth,n.imageSmoothingEnabled=!1,n.drawImage(a,0,0),i&&(l.clearUrl(e.src),e.src=""),t(n.canvas.toDataURL("image/png"))},a.onerror=()=>t(""),a.src=e.src})),$=e=>new Promise((t=>{const i=U(this.files,[Me(e),"file"]);let n=!1;e.src||(n=!0,e.src=l.getUrl(i,e.src)),H(e,i,V.sourceLoader).then((i=>{n&&(l.clearUrl(e.src),e.src=""),t(i.element.toDataURL("image/png"))})).catch((()=>{t("")}))})),W=async()=>{const e=h(),t=V.getAppData(),i=[];let n=L.getValue();n?"/"!==n.slice(-1)&&(n=`${n}/`):n="",await t.sets.reduce((async(e,s,r)=>{try{await e}catch(e){}await s.media.reduce((async(e,d,c)=>{try{await e}catch(e){}const h=o.find((e=>e.mediaIds.indexOf(d.id)>-1)),u=a.sets[Number(r)].media.find((e=>e.id===d.id));if(h&&u){const e=Y(u);let t=h.customPath;"/"===t[0]&&(t=t.slice(1));const a=d.path.slice();if("video"===e.type){if(0===g){let a="";try{a=await ra(this.files,e,s.time,s.startTime)}catch(e){}d.extension="png",d.src=`${n}${t}.${d.extension}`,d.name=d.src,d.format="PNG",d.codec=d.format,d.muted=!0,d.timestamps=[],b||!l.isElectron?d.src=a:i.push({id:d.id,source:a,name:`${t}.${d.extension}`,set:s.id})}else d.src=`${n}${t}.${d.extension}`,i.push({id:d.id,source:a,name:`${t}.${d.extension}`,set:s.id});d.path=`${n}${t}.${d.extension}`}else if("image"===d.type){if(b){let t="";try{t=await O(e)}catch(e){}d.src=t}else d.src=`${n}${t}.${d.extension}`,i.push({id:d.id,source:a,name:`${t}.${d.extension}`,set:s.id});d.path=`${n}${t}.${d.extension}`}else if("hdrimage"===d.type){let i="";try{i=await $(e)}catch(e){}d.format="PNG",d.codec=d.format,d.extension="png",d.src=i,d.path=`${n}${t}.${d.extension}`}}t.sets[Number(r)].media[Number(c)]=d}),Promise.resolve()),await s.overlays.reduce((async(e,l,d)=>{try{await e}catch(e){}const c=o.find((e=>e.mediaIds.indexOf(l.id)>-1)),h=a.sets[Number(r)].overlays.find((e=>e.id===l.id));if(c&&h){const e=Y(h);let t=c.customPath;"/"===t[0]&&(t=t.slice(1));const a=l.path.slice();if(b){let t="";try{t=await O(e)}catch(e){}l.src=t}else l.src=`${n}${t}.${l.extension}`,i.push({id:l.id,source:a,name:`${t}.${l.extension}`,set:s.id});l.path=`${n}${t}.${l.extension}`}t.sets[Number(r)].overlays[Number(d)]=l}),Promise.resolve())}),Promise.resolve());return{template:`<div class="icat-embed-element" style="width:100%;height:100%;"><icat-app id="icat-${e}"></icat-app></div><script type="text/javascript">${await new Promise((e=>{const t=document.getElementById("icat-js"),i=new XMLHttpRequest,n=l.isElectron?l.getUrl(void 0,t.src.replace("file:///","")):t.src;i.open("GET",n),i.onload=()=>e(i.responseText),i.send()}))}<\/script><script type="text/javascript">${`(function(){ const app = document.getElementById('icat-${e}'); app.isEmbed=true; app.loadAppData(${JSON.stringify(t)});})()`}<\/script>`,filesToPackage:i}},K=async()=>{const e=await W();navigator.clipboard.writeText(e.template).then((()=>this.dispatchEvent(new CustomEvent("showmessage",{bubbles:!0,composed:!0,detail:"Embed code copied"})))),this.Vo("Embed code copied to clipboard")},q=async()=>{if(!l.isElectron)return;const e=await W(),t=`<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><style> html { height: 100%; } body { font-size: 16px; font-family:san-serif; background:#000; height: 100%; overflow: hidden; margin: 0; }</style></head><body>${e.template}</body></html>`;return window.NvCompareApi.downloadCode({mediaFileData:e.filesToPackage,indexHtml:t,code:e.template,readme:!!e.filesToPackage.length&&""}).then((e=>{"success"===e?this.Vo("Webpage embed package successfully saved"):"canceled"!==e&&(console.warn(e),this.Vo("There was an error generating your webpage embed package, please try again."))})).catch(console.warn)};if(l.isElectron){const e=n({tag:"button-element",attributes:{size:"3",type:"outline",text:"Copy embed code"}});e.onclick=()=>K(),i.appendChild(e);const t=n({tag:"button-element",attributes:{size:"3",text:"Package webpage embed"}});t.onclick=()=>q(),i.appendChild(t)}else{const e=n({tag:"button-element",attributes:{size:"3",text:"Copy embed code"}});e.onclick=()=>K(),i.appendChild(e)}};Ho=()=>{this.Bo(!0);const e=this.Lo(),t=this.Eo(),i=this._o();if(!(e&&t&&i&&this.data))return this.Bo(!1);e.innerHTML="",t.innerHTML="",i.innerHTML="",e.setAttribute("data-ready","false");const a=this.Do();a.uiVisibility.helpButton=!1,a.uiVisibility.fullscreenButton=!1,a.uiVisibility.gridSelect=!1,a.uiVisibility.speedSelect=!1,a.uiVisibility.antiAliasSelect=!1,a.uiVisibility.titleBar=!1,a.uiVisibility.appSettingsBtn=!1;const s=n({tag:"icat-app",attributes:{usesinglecanvas:"true"}});e.appendChild(s),s.isEmbed=!0,s.useSingleCanvas=!0,s.displayFpsStats=!1,s.displayRenderMode=!1,s.renderMode="auto",s.loadAppData(a).then((()=>{this.Bo(!1),e.setAttribute("data-ready","true")}));const o=n({tag:"div",attributes:{id:"title-canvas-container"}}),r=n({tag:"div",attributes:{id:"title-canvas-inner"}}),l=document.createElement("canvas").getContext("2d",{alpha:!0});l.canvas.id="title-canvas",r.appendChild(l.canvas),o.appendChild(r),e.appendChild(o);let d=16;s.addEventListener("canvas-resized",(()=>this.Po(s,this.Co(),this.jo(),o,l,d))),this.Po(s,this.Co(),this.jo(),o,l,d);const c=()=>{d=h.getValue(),h.value=d,this.To(s,o,l,d)},h=n({tag:"input-element",attributes:{type:"number",label:"Title size"},properties:{value:d}});h.oninputvalue=()=>c(),i.appendChild(n({tag:"div",attributes:{id:"image-export-inputs"},children:[h]}));const u=n({tag:"button-element",attributes:{size:"3",text:"Download"}});u.onclick=async()=>{this.Bo(!0,"Generating image"),await this.Fo(s,o,l,d),this.Bo(!1)},i.appendChild(u)};$o=()=>{this.Bo(!0);const e=this.Lo(),t=this.Eo(),i=this._o();if(!(e&&t&&i&&this.data))return this.Bo(!1);e.innerHTML="",t.innerHTML="",i.innerHTML="",e.setAttribute("data-ready","false");const a=this.Do();a.sets=a.sets.filter((e=>e.media.filter((e=>"video"===e.type)).length>0)),a.uiVisibility.helpButton=!1,a.uiVisibility.fullscreenButton=!1,a.uiVisibility.gridSelect=!1,a.uiVisibility.speedSelect=!1,a.uiVisibility.antiAliasSelect=!1,a.uiVisibility.titleBar=!1,a.uiVisibility.appSettingsBtn=!1,a.uiVisibility.timelineInOutSlider=!0;const s=n({tag:"icat-app",attributes:{usesinglecanvas:"true"}});e.appendChild(s),s.isEmbed=!0,s.useSingleCanvas=!0,s.displayFpsStats=!1,s.displayRenderMode=!1,s.renderMode="webgl",s.loadAppData(a).then((()=>{this.Bo(!1),e.setAttribute("data-ready","true")}));const o=n({tag:"div",attributes:{id:"title-canvas-container"}}),r=n({tag:"div",attributes:{id:"title-canvas-inner"}}),l=document.createElement("canvas").getContext("2d",{alpha:!0});l.canvas.id="title-canvas",r.appendChild(l.canvas),o.appendChild(r),e.appendChild(o);let d=16,c=[],u=[];const m={};let p=[],g=[];const b={};s.addEventListener("canvas-resized",(()=>{this.Po(s,this.Co(),this.jo(),o,l,d),k(),w()})),s.addEventListener("icat-time-update",(e=>x(e.detail.frame)));const v=()=>this._o().setAttribute("data-show-split-keyframes",("split"===s.layout&&s.mediaOrder.length>1).toString());v(),s.addEventListener("icatlayoutupdate",v),this.Po(s,this.Co(),this.jo(),o,l,d);const f=()=>{d=E.getValue(),E.value=d,this.To(s,o,l,d)},y=()=>{const e=s.fps,t=s.time,i=G(e);return Math.round(t/i)},x=e=>{j.setTime(s.time,s.duration),L.setTime(s.time,s.duration);const t=c[Number(e)];void 0!==t&&s&&s.mediaController&&s.mediaController.setPosition(t);const i=p[Number(e)];void 0!==i&&s&&s.mediaController&&s.mediaController.setSplitPosition(i)},w=()=>{const e=j.container,t=j.svgElement,i=s.fps,a=s.duration,o=G(i),r=Math.round(a/o),l=e.offsetWidth,d=e.offsetHeight;if(Number.isNaN(r))return;De({container:e,array:g,getElementsFn:()=>Array.from(e.querySelectorAll(".keyframe-dot")),createFn:e=>n({tag:"div",attributes:{class:"keyframe-dot",style:`left:${e/r*100}%;`},properties:{frame:e}}),valueKeyFn:e=>e,elementValueKeyFn:e=>e.frame,updateFn:(e,t)=>{e.setAttribute("style",`left:${t/r*100}%;`)}}),t.setAttribute("viewBox",`0 0 ${l} ${d}`);const c=`00,${d/2} ${l},${d/2}`;t.getElementById("keyframe-svg-line").setAttribute("points",c)},k=()=>{const e=L.container,t=L.svgElement,i=s.fps,a=s.duration,o=G(i),r=Math.round(a/o),l=e.offsetWidth,d=e.offsetHeight;if(Number.isNaN(r))return;De({container:e,array:u,getElementsFn:()=>Array.from(e.querySelectorAll(".keyframe-dot")),createFn:e=>n({tag:"div",attributes:{class:"keyframe-dot",style:`left:${e/r*100}%;`},properties:{frame:e}}),valueKeyFn:e=>e,elementValueKeyFn:e=>e.frame,updateFn:(e,t)=>{e.setAttribute("style",`left:${t/r*100}%;`)}}),t.setAttribute("viewBox",`0 0 ${l} ${d}`);const c=`00,${d/2} ${l},${d/2}`;t.getElementById("keyframe-svg-line").setAttribute("points",c)},z=()=>{const e=y(),t=s.splitPosition;b[Number(e)]=t,p=this.Ro(b,s.fps,s.duration,t)||[],g=Object.keys(b).map((e=>parseInt(e,10))),w()},S=()=>{const e=y(),t=s.position;m[Number(e)]=t,c=this.Go(m,s.fps,s.duration,t)||[],u=Object.keys(m).map((e=>parseInt(e,10))),k()},M=()=>{const e=y();g.indexOf(e)>-1&&delete b[`${e}`],p=this.Ro(b,s.fps,s.duration,s.splitPosition)||[],g=Object.keys(b).map((e=>parseInt(e,10))),w(),s.updateTime(s.time,!0)},C=()=>{const e=y();u.indexOf(e)>-1&&delete m[`${e}`],c=this.Go(m,s.fps,s.duration,s.position)||[],u=Object.keys(m).map((e=>parseInt(e,10))),k(),s.updateTime(s.time,!0)},j=n({tag:"keyframe-bar",attributes:{id:"split-keyframes"},properties:{label:"Slider keyframes"}});j.onaddframe=()=>z(),j.ondeleteframe=()=>M(),j.onnextframe=()=>(()=>{const e=y();let t=-1,i=0;for(;-1===t&&i<g.length;)g[Number(i)]>e&&(t=g[Number(i)]),i+=1;if(-1!==t){const e=G(s.fps);s.updateTime(e*t,!0)}})(),j.onpreviousframe=()=>(()=>{const e=y();let t=-1,i=g.length;for(;-1===t&&i>-1;)g[Number(i)]<e&&(t=g[Number(i)]),i-=1;if(-1!==t){const e=G(s.fps);s.updateTime(e*t,!0)}})(),i.appendChild(j);const L=n({tag:"keyframe-bar",attributes:{id:"position-keyframes"},properties:{label:"Position keyframes"}});L.onaddframe=()=>S(),L.ondeleteframe=()=>C(),L.onnextframe=()=>(()=>{const e=y();let t=-1,i=0;for(;-1===t&&i<u.length;)u[Number(i)]>e&&(t=u[Number(i)]),i+=1;if(-1!==t){const e=G(s.fps);s.updateTime(e*t,!0)}})(),L.onpreviousframe=()=>(()=>{const e=y();let t=-1,i=u.length;for(;-1===t&&i>-1;)u[Number(i)]<e&&(t=u[Number(i)]),i-=1;if(-1!==t){const e=G(s.fps);s.updateTime(e*t,!0)}})(),i.appendChild(L);const E=n({tag:"input-element",attributes:{type:"number",label:"Title size"},properties:{value:d}});E.oninputvalue=()=>f();const _=n({tag:"input-element",attributes:{id:"preserve-dimensions-input"},properties:{value:!1,label:"Preserve dimensions",type:"toggle",css:"#input-element-container[data-type=toggle]{ flex-wrap: wrap; } #input-element-container[data-type=toggle] .input-element-label-section{ max-width: 100%; width: 100%; }",oninputvalue:e=>{const t=e.detail,i=t.getValue();t.value=i,s.preserveDimensions=i}}});i.appendChild(n({tag:"div",attributes:{id:"image-export-inputs"},children:[E,_]}));const I=n({tag:"button-element",attributes:{size:"3",text:"Export"}});I.onclick=()=>P(),i.appendChild(I);let T=!1;const P=async()=>{if(T)return;T=!0;const e=h(),t=s.fps,i=s.totalFrames,a=s.getAppData(),r=a.sets.find((e=>e.id===a.activeSet));if(!r)return;const c=r.media.filter((e=>e.visible)),u="split"===s.layout&&c.length>1,m=Math.round(.25*c.reduce(((e,t)=>u?Math.max(e,t.bitrate):e+t.bitrate),0));let p=0;const g=n({tag:"button-element",attributes:{text:"Cancel"}});g.onclick=()=>y();const b=n({tag:"text-element",properties:{key:"Exporting video"}}),v=n({tag:"div",properties:{textContent:"0%"}}),f=n({tag:"div",attributes:{class:"export-video-spinner-message"},children:[b,v,g]});this.Bo(!0,"",f),await s.updateTime(0,!0);const y=()=>{T=!1,this.Bo(!1),x()},x=async()=>{"error"===await window.NvCompareApi.saveVideo({id:e})&&this.Vo("There was an error exporting your video"),this.Bo(!1),T=!1},w=async()=>{if(!T)return;const t=await this.Ao(s,o,l,d);if("error"===await((t,i)=>window.NvCompareApi.exportVideoFrame({id:e,content:t,finish:i}))(t.split(";base64,").pop(),p===i-1))return T=!1,this.Bo(!1),this.Vo("There was an error exporting your video");if(T){if(p>=i)return x();await s.mediaController.nextFrame(),T&&(p+=1,i>0&&(v.textContent=`${Math.round(p/i*100)}%`),w())}};window.NvCompareApi.initializeExportVideo({id:e,fps:t,bitrate:m}),w()}};zo=()=>{"Web"===this.mode?this.Oo():"Image"===this.mode?this.Ho():"Video"===this.mode&&this.$o()};yo=()=>{this.I().innerHTML='<content-overlay id="export-content-overlay" scrim="true"></content-overlay>';const e=this.Rs();e.oncontentoverlayclose=()=>{this.visible=!1},e.appendChild(n({tag:"text-element",attributes:{slot:"heading",key:"Export"}}));const t=n({tag:"tab-buttons",attributes:{id:"export-mode-tabs"},properties:{tabs:la,value:this.xo}});t.ontabclicked=e=>{this.mode=e.detail};const i=n({tag:"div",attributes:{id:"export-container"},children:[t,n({tag:"div",attributes:{id:"export-content"},children:[n({tag:"div",attributes:{id:"export-controls-container"}}),n({tag:"div",attributes:{id:"export-preview-container"},children:[n({tag:"div",attributes:{class:"preview-heading"},children:[n({tag:"text-element",properties:{key:"Preview"}})]}),n({tag:"div",attributes:{id:"export-preview"}}),n({tag:"div",attributes:{id:"export-footer-btns"}})]})]}),n({tag:"spinner-element",attributes:{id:"export-spinner",visible:"false",scrim:"true"}}),n({tag:"message-overlay",attributes:{id:"export-message",visible:"false"}})]});e.appendChild(i)};attributeChangedCallback(e,t,i){"visible"===e&&(this.visible=i)}}s("export-modal",da);const ca=["maximize","restore"],ha=()=>window.NvCompareApi;class ua extends HTMLElement{Uo=ca[0];O={};constructor(){super(),i(this,a('<header class="titlebar"><div class="drag-region"><div class="window-title"><icon-element type="nvidia"></icon-element><span>NVIDIA ICAT</span></div><div class="window-controls"><div class="button min-button"><icon-element type="minimize"></icon-element></div><div class="button max-button"><icon-element id="max-icon"></icon-element></div><div class="button close-button"><icon-element type="close-thin"></icon-element></div></div></div></header>',".titlebar{background:#2b2b2b;color:#fff;display:block;position:relative;-webkit-user-select:none;user-select:none;z-index:1}.maximized .titlebar{padding:0;width:100%}.window-title{-webkit-app-region:drag;align-items:center;color:hsla(0,0%,100%,.9);display:flex;flex:1;font-size:12px;height:100%;justify-content:center;letter-spacing:.004em;line-height:16px;overflow:hidden;padding:1em 0;text-transform:uppercase;-webkit-user-select:none;width:100%}.window-title icon-element{font-size:1.5em;margin-right:.25em}.maximized .window-title{margin-left:12px}.window-title span{line-height:1.5;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.window-controls{-webkit-app-region:no-drag;display:grid;flex-grow:1;grid-template-columns:repeat(3,46px);height:100%;justify-content:flex-end;position:absolute;right:0;top:0}.window-controls .button{align-items:center;box-sizing:border-box;cursor:pointer;display:flex;grid-row:1/span 1;height:100%;justify-content:center;padding:.5em;pointer-events:all;width:100%}.window-controls .button.disabled{cursor:default;opacity:.3;pointer-events:none;touch-action:none}@media (-webkit-device-pixel-ratio:1.5),(-webkit-device-pixel-ratio:2),(-webkit-device-pixel-ratio:3),(device-pixel-ratio:1.5),(device-pixel-ratio:2),(device-pixel-ratio:3){.window-controls .icon{height:10px;width:10px}}.window-controls .button{color:#fff;-webkit-user-select:none;user-select:none}.window-controls .button:hover{background:hsla(0,0%,100%,.1)}.window-controls .button:active{background:hsla(0,0%,100%,.2)}.close-button:hover{background:#a10005!important}.close-button:active{background:#d90007!important}.close-button:active .icon{-webkit-filter:invert(1);filter:invert(1)}.min-button{grid-column:1}.max-button,.restore-button{grid-column:2}.close-button{font-size:60%;grid-column:3}"))}Wo(){return this.shadowRoot.querySelector(".min-button")}Ko(){return this.shadowRoot.querySelector(".max-button")}qo(){return this.shadowRoot.querySelector(".close-button")}Zo(){return this.shadowRoot.getElementById("max-icon")}Yo=()=>{const e=ha();e&&e.minimize()};Xo=()=>{const e=ha();e&&("maximize"===this.Uo?(e.maximize(),this.Uo="restore"):(e.unmaximize(),this.Uo="maximize"),this.Zo().type=this.Uo)};Jo=()=>{const e=ha();e&&e.close()};K=()=>{Object.keys(this.O).forEach((e=>{try{this.O[`${e}`]()}catch(e){}delete this.O[`${e}`]}))};connectedCallback(){this.K();const e=ha();if(!e)return void(this.style.display="none");const t=wn((()=>{this.Uo=e.isMaximized()?"restore":"maximize",this.Zo().type=this.Uo}));window.addEventListener("resize",t),this.O.resize=()=>{window.removeEventListener("resize",t),delete this.O.resize},this.Wo().addEventListener("click",this.Yo),this.O.minButton=()=>{this.Wo().removeEventListener("click",this.Yo),delete this.O.minButton},this.Ko().addEventListener("click",this.Xo),this.O.maxButton=()=>{this.Ko().removeEventListener("click",this.Xo),delete this.O.maxButton},this.qo().addEventListener("click",this.Jo),this.O.closeButton=()=>{this.qo().removeEventListener("click",this.Jo),delete this.O.closeButton},t()}disconnectedCallback(){this.K()}}s("title-bar",ua);class ma extends HTMLElement{static get observedAttributes(){return["visible"]}he=!1;get visible(){return this.he}set visible(e){this.he=e,this.Rs.visible=e}noSaveEventName="icat-open-project";saveEventName="icat-save-and-open-project";constructor(){super(),i(this,a('<div id="confirm-save-project"><content-overlay id="content-overlay" removecontentonclose="false" scrim="true" movable="false"><div slot="heading" id="heading"><text-element key="Save project"></text-element></div><div class="content"><text-element key="Would you like to save your current project before continuing?"></text-element></div><div slot="footer"><button-element type="outline" text="Cancel" id="cancel-btn"></button-element><button-element id="dont-save-btn" type="outline" text="Don\'t save"></button-element><button-element id="save-btn" text="Save"></button-element></div></content-overlay></div>',":host{height:100%;pointer-events:none;position:absolute;width:100%}#confirm-save-project{height:100%;position:relative;width:100%}#content-overlay{position:absolute}[slot=footer]{align-items:center;display:flex;gap:.5em}.content{font-size:88%}"))}get Rs(){return this.shadowRoot.getElementById("content-overlay")}get Gs(){return this.shadowRoot.getElementById("cancel-btn")}get Qo(){return this.shadowRoot.getElementById("dont-save-btn")}get er(){return this.shadowRoot.getElementById("save-btn")}connectedCallback(){this.Gs.onclick=()=>{this.visible=!1},this.Qo.onclick=()=>{this.visible=!1,this.dispatchEvent(new CustomEvent(this.noSaveEventName,{bubbles:!0,composed:!0}))},this.er.onclick=()=>{this.visible=!1,this.dispatchEvent(new CustomEvent(this.saveEventName,{bubbles:!0,composed:!0}))}}}s("confirm-save-project",ma);class pa extends HTMLElement{O={};mediaId="";$s="";get input(){return this.$s}set input(e){if(this.$s===e)return;this.$s=e;const t=this.tr();t&&(t.value=this.$s)}Fn=[];get inputOptions(){return this.Fn}set inputOptions(e){const t=[{value:"selectFile",label:"Add media",id:"selectfile"}].concat(e);if(Ve(this.Fn,t))return;this.Fn=t;const i=this.tr();i&&(i.options=this.inputOptions)}T="";get type(){return this.T}set type(e){const t=(e,t)=>e&&t?e.setAttribute("data-show",(U(t.options.find((e=>e.value===this.T)),["data","inputs"],0)>1).toString()):void 0;if(this.T===e)return this.I().setAttribute("data-has-type",(!!this.T).toString()),void t(this.tr(),this.ir());this.nr(),this.T=e,this.I().setAttribute("data-has-type",(!!this.T).toString());const i=this.ir();i&&(i.value=this.T,t(this.tr(),i))}ar=[];get typeOptions(){return this.ar}set typeOptions(e){if(Ve(this.ar,e))return;this.ar=e;const t=this.ir();t&&(t.options=this.typeOptions)}An={};get uiSettings(){return this.An}set uiSettings(e){Ve(this.An,e)||(this.An=e,this.Rn())}get visible(){return this.sr().visible}set visible(e){this.sr().visible=e,this.visible||this.clear()}rr;constructor(){super(),i(this,a('<content-overlay id="media-overlay-settings-modal" visible="false" removecontentonclose="false" movable="true" scrim="false"><div slot="heading" id="media-overlay-setting-heading"><span id="media-overlay-setting-heading-label"></span><span>&nbsp;</span><text-element key="overlay settings"></text-element></div><div slot="scrim" class="media-setting-bg"></div><div class="media-overlay-settings-content"><div id="container" data-has-type="false"><input-element id="type-options-select" type="select" label="Type" overflowbreakout="true"></input-element><input-element id="input-options-select" type="select" label="Media" overflowbreakout="true"></input-element><div id="ui-input-container"></div><div id="footer"><div class="left-side"><button-element text="Remove" type="danger" id="delete-btn"></button-element><button-element text="Hide" type="outline" id="visible-btn"></button-element></div><div class="right-side"><button-element text="Ok" id="ok-btn"></button-element></div></div></div></div></content-overlay>',"#media-overlay-settings-modal{font-size:87.5%}#container{display:flex;flex-direction:column;gap:1em;padding-bottom:1em}#container input-element[data-show=false],#container[data-has-type=false] #footer{display:none}#media-overlay-setting-heading{align-items:center;display:flex;flex-wrap:wrap}#ui-input-container{display:flex;flex-direction:column;gap:1em}#footer{display:flex;gap:.5em;justify-content:space-between;padding:1em 0 0}#footer .left-side,#footer .right-side{align-items:center;display:flex;gap:.5em}#footer .left-side{flex-grow:1}"))}lr=()=>this.shadowRoot.getElementById("media-overlay-setting-heading-label");sr=()=>this.shadowRoot.getElementById("media-overlay-settings-modal");tr=()=>this.shadowRoot.getElementById("input-options-select");ir=()=>this.shadowRoot.getElementById("type-options-select");dr=()=>this.shadowRoot.getElementById("ui-input-container");I=()=>this.shadowRoot.getElementById("container");cr=()=>this.shadowRoot.getElementById("ok-btn");hr=()=>this.shadowRoot.getElementById("visible-btn");yn=()=>this.shadowRoot.getElementById("delete-btn");ur=()=>{this.dispatchEvent(new CustomEvent("delete-media-filter",{bubbles:!0,composed:!0,detail:this.mediaId}))};Jo=()=>{this.visible=!1};mr=e=>{Ne(e);const t=this.ir();if(!t)return;const i=t.getValue();if(i===this.type)return;const n=this.mediaId;this.dispatchEvent(new CustomEvent("media-overlay-type-change",{composed:!0,bubbles:!0,detail:{id:n,type:i}}))};pr=e=>{Ne(e);const t=this.tr();if(!t)return;const i=t.getValue(),n=()=>{this.rr&&(this.rr.blur(),this.rr.value=null,this.rr=null)};if(n(),void 0===i||"undefined"===i)return;if("selectFile"===i)return this.rr=en(b),this.rr.multiple=!1,this.rr.onchange=()=>{this.dispatchEvent(new CustomEvent("media-overlay-add-file",{composed:!0,bubbles:!0,detail:{id:this.mediaId,file:U(this.rr,["files",0])}})),n()},void this.rr.click();if(i===this.input)return;const a=this.mediaId;this.dispatchEvent(new CustomEvent("media-overlay-input-chnage",{composed:!0,bubbles:!0,detail:{id:a,value:i}}))};gr=e=>{Ne(e);const t=e.detail,i=t.getValue(),n=t.getAttribute("name");this.dispatchEvent(new CustomEvent("updateshadersetting",{bubbles:!0,composed:!0,detail:{key:n,value:i,id:this.mediaId}}))};nr=()=>{this.dr().innerHTML=""};Rn=()=>Rn(this.dr(),this.An);br=()=>{this.dispatchEvent(new CustomEvent("toggle-show-filter",{bubbles:!0,composed:!0,detail:this.mediaId}))};K=()=>Object.keys(this.O).forEach((e=>{try{this.O[`${e}`]()}catch(e){console.warn(e)}}));setFiltersList=e=>{this.typeOptions=e.slice()};open=(e,t,i,n)=>{this.mediaId=e.id,this.update(e,t,i,n),this.visible=!0};update=(e,t,i,n)=>{this.inputOptions=i.slice(),this.setFiltersList(n),this.input=t,this.type=U(n.find((t=>t.data.source===e.shaderSource)),["data","id"],""),this.uiSettings=e.shaderSettings,this.lr().textContent=e.base,this.hr().text=e.showShader?"Hide":"Show",this.Rn()};updateInputOptions=e=>{this.inputOptions=e.slice()};clear=()=>{this.mediaId="",this.inputOptions=[],this.typeOptions=[],this.input="",this.type="",this.lr().textContent="",this.nr()};connectedCallback(){this.K(),this.ir().addEventListener("inputvalue",this.mr),this.O.handleTypeChange=()=>{this.ir().removeEventListener("inputvalue",this.mr),delete this.O.handleTypeChange},this.tr().addEventListener("inputvalue",this.pr),this.O.handleInputChange=()=>{this.tr().removeEventListener("inputvalue",this.pr),delete this.O.handleInputChange},this.dr().addEventListener("inputvalue",this.gr),this.O.handleSettingChange=()=>{this.dr().removeEventListener("inputvalue",this.gr),delete this.O.handleSettingChange},this.yn().addEventListener("click",this.ur),this.O.ur=()=>{this.yn().removeEventListener("click",this.ur),delete this.O.ur},this.cr().addEventListener("click",this.Jo),this.O.Jo=()=>{this.cr().removeEventListener("click",this.Jo),delete this.O.Jo},this.hr().addEventListener("click",this.br),this.O.br=()=>{this.hr().removeEventListener("click",this.br),delete this.O.br},this.type=this.T}disconnectedCallback(){this.K()}}s("media-overlay-settings",pa);class ga extends HTMLElement{O={};mediaId="";get visible(){return this.sr().visible}set visible(e){this.sr().visible=e,this.visible||this.clear()}vr=[];get infoTexts(){return this.vr}set infoTexts(e){Ve(this.vr,e)||(this.vr=e,this.yr=!0,this.vr.length>0?(this.wr().style.removeProperty("display"),this.kr().style.removeProperty("display"),this.zr().style.removeProperty("display")):(this.wr().style.display="none",this.kr().style.display="none",this.zr().style.display="none"))}Sr=[];get timestamps(){return this.Sr}set timestamps(e){Ve(this.Sr,e)||(this.Sr=e,this.yr=!0)}yr=!1;constructor(){super(),i(this,a('<content-overlay id="media-data-modal-container" visible="false" removecontentonclose="false" movable="true" scrim="false"><div slot="heading" id="media-data-heading"><span id="media-data-heading-label"></span><span>&nbsp;</span><text-element key="data"></text-element></div><div slot="scrim" class="media-setting-bg"></div><div class="media-data-content"><div id="container"><div id="data-input-container"></div></div></div><div id="footer" slot="footer"><div class="left-side"><button-element text="Add new" type="outline" id="add-btn"></button-element><button-element text="Import" type="outline" id="import-btn"></button-element><button-element text="Clear all" type="danger" id="clear-all-btn"></button-element></div><div class="right-side"><button-element text="Download" type="outline" id="download-btn"></button-element><button-element text="Apply" id="apply-btn"></button-element></div></div></content-overlay>',"#media-data-modal-container{font-size:87.5%}#container[data-empty=true] #footer{display:none}#media-data-heading{align-items:center;display:flex;flex-wrap:wrap}#data-input-container{display:flex;flex-direction:column;gap:1em;padding-bottom:2em}#data-input-container:empty{display:none}#footer{display:flex;gap:.5em;justify-content:space-between;width:100%}#footer .left-side,#footer .right-side{align-items:center;display:flex;gap:.5em}#footer .left-side{flex-grow:1}.media-data-item-container{align-items:center;display:flex;gap:1em;max-width:40em}.media-data-item-container .start-end-input{max-width:4em;min-width:4em;width:4em}.media-data-item-container .timeline-point-input{max-width:5em;min-width:5em;width:5em}.media-data-item-container [data-field=timelinePoint]{margin-top:.25em}.media-data-item-container>button-element{margin-top:1em}"))}lr=()=>this.shadowRoot.getElementById("media-data-heading-label");sr=()=>this.shadowRoot.getElementById("media-data-modal-container");Vn=()=>this.shadowRoot.getElementById("data-input-container");Mr=()=>this.shadowRoot.getElementById("add-btn");wr=()=>this.shadowRoot.getElementById("apply-btn");zr=()=>this.shadowRoot.getElementById("clear-all-btn");kr=()=>this.shadowRoot.getElementById("download-btn");Cr=()=>this.shadowRoot.getElementById("import-btn");jr=()=>{this.Vn().innerHTML=""};K=()=>Object.keys(this.O).forEach((e=>{try{this.O[`${e}`]()}catch(e){console.warn(e)}}));Lr=()=>De({container:this.Vn(),array:this.vr,getElementsFn:()=>Array.from(this.shadowRoot.querySelectorAll(".media-data-item-container")),elementValueKeyFn:e=>e.itemId,valueKeyFn:e=>e.id,createFn:e=>{const t=n({tag:"div",attributes:{class:"media-data-item-container","data-id":e.id},properties:{itemId:e.id},children:[n({tag:"input-element",attributes:{"data-id":e.id,"data-field":"label"},properties:{label:"Value",value:e.label}}),n({tag:"input-element",attributes:{class:"start-end-input","data-id":e.id,"data-field":"start"},properties:{type:"number",label:"Start",value:e.start}}),n({tag:"input-element",attributes:{class:"start-end-input","data-id":e.id,"data-field":"end"},properties:{type:"number",label:"End",value:e.end}}),n({tag:"input-element",attributes:{class:"timeline-point-input","data-id":e.id,"data-field":"timelinePoint"},properties:{type:"checkbox",label:"Graph",value:e.timelinePoint,oninputvalue:e=>{e.detail.value=e.detail.getValue()}}}),n({tag:"button-element",attributes:{"data-id":e.id,size:"1",iconsize:"2.5em",type:"outline",hoversecondary:"true",title:"Go to start"},properties:{icon:"previous-frame",onclick:()=>this.Er(e.id)}}),n({tag:"button-element",attributes:{"data-id":e.id,size:"1",iconsize:"2.5em",type:"outline",hoversecondary:"true",title:"Go to end"},properties:{icon:"next-frame",onclick:()=>this._r(e.id)}}),n({tag:"button-element",attributes:{"data-id":e.id,size:"1",iconsize:"2.5em",type:"danger",hoversecondary:"true",title:"delete"},properties:{icon:"close",onclick:()=>{this.vr=this.vr.filter((t=>t.id!==e.id)),t.remove()}}})]});return t},updateFn:(e,t)=>{e.querySelector('[data-field="label"]').value=t.label;e.querySelector('[data-field="start"]').value=t.start;e.querySelector('[data-field="end"]').value=t.end;e.querySelector('[data-field="timelinePoint"]').value=t.timelinePoint}});Ir=()=>{0===this.infoTexts.length&&this.dispatchEvent(new CustomEvent("set-info-texts-visibility",{bubbles:!0,composed:!0,detail:{id:this.mediaId,showInfoText:!0}})),this.infoTexts=this.Tr().concat([{id:h(),label:"",start:0,end:this.timestamps[this.timestamps.length-1],timelinePoint:!1}]),this.yr&&this.Lr()};Tr=()=>Array.from(this.shadowRoot.querySelectorAll(".media-data-item-container")).reduce(((e,t)=>{const i=t.querySelector('[data-field="end"]').getValue(),n={id:t.getAttribute("data-id"),label:t.querySelector('[data-field="label"]').getValue(),start:t.querySelector('[data-field="start"]').getValue(),end:0===i?void 0:i,timelinePoint:t.querySelector('[data-field="timelinePoint"]').getValue()};return e.concat([n])}),[]);Pr=()=>this.dispatchEvent(new CustomEvent("update-media-info-texts",{bubbles:!0,composed:!0,detail:{mediaId:this.mediaId,infoTexts:this.Tr()}}));Fr=()=>{this.infoTexts=[],this.yr&&this.Lr(),this.Pr()};Er=e=>{const t=this.Tr().find((t=>t.id===e));t&&this.Ar(void 0===t.start?this.timestamps[0]:t.start)};_r=e=>{const t=this.Tr().find((t=>t.id===e));t&&this.Ar(void 0===t.end?this.timestamps[this.timestamps.length-1]:t.end)};Ar=e=>this.dispatchEvent(new CustomEvent("go-to-info-text-time",{bubbles:!0,composed:!0,detail:{mediaId:this.mediaId,time:e}}));Rr=()=>{const e=this.Tr(),t=document.createElement("a"),i=URL.createObjectURL(new Blob([JSON.stringify(e,null,2)],{type:"text/plain"}));t.href=i,t.download=`${this.lr().textContent}.json`,t.click()};Gr=()=>{let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=()=>{const t=e.files[0];e=null;const i=new FileReader;i.onerror=()=>this.dispatchEvent(new CustomEvent("set-icat-message",{bubbles:!0,composed:!0,detail:`Error reading file ${t.name}`})),i.onload=()=>{const e=[];try{JSON.parse(i.result).forEach((t=>{if(!t.label||void 0===t.id)return;const i={id:t.id,label:t.label,start:t.start,end:t.end,timelinePoint:t.timelinePoint||!1};e.push(i)}))}catch(e){}if(0===e.length)return this.dispatchEvent(new CustomEvent("set-icat-message",{composed:!0,bubbles:!0,detail:["Error importing, invalid data"]}));this.infoTexts=e,this.yr&&this.Lr()},i.readAsText(t)},e.click()};open=e=>{this.jr(),this.mediaId=e.id,this.update(e),this.visible=!0};update=e=>{this.mediaId=e.id,this.infoTexts=e.infoTexts.slice(),this.timestamps=e.timestamps.slice(),this.lr().textContent=e.base,this.yr&&this.Lr()};clear=()=>{this.mediaId="",this.infoTexts=[],this.timestamps=[],this.lr().textContent="",this.jr()};connectedCallback(){this.K(),this.Mr().addEventListener("click",this.Ir),this.O.Br=()=>{this.Mr().removeEventListener("click",this.Ir),delete this.O.Br},this.wr().addEventListener("click",this.Pr),this.O.Pr=()=>{this.wr().removeEventListener("click",this.Pr),delete this.O.Pr},this.zr().addEventListener("click",this.Fr),this.O.Fr=()=>{this.zr().removeEventListener("click",this.Fr),delete this.O.Fr},this.kr().addEventListener("click",this.Rr),this.O.Rr=()=>{this.kr().removeEventListener("click",this.Rr),delete this.O.Rr},this.Cr().addEventListener("click",this.Gr),this.O.Gr=()=>{this.Cr().removeEventListener("click",this.Gr),delete this.O.Gr}}disconnectedCallback(){this.K()}}s("media-data-modal",ga);class ba extends HTMLElement{static get observedAttributes(){return["position","top","bottom","maxwidth","messages","autocloseseconds"]}Vr;Nr=null;get autocloseseconds(){return this.Nr}set autocloseseconds(e){const t=te(e,null);this.Nr!==t&&(this.Nr=t,this.Dr())}Ri="top";get position(){return this.Ri}set position(e){const t=le(e,["top","bottom"],"top");this.Ri!==t&&(this.Ri=t,this.I().setAttribute("data-position",t))}Or="";get top(){return this.Or}set top(e){const t=e||"";this.Or!==t&&(this.Or=t,this.I().style.paddingTop=t)}Hr="";get bottom(){return this.Hr}set bottom(e){const t=e||"";this.Hr!==t&&(this.Hr=t,this.I().style.paddingBottom=t)}$r="";get maxwidth(){return this.$r}set maxwidth(e){const t=e||"";this.$r!==t&&(this.$r=t,this.Ur().style.maxWidth=t)}Wr=[];get messages(){return this.Wr}set messages(e){const i=e=>(e=>"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName)(e)||(e=>"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)(e),a=e=>"string"==typeof e?{text:e}:e.text&&"string"==typeof e.text||e.dom&&i(e.dom)?e:i(e)?{dom:e}:void 0,s=(()=>{let t;try{const i=e;t=JSON.parse(i)}catch(i){Array.isArray(e)&&(t=e)}return t&&t.length?t.map(a).filter((e=>!!e)):[]})();Ve(s,this.Wr)||(this.Wr=s,De({container:this.Ur(),getElementsFn:()=>this.Kr(),array:this.Wr,elementValueKeyFn:e=>{const t=e.getAttribute("data-index");if(t)return parseInt(t,10)},valueKeyFn:(e,t)=>t,createFn:(e,a)=>{const s=[];e.text?s.push(n({tag:"div",attributes:{class:"snack-bar-text"},properties:{textContent:t.sanitize(U(e,["text"],""))}})):i(e.dom)&&s.push(n({tag:"div",attributes:{class:"snack-bar-dom"},children:[e.dom]}));const o=n({tag:"button-element",attributes:{icon:"close",class:"close-btn",type:"link"},properties:{onclick:()=>{this.dispatchEvent(new CustomEvent("snack-bar-message-closed",{bubbles:!0,composed:!0,detail:e}))}}});return s.push(o),n({tag:"div",attributes:{"data-index":a.toString(),class:"snack-bar-item"},children:s})},updateFn:(e,a,s)=>{e.setAttribute("data-index",s.toString());const o=e.querySelector(".close-btn");if(!o)return;let r;const l=e.querySelector(".snack-bar-text");l&&e.removeChild(l);const d=e.querySelector(".snack-bar-dom");d&&e.removeChild(d),a.text?r=n({tag:"div",attributes:{class:"snack-bar-text"},properties:{textContent:t.sanitize(U(a,["text"]))}}):i(a.dom)&&(r=n({tag:"div",attributes:{class:"snack-bar-dom"},children:[a.dom]})),e.insertBefore(r,o),o.onclick=()=>{this.dispatchEvent(new CustomEvent("snack-bar-message-closed",{bubbles:!0,composed:!0,detail:a}))}}}),this.Dr())}constructor(){super(),i(this,a('<div id="snack-bar-container" data-position="top"><div id="snack-bar-inner"></div></div>',":host(snack-bar){box-sizing:border-box;display:block;height:100%;pointer-events:none;position:absolute;width:100%}#snack-bar-container{align-items:center;box-sizing:border-box;display:flex;flex-direction:column;height:100%;pointer-events:none;position:absolute;width:100%}#snack-bar-container #snack-bar-inner{display:flex;flex-direction:column;flex-grow:1;justify-content:flex-start;min-height:0;position:relative;width:100%}#snack-bar-container #snack-bar-inner .snack-bar-item{align-items:center;background-color:#5c5c5c;border-radius:2px;box-shadow:0 5px 15px -5px #111,0 0 15px hsla(0,0%,7%,.5);display:flex;justify-content:space-between;margin:1em;max-width:calc(100% - 4em);padding:.5em 0 .5em 1em;pointer-events:all}#snack-bar-container[data-position=bottom] #snack-bar-inner{justify-content:flex-end}"))}I(){return this.shadowRoot.getElementById("snack-bar-container")}Ur(){return this.shadowRoot.getElementById("snack-bar-inner")}Kr(){return Array.from(this.shadowRoot.querySelectorAll(".snack-bar-item"))}Dr=()=>{clearTimeout(this.Vr),null!==this.autocloseseconds&&0!==this.messages.length&&(this.Vr=setTimeout((()=>{this.dispatchEvent(new CustomEvent("snack-bar-message-closed",{bubbles:!0,composed:!0}))}),1e3*this.autocloseseconds))};attributeChangedCallback(e,t,i){"position"===e?this.position=i:"bottom"===e?this.bottom=i:"top"===e?this.top=i:"maxwidth"===e?this.maxwidth=i:"messages"===e?this.messages=i:"autocloseseconds"===e&&(this.autocloseseconds=i)}connectedCallback(){this.position=this.getAttribute("position"),this.top=this.getAttribute("top"),this.bottom=this.getAttribute("bottom"),this.maxwidth=this.getAttribute("maxwidth"),this.messages=this.getAttribute("messages"),this.autocloseseconds=this.getAttribute("autocloseseconds")}}s("snack-bar",ba);class va extends HTMLElement{sourceLoader=e=>Promise.resolve(e);parentApp;mediaController;setList;mediaList;overlayList;fileList;activeSet="";seeking=!1;isPlaying=!1;get mediaOrder(){const e=this.setList.get(this.activeSet);return e&&e.mediaOrder||[]}get viewportDimensions(){const e=this.qr.mediaController;let t=0,i=0;if(e){const n=this.getBoundingClientRect(),a=e.getBoundingClientRect();t=a.top-n.top,i=a.left-n.left}return this.mediaController?{...this.mediaController.viewportDimensions,top:t,left:i}:{top:t,left:i,paneWidth:0,paneHeight:0,height:0,width:0,minZoom:100,fitScale:1,fitWidth:0,fitHeight:0,fitPaneWidth:0,fitPaneHeight:0,contentWidth:0,contentHeight:0}}get fps(){return this.mediaController?this.mediaController.fps:0}get time(){return this.mediaController?this.mediaController.time:0}get startTime(){return this.mediaController?this.mediaController.startTime:0}get endTime(){return this.mediaController?this.mediaController.endTime:0}get duration(){return this.mediaController?this.mediaController.duration:0}get maxContentDuration(){return this.mediaController?this.mediaController.maxContentDuration:0}get totalFrames(){return this.mediaController?this.mediaController.totalFrames:0}get position(){return this.mediaController?{...this.mediaController.position}:{x:0,y:0,z:100}}get layout(){return this.mediaController?this.mediaController.layout:y[0]}get splitPosition(){return this.mediaController?this.mediaController.splitPosition:.5}get exposure(){return this.mediaController?this.mediaController.exposure:1}get gamma(){return this.mediaController?this.mediaController.gamma:1}get hasVideo(){return Array.from(this.mediaList.values()).findIndex((e=>"video"===e.type))>-1}O={};qr;Zr=[];Yr=[];Xr;Jr=[];Qr=!1;Wr={};bn=!1;el="";tl=[];Ma=0;il={};nl=!1;L="";get packageType(){return this.L}set packageType(e){const t=le(e,["external","internal"],"external");this.L=t;const i=this.qr.topBar;i&&(i.packageType=t);const n=this.qr.container;n&&n.setAttribute("data-package",t)}al=!1;get preserveDimensions(){return this.al}set preserveDimensions(e){const t=$(e);t!==this.al&&(this.al=t,this.mediaController&&this.mediaController.setPreserveDimensions(t))}j=!1;get isEmbed(){return this.j}set isEmbed(e){const t=$(e);this.j=t;const i=this.qr.container;i&&i.setAttribute("data-is-embed",t.toString());const n=this.qr.playbackControls;n&&n.setIsEmbed(t);const a=this.qr.topBar;a&&(a.isEmbed=t);const s=this.qr.mediaInfo;if(s&&(s.editable=!t),t){this.uiVisibility={...this.uiVisibility,setSelect:!0,titleBar:!1};const e=this.shadowRoot.querySelector("title-bar");e&&e.setAttribute("data-show",this.sl.titleBar.toString())}else this.uiVisibility={...this.uiVisibility,setSelect:!1}}sl={antiAliasSelect:!0,fullscreenButton:!0,gridSelect:!0,helpButton:!0,layersButton:!0,layoutTabs:!0,loopButton:!0,mediaInfo:!0,pixelDataButton:!1,progressBar:!0,setSelect:!0,speedSelect:!0,startEndTime:!0,timeDisplay:!0,titleBar:!0,videoControls:!0,zoomSelect:!0,contentSidebar:!0,timeline:!0,controlBar:!0,addFilterBtn:!0,addLogoBtn:!0,inOutSlider:!0,timelineInOutSlider:!1,appSettingsBtn:!0};get uiVisibility(){return{...this.sl}}set uiVisibility(e){this.sl={...this.sl,...e};const t=this.qr.contentSidebar;t&&(t.uiVisibility=this.sl);const i=this.qr.playbackControls;i&&(i.uiVisibility=this.sl);const n=this.qr.mediaInfo;n&&(n.visible=this.sl.mediaInfo);const a=this.qr.layoutBtnSplit;a&&a.setAttribute("data-show",this.sl.layoutTabs.toString());const s=this.qr.layoutBtnTile;s&&s.setAttribute("data-show",this.sl.layoutTabs.toString());const o=this.qr.setSelect;o&&o.setAttribute("data-show",this.sl.setSelect.toString());const r=this.qr.helpBtn;r&&r.setAttribute("data-show",this.sl.helpButton.toString());const l=this.qr.appSettingsBtn;l&&l.setAttribute("data-show",this.sl.appSettingsBtn.toString());const d=this.shadowRoot.querySelector("title-bar");d&&d.setAttribute("data-show",this.sl.titleBar.toString())}Js=!1;get integerScaling(){return this.Js}set integerScaling(e){this.Js=e,this.ol||me.set({integerScaling:e}),this.mediaController&&(this.mediaController.integerScaling=e);const t=this.qr.appSettingsModal;t&&(t.integerScaling=e)}M="auto";get renderMode(){return this.M}set renderMode(e){this.M=e,this.mediaController&&(this.mediaController.renderMode=this.M)}t=!1;get displayRenderMode(){return this.t}set displayRenderMode(e){this.t=$(e),this.mediaController&&(this.mediaController.displayRenderMode=this.t)}rl=!1;get displayFpsStats(){return this.rl}set displayFpsStats(e){this.rl=$(e)}C=!1;get useSingleCanvas(){return this.C}set useSingleCanvas(e){const t=ae(e);t!==this.C&&(this.C=t,this.mediaController&&this.mediaController.setUseSingleCanvas(this.C))}get ol(){let e=!1,t=this.parentElement;for(;!e&&t&&t!==document.body;)e="ICAT-APP"===t.tagName,t=t.parentElement;return e}constructor(){super(),i(this,a('<div class="app-container" tabindex="0" data-has-media="false" data-has-media-or-sets="false"><title-bar></title-bar><div class="app-content"><div class="app-top"><div class="app-top-inner"><top-bar id="top-bar-element"><button-element id="toggle-editor-btn" slot="left" text="Hide layout" type="link" icon="layout-detail" size="3" dim="2"></button-element><button-element id="layout-btn-tile" slot="center" text="Side-by-side" type="active-underline" size="4" dim="2" textwrap="false"></button-element><button-element id="layout-btn-split" slot="center" text="Split screen" type="active-underline" size="4" dim="2" textwrap="false"></button-element><button-element id="add-new-media-btn" slot="right" text="Add media" size="3"></button-element><set-select id="sets-select" slot="right"></set-select><button-element id="new-project-btn" slot="right" icon="plus" iconsize="1.7em" text="New Project" type="link" size="3" dim="2" textwrap="false"></button-element><button-element id="open-project-btn" slot="right" icon="folder-open" iconsize="1.7em" text="Open" type="link" size="3" dim="2"></button-element><button-element id="save-project-btn" slot="right" icon="floppy" iconsize="1.7em" text="Save" type="link" size="3" dim="2"></button-element><div class="divider" slot="right"></div><button-element id="export-project-btn" slot="right" icon="export" iconsize="1.7em" text="Export" type="link" size="3" dim="2"></button-element><button-element id="settings-btn" slot="right" icon="settings" type="link" size="6" dim="2" slim="true" hoversecondary="true"></button-element><button-element id="help-btn" slot="right" icon="help-circle" type="link" size="6" dim="2" slim="true" hoversecondary="true"></button-element></top-bar></div></div><div id="app-bottom"><content-sidebar id="content-sidebar"></content-sidebar><div id="app-main-content-wrapper"><default-screen id="no-media"></default-screen><div id="app-main-content"><div id="media-content-container"><div id="media-controller-container"></div><div id="logos-container"></div></div><div class="media-controller-controls"><div class="media-metadata-wrapper"><media-info-bar id="media-metadata-container"></media-info-bar></div><div class="media-controller-playback-controls"><media-controls id="playback-controls"></media-controls></div></div></div></div></div><media-overlay-settings id="media-overlay-settings"></media-overlay-settings><media-data-modal id="media-data-modal"></media-data-modal><app-settings id="app-settings-modal" visible="false"></app-settings><ab-modal id="ab-modal" visible="false"></ab-modal><export-modal id="export-modal" visible="false"></export-modal><confirm-save-project id="confirm-save-project-modal" visible="false"></confirm-save-project><confirm-delete-media id="confirm-delete-media-modal" visible="false"></confirm-delete-media><confirm-delete-set id="confirm-delete-set-modal" visible="false"></confirm-delete-set><spinner-element visible="false" message="" scrim="true" id="app-spinner"></spinner-element><spinner-element visible="false" message="" scrim="true" id="image-transcode-spinner"></spinner-element><message-overlay id="app-message"></message-overlay><snack-bar id="video-stall-message" maxwidth="50em" top="3em"></snack-bar></div><div id="media-inputs"></div></div>',':host{display:block;height:100%;outline:none!important;overflow:hidden;position:relative;width:100%}.app-container{background-color:#000;color:#eee;font-family:sans-serif;font-size:inherit;height:100%;line-height:150%;outline:none!important;position:absolute;width:100%}.app-container,.app-container .app-content{display:flex;flex-direction:column;flex-grow:1}.app-container .app-content{overflow:hidden;position:relative}.app-container .media-controller-controls{display:inline-flex;flex-direction:column}.app-container #media-content-container{background-color:#000;flex-grow:1;position:relative}.app-container #logos-container{height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.app-container #app-main-content-wrapper{display:flex;flex-direction:column;overflow:hidden;position:relative;width:100%}.app-container [data-hide=true],.app-container [data-show=false]{display:none}.app-container[data-has-media=false] #export-project-btn,.app-container[data-has-media=false] #layout-btn-split,.app-container[data-has-media=false] #layout-btn-tile,.app-container[data-has-media=false] .media-controller-playback-controls{opacity:.25;pointer-events:none}.app-container[data-has-media=false] #app-main-content{height:100%;opacity:0;pointer-events:none;position:absolute;width:100%;z-index:-1}.app-container[data-has-media=false] #no-media{display:block}.app-container[data-has-media-or-sets=false] #new-project-btn,.app-container[data-has-media-or-sets=false] #save-project-btn{opacity:.25;pointer-events:none}.app-container[data-has-media=true] #no-media{display:none}.app-container[data-has-media=true] #app-main-content{display:flex}.app-container[data-empty-set=true] .media-controller-playback-controls{display:none!important}.app-container[data-empty-set=true] #no-media{display:block}.app-container[data-fullscreen=true] content-sidebar,.app-container[data-fullscreen=true] title-bar{display:none!important}.app-container[data-fullscreen=true] .app-top{height:1em;left:0;overflow:hidden;position:absolute;top:0;transition:height .2s;width:100%;z-index:40}.app-container[data-fullscreen=true] .app-top .app-top-inner{height:0;overflow:hidden;transition:height .2s}.app-container[data-fullscreen=true] .app-top:hover,.app-container[data-fullscreen=true] .app-top:hover .app-top-inner{height:4.7em}.app-container[data-fullscreen=true] .media-controller-controls{bottom:0;left:0;position:absolute;width:100%}.app-container[data-fullscreen=true] #secondary-playback-controls{display:none}.app-container[data-fullscreen=true] #secondary-playback-controls #timelines-container{max-height:10em;overflow:overlay}.app-container[data-fullscreen=true] .media-controller-playback-controls{max-height:1em;opacity:0;transition:max-height .2s,opacity .2s}.app-container[data-fullscreen=true] .media-controller-playback-controls media-controls{pointer-events:none}.app-container[data-fullscreen=true] .media-controller-playback-controls:hover{max-height:2.5em;opacity:1;pointer-events:all}.app-container[data-fullscreen=true] .media-controller-playback-controls:hover media-controls{pointer-events:all}.app-container[data-electron=false] #new-project-btn,.app-container[data-electron=false] #open-project-btn,.app-container[data-electron=false] #save-project-btn,.app-container[data-electron=false] top-bar .divider,.app-container[data-has-media=false] #add-new-media-btn,.app-container[data-is-embed=false] #sets-select,.app-container[data-is-embed=true] #add-new-media-btn,.app-container[data-is-embed=true] #export-project-btn,.app-container[data-is-embed=true] #new-project-btn,.app-container[data-is-embed=true] #open-project-btn,.app-container[data-is-embed=true] #save-project-btn,.app-container[data-is-embed=true] content-sidebar,.app-container[data-is-embed=true] default-screen,.app-container[data-is-embed=true] top-bar .divider,.app-container[data-package=external] content-sidebar,.app-container[data-package=internal] #add-new-media-btn{display:none!important}.app-container title-bar{z-index:99999999999999}set-select{margin-bottom:-.34em}content-sidebar{flex-shrink:0;max-width:50%;min-width:16em}top-bar button-element#toggle-editor-btn{margin-left:-.5em}top-bar button-element{pointer-events:all}top-bar button-element[text]{margin:0 .5em}top-bar button-element[slim=true]{margin:0 .25em}top-bar button-element#layout-btn-split,top-bar button-element#layout-btn-tile{margin:0}top-bar .divider{background-color:currentColor;height:1.5em;margin:0 .25em;opacity:.25;width:1px}#app-bottom{max-height:100%}#app-bottom,#app-main-content{display:flex;flex-grow:1;overflow:hidden;width:100%}#app-main-content{flex-direction:column}.media-metadata-wrapper{font-size:70%}content-overlay[data-showing=false] *{pointer-events:none}#media-inputs{bottom:0;height:0;opacity:0;overflow:hidden;position:absolute;width:0}top-bar #add-new-media-btn{margin:.5em}#stats-meter{left:0;pointer-events:none;position:absolute;top:0}.media-controller-container{background:#000;height:100%;position:relative;width:100%}.media-controller-container .video-container{align-items:center;bottom:0;display:flex;height:1px;left:0;pointer-events:none;position:absolute;width:100%}.media-controller-container .video-container video{display:block;height:1px;width:1px}.media-controller-container .canvas-container{display:flex;height:100%;overflow:hidden;position:absolute;width:100%}.media-controller-container .canvas-container .media-renderer-content{flex:1 1 100%;overflow:hidden;pointer-events:none;position:relative}.media-controller-container .canvas-container .media-renderer-content .media-source-canvas{pointer-events:none;-webkit-transform-origin:0 0;transform-origin:0 0}.media-controller-container .canvas-container .media-renderer-content img{display:none;-webkit-transform-origin:0 0;transform-origin:0 0}.media-controller-container .canvas-container .media-renderer-content[data-hide=true]{display:none}.media-controller-container .canvas-container .media-renderer-content .render-info-text-container,.media-controller-container .canvas-container .media-renderer-content .render-mode-text{padding:.62em 1em}.media-controller-container .canvas-container .media-renderer-content .render-info-text-container:empty,.media-controller-container .canvas-container .media-renderer-content .render-mode-text:empty{display:none}.media-controller-container .canvas-container .media-renderer-content .render-mode-text,.media-controller-container .canvas-container .media-renderer-content .render-text-container{background:rgba(0,0,0,.5);bottom:1px;font-size:66%;left:0;line-height:100%;pointer-events:none;position:absolute}.media-controller-container .canvas-container .media-renderer-content .render-text-container{background:rgba(0,0,0,.65)}.media-controller-container .canvas-container .media-renderer-content .render-text-container .render-info-text-container{display:flex;flex-direction:column;gap:.5em}.media-controller-container .canvas-container .media-renderer-content .render-text-container .render-info-text-container:empty,.media-controller-container .canvas-container .media-renderer-content[data-frame=true] canvas{display:none}.media-controller-container .canvas-container .media-renderer-content[data-frame=true] img{display:block}.media-controller-container .canvas-container .media-renderer-content[data-frame=false] canvas{display:unset}.media-controller-container .canvas-container .media-renderer-content[data-frame=false] img{display:none}.media-controller-container .canvas-container canvas{image-rendering:optimizeSpeed;image-rendering:-o-crisp-edges;image-rendering:pixelated;-webkit-transform-origin:0 0;transform-origin:0 0}.media-controller-container[data-antialias=true] .canvas-container canvas{image-rendering:unset}.media-controller-container .media-controller-single-canvas{display:none;pointer-events:none}.media-controller-container[data-use-single-canvas=true] .canvas-container{opacity:0}.media-controller-container[data-use-single-canvas=true] .media-controller-single-canvas{display:unset;height:100%;max-height:100%;max-width:100%;object-fit:contain;object-position:center center;position:absolute;width:100%}.media-controller-container .split-handle-container-wrapper{height:100%;pointer-events:none;position:absolute;width:100%}.media-controller-container .split-handle-container-wrapper-inner{height:100%;margin:auto;pointer-events:none;position:relative;width:100%}.media-controller-container .split-handle-container{align-items:center;cursor:pointer;display:none;height:100%;justify-content:center;left:0;margin-left:-.5em;pointer-events:all;position:absolute;top:0;-webkit-transform:translateX(0);transform:translateX(0);width:1em}.media-controller-container .split-handle-container .split-handle-inner{align-items:center;display:flex;height:100%;justify-content:center;min-height:0;position:relative;width:100%}.media-controller-container .split-handle-container .split-handle-inner .split-handle-line{background-color:#fff;height:100%;left:calc(50% - 1px);position:absolute;top:0;width:2px}.media-controller-container .split-handle-container .split-handle-inner .split-handle-box{background-color:#eee;border-radius:50%;box-shadow:0 10px 20px -10px #000,inset 0 0 0 1px #fff;height:2.25em;left:0;min-width:2.25em;position:relative;-webkit-transform:scale(.95);transform:scale(.95);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;transition:background-color .2s,-webkit-transform .2s;transition:transform .2s,background-color .2s;transition:transform .2s,background-color .2s,-webkit-transform .2s;width:2.25em}.media-controller-container .split-handle-container .split-handle-inner .split-handle-box:after,.media-controller-container .split-handle-container .split-handle-inner .split-handle-box:before{border-bottom-style:solid;border-bottom-width:0;border-left-style:solid;border-left-width:0;border-right:.125em solid #000;border-top:.125em solid #000;content:"";height:.5em;position:absolute;top:calc(50% - .3em);transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;width:.5em}.media-controller-container .split-handle-container .split-handle-inner .split-handle-box:before{left:1.1em;-webkit-transform:rotate(45deg) scale(.87);transform:rotate(45deg) scale(.87)}.media-controller-container .split-handle-container .split-handle-inner .split-handle-box:after{left:.5em;-webkit-transform:rotate(-135deg) scale(.87);transform:rotate(-135deg) scale(.87)}.media-controller-container .split-handle-container:hover .split-screen-handle-box,.media-controller-container .split-handle-container:hover .split-screen-handle-line{background-color:#fff}.media-controller-container .split-handle-container:hover .split-screen-handle-box{-webkit-transform:scale(1.1);transform:scale(1.1)}.media-controller-container[data-layout-split=true] .canvas-container .media-renderer-content{height:100%;left:0;position:absolute;top:0;width:100%}.media-controller-container[data-layout-split=true] .canvas-container .media-renderer-content[data-layout-split-hide-item=true]{display:none}.media-controller-container[data-layout-split=true] .canvas-container .media-renderer-content[data-layout-split-hide-item=false]:nth-of-type(2) .render-text-container{left:unset;right:0}.media-controller-container[data-layout-split=true] .split-handle-container{display:flex}.media-controller-container .media-controller-grid{background-image:linear-gradient(180deg,hsla(0,0%,88%,.4) .05rem,transparent 0),linear-gradient(90deg,hsla(0,0%,88%,.4) .05rem,transparent 0);background-repeat:round;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.media-controller-container[data-grid="0"] .media-controller-grid{background-size:0 0,0 0}.media-controller-container[data-grid="1"] .media-controller-grid{background-size:4em 4em,4em 4em}.media-controller-container[data-grid="2"] .media-controller-grid{background-size:8em 8em,8em 8em}.media-controller-container[data-grid="3"] .media-controller-grid{background-size:12em 12em,12em 12em}')),this.mediaList=new Map,this.overlayList=new Map,this.setList=new Map,this.fileList=new Map}K=()=>{window.removeEventListener("beforeunload",this.dispose),Object.keys(this.O).forEach((e=>{try{this.O[`${e}`]()}catch(e){console.warn(e)}delete this.O[`${e}`]}))};In=()=>{window.addEventListener("beforeunload",this.dispose),document.addEventListener("visibilitychange",this.ll),this.O.ll=()=>{document.removeEventListener("visibilitychange",this.ll),delete this.O.ll},this.addEventListener("set-icat-message",this.dl),this.O.handleSetMessage=()=>{this.removeEventListener("set-icat-message",this.dl),delete this.O.handleSetMessage},this.addEventListener("video-stall",this.cl),this.O.cl=()=>{this.removeEventListener("video-stall",this.cl),delete this.O.cl},this.qr.videoStallMessage.addEventListener("snack-bar-message-closed",this.hl),this.O.hl=()=>{this.qr.videoStallMessage.removeEventListener("snack-bar-message-closed",this.hl),delete this.O.hl},this.addEventListener("messageoverlayhidden",this.ul),this.O.messageoverlayhidden=()=>{this.removeEventListener("messageoverlayhidden",this.ul),delete this.O.messageoverlayhidden},this.qr.layoutBtnSplit.onclick=()=>this.ml("split"),this.qr.layoutBtnTile.onclick=()=>this.ml("tile"),this.addEventListener("icat-focus",this.focus),this.O.icatfocus=()=>{this.removeEventListener("icat-focus",this.focus),delete this.O.icatfocus};const e=this.shadowRoot.getElementById("toggle-editor-btn");e&&(e.onclick=e=>{Ne(e);const t=!0===this.uiVisibility.contentSidebar&&!0===this.uiVisibility.timeline;this.uiVisibility={...this.uiVisibility,contentSidebar:!t,timeline:!t};this.shadowRoot.getElementById("toggle-editor-btn").text=(t?"Show":"Hide")+" layout"}),this.qr.helpBtn.onclick=()=>{this.ul();this.qr.messageOverlay.innerHTML='<help-content slot="content" id="help-overlay-content"></help-content>'},this.qr.exportBtn.onclick=()=>{const e=this.qr.exportModal;if(e){const t={};this.fileList.forEach(((e,i)=>{e&&(t[`${i}`]=e)})),e.files=t,e.mode="",e.visible=!0;const i=this.getAppData(!0);i.uiVisibility.setSelect=!0,e.data=i}},this.shadowRoot.getElementById("save-project-btn").onclick=()=>this.pl(),this.shadowRoot.getElementById("open-project-btn").onclick=e=>{if(Ne(e),this.el){const e=this.qr.confirmSaveProjectModal;e.noSaveEventName="icat-open-project",e.saveEventName="icat-save-and-open-project",e.visible=!0}else this.gl()},this.addEventListener("icat-open-project",this.gl),this.O.icatopenproject=()=>{this.removeEventListener("icat-open-project",this.gl),delete this.O.icatopenproject},this.addEventListener("icat-save-and-open-project",this.bl),this.O.icatsaveandopenproject=()=>{this.removeEventListener("icat-save-and-open-project",this.bl),delete this.O.icatsaveandopenproject},this.shadowRoot.getElementById("new-project-btn").onclick=()=>{const e=this.qr.confirmSaveProjectModal;e.noSaveEventName="icat-new-project",e.saveEventName="icat-save-and-new-project",e.visible=!0},this.addEventListener("icat-new-project",this.vl),this.O.icatnewproject=()=>{this.removeEventListener("icat-new-project",this.vl),delete this.O.icatnewproject},this.addEventListener("icat-save-and-new-project",this.fl),this.O.icatsaveandnewproject=()=>{this.removeEventListener("icat-save-and-new-project",this.fl),delete this.O.icatsaveandnewproject},this.qr.appSettingsBtn.onclick=()=>{const e=this.qr.appSettingsModal;e&&(e.visible=!0)},this.addEventListener("updateexposure",this.yl),this.O.updateexposure=()=>{this.removeEventListener("updateexposure",this.yl),delete this.O.updateexposure},this.addEventListener("updategamma",this.xl),this.O.updategamma=()=>{this.removeEventListener("updategamma",this.xl),delete this.O.updategamma},this.addEventListener("update-render-mode",this.wl),this.O.updateRenderMode=()=>{this.removeEventListener("update-render-mode",this.wl),delete this.O.updateRenderMode},this.addEventListener("update-display-render-mode",this.kl),this.O.updateDisplayRenderMode=()=>{this.removeEventListener("update-display-render-mode",this.kl),delete this.O.updateDisplayRenderMode},this.addEventListener("update-display-fps",this.zl),this.O.updateDisplayFps=()=>{this.removeEventListener("update-display-fps",this.zl),delete this.O.updateDisplayFps},this.addEventListener("updateintegerscaling",this.Sl),this.O.updateintegerscaling=()=>{this.removeEventListener("updateintegerscaling",this.Sl),delete this.O.updateintegerscaling},this.addEventListener("updatemedialabel",this.Ml),this.O.updatemedialabel=()=>{this.removeEventListener("updatemedialabel",this.Ml),delete this.O.updatemedialabel},this.addEventListener("updatemedianame",this.Cl),this.O.updatemedianame=()=>{this.removeEventListener("updatemedianame",this.Cl),delete this.O.updatemedianame},this.addEventListener("updatemediaposition",this.jl),this.O.updatemediaposition=()=>{this.removeEventListener("updatemediaposition",this.jl),delete this.O.updatemediaposition},this.addEventListener("updateshaderinput",this.Ll),this.O.updateshaderinput=()=>{this.removeEventListener("updateshaderinput",this.Ll),delete this.O.updateshaderinput},this.addEventListener("updateshadersetting",this.El),this.O.updateshadersetting=()=>{this.removeEventListener("updateshadersetting",this.El),delete this.O.updateshadersetting},this.addEventListener("set-info-texts-visibility",this._l),this.O.handleSetInfoTextsVisibility=()=>{this.removeEventListener("set-info-texts-visibility",this._l),delete this.O.handleSetInfoTextsVisibility},this.addEventListener("deleteMedia",this.Il),this.O.deleteMedia=()=>{this.removeEventListener("deleteMedia",this.Il),delete this.O.deleteMedia},this.addEventListener("toggleMute",this.Tl),this.O.toggleMute=()=>{this.removeEventListener("toggleMute",this.Tl),delete this.O.toggleMute},this.addEventListener("switchOrder",this.Pl),this.O.switchOrder=()=>{this.removeEventListener("switchOrder",this.Pl),delete this.O.switchOrder},this.addEventListener("doplay",this.Fl),this.O.doplay=()=>{this.removeEventListener("doplay",this.Fl),delete this.O.doplay},this.addEventListener("dopause",this.Al),this.O.dopause=()=>{this.removeEventListener("dopause",this.Al),delete this.O.dopause},this.addEventListener("setlooping",this.Rl),this.O.setlooping=()=>{this.removeEventListener("setlooping",this.Rl),delete this.O.setlooping},this.addEventListener("gopreviousframe",this.Gl),this.O.gopreviousframe=()=>{this.removeEventListener("gopreviousframe",this.Gl),delete this.O.gopreviousframe},this.addEventListener("gonextframe",this.Bl),this.O.gonextframe=()=>{this.removeEventListener("gonextframe",this.Bl),delete this.O.gonextframe},this.addEventListener("updatetime",this.Vl),this.O.updatetime=()=>{this.removeEventListener("updatetime",this.Vl),delete this.O.updatetime},this.addEventListener("speedupdate",this.Nl),this.O.speedupdate=()=>{this.removeEventListener("speedupdate",this.Nl),delete this.O.speedupdate},this.addEventListener("setgrid",this.Dl),this.O.setgrid=()=>{this.removeEventListener("setgrid",this.Dl),delete this.O.setgrid},this.addEventListener("antialiasupdate",this.Ol),this.O.antialiasupdate=()=>{this.removeEventListener("antialiasupdate",this.Ol),delete this.O.antialiasupdate},this.addEventListener("togglefullscreen",this.Hl),this.O.togglefullscreen=()=>{this.removeEventListener("togglefullscreen",this.Hl),delete this.O.togglefullscreen},this.addEventListener("zoomupdate",this.$l),this.O.zoomupdate=()=>{this.removeEventListener("zoomupdate",this.$l),delete this.O.zoomupdate},this.addEventListener("show-thumbnails",this.Ul),this.O.showthumbnails=()=>{this.removeEventListener("show-thumbnails",this.Ul),delete this.O.showthumbnails},this.addEventListener("select-custom-filter",this.Wl),this.O.selectcustomfilter=()=>{this.removeEventListener("select-custom-filter",this.Wl),delete this.O.selectcustomfilter},this.addEventListener("add-filter",this.Kl),this.O.addfilter=()=>{this.removeEventListener("add-filter",this.Kl),delete this.O.addfilter},this.addEventListener("updatestarttime",this.ql),this.O.updatestarttime=()=>{this.removeEventListener("updatestarttime",this.ql),delete this.O.updatestarttime},this.addEventListener("updateendtime",this.Zl),this.O.updateendtime=()=>{this.removeEventListener("updateendtime",this.Zl),delete this.O.updateendtime},this.addEventListener("updatemediastarttime",this.Yl),this.O.updatemediastarttime=()=>{this.removeEventListener("updatemediastarttime",this.Yl),delete this.O.updatemediastarttime},this.addEventListener("updatemediastartframe",this.Xl),this.O.updatemediastartframe=()=>{this.removeEventListener("updatemediastartframe",this.Xl),delete this.O.updatemediastartframe},this.addEventListener("togglemediavisibility",this.Jl),this.O.togglemediavisibility=()=>{this.removeEventListener("togglemediavisibility",this.Jl),delete this.O.togglemediavisibility},this.addEventListener("toggle-overlay-visibility",this.Ql),this.O.toggleoverlayvisibility=()=>{this.removeEventListener("toggle-overlay-visibility",this.Ql),delete this.O.toggleoverlayvisibility},this.addEventListener("icat-update-media-order",this.ed),this.O.icatupdatemediaorder=()=>{this.removeEventListener("icat-update-media-order",this.ed),delete this.O.icatupdatemediaorder},this.addEventListener("select-frames-images",this.td),this.O.handleSelectFrameImages=()=>{this.removeEventListener("select-frames-images",this.td),delete this.O.handleSelectFrameImages},this.addEventListener("toggle-media-frame-images-visibility",this.nd),this.O.handleToggleFrameImagesVisibility=()=>{this.removeEventListener("toggle-media-frame-images-visibility",this.nd),delete this.O.handleToggleFrameImagesVisibility},this.addEventListener("delete-media-frame-images",this.ad),this.O.handleDeleteFrameImages=()=>{this.removeEventListener("delete-media-frame-images",this.ad),delete this.O.handleDeleteFrameImages},this.addEventListener("open-media-data-modal",this.sd),this.O.handleOpenMediaDataModal=()=>{this.removeEventListener("open-media-data-modal",this.sd),delete this.O.handleOpenMediaDataModal},this.addEventListener("deleteOverlay",this.od),this.O.deleteOverlay=()=>{this.removeEventListener("deleteOverlay",this.od),delete this.O.deleteOverlay},this.addEventListener("updateOverlayValues",this.rd),this.O.updateOverlayValues=()=>{this.removeEventListener("updateOverlayValues",this.rd),delete this.O.updateOverlayValues},this.addEventListener("newset",this.ld),this.O.newset=()=>{this.removeEventListener("newset",this.ld),delete this.O.newset},this.addEventListener("loadset",this.dd),this.O.loadset=()=>{this.removeEventListener("loadset",this.dd),delete this.O.loadset},this.addEventListener("rename-set",this.hd),this.O.renameset=()=>{this.removeEventListener("rename-set",this.hd),delete this.O.renameset},this.addEventListener("confirm-delete-set",this.ud),this.O.confirmdeleteset=()=>{this.removeEventListener("confirm-delete-set",this.ud),delete this.O.confirmdeleteset},this.addEventListener("confirm-delete-media",this.md),this.O.confirmdeletemedia=()=>{this.removeEventListener("confirm-delete-media",this.md),delete this.O.confirmdeletemedia},this.addEventListener("add-media-to-current-set",this.pd),this.O.addmediatocurrentset=()=>{this.removeEventListener("add-media-to-current-set",this.pd),delete this.O.addmediatocurrentset},this.addEventListener("openabfoldersmodal",this.gd),this.O.openabfoldersmodal=()=>{this.removeEventListener("openabfoldersmodal",this.gd),delete this.O.openabfoldersmodal},this.addEventListener("delete-set",this.bd),this.O.deleteset=()=>{this.removeEventListener("delete-set",this.bd),delete this.O.deleteset},this.addEventListener("delete-media-in-all-sets",this.vd),this.O.deletemediainallsets=()=>{this.removeEventListener("delete-media-in-all-sets",this.vd),delete this.O.deletemediainallsets},this.addEventListener("importabsets",this.fd),this.O.importabsets=()=>{this.removeEventListener("importabsets",this.fd),delete this.O.importabsets},this.addEventListener("canvas-resized",this.yd),this.O.canvasresized=()=>{this.removeEventListener("canvas-resized",this.yd),delete this.O.canvasresized},window.addEventListener("keydown",this.xd),this.O.shortcuts=()=>{window.removeEventListener("onkeydown",this.xd),delete this.O.shortcuts},this.onfullscreenchange=()=>{if(!document.fullscreenElement){this.bn=!1;const e=this.qr.container;e&&e.setAttribute("data-fullscreen","false");const t=this.qr.mediaInfo;t&&(t.fullscreen=!1);const i=this.qr.playbackControls;i&&(i.fullscreen=!1),this.focus()}},this.addEventListener("exportmodalclose",this.focus),this.O.exportmodalclose=()=>{this.removeEventListener("exportmodalclose",this.focus),delete this.O.exportmodalclose},this.addEventListener("can-not-display-filter",this.wd),this.O.handleCanNotDisplayFilter=()=>{this.removeEventListener("can-not-display-filter",this.wd),delete this.O.handleCanNotDisplayFilter},this.addEventListener("open-media-overlay-settings",this.kd),this.O.handleOpenMediaOverlaySettings=()=>{this.removeEventListener("open-media-overlay-settings",this.kd),delete this.O.handleOpenMediaOverlaySettings},this.addEventListener("media-overlay-input-chnage",this.zd),this.O.handleMediaOverlayInputChange=()=>{this.removeEventListener("media-overlay-input-chnage",this.zd),delete this.O.handleMediaOverlayInputChange},this.addEventListener("media-overlay-type-change",this.Sd),this.O.handleMediaOverlayTypeChange=()=>{this.removeEventListener("media-overlay-type-change",this.Sd),delete this.O.handleMediaOverlayTypeChange},this.addEventListener("media-overlay-add-file",this.Md),this.O.handleMediaOverlayAddFile=()=>{this.removeEventListener("media-overlay-add-file",this.Md),delete this.O.handleMediaOverlayAddFile},this.addEventListener("delete-media-filter",this.Cd),this.O.handleDeleteMediaFilter=()=>{this.removeEventListener("delete-media-filter",this.Cd),delete this.O.handleDeleteMediaFilter},this.addEventListener("toggle-media-overlay-visibility",this.jd),this.O.handleMediaOverlayVisibilityToggle=()=>{this.removeEventListener("toggle-media-overlay-visibility",this.jd),delete this.O.handleMediaOverlayVisibilityToggle},this.addEventListener("toggle-show-filter",this.Ld),this.O.handleFilterVisibilityToggle=()=>{this.removeEventListener("toggle-show-filter",this.Ld),delete this.O.handleFilterVisibilityToggle},this.addEventListener("update-media-info-texts",this.Ed),this.O.handleUpdateInfoTexts=()=>{this.removeEventListener("update-media-info-texts",this.Ed),delete this.O.handleUpdateInfoTexts},this.addEventListener("go-to-info-text-time",this._d),this.O.handleGoToInfoTextTime=()=>{this.removeEventListener("go-to-info-text-time",this._d),delete this.O.handleGoToInfoTextTime}};Id=()=>{this.uiVisibility=this.sl,this.isEmbed=this.j,this.packageType=Qi;const e=me.get();this.Ma=e.showThumbs,this.integerScaling=e.integerScaling,this.qr.contentSidebar;const t=this.qr.playbackControls;t&&(t.controller={getElementAtPoint:(e,t)=>this.getElementAtPoint(e,t),getMediaIndexAtX:e=>this.getMediaIndexAtX(e),getBoundingClientRect:()=>this.getBoundingClientRect()},t.zoom=100,t.showThumbnails=this.Ma,t.setFiltersList(this.tl));const i=this.qr.container;!l.isElectron&&i&&i.setAttribute("data-electron","false");const n=en(b);let a=e=>{e.preventDefault(),e.stopPropagation(),n.click()};this.addEventListener("selectmedia",a),this.O.selectmedia=()=>{this.removeEventListener("selectmedia",a),a=null,delete this.O.selectmedia},this.shadowRoot.getElementById("add-new-media-btn").onclick=a;const s=async e=>{if(!e.length)return n.blur(),n.value=null,void this.focus();this.mediaController&&this.mediaController.pause(),0===this.setList.size&&await this.createAndLoadSet();const t=this.activeSet,i=[],a=[],s={};e.forEach((e=>{const t=Ae(e);if(void 0===t.type)a.push(t);else{const n=this.addFile(e,t);s[`${t.id}`]={id:n.data.id,isNew:n.isNew},i.push(t)}})),a.forEach((e=>this.setMessage(["Error loading media, unsupported file type",e.path])));const o=(await Promise.all(i.map((e=>this.addMedia(e,t).then((t=>("string"==typeof t&&s[`${e.id}`]&&s[`${e.id}`].isNew&&this.Td(s[`${e.id}`].id),t))))))).filter((e=>!!e&&"string"!=typeof e)),r=U(o,[o.length-1,"media"]),l=this.qr.contentSidebar;l&&r&&l.scrollToMedia(Me(r)),n.blur(),n.value=null,this.focus()};n.onchange=()=>s(Array.from(n.files)),i.ondrop=e=>{e.preventDefault(),e.stopPropagation(),s(Array.from(e.dataTransfer.files))},i.ondragover=e=>{e.preventDefault(),e.stopPropagation()};const o=en(f);let r=()=>o.click();this.addEventListener("selectlogo",r),this.O.selectlogo=()=>{this.removeEventListener("selectlogo",r),r=null,delete this.O.selectlogo},o.onchange=async()=>{o.blur();const e=Array.from(o.files),t=[],i=[],n=[];e.forEach((e=>{const n=we(e.name);-1===f.indexOf(n.toLowerCase())?i.push(e):t.push(e)}));(await Promise.all(t.map(tn))).forEach((e=>{if("string"==typeof e)return n.push(e);this.addFile(e.file,e.data),this.Pd(e.data)})),o.value=null,i.length&&(n.push(`Invalid file${i.length>1?"s":""}. Only files with the following extensions are accepted:`),n.push(f.join(", ")),i.forEach((e=>n.push(function(e=""){return e.split(/\\|\//).pop()||""}(e.name))))),n.length&&this.setMessage(n),this.focus()}};Fd=(e,t,i=!1)=>{if(void 0===t)return;if(i&&this.Zr.slice(-1)[0]&&this.Zr.slice(-1)[0].key===e)return;let n,a=this.Zr.length-1;for(;!n&&a>-1;){const t=this.Zr[Number(a)];t&&t.key===e&&(n=t),a-=1}if(!(n&&n.value===t||"endTime"===e&&0===t)){for(this.Zr.push({key:e,value:t});this.Zr.length>20;)this.Zr.shift();l.clearCache()}};Ad=()=>{const e=this.Zr.pop();if(e)if("antiAlias"!==e.key)if("grid"!==e.key)if("speed"!==e.key)if("startTime"!==e.key)if("endTime"!==e.key){if("switchMedia"!==e.key)return e;this.Rd(e.value,!1)}else this.Gd(e.value,!1);else this.ra(e.value,!1);else this.Bd(e.value,!1);else this.Vd(e.value,!1);else this.Nd(e.value,!1)};Dd=(e,t={})=>{const i={looping:!0,antialias:!1,grid:0,speed:1,layout:y[0],time:0,exposure:1,gamma:1,...t};this.mediaController&&(this.mediaController.dispose(),this.mediaController=null);const n={container:this.qr.mediaController,displayRenderMode:this.displayRenderMode,renderMode:this.renderMode,looping:i.looping,antialias:i.antialias,grid:i.grid,speed:i.speed,layout:i.layout,time:i.time,startTime:i.startTime,endTime:i.endTime,preserveDimensions:this.al,integerScaling:this.Js,useSingleCanvas:this.C,positionCallback:t=>{this.Od({id:e,z:t.z,x:t.x,y:t.y}),this.dispatchEvent(new CustomEvent("icat-position-update",{composed:!0,bubbles:!0,detail:t}))},timeUpdateCallback:e=>{const t=this.qr.playbackControls;t&&(t.setTimeText(e.string),t.progress=e.progress),this.dispatchEvent(new CustomEvent("icat-time-update",{composed:!0,bubbles:!0,detail:e}))},setTimeUpdateCallback:t=>{this.Od({id:e,time:t})},timeDataCallback:t=>{this.Od({id:e,endTime:t.endTime,startTime:t.startTime});const i=this.qr.playbackControls;i&&(i.setTimeText(t.timeString),i.progress=t.progress,i.totalDuration=t.maxContentDuration,i.startTime=t.startTime,i.endTime=t.endTime,i.setDurationText(t.durationText))},playStateUpdate:e=>{this.isPlaying=e,this.qr.playbackControls.playing=e,this.dispatchEvent(new CustomEvent("icat-play-update",{composed:!0,bubbles:!0,detail:e}))},seekingStateUpdate:e=>{this.seeking=e,this.qr.playbackControls.seeking=e}};this.mediaController=new ce(n);const a=this.qr.appSettingsModal;a&&(a.exposure=i.exposure,a.gamma=i.gamma,a.integerScaling=n.integerScaling)};ul=()=>{this.Wr={};this.qr.messageOverlay.innerHTML="",this.focus()};ra=(e,t=!0)=>{this.mediaController&&(t&&this.Fd("startTime",this.mediaController.startTime,!0),this.mediaController.setStartTime(e))};Gd=(e,t=!0)=>{this.mediaController&&(t&&this.Fd("endTime",this.mediaController.endTime,!0),this.mediaController.setEndTime(e))};Hd=e=>{if(this.bn=e,e)"function"==typeof this.requestFullscreen&&this.requestFullscreen();else{if(null===document.fullscreenElement)return;"function"==typeof document.exitFullscreen&&document.exitFullscreen()}const t=this.qr.container;t&&t.setAttribute("data-fullscreen",e.toString());const i=this.qr.mediaInfo;i&&(i.fullscreen=e);const n=this.qr.playbackControls;n&&(n.fullscreen=e),this.focus()};ml=e=>this.Od({id:this.activeSet,layout:e});$d=e=>this.activeSet?this.Od({id:this.activeSet,looping:e}):void 0;Bd=(e,t=!0)=>{t&&this.mediaController&&this.Fd("speed",this.mediaController.speed),this.Od({id:this.activeSet,speed:e})};Vd=(e,t=!0)=>{t&&this.mediaController&&this.Fd("grid",this.mediaController.grid),this.Od({id:this.activeSet,grid:e})};Nd=(e,t=!0)=>{t&&this.mediaController&&this.Fd("antiAlias",this.mediaController.antialias),this.Od({id:this.activeSet,antiAlias:e})};Ud=()=>{const e=U(this.setList.get(this.activeSet),["mediaOrder","length"],0)>0,t=this.setList.size,i=this.qr.container,n=this.qr.defaultScreen;n&&(e?n.style.display="none":n.style.removeProperty("display")),i&&(i.setAttribute("data-has-media",e.toString()),i.setAttribute("data-has-media-or-sets",(e||t>0).toString()))};Wd=e=>{this.qr.layoutBtnSplit.active="split"===e,this.qr.layoutBtnTile.active="tile"===e,this.qr.mediaInfo.layout=e};Kd=()=>{const e=this.qr.videoStallMessage;e&&!this.nl&&(this.nl=!0,e.messages=[{text:"Your GPU is having trouble decoding your media. For better performance, try closing all applications utilizing GPU resources and/or restarting your device."}])};qd=()=>{const e=this.qr.videoStallMessage;e&&(e.messages=[])};dispose=()=>this.disconnectedCallback();updateTime=(e,t=!1)=>{if(!this.mediaController)return;const i=this.mediaController.startTime,n=this.mediaController.endTime,a=Math.max(i,Math.min(n,e));return this.Od({id:this.activeSet,time:a}),t?this.mediaController.seek(a):void 0};focus(){requestAnimationFrame((()=>{const e=this.qr.container;e&&(e.click(),e.focus())}))}setScaleToFit=e=>{Array.from(this.setList.values()).forEach((t=>{this.Od({id:t.id,scaleToFit:e}),e&&this.activeSet===t.id&&this.loadSet(t.id)}))};toDataURL=()=>this.mediaController?this.mediaController.toDataURL():"";setSpinner=(e,t="")=>{const i=this.qr.appSpinner;i.message=t,i.visible=e};setMessage=e=>{const t=h();this.Wr[`${t}`]=e;const i=this.qr.messageOverlay;i.innerHTML="",Object.keys(this.Wr).forEach((e=>{const t=this.Wr[`${e}`];Array.isArray(t)?i.appendChild(n({tag:"div",attributes:{slot:"content",class:"message-group"},children:t.map((e=>n({tag:"text-element",attributes:{key:e}})))})):i.appendChild(n({tag:"text-element",attributes:{slot:"content",key:t}}))}))};getElementAtPoint=(e,t)=>{const i=this.shadowRoot.elementFromPoint(e,t);return i&&"function"==typeof i.getElementAtPoint?i.getElementAtPoint(e,t):i};getMediaIndexAtX=e=>{const t=this.layout,i=this.splitPosition,n=this.mediaOrder,a=n.map((e=>this.mediaList.get(e))).filter((e=>!!e&&e.visible));if("split"===t){if(e>=i){const e=a[1]||a[0];if(e){const t=n.findIndex((t=>t===e.id));return Math.max(t,0)}return n.length-1}const t=a[0];if(t){const e=n.findIndex((e=>e===t.id));return Math.max(e,0)}return 0}const s=1/a.length;let o=-1,r=0;for(;-1===o&&r<a.length;){if(e<s*(r+1)){o=e>=s*r+s/2?r+1:r}r+=1}return Math.max(0,o)};pl=(e=!0)=>l.saveProject(this.getAppData()).then((t=>{t&&(this.el=t,e&&this.setMessage("Your project has been saved"))}));gl(){return l.openProject().then((e=>{if(!e)return;e.projectPath&&(this.el=e.projectPath);const t=e.sets.reduce(((e,t)=>(t.media.forEach((t=>e.push(t))),e)),[]);return e.files={},this.setSpinner(!0),Promise.all(t.map((t=>new Promise((i=>{R(t.name,l.getUrl(null,t.src)).then((n=>{const a=je(null,t);a.file=n,e.files[`${a.id}`]=a,i(!0)})).catch((()=>{i(!1)}))}))))).then((()=>e))})).then((e=>e?this.loadAppData(e):void 0))}vl=async()=>{this.mediaController&&await this.mediaController.pause(),this.el="",this.loadAppData({sets:[],activeSet:"",uiVisibility:Y(this.uiVisibility)})};getAppData=(e=!1)=>{const t={activeSet:this.activeSet,uiVisibility:Y(this.uiVisibility),sets:Array.from(this.setList.values()).map((e=>{const t=Y(e),i=[],n=e=>{if(!e)return;const t=Y(e);return t.src=l.clearedUrl(t.src),t.thumbnails=[],t.frameImages=e.frameImages.map((e=>"string"==typeof e?e:l.isElectron?l.getUrl(e):"")).filter((e=>!!e)),t};return t.media=t.mediaOrder.map((e=>{const t=this.mediaList.get(e);if(!t)return;const a=n(t),s=this.mediaList.get(a.mediaOverlay);return s&&i.push(n(s)),a})).filter((e=>!!e)).concat(i),t.overlays=t.overlayOrder.map((e=>{const t=Y(this.overlayList.get(e));return t.src=l.clearedUrl(t.src),t})),t}))};return e&&(t.files={},this.fileList.forEach(((e,i)=>{e&&(t.files[`${i}`]=e)}))),t};loadAppData=async e=>{this.setSpinner(!0);const i={};e.files&&Object.keys(e.files).forEach((t=>{i[`${t}`]=Y(e.files[`${t}`]),i[`${t}`].file=e.files[`${t}`].file}));const n={...e||{},sets:U(e,["sets"],[]).map((e=>Be(e).set)).filter((e=>!!e))};this.mediaController&&(await this.mediaController.pause(),this.mediaController.dispose(),this.mediaController=null),Object.keys(this.il).forEach((e=>this.Zd(e))),this.setList.clear(),this.mediaList.forEach((e=>{e.src=l.clearedUrl(e.src)})),this.mediaList.clear(),this.fileList.clear(),this.overlayList.clear();const a=this.qr.contentSidebar;if(a&&a.clear(),this.uiVisibility=n.uiVisibility||this.uiVisibility,0===n.sets.length){const e=this.Yd();e.media=[],n.sets.push(e)}let s="";n.sets&&(n.sets[0]&&(s=n.sets[0].id),n.sets.forEach((e=>{e.media.forEach((e=>{e.src=l.clearedUrl(e.src),this.mediaList.set(e.id,e)})),e.overlays&&e.overlays.forEach((e=>{e.src=l.clearedUrl(e.src),this.overlayList.set(e.id,e)})),e.mediaOrder||(e.mediaOrder=e.media.map((e=>e.id))),this.Xd(e)}))),Object.keys(i).forEach((e=>i[`${e}`]?this.Jd(i[`${e}`]):void 0));const o=t.sanitize(n.activeSet?n.activeSet:s);o?await this.loadSet(o):this.setSpinner(!1)};Yd=()=>Ge(this.setList,this.viewportDimensions);Xd=e=>{this.setList.set(e.id,e),this.Qd()};ec=async e=>{const t=this.setList.get(e);if(t){if(this.setList.delete(e),e===this.activeSet){this.mediaController&&(await this.mediaController.pause(),this.mediaController.dispose(),this.mediaController=null),t.mediaOrder.forEach((e=>{const t=this.mediaList.get(e);t&&(t.src=l.clearedUrl(t.src))})),t.overlayOrder.forEach((e=>{const t=this.overlayList.get(e);t&&(t.src=l.clearedUrl(t.src))}));const e=Array.from(this.setList.values())[0];e?await this.loadSet(e.id):await this.createAndLoadSet()}this.Qd(),this.focus()}};Od=e=>{if(!e.id||!this.setList.get(e.id))return;const t=this.viewportDimensions,i=this.setList.get(e.id)||{},n={...i,...e,viewport:{...U(i,["viewport"],t),...U(e,["viewport"],t)}};if(e.mediaOrder&&(n.mediaOrder=e.mediaOrder),this.setList.set(n.id,n),n.id===this.activeSet){const e=U(n,["mediaOrder"],[]),t=U(i,["mediaOrder"],[]),a=e.length!==t.length||-1!==e.findIndex(((e,i)=>t[Number(i)]!==e));a&&(this.mediaController&&this.mediaController.setMediaOrder(e),this.tc(),this.ic(),this.dispatchEvent(new CustomEvent("compare-app-order-update",{bubbles:!0,composed:!0})),this.Ud());const s=U(n,["overlayOrder"],[]),o=U(i,["overlayOrder"],[]),r=s.length!==o.length||-1!==s.findIndex(((e,t)=>o[Number(t)]!==e));r&&this.nc();const l=this.qr.playbackControls;if(l&&(n.startTime!==i.startTime&&(l.startTime=n.startTime),n.endTime!==i.endTime&&(l.endTime=n.endTime),n.z!==i.z&&(l.zoom=n.z),n.time!==i.time&&this.mediaController)){const e=this.mediaController.startTime,t=this.mediaController.endTime;l.progress=(n.time-e)/(t-e)}n.looping!==i.looping&&(this.mediaController&&this.mediaController.setLooping(n.looping),l&&(l.looping=n.looping)),this.mediaController&&(n.layout===i.layout&&this.mediaController.layout===n.layout||(this.mediaController.setLayout(n.layout),this.Wd(n.layout),this.dispatchEvent(new CustomEvent("icatlayoutupdate",{composed:!0,bubbles:!0,detail:n.layout}))),n.speed!==i.speed&&this.mediaController.setSpeed(n.speed).then((e=>{const t=this.qr.playbackControls;t&&(t.speed=e)})),n.grid!==i.grid&&(this.mediaController.setGrid(n.grid),l&&(l.grid=n.grid)),n.antiAlias!==i.antiAlias&&(this.mediaController.setAntialias(n.antiAlias),l&&(l.antiAlias=n.antiAlias)))}n.label!==i.label&&this.Qd()};Qd=()=>{const e=Array.from(this.setList.values()),t=this.qr.contentSidebar;t&&t.updateSets(e.map((e=>({id:e.id,label:e.label,created:e.created,mediaOrder:e.mediaOrder.slice()}))));const i=this.qr.setSelect;i&&(i.sets=e.map((e=>({id:e.id,label:e.label}))))};ac=()=>{const e=this.activeSet,t=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),i=Array.from(this.setList.values()).sort(((e,i)=>t.compare(e.label,i.label))),n=i.findIndex((t=>t.id===e));let a=i[Number(n+1)];-1!==n&&a||(a=i[0]),a&&this.loadSet(a.id)};sc=()=>{const e=this.activeSet,t=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),i=Array.from(this.setList.values()).sort(((e,i)=>t.compare(e.label,i.label))),n=i.findIndex((t=>t.id===e));let a=i[Number(n-1)];-1!==n&&a||(a=i[i.length-1]),a&&this.loadSet(a.id)};Rd=(e,t=!0)=>{this.activeSet&&this.setList.get(this.activeSet)&&(t&&this.Fd("order",this.mediaOrder),this.Od({id:this.activeSet,mediaOrder:e.filter((e=>!!this.mediaList.get(e)))}))};oc=(e,t,i)=>{const n=this.setList.get(t);if(n){const a=n.mediaOrder.slice();if(-1===a.indexOf(e)&&(void 0!==i&&i>-1?a.splice(i,0,e):a.push(e),this.Od({id:t,mediaOrder:a})),t===this.activeSet){this.Ud();const e=this.qr.mediaOverlaySettings;e&&e.visible&&e.mediaId&&e.updateInputOptions(this.rc())}}};createAndLoadSet=()=>{const e=this.Yd();return this.Xd(e),this.loadSet(e.id)};loadSet=async(e,t=!0)=>{this.nl=!1,this.Yr=[],this.Xr&&"function"==typeof this.Xr.cancel&&this.Xr.cancel(),this.Xr=null,Object.keys(this.il).forEach((e=>this.Zd(e))),this.setSpinner(!0);const i=Y(this.setList.get(e));if(!i)return this.setSpinner(!1);this.dispatchEvent(new CustomEvent("compare-app-set-loading",{bubbles:!0,composed:!0,detail:{from:this.activeSet,to:e}}));const n={x:i.x,y:i.y,z:i.z},a=Y(i.viewport),s=i.scaleToFit;this.mediaController&&(await this.mediaController.pause(),this.mediaController.dispose(),this.mediaController=null);const o=this.setList.get(this.activeSet);o&&(o.mediaOrder.forEach((e=>{const t=this.mediaList.get(e);this.updateMediaListItem({id:t.id,src:l.clearedUrl(t.src)})})),o.overlayOrder.forEach((e=>{const t=this.overlayList.get(e);this.lc({id:t.id,src:l.clearedUrl(t.src)})}))),this.activeSet=i.id,this.Dd(i.id,{looping:i.looping,antialias:i.antiAlias,grid:i.grid,speed:i.speed,layout:i.layout,time:i.time,exposure:i.exposure,gamma:i.gamma,startTime:i.startTime,endTime:i.endTime}),this.Wd(i.layout);const r=this.qr.playbackControls;r&&(r.playing=!1,r.looping=i.looping,r.speed=i.speed,r.grid=i.grid,r.antiAlias=i.antiAlias,r.zoom=i.z);const d=this.qr.contentSidebar;d&&(d.activeSet=i.id);const c=this.qr.setSelect;if(c&&(c.activeSet=i.id),await Promise.all(i.mediaOrder.map((t=>{let i=this.mediaList.get(t);if(!i)return"Invalid media";if("filter"!==i.type){const e=U(this.fileList.get(Me(i)),["file"]);i=this.updateMediaListItem({id:i.id,src:l.getUrl(e,l.clearedUrl(i.src))})}return this.addMedia(i,e)}))).then((e=>{e.forEach(((e,t)=>{"string"==typeof e&&this.removeMediaItemFromCurrentSet(i.mediaOrder[Number(t)])}))})),0===i.mediaOrder.length?this.Ud():this.mediaController.setMediaOrder(i.mediaOrder),this.nc(),s){const{minZoom:e,contentWidth:t,contentHeight:a,paneHeight:s,paneWidth:o}=this.viewportDimensions;n.z=e,n.x=t>o?(t-o)/2:0,n.y=a>s?(a-s)/2:0,this.Od({id:i.id,scaleToFit:!1})}else{const{width:e,height:t,minZoom:i}=this.viewportDimensions;if(0!==e&&0!==t){const s=i||100,o=Math.max(s,Math.max(n.z,s)/Math.max(a.width/e,a.height/t));n.z=o}}return this.mediaController.setPosition(n),this.tc(),this.ic(),t&&requestAnimationFrame((()=>this.focus())),this.dispatchEvent(new CustomEvent("compare-app-set-loaded",{bubbles:!0,composed:!0,detail:this.activeSet})),this.setSpinner(!1),i};Zd=e=>{this.il[`${e}`]&&(this.il[`${e}`].generating=!1,this.il[`${e}`].cancel(),delete this.il[`${e}`])};dc=e=>{const t=this.mediaList.get(e);if(!t||"filter"===t.type)return;if(this.dc(t.mediaOverlay),t.thumbnails.length>=pe)return void this.qr.playbackControls.updateMediaThumbnails(t.id,t.thumbnails);const i=U(this.fileList.get(Me(t)),["file"]);let n=l.getUrl(i,t.src);if("hdrimage"===t.type&&this.mediaController){const e=this.mediaController.getMediaElement(t.id);if(!e||e&&"function"!=typeof e.toDataURL)return;n=e.toDataURL("image/png")}n&&(this.il[`${e}`]||(this.il[`${e}`]={generating:!0,cancel:be(e,n,t.type,(t=>this.mediaList.get(e)?this.updateMediaListItem({id:e,thumbnails:t}):this.Zd(e)),(()=>this.Zd(e)))}))};Jd=e=>{if(e&&e.id)return this.fileList.get(e.id)?this.cc(e):(this.fileList.set(e.id,e),this.hc(),e)};cc=e=>{const t=this.fileList.get(e.id);if(!t)return;const i={...t,...e};return this.fileList.set(i.id,i),i.base===t.base&&i.name===t.name&&i.modified===t.modified&&i.created===t.created&&i.path===t.path&&i.size===t.size&&i.type===t.type&&i.file===t.file||this.hc(),i};Td=e=>{this.fileList.delete(e),this.hc()};addFile=(e,t)=>{if(!e||!t)return;const i="overlay"===t.type?Le(e,t):je(e,t);if(i){if(this.fileList.get(i.id))return{isNew:!1,data:this.cc(i)};this.fileList.set(i.id,i),this.hc()}return{isNew:!0,data:i}};uc=async(e,t,i)=>new Promise((n=>{this.setSpinner(!0),this.mc(e,(async e=>{if(!U(e,["media"]))return n("Invalid media");i===this.activeSet&&(this.mediaController?await this.mediaController.pause():this.Dd(this.activeSet)),this.gc(e.media),this.updateMediaListItem({id:t,mediaOverlay:e.media.id}),i===this.activeSet&&(await this.mediaController.addMediaOverlay(t,e.media,e.element),this.Ma&&this.dc(e.media.id)),this.dispatchEvent(new CustomEvent("compare-app-media-info",{bubbles:!0,composed:!0,detail:Y(e.media)})),this.Xr||0!==this.Yr.length||(this.setSpinner(!1),this.focus()),n(e)}),(t=>{console.warn(t);const i=U(e,["path"],"");this.setMessage(["Error loading media",i]),this.setSpinner(!1),this.focus(),n(t)}))}));bc=async(e,t)=>new Promise((i=>{if(!e||!e.mediaOverlay||t!==this.activeSet)return void i(void 0);const n=this.mediaList.get(e.mediaOverlay);n?this.mc(n,(async n=>{if(!U(n,["media"]))return i("Invalid media");this.updateMediaListItem(n.media),t===this.activeSet&&(this.mediaController?this.mediaController.pause():this.Dd(this.activeSet),this.mediaController.addMediaOverlay(e.id,n.media,n.element),this.Ma&&this.dc(n.media.id)),this.dispatchEvent(new CustomEvent("compare-app-media-info",{bubbles:!0,composed:!0,detail:Y(n.media)})),i(n)}),(e=>{console.warn(e);const t=U(n,["path"],"");this.setMessage(["Error loading media",t]),this.setSpinner(!1),this.focus(),i(e)})):i(void 0)}));gc=e=>{e.id?this.mediaList.set(e.id,e):console.warn("no media id",e)};mc=(e,t,i)=>{if(this.Xr)return this.Yr.push({media:e,resolve:t,reject:i});const n=()=>{0===this.Yr.length||this.Xr||a(this.Yr.shift())},a=e=>{if(!e||!e.media)return n();if("filter"===e.media.type)return e.resolve({media:e.media,element:null}),n();let t=!1;const i=U(this.fileList.get(Me(e.media)),["file"]),a=(e=>{let t=!1;return{promise:new Promise(((i,n)=>{e.then((e=>t?null:i(e))),e.catch((e=>t?null:n(e)))})),cancel(){t=!0}}})(H(e.media,i,this.sourceLoader));this.Xr={cancel:()=>{t=!0,a.cancel(),this.Xr=null},id:e.media.id},a.promise.then((i=>{this.Xr=null,t||(this.cc(je(U(this.fileList.get(Me(i.media)),["file"]),i.media)),e.resolve(i),n())})).catch((()=>{this.Xr=null,t||(e.reject("Error loading media"),n())}))};a({media:e,resolve:t,reject:i})};vc=e=>{const t=this.mediaList.get(e);this.mediaController&&this.mediaController.deleteMedia(e),t&&this.updateMediaListItem({id:t.id,src:l.clearedUrl(t.src)}),this.setList.forEach((t=>{t.mediaOrder.indexOf(e)>-1&&this.Od({id:t.id,mediaOrder:t.mediaOrder.filter((t=>t!==e))})})),this.mediaList.delete(e),this.Td(Me(t)),this.dispatchEvent(new CustomEvent("compare-app-delete-media",{composed:!0,bubbles:!0,detail:e}))};fc=(e,t,i,n,a,s)=>{if(!e||!e.length||!t)return s("Invalid images");if(!t)return s("Invalid frames per second");let o=i;if(!o){const t=e[e.length-1];o=`${ke("string"==typeof t?t:t.path||t.webkitRelativePath||t.name).base}.mp4`}const r=()=>{0===this.Jr.length||this.Qr||d(this.Jr.shift())},d=e=>{if(!e||!e.instance)return r();e.instance.start()},c=function(e,t,i,n,a,s){const o=document.createElement("canvas"),r=new Image,d=o.getContext("2d"),c=1/i;let h,u=0,m=0,p=0,g=0,b=!1,v=0;const f=async(e,t="")=>{if(!b){b=!0;try{await h.flush(),h.close()}catch(e){}console.warn(e),a(t||e.message||e)}},y=async()=>{r.onload=null,r.onerror=null,u=r.naturalWidth,m=r.naturalHeight;const a=r.src;r.src="",l.clearUrl(a);let y=new Xi({target:new ei,video:{codec:"avc",width:u,height:m}});const x=()=>{try{y.finalize()}catch(e){}y=null},w=async()=>{try{await h.flush()}catch(e){}if(b)return;b=!0,await h.flush(),h.close(),y.finalize();const{buffer:e}=y.target,i=new File([new Blob([e],{type:"video/mp4"})],t);y=null,s(i)};function k(t,i){return b?x():(y.addVideoChunk(t,i),v+=1,n(v/e.length),v===e.length?w():void 0)}const z=()=>{if(b)return x();d.canvas.width=u,d.canvas.height=m,d.drawImage(r,0,0);const e=new VideoFrame(o,{timestamp:1e6*p}),t=()=>{if(h)if(h.encodeQueueSize>2)requestAnimationFrame(t);else{const t=g%150==0;h.encode(e,{keyFrame:t}),e.close(),p+=c,g+=1,S()}};t()},S=async()=>{if(b)return x();const t=e[Number(g)];if(!t)return w();let i;r.onload=null,r.onerror=null;try{i="string"==typeof t?await R(t.split("/").pop()||"",t):t}catch(e){return void f(e,`Error getting image ${t}`)}const n=new FileReader;n.onerror=e=>f(e,`Error reading image ${t}`),n.onload=()=>{r.onload=z,r.onerror=e=>f(e,`Error loading image ${t}`),r.src=n.result},n.readAsDataURL(i)};await(async()=>{const e={codec:"avc1.64001f",width:u,height:m,framerate:i,avc:{format:"annexb"},latencyMode:"quality",bitrateMode:"constant",bitrate:4e7};h=new VideoEncoder({output:k,error:e=>f(e,`Error encoding preview video ${t}`)}),await h.configure(e)})(),S()};return{cancel:async()=>{b=!0;try{await h.flush(),h.close()}catch(e){}},start:()=>{if(!b){if(!e||!e.length)return f(new Error("No images"),"Error generating proxy video, no images supplied");r.onload=y,r.onerror=i=>f(i,`Error loading image ${U(e,[0,"name"],e[0])} while generating proxy video ${t}`),r.src=l.getUrl(e[0],e[0])}}}}(e,o,t,(e=>n(e)),(e=>{this.Qr=!1,r(),s(e)}),(e=>{this.Qr=!1,r(),a(e)}));if(this.Qr)return this.Jr.push({instance:c,resolve:a,reject:s});this.Qr=!0,d({instance:c,resolve:a,reject:s})};rc=()=>Array.from(this.fileList.values()).reduce(((e,t)=>e.concat([{label:t.base,value:t.id,id:t.id}])),[]);hc=()=>{const e=this.qr.contentSidebar;e&&e.updateMedia(Array.from(this.fileList.values()))};yc=(e,t)=>this.mediaController?this.mediaController.setMediaStartTime(e,t).then((t=>this.updateMediaListItem({id:e,startTime:t}))):Promise.resolve(void 0);tc=()=>{const e=this.qr.mediaInfo;if(!e)return;const t=U(this.setList.get(this.activeSet),["mediaOrder"],[]).reduce(((e,t)=>{const i=this.mediaList.get(t);return i?e.concat([_e(i,this.mediaList.get(i.mediaOverlay))]):e}),[]);e.updateMedia(t)};ic=()=>{const e=this.qr.playbackControls;if(!e)return;const t=[],i=U(this.setList.get(this.activeSet),["mediaOrder"],[]).reduce(((e,i)=>{const n=this.mediaList.get(i);if(!n)return e;const a=this.mediaList.get(n.mediaOverlay);return a&&t.push({mediaId:n.id,mediaOverlay:a}),e.concat([Ee(n)])}),[]);e.updateMedia(i),t.forEach((t=>t.mediaOverlay?e.updateMediaOverlay(t.mediaId,Ee(t.mediaOverlay)):void 0))};xc=e=>{this.mediaOrder.slice().forEach((t=>{const i=this.mediaList.get(t);t===e?i.visible||this.toggleVisibility(t):i.visible&&this.toggleVisibility(t)}))};addImageSequence=(e,t,i="")=>new Promise((n=>{if(!e||!e.length)return void n("No images");const a=this.activeSet;let s;this.fc(e,t,i,(e=>{this.qr.imageTranscodeSpinner.visible=!0,this.qr.imageTranscodeSpinner.message=`Generating proxy video ${Math.round(100*e)}%`}),(async t=>{this.qr.imageTranscodeSpinner.visible=!1,this.qr.imageTranscodeSpinner.message="";const i=Ae(t);i.frameImages=e,s=this.addFile(t,i);const o=await this.addMedia(i,a),r="string"==typeof o;r&&s&&s.isNew&&this.Td(U(s,["data","id"])),n(r?o:o.media)}),(e=>{console.error(e),this.qr.imageTranscodeSpinner.visible=!1,this.qr.imageTranscodeSpinner.message="",this.setMessage(e||"Error generating proxy video"),n(e||"Error generating proxy video")}))}));addMedia=async(e,t,i)=>new Promise((n=>{this.setSpinner(!0),this.mc(e,(async e=>{if(!U(e,["media"]))return n("Invalid media");if(0===this.setList.size&&await this.createAndLoadSet(),this.mediaController?this.mediaController.pause():this.Dd(this.activeSet),this.gc(e.media),this.oc(e.media.id,t||this.activeSet,i),"filter"===e.media.type?await this.mediaController.addShaderMedia(e.media.id,{id:"",name:e.media.base,inputIds:e.media.shaderInputs,source:e.media.shaderSource,inputs:e.media.shaderInputs.length,UI:e.media.shaderSettings}):await this.mediaController.addMedia(e.media,e.element),this.dispatchEvent(new CustomEvent("compare-app-media-info",{bubbles:!0,composed:!0,detail:Y(e.media)})),this.Ma&&this.dc(e.media.id),e.media.mediaOverlay)try{await this.bc(e.media,t)}catch(e){}this.Xr||0!==this.Yr.length||(this.setSpinner(!1),this.focus()),n(e)}),(t=>{console.warn(t);const i=U(e,["path"],"");this.setMessage(["Error loading media",i]),this.Xr||0!==this.Yr.length||(this.setSpinner(!1),this.focus()),n(t)}))}));removeMediaItemFromCurrentSet=e=>{this.mediaController&&this.mediaController.deleteMedia(e);const t=this.setList.get(this.activeSet),i=this.mediaList.get(e);i&&this.updateMediaListItem({id:i.id,src:l.clearedUrl(i.src)}),t.mediaOrder.indexOf(e)>-1&&this.Od({id:t.id,mediaOrder:t.mediaOrder.filter((t=>t!==e))}),this.mediaList.forEach((t=>{"filter"===t.type&&t.shaderInputs.indexOf(e)>-1&&this.updateMediaListItem({id:t.id,shaderInputs:t.shaderInputs.map((t=>t!==e?t:""))})})),this.dispatchEvent(new CustomEvent("compare-app-remove-media",{composed:!0,bubbles:!0,detail:e}))};updateMediaListItem=e=>{const t=this.mediaList.get(e.id);if(!t)return;const i=this.setList.get(this.activeSet),n={...t,...e};this.mediaList.set(n.id,n);const a=i&&i.mediaOrder.indexOf(n.id)>-1;let s,o=a;if(!o&&i){let e=0;for(;!o&&e<i.mediaOrder.length;){const t=this.mediaList.get(U(i,["mediaOrder",e],""));t&&t.mediaOverlay===n.id&&(o=!0,s=t),e+=1}}if(o){const e=this.qr.playbackControls,i=["startTime","base","duration","fps","hasAudio","muted","type","visible","thumbnails","shaderId","showShader","frameImages","showFrameImages","infoTexts"],o=this.qr.mediaOverlaySettings,r=["shaderInputs","shaderSettings","shaderId","base","showShader","mediaOverlay"],l=this.qr.mediaInfo,d=["startTime","base","bitrate","codec","duration","format","fps","hasAudio","height","width","labelVisibility","muted","name","originalBase","shaderInputs","shaderSettings","type","visible","x","y","z","shaderId","showShader","frameImages","showFrameImages","infoTexts","showInfoText"],c=this.qr.mediaDataModal,h=["timestamps","infoTexts"],u=function(e,t){const i=typeof e;if(i!==typeof t)return[];const n=Array.isArray(e),a=Array.isArray(t),s=[];if(n)return a?(e.forEach(((e,i)=>{Ve(e,t[Number(i)])||s.push(i)})),t.length>e.length&&t.slice(e.length).forEach(((e,t)=>{s.push(t)})),s):(e.forEach(((e,t)=>{s.push(t)})),s);if("object"===i){const i=Object.keys(e),n=Object.keys(t),a=[];return i.forEach((i=>{a.push(i),Ve(e[`${i}`],t[`${i}`])||s.push(i)})),n.forEach((e=>{a.indexOf(e)>-1||s.push(e)})),s}return[]}(t,n),m=e=>e.findIndex((e=>u.indexOf(e)>-1))>-1;if(0===u.length)return n;if(c&&c.mediaId===n.id&&m(h)&&c.update(n),o&&o.mediaId===n.id&&m(r)){const e=Me(this.mediaList.get(n.mediaOverlay));o.update(n,e,this.rc(),this.tl)}if(e&&m(i)&&(s&&e.updateMediaOverlay(s.id,Ee(n)),a&&e.updateItem(Ee(n))),e&&!s&&u.indexOf("mediaOverlay")>-1){const t=this.mediaList.get(n.mediaOverlay);t&&e.updateMediaOverlay(n.id,Ee(t))}l&&(u.indexOf("base")>-1?this.tc():m(d)&&(l.updateItem(_e(n,this.mediaList.get(n.mediaOverlay))),s&&l.updateItem(_e(s,n)))),this.mediaController&&(u.indexOf("visible")>-1&&this.mediaController.setMediaVisibility(n.id,n.visible),u.indexOf("infoTexts")>-1&&this.mediaController.setMediaInfoTexts(n.id,n.infoTexts),u.indexOf("showInfoText")>-1&&this.mediaController.toggleInfoText(n.id,n.showInfoText),m(["x","y","z"])&&this.mediaController.setMediaPosition(n.id,{x:n.x,y:n.y,z:n.z}),u.indexOf("showFrameImages")>-1&&this.mediaController.setFrameImagesVisibility(n.id,n.showFrameImages))}return this.dispatchEvent(new CustomEvent("compare-app-media-list-item-update",{composed:!0,bubbles:!0,detail:n})),n};toggleVisibility=e=>{const t=this.mediaList.get(e);this.updateMediaListItem({id:e,visible:!t.visible})};updateInfoTexts=(e,t)=>{const i=this.mediaList.get(e);if(!i)return;const n=t.map((e=>({...e,start:N(i.timestamps,e.start,i.fps),end:void 0===e.end?e.end:N(i.timestamps,e.end,i.fps)})));this.updateMediaListItem({id:e,infoTexts:n})};setInfoTextsVisibility=(e,t)=>{this.mediaList.get(e)&&this.updateMediaListItem({id:e,showInfoText:t})};setMediaFilterType=async(e,t)=>{const i=this.tl.find((e=>e.value===t)),n=this.mediaList.get(e);if(!i||!n)return;const a=U(n,["previousShaderSettings",i.data.id]);let s=Y(n.previousShaderSettings||{});n.shaderId&&(s={...s,[n.shaderId]:Y(n.shaderSettings)}),this.updateMediaListItem({id:n.id,shaderId:i.data.id,shaderSource:i.data.source,shaderSettings:a||Y(i.data.UI),previousShaderSettings:s});const o=this.mediaList.get(e);o&&this.mediaController&&(await this.mediaController.updateShaderSource(e,o.shaderSource),await this.mediaController.updateShaderSettings(e,o.shaderSettings))};updateFilterSetting=async(e,t,i)=>{const n=this.mediaList.get(e);if(!n)return;const a=Y(n.shaderSettings||{});a[`${t}`]={...a[`${t}`]||{},value:i},this.updateMediaListItem({id:e,shaderSettings:a}),this.mediaController&&await this.mediaController.updateShaderSetting(e,t,i)};mediaOverlayAddFile=(e,t)=>{const i=this.mediaList.get(e);if(!t||!i)return;const n=Ae(t);if(void 0===n.type)return this.setMessage(["Error loading media, unsupported file type",n.path]);const a=this.addFile(t,n);return this.uc(n,e,this.activeSet).then((e=>("string"==typeof e&&a.isNew&&this.Td(a.data.id),e)))};Pd=e=>{this.overlayList.set(e.id,e);const t=this.setList.get(this.activeSet);if(!t)return;const i=t.overlayOrder;-1===i.indexOf(e.id)?this.Od({id:t.id,overlayOrder:i.concat([e.id])}):this.nc()};lc=e=>{const t=this.overlayList.get(e.id);if(!t)return;const i={...t,...e};this.overlayList.set(i.id,i),this.wc(i.id)};kc=e=>{const t=this.overlayList.get(e);if(!t)return;t.src=l.clearedUrl(t.src);const i=this.setList.get(this.activeSet);this.Od({id:i.id,overlayOrder:i.overlayOrder.filter((t=>t!==e))})};wc=e=>{const t=this.overlayList.get(e),i=this.setList.get(this.activeSet);if(!t||!i||-1===i.overlayOrder.indexOf(e))return;const n=this.qr.logoElements.find((t=>t.id===e));n&&(n.logo=t);const a=this.qr.playbackControls;a&&a.updateOverlay(t)};nc=()=>{const e=this.setList.get(this.activeSet).overlayOrder.map((e=>this.overlayList.get(e))).filter((e=>!!e)).map((e=>({...e,src:l.getUrl(U(this.fileList.get(Ce(e)),["file"]),e.src)})));De({container:this.qr.logosContainer,array:e,getElementsFn:()=>this.qr.logoElements,createFn:e=>n({tag:"logo-element",attributes:{class:"logo-element",id:e.id},properties:{hideEdit:this.isEmbed,visible:e.visible,logo:e}}),valueKeyFn:e=>e.id,elementValueKeyFn:e=>e.id,updateFn:(e,t)=>{e.logo=t}});const t=this.qr.playbackControls;t&&t.updateOverlays(e)};wl=e=>{this.renderMode=e.detail};kl=e=>{this.displayRenderMode=e.detail};zl=e=>{this.displayFpsStats=e.detail};fd=e=>{Ne(e);const t=e.detail;let i="";t.forEach(((e,t)=>{const n=[],a=e.files.map((e=>{const t=Ae(e.file);return this.addFile(e.file,t),t})),s=Pe(a);a.forEach((e=>{e.base=s(e),this.mediaList.set(e.id,e),n.push(e.id)}));const o=this.Yd();o.label=e.name,o.mediaOrder=n,this.Xd(o),0===t&&(i=o.id)})),i&&(this.setSpinner(!0),this.loadSet(i))};Vl=e=>{Ne(e),this.updateTime(e.detail.time,e.detail.updatePlayers)};Nl=e=>{Ne(e),this.Bd(e.detail)};Dl=e=>{Ne(e),this.Vd(e.detail)};Ol=e=>{Ne(e),this.Nd(e.detail)};Hl=e=>{Ne(e),this.Hd(!this.bn)};$l=e=>{Ne(e),this.mediaController&&this.mediaController.setPosition({z:e.detail})};Ul=e=>{Ne(e),this.Ma=e.detail,this.ol||me.set({showThumbs:this.Ma});this.qr.playbackControls.showThumbnails=this.Ma,this.Ma&&this.mediaOrder.forEach((e=>this.dc(e)))};Wl=e=>{if(Ne(e),!l.isElectron)return;const t=window.NvCompareApi;if(!t)return;const i=document.createElement("input");i.type="file",i.accept=".json",i.onchange=e=>{e.preventDefault(),e.stopPropagation();const n=e=>{console.warn("load custom shader error",e)},a=i.files[0];if(a)return"application/json"!==a.type?n("Error: Only JSON files are accepted"):void t.readShaderFile(a.path).then((e=>{if(!e)return n("Error: Could not read the file you selected");const t={id:h(),name:e.name,source:e.source,UI:e.UI||{},inputs:e.inputs,inputIds:[]},i=e=>`Could not import JSON file, missing "${e}" field`;if(!t.name)return n(i("name"));if(!t.source)return n(i("source"));if(!t.inputs)return n(i("inputs"));He.set({filename:a.name,path:a.path,created:(new Date).getTime(),data:t}),this.tl.push({id:t.id,value:t.id,label:t.name||a.name,data:t});const s=this.qr.playbackControls;s&&s.setFiltersList(this.tl);const o=this.qr.mediaOverlaySettings;o&&o.visible&&o.setFiltersList(this.tl)})).catch((()=>{n("Error: Could not read the file you selected")}))},i.click()};Kl=async e=>{if(Ne(e),!this.mediaController)return;const t=Y(e.detail),i=h(),n=this.mediaController.addShaderMedia(i,t);if(n.error)return this.setMessage(n.error);const a=((e,t,i,n)=>{const a=xe(t.name);return{id:e,created:(new Date).getTime(),codec:"",bitrate:0,width:0,height:0,type:"filter",fps:0,duration:0,size:0,modified:0,hasAudio:!1,timestamps:[],path:t.name,name:a,base:a,originalBase:a,extension:"",format:"",x:0,y:0,z:100,startTime:0,thumbnails:[],labelVisibility:{codec:!1,bitrate:!1,dimensions:!1,format:!1,fps:!1,duration:!1,startTime:!1},muted:!0,visible:!0,shaderId:t.id,shaderInputs:i.slice(),shaderSettings:Y(n),shaderSource:t.source,showShader:!0,src:"",mediaOverlay:"",frameImages:[],showFrameImages:!0,infoTexts:[],showInfoText:!1}})(i,t,n.inputIds.slice(),Y(n.settings));this.gc(a),this.oc(a.id,this.activeSet)};ql=e=>{Ne(e),this.ra(e.detail)};Zl=e=>{Ne(e),this.Gd(e.detail)};Ql=e=>{Ne(e);const t=e.detail,i=this.overlayList.get(t);i&&this.lc({id:t,visible:!i.visible})};Jl=e=>{Ne(e),this.toggleVisibility(e.detail)};Fl=e=>{Ne(e),this.mediaController&&!this.mediaController.seeking&&this.mediaController.play()};Al=e=>{Ne(e),this.mediaController&&this.mediaController.pause()};Rl=e=>{Ne(e),this.$d(e.detail)};Gl=e=>{Ne(e),this.mediaController&&this.mediaController.previousFrame()};Bl=e=>{Ne(e),this.mediaController&&this.mediaController.nextFrame()};Pl=e=>{Ne(e);const{id:t,to:i}=e.detail,n=this.mediaOrder.slice(),a=n.indexOf(t);if(-1===a||a===i)return;const s=n[Number(i)];n[Number(a)]=s,n[Number(i)]=t,this.Rd(n)};ed=e=>{Ne(e),this.Rd(e.detail)};Tl=e=>{Ne(e);const t=e.detail,i=this.mediaList.get(t);if(!i||"video"!==i.type)return;const n=!i.muted;n||this.mediaList.forEach((e=>e.id===t?void 0:this.updateMediaListItem({id:e.id,muted:!0}))),this.updateMediaListItem({id:t,muted:n}),this.mediaController&&this.mediaController.setMediaMuted(t,n)};El=async e=>{Ne(e),await this.updateFilterSetting(e.detail.id,e.detail.key,e.detail.value)};Ll=e=>{if(Ne(e),!this.mediaController)return;const{id:t,index:i,value:n}=e.detail,a=this.mediaController.updateShaderInput(t,i,n);this.updateMediaListItem({id:t,shaderInputs:a})};bl=e=>{Ne(e),this.pl(!1).then(this.gl)};fl=e=>{Ne(e),this.pl(!1).then(this.vl)};dd=e=>{Ne(e),this.loadSet(e.detail)};hd=e=>{Ne(e),this.Od({id:e.detail.id,label:e.detail.label})};ud=e=>{Ne(e);const t=this.setList.get(e.detail);if(!t)return;const i=this.qr.confirmDeleteSetModal;i.setId=e.detail,i.setName=t.label,i.visible=!0};md=e=>{Ne(e);const t=this.qr.confirmDeleteMediaModal;t.media=e.detail,t.visible=!0};bd=e=>{Ne(e),this.ec(e.detail)};yl=e=>{Ne(e),this.mediaController&&this.mediaController.setExposure(e.detail);const t=this.qr.appSettingsModal;t&&(t.exposure=e.detail)};xl=e=>{Ne(e),this.mediaController&&this.mediaController.setGamma(e.detail);const t=this.qr.appSettingsModal;t&&(t.gamma=e.detail)};xd=e=>{const t=e.composedPath();let i=!1,n=!1,a=0;const s=t.length;for(;(!n||!i)&&a<s;){const e=t[Number(a)];if(e&&e.tagName){const t=e.tagName;if("INPUT"===t||"INPUT-ELEMENT"===t||"TEXTAREA"===t){i=!0;break}(e===this||this.parentApp&&e===this.parentApp)&&(n=!0),a+=1}else a+=1}if(i||!n)return;const o=navigator.userAgent.indexOf("Macintosh;")>0,r=(e.ctrlKey&&!o||e.metaKey&&o)&&"z"===e.key;if(e.ctrlKey&&"ArrowRight"===e.key)return Ne(e),void this.ac();if(e.ctrlKey&&"ArrowLeft"===e.key)return Ne(e),void this.sc();if("KeyR"===e.code&&e.ctrlKey){const e=window.NvCompareApi;e&&e.deleteAllTmpFiles(),window.location.reload()}if((l=this.qr.exportModal)&&l.visible)return;var l;"Space"===e.code&&this.hasVideo&&!this.seeking&&(Ne(e),this.isPlaying?this.mediaController.pause():this.mediaController.play()),"KeyP"===e.code&&(Ne(e),this.Bd(1)),"BracketLeft"===e.code&&(Ne(e),this.Bd(Math.max(this.mediaController.speed-.25,.25))),"BracketRight"===e.code&&(Ne(e),this.Bd(Math.min(this.mediaController.speed+.25,2))),"ArrowRight"===e.code&&(Ne(e),this.mediaController.nextFrame()),"ArrowLeft"===e.code&&(Ne(e),this.mediaController.previousFrame()),"0"===e.key&&(Ne(e),this.mediaController.seek(this.mediaController.startTime)),e.ctrlKey||"Digit1"!==e.code||(Ne(e),this.ml(y[1])),e.ctrlKey||"Digit2"!==e.code||(Ne(e),this.ml(y[0]));const d=e=>{const t=this.mediaOrder.slice();t[Number(e)]&&(this.ml(y[1]),this.xc(t[Number(e)]))};e.ctrlKey&&"Digit1"===e.code&&(Ne(e),d(0)),e.ctrlKey&&"Digit2"===e.code&&(Ne(e),d(1)),e.ctrlKey&&"Digit3"===e.code&&(Ne(e),d(2)),e.ctrlKey&&"Digit4"===e.code&&(Ne(e),d(3)),e.ctrlKey&&"Digit5"===e.code&&(Ne(e),d(4)),e.ctrlKey&&"Digit6"===e.code&&(Ne(e),d(5)),e.ctrlKey&&"Digit7"===e.code&&(Ne(e),d(6)),e.ctrlKey&&"Digit8"===e.code&&(Ne(e),d(7)),e.ctrlKey&&"Digit9"===e.code&&(Ne(e),d(8)),"KeyF"===e.code&&e.ctrlKey&&(Ne(e),this.Hd(!this.bn)),r&&(Ne(e),this.Ad())};ld=async e=>{Ne(e);const t=await this.createAndLoadSet(),i=this.qr.contentSidebar;i&&t&&t.id&&i.scrollToSet(t.id)};Il=e=>{Ne(e),this.removeMediaItemFromCurrentSet(e.detail)};vd=e=>{Ne(e);const t=e.detail;if(!t||!t.id)return;const i=[];this.mediaList.forEach((e=>{Me(e)===t.id&&i.push(e.id)})),this.overlayList.forEach((e=>{Ce(e)===t.id&&(this.setList.forEach((t=>{t.overlayOrder.indexOf(e.id)>-1&&this.Od({id:t.id,overlayOrder:t.overlayOrder.filter((t=>t!==e.id))})})),this.kc(e.id))})),i.forEach((e=>this.vc(e))),this.Td(t.id)};gd=e=>{Ne(e);this.shadowRoot.getElementById("ab-modal").visible=!0};yd=e=>{if(!this.mediaController||!e.detail.controllerID||this.mediaController&&this.mediaController.controllerID!==e.detail.controllerID)return;const t=this.qr.playbackControls;t&&(t.minScale=e.detail.minZoom,t.fitScale=e.detail.minZoom)};Yl=e=>{Ne(e),this.yc(e.detail.id,Ie(e.detail.time,e.detail.duration,e.detail.width,this.maxContentDuration,this.endTime,this.startTime))};Xl=e=>{if(Ne(e),!this.mediaController)return;const t=e.detail.id,i=e.detail.forward,n=this.mediaController.getNewMediaStartTimeFromFrame(t,i);n&&this.yc(e.detail.id,Ie(n.time,e.detail.duration,e.detail.width,this.maxContentDuration,this.endTime,this.startTime))};Sl=e=>{Ne(e),this.integerScaling=e.detail};Cl=e=>{Ne(e),this.updateMediaListItem({id:e.detail.id,base:e.detail.value})};pd=async e=>{Ne(e);const t=e.detail.file,i=U(t,["file"]),n=Fe(i,t.id,Array.from(this.mediaList.values()));("http"===t.path.slice(0,4)||i)&&(n.path=t.path,n.src=t.path),this.addMedia(n,this.activeSet,e.detail.index)};Ml=e=>{Ne(e);const{id:t,key:i,value:n}=e.detail;this.updateMediaListItem({id:t,labelVisibility:{...U(this.mediaList.get(t),["labelVisibility"],{...ze}),[`${i}`]:n}})};jl=e=>{Ne(e);const{id:t,x:i,y:n,z:a}=e.detail;this.updateMediaListItem({id:t,x:i,y:n,z:a})};rd=e=>{Ne(e),this.lc(e.detail)};od=e=>{Ne(e),this.kc(e.detail)};Sd=async e=>{Ne(e),await this.setMediaFilterType(e.detail.id,e.detail.type)};zd=e=>{Ne(e);const{id:t,value:i}=e.detail,n=this.mediaList.get(t);if(!n)return;const a=this.fileList.get(i),s=U(a,["file"]),o=Fe(s,i,Array.from(this.mediaList.values()));return void 0===o.type?this.setMessage(["Error loading media, unsupported file type",o.path]):(s&&a&&a.path&&(o.path=a.path,o.src=a.path),this.uc(o,n.id,this.activeSet))};kd=e=>{Ne(e);const t=this.qr.mediaOverlaySettings;if(!t)return;const i=e.detail,n=this.mediaList.get(i);n&&t.open(n,Me(this.mediaList.get(n.mediaOverlay)),this.rc(),this.tl)};Md=e=>{this.mediaOverlayAddFile(e.detail.id,e.detail.file)};Cd=async e=>{const t=e.detail;this.mediaController&&await this.mediaController.removeMediaOverlay(t),this.updateMediaListItem({id:t,mediaOverlay:"",shaderId:"",shaderInputs:[],shaderSettings:{},shaderSource:""})};Ld=e=>{const t=e.detail,i=this.mediaList.get(t);if(!i)return;const n=!i.showShader;this.updateMediaListItem({id:t,showShader:n});if(this.mediaList.get(i.mediaOverlay)){this.updateMediaListItem({id:i.mediaOverlay,visible:n});const e=this.mediaList.get(i.mediaOverlay),a=this.qr.playbackControls;a&&e&&a.updateMediaOverlay(t,Ee(e))}this.mediaController&&this.mediaController.setFilterVisibility(t,n,i.mediaOverlay)};jd=e=>{const t=e.detail.id,i=e.detail.parentId,n=this.mediaList.get(t);n&&this.updateMediaListItem({id:t,visible:!n.visible});const a=this.mediaList.get(t),s=this.qr.playbackControls;s&&a&&s.updateMediaOverlay(i,Ee(a)),this.mediaController&&this.mediaController.setFilterVisibility(i,a.visible,t)};td=e=>{Ne(e);const t=e.detail;let i=document.createElement("input");i.type="file",i.multiple=!0,i.accept=p.join(","),i.setAttribute("webkitdirectory","true"),i.onchange=()=>{const e=Array.from(i.files).sort(((e,t)=>e.name>t.name?1:-1));e.filter((e=>{const t=ke(e.path||e.webkitRelativePath||e.name).ext;return-1===p.indexOf(t)})).length>0?this.setMessage(`Error loading images, only ${p.join(" ")} are supported`):(this.updateMediaListItem({id:t,frameImages:e}),this.mediaController&&this.mediaController.addFrameImages(t,e)),i.onchange=null,i=null},i.click()};nd=e=>{Ne(e);const t=e.detail,i=this.mediaList.get(t);if(!i)return;const n=!i.showFrameImages;this.updateMediaListItem({id:t,showFrameImages:n})};ad=e=>{Ne(e);const t=e.detail;this.mediaList.get(t)&&(this.updateMediaListItem({id:t,frameImages:[],showFrameImages:!0}),this.mediaController&&this.mediaController.removeFrameImages(t))};Ed=e=>{Ne(e),this.updateInfoTexts(e.detail.mediaId,e.detail.infoTexts)};_l=e=>{Ne(e),this.setInfoTextsVisibility(e.detail.id,e.detail.showInfoText)};sd=e=>{Ne(e);const t=this.qr.mediaDataModal;if(!t)return;const i=e.detail,n=this.mediaList.get(i);n&&t.open(n)};_d=e=>{Ne(e);const{mediaId:t,time:i}=e.detail,n=this.mediaList.get(t);n&&this.mediaController&&this.mediaController.seek(i+n.startTime)};dl=e=>{Ne(e),this.setMessage(e.detail)};cl=e=>{Ne(e),this.Kd()};hl=e=>{Ne(e),this.qd()};ll=()=>{"hidden"===document.visibilityState&&this.mediaController&&this.mediaController.pause()};wd=e=>{const t=this.mediaList.get(e.detail);t&&this.setMessage(["Can not display filter:",t.base])};connectedCallback(){this.qr=function(e){const t=()=>e.shadowRoot?e.shadowRoot:e.content;return{get container(){return t().querySelector(".app-container")},get appContent(){return t().querySelector(".app-content")},get mainContent(){return t().getElementById("app-main-content")},get mediaController(){return t().getElementById("media-controller-container")},get controlsContainer(){return t().querySelector(".media-controller-controls")},get logoElements(){return Array.from(t().querySelectorAll(".logo-element"))},get logosContainer(){return t().getElementById("logos-container")},get mediaInfo(){return t().getElementById("media-metadata-container")},get messageOverlay(){return t().getElementById("app-message")},get playbackControls(){return t().getElementById("playback-controls")},get secondaryControlsContainer(){return t().getElementById("secondary-playback-controls")},get layoutBtnTile(){return t().getElementById("layout-btn-tile")},get layoutBtnSplit(){return t().getElementById("layout-btn-split")},get helpBtn(){return t().getElementById("help-btn")},get appSettingsBtn(){return t().getElementById("settings-btn")},get topBar(){return t().getElementById("top-bar-element")},get contentSidebar(){return t().getElementById("content-sidebar")},get confirmDeleteSetModal(){return t().getElementById("confirm-delete-set-modal")},get confirmDeleteMediaModal(){return t().getElementById("confirm-delete-media-modal")},get confirmSaveProjectModal(){return t().getElementById("confirm-save-project-modal")},get defaultScreen(){return t().querySelector("default-screen")},get appSpinner(){return t().getElementById("app-spinner")},get imageTranscodeSpinner(){return t().getElementById("image-transcode-spinner")},get appSettingsModal(){return t().getElementById("app-settings-modal")},get setSelect(){return t().getElementById("sets-select")},get exportBtn(){return t().getElementById("export-project-btn")},get exportModal(){return t().getElementById("export-modal")},get mediaOverlaySettings(){return t().getElementById("media-overlay-settings")},get mediaDataModal(){return t().getElementById("media-data-modal")},get videoStallMessage(){return t().getElementById("video-stall-message")}}}(this),this.K(),this.tl=function(){const e=He.get().map((e=>e.data));return[Y(Ye),Y($e),Y(Ue),Y(We),Y(Ke),Y(qe),Y(Ze)].concat(e).map((e=>{const t=e.id||h();return{id:t,value:t,label:e.name,data:e}}))}(),this.Id(),this.In(),this.focus(),requestAnimationFrame((()=>this.dispatchEvent(new CustomEvent("icat-connected",{bubbles:!0,composed:!0}))))}disconnectedCallback(){this.K(),this.mediaController&&(this.mediaController.dispose(),this.mediaController=null);const e=Array.from(this.mediaList.values()).map((e=>e.src)).concat(Array.from(this.overlayList.values()).map((e=>e.src)));for(Object.keys(this.il).forEach((e=>this.Zd(e))),this.mediaList.clear(),this.overlayList.clear(),this.setList.clear(),this.fileList.clear();e.length;)l.clearUrl(e.pop())}}s("icat-app",va)}));
</script><script type="text/javascript">(function(){ const app = document.getElementById('icat-1236204199999999953191396f27ba82c189'); app.isEmbed=true; app.loadAppData({"activeSet":"6795e8000000000475aa05361c66118291","uiVisibility":{"antiAliasSelect":true,"fullscreenButton":true,"gridSelect":true,"helpButton":true,"layersButton":true,"layoutTabs":true,"loopButton":true,"mediaInfo":true,"pixelDataButton":false,"progressBar":true,"setSelect":true,"speedSelect":true,"startEndTime":false,"timeDisplay":true,"titleBar":false,"videoControls":true,"zoomSelect":true,"contentSidebar":false,"timeline":false,"controlBar":true,"addFilterBtn":false,"addLogoBtn":false,"inOutSlider":false,"timelineInOutSlider":false,"appSettingsBtn":true},"sets":[{"id":"6795e8000000000475aa05361c66118291","created":1769782047525,"label":"Set 1","antiAlias":false,"endTime":1e+29,"grid":0,"layout":"split","overlayOrder":[],"looping":true,"boomerang":false,"mediaOrder":["6800353c469bacc4abf1f63","6801c699999999953083dc79b8a5680234","6802639999999990793abc7d09fa1cfc25","680311999999999536ee0233683196ba76","6803c8000000000478403607da8ee179a7","6804e59093e3f123e117d18","680541999999999537e7e2d0b8bc238db9","68053699999999953108c9da279a1f74c10","680675c74a3a70fda554fb11","68076199999999953c31faddca0171a0612","680788000000000475eafbd94c64939cb13","6808056951345a7e00ed3c14","680920999999998612668546e87bd72815","6809959999999986fb0bf02d67e72dc516"],"x":0,"y":0,"z":65.9375,"speed":1,"splitposition":0.5,"startTime":0,"time":0,"viewport":{"top":44,"left":0,"paneWidth":1688,"paneHeight":806.09375,"height":806.09375,"width":1688,"minZoom":55.978732638888886,"fitScale":0.5597873263888888,"fitWidth":2560,"fitHeight":1440,"fitPaneWidth":2560,"fitPaneHeight":1440,"contentWidth":2560,"contentHeight":1440},"gamma":1,"exposure":1,"media":[{"id":"6800353c469bacc4abf1f63","created":1769782047530,"codec":"PNG","bitrate":0,"width":2560,"height":1440,"type":"image","fps":0,"duration":0,"size":5948730,"modified":1768732548622,"hasAudio":false,"timestamps":[],"path":"4K DLDSR Bal (K).png","name":"4K DLDSR Bal (K).png","base":"4K DLDSR Bal (K)","originalBase":"4K DLDSR Bal (K)","extension":"png","format":"PNG","x":0,"y":0,"z":100,"startTime":0,"thumbnails":[],"labelVisibility":{"codec":false,"bitrate":false,"dimensions":false,"format":false,"fps":false,"duration":false,"startTime":false},"muted":true,"visible":true,"shaderId":"","shaderInputs":[],"shaderSettings":{},"shaderSource":"","showShader":true,"src":"4K DLDSR Bal (K).png","mediaOverlay":"","frameImages":[],"showFrameImages":true,"infoTexts":[],"showInfoText":false},{"id":"6801c699999999953083dc79b8a5680234","created":1769782047531,"codec":"PNG","bitrate":0,"width":2560,"height":1440,"type":"image","fps":0,"duration":0,"size":6074293,"modified":1768732552697,"hasAudio":false,"timestamps":[],"path":"4K DLDSR Bal (M).png","name":"4K DLDSR Bal (M).png","base":"4K DLDSR Bal (M)","originalBase":"4K DLDSR Bal (M)","extension":"png","format":"PNG","x":0,"y":0,"z":100,"startTime":0,"thumbnails":[],"labelVisibility":{"codec":false,"bitrate":false,"dimensions":false,"format":false,"fps":false,"duration":false,"startTime":false},"muted":true,"visible":true,"shaderId":"","shaderInputs":[],"shaderSettings":{},"shaderSource":"","showShader":true,"src":"4K DLDSR Bal (M).png","mediaOverlay":"","frameImages":[],"showFrameImages":true,"infoTexts":[],"showInfoText":false},{"id":"6802639999999990793abc7d09fa1cfc25","created":1769782047531,"codec":"PNG","bitrate":0,"width":2560,"height":1440,"type":"image","fps":0,"duration":0,"size":5970404,"modified":1768732528687,"hasAudio":false,"timestamps":[],"path":"4K DLDSR Q (K).png","name":"4K DLDSR Q (K).png","base":"4K DLDSR Q (K)","originalBase":"4K DLDSR Q (K)","extension":"png","format":"PNG","x":0,"y":0,"z":100,"startTime":0,"thumbnails":[],"labelVisibility":{"codec":false,"bitrate":false,"dimensions":false,"format":false,"fps":false,"duration":false,"startTime":false},"muted":true,"visible":true,"shaderId":"","shaderInputs":[],"shaderSettings":{},"shaderSource":"","showShader":true,"src":"4K DLDSR Q (K).png","mediaOverlay":"","frameImages":[],"showFrameImages":true,"infoTexts":[],"showInfoText":false},{"id":"680311999999999536ee0233683196ba76","created":1769782047532,"codec":"PNG","bitrate":0,"width":2560,"height":1440,"type":"image","fps":0,"duration":0,"size":6083637,"modified":1768732538737,"hasAudio":false,"timestamps":[],"path":"4K DLDSR Q (M).png","name":"4K DLDSR Q (M).png","base":"4K DLDSR Q (M)","originalBase":"4K DLDSR Q (M)","extension":"png","format":"PNG","x":0,"y":0,"z":100,"startTime":0,"thumbnails":[],"labelVisibility":{"codec":false,"bitrate":false,"dimensions":false,"format":false,"fps":false,"duration":false,"startTime":false},"muted":true,"visible":true,"shaderId":"","shaderInputs":[],"shaderSettings":{},"shaderSource":"","showShader":true,"src":"4K DLDSR Q (M).png","mediaOverlay":"","frameImages":[],"showFrameImages":true,"infoTexts":[],"showInfoText":false},{"id":"6803c8000000000478403607da8ee179a7","created":1769782047533,"codec":"PNG","bitrate":0,"width":2560,"height":1440,"type":"image","fps":0,"duration":0,"size":5929164,"modified":1768732514647,"hasAudio":false,"timestamps":[],"path":"4K DLDSR TAA.png","name":"4K DLDSR TAA.png","base":"4K DLDSR TAA","originalBase":"4K DLDSR TAA","extension":"png","format":"PNG","x":0,"y":0,"z":100,"startTime":0,"thumbnails":[],"labelVisibility":{"codec":false,"bitrate":false,"dimensions":false,"format":false,"fps":false,"duration":false,"startTime":false},"muted":true,"visible":true,"shaderId":"","shaderInputs":[],"shaderSettings":{},"shaderSource":"","showShader":true,"src":"4K DLDSR TAA.png","mediaOverlay":"","frameImages":[],"showFrameImages":true,"infoTexts":[],"showInfoText":false},{"id":"6804e59093e3f123e117d18","created":1769782047533,"codec":"PNG","bitrate":0,"width":2560,"height":1440,"type":"image","fps":0,"duration":0,"size":6355232,"modified":1768732425675,"hasAudio":false,"timestamps":[],"path":"1440 DLAA (K).png","name":"1440 DLAA (K).png","base":"1440 DLAA (K)","originalBase":"1440 DLAA (K)","extension":"png","format":"PNG","x":0,"y":0,"z":100,"startTime":0,"thumbnails":[],"labelVisibility":{"codec":false,"bitrate":false,"dimensions":false,"format":false,"fps":false,"duration":false,"startTime":false},"muted":true,"visible":true,"shaderId":"","shaderInputs":[],"shaderSettings":{},"shaderSource":"","showShader":true,"src":"1440 DLAA (K).png","mediaOverlay":"","frameImages":[],"showFrameImages":true,"infoTexts":[],"showInfoText":false},{"id":"680541999999999537e7e2d0b8bc238db9","created":1769782047534,"codec":"PNG","bitrate":0,"width":2560,"height":1440,"type":"image","fps":0,"duration":0,"size":6636140,"modified":1768732433011,"hasAudio":false,"timestamps":[],"path":"1440 DLAA (M).png","name":"1440 DLAA (M).png","base":"1440 DLAA (M)","originalBase":"1440 DLAA (M)","extension":"png","format":"PNG","x":0,"y":0,"z":100,"startTime":0,"thumbnails":[],"labelVisibility":{"codec":false,"bitrate":false,"dimensions":false,"format":false,"fps":false,"duration":false,"startTime":false},"muted":true,"visible":true,"shaderId":"","shaderInputs":[],"shaderSettings":{},"shaderSource":"","showShader":true,"src":"1440 DLAA (M).png","mediaOverlay":"","frameImages":[],"showFrameImages":true,"infoTexts":[],"showInfoText":false},{"id":"68053699999999953108c9da279a1f74c10","created":1769782047535,"codec":"PNG","bitrate":0,"width":2560,"height":1440,"type":"image","fps":0,"duration":0,"size":6390760,"modified":1768732467570,"hasAudio":false,"timestamps":[],"path":"1440 DLSS Bal (K).png","name":"1440 DLSS Bal (K).png","base":"1440 DLSS Bal (K)","originalBase":"1440 DLSS Bal (K)","extension":"png","format":"PNG","x":0,"y":0,"z":100,"startTime":0,"thumbnails":[],"labelVisibility":{"codec":false,"bitrate":false,"dimensions":false,"format":false,"fps":false,"duration":false,"startTime":false},"muted":true,"visible":true,"shaderId":"","shaderInputs":[],"shaderSettings":{},"shaderSource":"","showShader":true,"src":"1440 DLSS Bal (K).png","mediaOverlay":"","frameImages":[],"showFrameImages":true,"infoTexts":[],"showInfoText":false},{"id":"680675c74a3a70fda554fb11","created":1769782047535,"codec":"PNG","bitrate":0,"width":2560,"height":1440,"type":"image","fps":0,"duration":0,"size":6547220,"modified":1768732472664,"hasAudio":false,"timestamps":[],"path":"1440 DLSS Bal (M).png","name":"1440 DLSS Bal (M).png","base":"1440 DLSS Bal (M)","originalBase":"1440 DLSS Bal (M)","extension":"png","format":"PNG","x":0,"y":0,"z":100,"startTime":0,"thumbnails":[],"labelVisibility":{"codec":false,"bitrate":false,"dimensions":false,"format":false,"fps":false,"duration":false,"startTime":false},"muted":true,"visible":true,"shaderId":"","shaderInputs":[],"shaderSettings":{},"shaderSource":"","showShader":true,"src":"1440 DLSS Bal (M).png","mediaOverlay":"","frameImages":[],"showFrameImages":true,"infoTexts":[],"showInfoText":false},{"id":"68076199999999953c31faddca0171a0612","created":1769782047536,"codec":"PNG","bitrate":0,"width":2560,"height":1440,"type":"image","fps":0,"duration":0,"size":6389884,"modified":1768732488683,"hasAudio":false,"timestamps":[],"path":"1440 DLSS Perf (K).png","name":"1440 DLSS Perf (K).png","base":"1440 DLSS Perf (K)","originalBase":"1440 DLSS Perf (K)","extension":"png","format":"PNG","x":0,"y":0,"z":100,"startTime":0,"thumbnails":[],"labelVisibility":{"codec":false,"bitrate":false,"dimensions":false,"format":false,"fps":false,"duration":false,"startTime":false},"muted":true,"visible":true,"shaderId":"","shaderInputs":[],"shaderSettings":{},"shaderSource":"","showShader":true,"src":"1440 DLSS Perf (K).png","mediaOverlay":"","frameImages":[],"showFrameImages":true,"infoTexts":[],"showInfoText":false},{"id":"680788000000000475eafbd94c64939cb13","created":1769782047537,"codec":"PNG","bitrate":0,"width":2560,"height":1440,"type":"image","fps":0,"duration":0,"size":6545888,"modified":1768732493712,"hasAudio":false,"timestamps":[],"path":"1440 DLSS Perf (M).png","name":"1440 DLSS Perf (M).png","base":"1440 DLSS Perf (M)","originalBase":"1440 DLSS Perf (M)","extension":"png","format":"PNG","x":0,"y":0,"z":100,"startTime":0,"thumbnails":[],"labelVisibility":{"codec":false,"bitrate":false,"dimensions":false,"format":false,"fps":false,"duration":false,"startTime":false},"muted":true,"visible":true,"shaderId":"","shaderInputs":[],"shaderSettings":{},"shaderSource":"","showShader":true,"src":"1440 DLSS Perf (M).png","mediaOverlay":"","frameImages":[],"showFrameImages":true,"infoTexts":[],"showInfoText":false},{"id":"6808056951345a7e00ed3c14","created":1769782047537,"codec":"PNG","bitrate":0,"width":2560,"height":1440,"type":"image","fps":0,"duration":0,"size":6389052,"modified":1768732447732,"hasAudio":false,"timestamps":[],"path":"1440 DLSS Q (K).png","name":"1440 DLSS Q (K).png","base":"1440 DLSS Q (K)","originalBase":"1440 DLSS Q (K)","extension":"png","format":"PNG","x":0,"y":0,"z":100,"startTime":0,"thumbnails":[],"labelVisibility":{"codec":false,"bitrate":false,"dimensions":false,"format":false,"fps":false,"duration":false,"startTime":false},"muted":true,"visible":true,"shaderId":"","shaderInputs":[],"shaderSettings":{},"shaderSource":"","showShader":true,"src":"1440 DLSS Q (K).png","mediaOverlay":"","frameImages":[],"showFrameImages":true,"infoTexts":[],"showInfoText":false},{"id":"680920999999998612668546e87bd72815","created":1769782047538,"codec":"PNG","bitrate":0,"width":2560,"height":1440,"type":"image","fps":0,"duration":0,"size":6542477,"modified":1768732451819,"hasAudio":false,"timestamps":[],"path":"1440 DLSS Q (M).png","name":"1440 DLSS Q (M).png","base":"1440 DLSS Q (M)","originalBase":"1440 DLSS Q (M)","extension":"png","format":"PNG","x":0,"y":0,"z":100,"startTime":0,"thumbnails":[],"labelVisibility":{"codec":false,"bitrate":false,"dimensions":false,"format":false,"fps":false,"duration":false,"startTime":false},"muted":true,"visible":true,"shaderId":"","shaderInputs":[],"shaderSettings":{},"shaderSource":"","showShader":true,"src":"1440 DLSS Q (M).png","mediaOverlay":"","frameImages":[],"showFrameImages":true,"infoTexts":[],"showInfoText":false},{"id":"6809959999999986fb0bf02d67e72dc516","created":1769782047539,"codec":"PNG","bitrate":0,"width":2560,"height":1440,"type":"image","fps":0,"duration":0,"size":6429821,"modified":1768732415627,"hasAudio":false,"timestamps":[],"path":"1440 TAA.png","name":"1440 TAA.png","base":"1440 TAA","originalBase":"1440 TAA","extension":"png","format":"PNG","x":0,"y":0,"z":100,"startTime":0,"thumbnails":[],"labelVisibility":{"codec":false,"bitrate":false,"dimensions":false,"format":false,"fps":false,"duration":false,"startTime":false},"muted":true,"visible":true,"shaderId":"","shaderInputs":[],"shaderSettings":{},"shaderSource":"","showShader":true,"src":"1440 TAA.png","mediaOverlay":"","frameImages":[],"showFrameImages":true,"infoTexts":[],"showInfoText":false}],"overlays":[]}]});})()</script></body></html>
